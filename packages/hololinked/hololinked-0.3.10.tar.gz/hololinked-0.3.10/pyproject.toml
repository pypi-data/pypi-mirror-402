[build-system]
requires = ["setuptools>=42", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
package-dir = {"hololinked" = "hololinked"}

[project]
name = "hololinked"
version = "0.3.10"
authors = [
    {name = "Vignesh Vaidyanathan", email = "info@hololinked.dev"},
]
description = "A ZMQ-based protocol-agnostic object oriented RPC toolkit primarily focussed for instrumentation control, data acquisition or IoT"
readme = "README.md"
requires-python = ">=3.11"
license = "Apache-2.0"
license-files = ["licenses/*", "license.txt"]
classifiers = [
    "Programming Language :: Python :: 3",
    "Operating System :: OS Independent",
    "Intended Audience :: Information Technology",
    "Intended Audience :: Science/Research",
    "Intended Audience :: Healthcare Industry",
    "Intended Audience :: Manufacturing",
    "Intended Audience :: Developers",
    "Intended Audience :: End Users/Desktop",
    "Intended Audience :: Education",
    "Topic :: Internet :: WWW/HTTP",
    "Topic :: Internet :: WWW/HTTP :: Browsers",
    "Topic :: Scientific/Engineering :: Human Machine Interfaces",
    "Topic :: System :: Hardware",
    "Development Status :: 4 - Beta"
]
keywords = ["data-acquisition", "zmq-rpc", "SCADA", "IoT", "Web of Things", "remote data logging"]
dependencies = [
    "msgspec>=0.18.6",
    "pyzmq>=25.1.0,<26.2",
    "pydantic>=2.8.0,<3.0.0",
    "tornado>=6.3.3",
    "jsonschema>=4.22.0,<5.0",
    "httpx>=0.28.1,<29.0",
    "sniffio>=1.3.1,<2.0",
    "aiomqtt>=2.4.0",
    "structlog>=25.5.0",
    # generic additional
    "ifaddr>=0.2.0,<0.3",
    "fastjsonschema==2.20.0",
    "serpent>=1.41,<2.0",
    # security
    "bcrypt==4.3.0",
    "argon2-cffi>=23.1.0",
    # DB
    "sqlalchemy>2.0.21",
    "sqlalchemy-utils>=0.41",
    "psycopg2-binary>=2.9.11",
    "pymongo>=4.15.2"
]

[project.urls]
Documentation = "https://docs.hololinked.dev"
Repository = "https://github.com/hololinked-dev/hololinked"

[dependency-groups]
dev = [
    "ipython==8.12.3",
    "jupyter>=1.1.1",
    "numpy>=2.0.0",
    "pandas==2.2.3",
    "pip>=25.2",
    "ruff>=0.12.10",
    "pre-commit>=4.5.0",
]
test = [
    "requests==2.32.3",
    "faker==37.5.0",
    "numpy>=2.0.0",
    "pytest>=8.0.0",
    "pytest-cov>=4.0.0",
    "pytest-order>=1.0.0",
    "pytest-asyncio>=1.3.0",
]
scanning = [
    "bandit>=1.9.1",
]   

[tool.pytest.ini_options]
minversion = "8.0"
addopts = "-ra --strict-markers --strict-config --ignore=lib64"
testpaths = ["tests"]
python_files = ["test_*.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
norecursedirs = ["tests/yet-to-be-integrated*"]
asyncio_mode = "auto"
markers = [
    "order: mark test to run in a specific order",
    "slow: marks tests as slow (deselect with '-m \"not slow\"')",
    "integration: marks tests as integration tests",
    "asyncio: mark test as asyncio to run with pytest-asyncio"
]
filterwarnings = [
    "error",
    "ignore::UserWarning",
    "ignore::DeprecationWarning",
    "ignore::pytest.PytestCollectionWarning"
]

[tool.ruff]
exclude = [
    "hololinked/core/properties.py",
    "hololinked/param"
]

[tool.ruff.lint]
extend-select = ["I"]

[tool.ruff.lint.isort]
lines-between-types = 1
lines-after-imports = 2

[tool.bandit]
exclude_dirs = [
    ".venv", 
    ".ruff_cache", 
    "__pycache__", 
    ".vscode", 
    ".github", 
    "doc", 
    "examples", 
    "licenses", 
    "tests"
]

