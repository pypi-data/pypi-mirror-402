import{h as f,w as n,x as S,y as o}from"./Yb_TZ_Rf.js";import{a as L}from"./BDOtEUpJ.js";import{u as b}from"./C3A6m4-m.js";const l=n({});function C(w){const{collection_id:e,kind:c}=w,{tags:i}=b(),d=n(!1),g=n(null),r=n(!1),u=()=>{f(r)||e&&(r.set(!0),L({path:{collection_id:e}}).then(t=>{if(t.error)throw new Error(JSON.stringify(t.error));t.data&&i.update(a=>({...a,[e]:t.data??[]}))}).catch(t=>{g.set(t)}).finally(()=>{r.set(!1)}))};!f(d)&&e&&(u(),d.set(!0));const h=S(i,t=>{const a=t[e]??[];return c?a.filter(y=>c.includes(y.kind)):a}),m=S(l,t=>t[e]??new Set),T=t=>{l.update(a=>{const s=a[e]??new Set;return s.has(t)?s.delete(t):s.add(t),{...a,[e]:new Set([...s])}})},p=()=>{l.update(t=>({...t,[e]:new Set}))};return{tags:o(h),loadTags:u,tagsSelected:o(m),tagSelectionToggle:T,clearTagsSelected:p,isLoading:o(r),error:g}}export{C as u};
