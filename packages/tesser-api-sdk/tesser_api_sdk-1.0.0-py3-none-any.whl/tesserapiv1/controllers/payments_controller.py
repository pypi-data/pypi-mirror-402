"""tesserapiv1.

This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
"""

# ruff: noqa: D410, E501, E101, D206
from apimatic_core.authentication.multiple.single_auth import (
    Single,
)
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter

from tesserapiv1.api_helper import APIHelper
from tesserapiv1.configuration import Server
from tesserapiv1.controllers.base_controller import (
    BaseController,
)
from tesserapiv1.exceptions.api_exception import (
    APIException,
)
from tesserapiv1.http.http_method_enum import (
    HttpMethodEnum,
)
from tesserapiv1.models.payment_list_response import (
    PaymentListResponse,
)
from tesserapiv1.models.payment_response import (
    PaymentResponse,
)


class PaymentsController(BaseController):
    """A Controller to access Endpoints in the tesserapiv1 API."""

    def __init__(self, config):
        """Initialize PaymentsController object."""
        super(PaymentsController, self).__init__(config)

    def get_payments(self,
                     authorization,
                     start_date=None,
                     end_date=None,
                     payment_type=None,
                     page=None,
                     limit=None):
        """Perform a GET request to /payments.

        Retrieve all payments for the authenticated user's organization.

        Args:
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            start_date (str, optional): Filter payments created on or after this ISO
                8601 date.
            end_date (str, optional): Filter payments created before this ISO 8601
                date.
            payment_type (PaymentType3Enum, optional): Filter payments by type
                ('withdrawal', 'deposit', 'onramp', 'offramp', 'payment', 'transfer').
            page (float, optional): Page number for pagination (1-based).
            limit (float, optional): Number of items per page.

        Returns:
            PaymentListResponse: Response from the API. Successfully retrieved team
                payments

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/payments")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .query_param(Parameter()
                .key("start_date")
                .value(start_date))
            .query_param(Parameter()
                .key("end_date")
                .value(end_date))
            .query_param(Parameter()
                .key("payment_type")
                .value(payment_type))
            .query_param(Parameter()
                .key("page")
                .value(page))
            .query_param(Parameter()
                .key("limit")
                .value(limit))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(PaymentListResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()

    def create_payment(self,
                       authorization,
                       body):
        """Perform a POST request to /payments.

        Create a payment. Returns the created payment details.

        Args:
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            body (CreatePaymentRequest): The request body parameter.

        Returns:
            PaymentResponse: Response from the API. Payment created successfully

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/payments")
            .http_method(HttpMethodEnum.POST)
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/json"))
            .body_param(Parameter()
                .value(body))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .body_serializer(APIHelper.json_serialize)
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(PaymentResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()

    def get_payment_by_id(self,
                          payment_id,
                          authorization):
        """Perform a GET request to /payments/{paymentId}.

        Retrieve a specific payment by ID.

        Args:
            payment_id (str): The request template parameter.
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.

        Returns:
            PaymentResponse: Response from the API. Successfully retrieved payment

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/payments/{paymentId}")
            .http_method(HttpMethodEnum.GET)
            .template_param(Parameter()
                .key("paymentId")
                .value(payment_id)
                .should_encode(True))
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(PaymentResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()

    def update_payment(self,
                       payment_id,
                       authorization,
                       body):
        """Perform a PATCH request to /payments/{paymentId}.

        Update a payment with accounts.

        Args:
            payment_id (str): The request template parameter.
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            body (UpdatePaymentRequest): The request body parameter.

        Returns:
            PaymentResponse: Response from the API. Payment updated successfully

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/payments/{paymentId}")
            .http_method(HttpMethodEnum.PATCH)
            .template_param(Parameter()
                .key("paymentId")
                .value(payment_id)
                .should_encode(True))
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/json"))
            .body_param(Parameter()
                .value(body))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .body_serializer(APIHelper.json_serialize)
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(PaymentResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()

    def review_payment(self,
                       payment_id,
                       authorization,
                       body):
        """Perform a POST request to /payments/{paymentId}/review.

        Manually review and approve or reject a payment requiring risk review.

        Args:
            payment_id (uuid|str): Unique identifier of the payment to review
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            body (ReviewPaymentRequest): The request body parameter.

        Returns:
            PaymentResponse: Response from the API. Payment review completed
                successfully

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/payments/{paymentId}/review")
            .http_method(HttpMethodEnum.POST)
            .template_param(Parameter()
                .key("paymentId")
                .value(payment_id)
                .should_encode(True))
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/json"))
            .body_param(Parameter()
                .value(body))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .body_serializer(APIHelper.json_serialize)
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(PaymentResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()
