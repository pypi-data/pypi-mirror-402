"""tesserapiv1.

This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
"""

# ruff: noqa: D410, E501, E101, D206
from apimatic_core.authentication.multiple.single_auth import (
    Single,
)
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter

from tesserapiv1.api_helper import APIHelper
from tesserapiv1.configuration import Server
from tesserapiv1.controllers.base_controller import (
    BaseController,
)
from tesserapiv1.exceptions.api_exception import (
    APIException,
)
from tesserapiv1.http.http_method_enum import (
    HttpMethodEnum,
)
from tesserapiv1.models.network import Network


class NetworksController(BaseController):
    """A Controller to access Endpoints in the tesserapiv1 API."""

    def __init__(self, config):
        """Initialize NetworksController object."""
        super(NetworksController, self).__init__(config)

    def get_networks(self,
                     authorization):
        """Perform a GET request to /networks.

        Retrieve list of all supported blockchain networks. Returns an array with
        network key and display name.

        Args:
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.

        Returns:
            List[Network]: Response from the API. Successfully retrieved available
                networks

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/networks")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(Network.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()
