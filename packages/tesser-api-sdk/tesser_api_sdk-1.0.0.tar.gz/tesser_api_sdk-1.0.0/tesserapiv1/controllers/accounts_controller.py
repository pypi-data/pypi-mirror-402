"""tesserapiv1.

This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
"""

# ruff: noqa: D410, E501, E101, D206
from apimatic_core.authentication.multiple.single_auth import (
    Single,
)
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter

from tesserapiv1.api_helper import APIHelper
from tesserapiv1.configuration import Server
from tesserapiv1.controllers.base_controller import (
    BaseController,
)
from tesserapiv1.exceptions.api_exception import (
    APIException,
)
from tesserapiv1.http.http_method_enum import (
    HttpMethodEnum,
)
from tesserapiv1.models.account_list_response import (
    AccountListResponse,
)
from tesserapiv1.models.account_response import (
    AccountResponse,
)
from tesserapiv1.models.create_bank_response import (
    CreateBankResponse,
)
from tesserapiv1.models.create_wallet_response import (
    CreateWalletResponse,
)
from tesserapiv1.models.update_account_response import (
    UpdateAccountResponse,
)


class AccountsController(BaseController):
    """A Controller to access Endpoints in the tesserapiv1 API."""

    def __init__(self, config):
        """Initialize AccountsController object."""
        super(AccountsController, self).__init__(config)

    def find_all(self,
                 authorization,
                 mtype=None,
                 tenant_id=None,
                 counterparty_id=None,
                 include_sensitive=None):
        """Perform a GET request to /accounts.

        Retrieve all accounts (both bank and wallet accounts) for your workspace.

        Args:
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            mtype (Type4Enum, optional): Filter by account type
            tenant_id (str, optional): Filter by tenant ID. At most one of tenant_id
                or counterparty_id may be provided.
            counterparty_id (str, optional): Filter by counterparty ID. At most one
                of tenant_id or counterparty_id may be provided.
            include_sensitive (bool, optional): If true, includes sensitive fields
                like bank_account_number.

        Returns:
            AccountListResponse: Response from the API. Accounts retrieved
                successfully

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/accounts")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .query_param(Parameter()
                .key("type")
                .value(mtype))
            .query_param(Parameter()
                .key("tenant_id")
                .value(tenant_id))
            .query_param(Parameter()
                .key("counterparty_id")
                .value(counterparty_id))
            .query_param(Parameter()
                .key("include_sensitive")
                .value(include_sensitive))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(AccountListResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()

    def create_bank(self,
                    authorization,
                    body):
        """Perform a POST request to /accounts/banks.

        Create a new fiat bank account.

        Args:
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            body (CreateBankRequest): Bank account details

        Returns:
            CreateBankResponse: Response from the API. Bank account created
                successfully

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/accounts/banks")
            .http_method(HttpMethodEnum.POST)
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/json"))
            .body_param(Parameter()
                .value(body))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .body_serializer(APIHelper.json_serialize)
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(CreateBankResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()

    def create_wallet(self,
                      authorization,
                      body):
        """Perform a POST request to /accounts/wallets.

        Create a new stablecoin wallet account.

        Args:
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            body (CreateWalletRequest): Wallet account details

        Returns:
            CreateWalletResponse: Response from the API. Wallet account created
                successfully

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/accounts/wallets")
            .http_method(HttpMethodEnum.POST)
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/json"))
            .body_param(Parameter()
                .value(body))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .body_serializer(APIHelper.json_serialize)
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(CreateWalletResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()

    def find_one_2(self,
                   id,
                   authorization,
                   include_sensitive=None):
        """Perform a GET request to /accounts/{id}.

        Retrieve a specific account (wallet or bank) by its unique identifier

        Args:
            id (str): Account ID (UUID)
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            include_sensitive (bool, optional): If true, includes sensitive fields
                like bank_account_number.

        Returns:
            AccountResponse: Response from the API. Account retrieved successfully

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/accounts/{id}")
            .http_method(HttpMethodEnum.GET)
            .template_param(Parameter()
                .key("id")
                .value(id)
                .should_encode(True))
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .query_param(Parameter()
                .key("include_sensitive")
                .value(include_sensitive))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(AccountResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()

    def update(self,
               id,
               authorization,
               body):
        """Perform a PATCH request to /accounts/{id}.

        Update an existing account's information.

        Args:
            id (str): Account ID (UUID)
            authorization (str): Bearer token for authentication.   To obtain a
                token, make a request to Auth0:  ```bash curl --request POST \
                --url https://dev-awqy75wdabpsnsvu.us.auth0.com/oauth/token \
                --header 'content-type: application/json' \   --data '{
                "client_id":"YOUR_CLIENT_ID",
                "client_secret":"YOUR_CLIENT_SECRET",
                "audience":"https://sandbox.tesserx.co",
                "grant_type":"client_credentials"   }' ```  The response will contain
                an `access_token` field which should be used as the Bearer token.
            body (UpdateAccountRequest): The request body parameter.

        Returns:
            UpdateAccountResponse: Response from the API. Account updated successfully

        Raises:
            APIException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/accounts/{id}")
            .http_method(HttpMethodEnum.PATCH)
            .template_param(Parameter()
                .key("id")
                .value(id)
                .should_encode(True))
            .header_param(Parameter()
                .key("Authorization")
                .value(authorization))
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/json"))
            .body_param(Parameter()
                .value(body))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .body_serializer(APIHelper.json_serialize)
            .auth(Single("bearer")),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(UpdateAccountResponse.from_dictionary)
            .local_error("400", "Details coming soon", APIException),
        ).execute()
