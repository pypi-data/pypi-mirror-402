import"./DsnmJJEf.js";import{o as mt}from"./jKWSmWmB.js";import{b as pt,p as xt,q,k as W,i as O,v as G,j as ct,g as m,l as wt,m as ft,h as B,a as yt,f as Z,s as lt,u as dt,c as J,r as K}from"./DAlzfk79.js";import{i as H}from"./CuNXTB5A.js";import{f as gt,u as bt,e as zt,i as St}from"./B5O290y9.js";import{a as ut,c as ht}from"./D9U3jPEw.js";import{b as Pt}from"./gxe5upM2.js";import{p as D}from"./CvLwV7-q.js";import{o as Tt,S as kt}from"./CrYqV5xP.js";var Q={exports:{}},Ot=Q.exports,vt;function Dt(){return vt||(vt=1,(function(x,h){(function(l,p){x.exports=p()})(Ot,(function(){var l="rgba(100, 100, 100, 0.7)",p="rgba(255, 255, 255, 0.8)",j="round",d=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},g=(function(){function n(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,a,e){return a&&n(t.prototype,a),e&&n(t,e),t}})(),R=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},c=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},f=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},v=(function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p;return d(this,n),this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._canvas.width=t,this._canvas.height=t,this._context.fillStyle=a,this._context.fillRect(0,0,this._canvas.width,this._canvas.height),this._size=t,this._patternColor=e,this}return g(n,[{key:"setStrokeProps",value:function(){this._context.strokeStyle=this._patternColor,this._context.lineWidth=this._size/10,this._context.lineJoin=j,this._context.lineCap=j}},{key:"setFillProps",value:function(){this._context.fillStyle=this._patternColor}}]),n})(),z=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawPlus(),this.drawPlus(e,e),this._context.stroke(),this._canvas}},{key:"drawPlus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,0+r),this._context.lineTo(i+e,s+r),this._context.moveTo(0+e,i+r),this._context.lineTo(s+e,i+r),this._context.closePath()}}]),t})(v),L=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawCross(),this.drawCross(e,e),this._context.stroke(),this._canvas}},{key:"drawCross",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=2;this._context.moveTo(e+i,r+i),this._context.lineTo(s-i+e,s-i+r),this._context.moveTo(e+i,s-i+r),this._context.lineTo(s-i+e,r+i),this._context.closePath()}}]),t})(v),C=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDash(),this.drawDash(e,e),this._context.stroke(),this._canvas}},{key:"drawDash",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=2;this._context.moveTo(e+i,r+i),this._context.lineTo(s-i+e,s-i+r),this._context.closePath()}}]),t})(v),tt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;this._context.beginPath(),this.setStrokeProps();var r=new L;r.drawCross.call(this);var o=new C;return o.drawDash.call(this,e,e),this._context.stroke(),this._canvas}}]),t})(v),k=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawDot(),this.drawDot(e,e),this._context.fill(),this._canvas}},{key:"drawDot",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._size/10,s=this._size,i=s/4,N=i+e,V=i+r;this._context.moveTo(N+i,V),this._context.arc(N,V,o,0,2*Math.PI),this._context.closePath()}}]),t})(v),et=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;this._context.beginPath(),this.setStrokeProps();var r=new C;r.drawDash.call(this,e,e),this._context.closePath(),this._context.stroke(),this.setFillProps();var o=new k;return o.drawDot.call(this),this._context.fill(),this._canvas}}]),t})(v),nt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2,r=this._size/5;return this._context.beginPath(),this.setFillProps(),this.drawDot(0,0,r),this.drawDot(e,e,r),this._context.fill(),this._canvas}}]),t})(k),A=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2,r=this._size/5;return this._context.beginPath(),this.setStrokeProps(),this.drawDot(0,0,r),this.drawDot(e,e,r),this._context.stroke(),this._canvas}}]),t})(k),F=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawLine(),this.drawLine(e,e),this._context.stroke(),this._canvas}},{key:"drawLine",value:function(){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=this._size,o=r/4;this._context.moveTo(0,o+e),this._context.lineTo(this._size,o+e),this._context.closePath()}}]),t})(v),rt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),F.prototype.drawTile.call(this),this._canvas}}]),t})(F),at=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.beginPath(),this.setStrokeProps(),this.drawWeave(0,0),this._context.stroke(),this._canvas}},{key:"drawWeave",value:function(e,r){var o=this._size,s=o/2;this._context.moveTo(e+1,r+1),this._context.lineTo(s-1,s-1),this._context.moveTo(s+1,o-1),this._context.lineTo(o-1,s+1),this._context.closePath()}}]),t})(v),I=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.beginPath(),this.setStrokeProps(),this.drawZigzag(),this.drawZigzag(this._size/2),this._context.stroke(),this._canvas}},{key:"drawZigzag",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=this._size,o=r/4,s=r/2,i=r/10;this._context.moveTo(0,i+e),this._context.lineTo(o,s-i+e),this._context.lineTo(s,i+e),this._context.lineTo(r-o,s-i+e),this._context.lineTo(r,i+e)}}]),t})(v),u=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),I.prototype.drawTile.call(this),this._canvas}}]),t})(I),w=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDiagonalLine(),this.drawDiagonalLine(e,e),this._context.stroke(),this._canvas}},{key:"drawDiagonalLine",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=1;this._context.moveTo(s-i-e,i*-1+r),this._context.lineTo(o+1-e,s+1+r),this._context.closePath()}}]),t})(v),S=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),w.prototype.drawTile.call(this),this._canvas}}]),t})(w),it=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawSquare(),this.drawSquare(e,e),this._context.fill(),this._canvas}},{key:"drawSquare",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/20;this._context.fillRect(e+i,r+i,s-i*2,s-i*2),this._context.closePath()}}]),t})(v),st=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawBox(),this.drawBox(e,e),this._context.stroke(),this._canvas}},{key:"drawBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/20;this._context.strokeRect(e+i,r+i,s-i*4,s-i*4),this._context.closePath()}}]),t})(v),T=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawTriangle(),this.drawTriangle(e,e),this._context.fill(),this._canvas}},{key:"drawTriangle",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,r),this._context.lineTo(s+e,s+r),this._context.lineTo(e,s+r),this._context.closePath()}}]),t})(v),E=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size;return this._context.translate(e,e),this._context.rotate(180*Math.PI/180),T.prototype.drawTile.call(this),this._canvas}}]),t})(T),_=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawDiamond(),this.drawDiamond(e,e),this._context.fill(),this._canvas}},{key:"drawDiamond",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,r),this._context.lineTo(s+e,i+r),this._context.lineTo(i+e,s+r),this._context.lineTo(e,i+r),this._context.closePath()}}]),t})(v),Y=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDiamond(),this.drawDiamond(e,e),this._context.stroke(),this._canvas}},{key:"drawDiamond",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2-1,i=o/4;this._context.moveTo(i+e,r+1),this._context.lineTo(s+e,i+r),this._context.lineTo(i+e,s+r),this._context.lineTo(e+1,i+r),this._context.closePath()}}]),t})(_),y={plus:z,cross:L,dash:C,"cross-dash":tt,dot:k,"dot-dash":et,disc:nt,ring:A,line:F,"line-vertical":rt,weave:at,zigzag:I,"zigzag-vertical":u,diagonal:w,"diagonal-right-left":S,square:it,box:st,triangle:T,"triangle-inverted":E,diamond:_,"diamond-box":Y},ot={circle:y.disc,"triangle-vertical":y["triangle-inverted"],"line-horizontal":y.line,"line-diagonal-lr":y.diagonal,"line-diagonal-rl":y["diagonal-right-left"],"zigzag-horizontal":y.zigzag,"diamond-outline":y["diamond-box"]},U=[];function X(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=Object.keys(y);n.forEach(function(e){t.splice(t.indexOf(e),1)});var a=Math.floor(Math.random()*t.length);return t[a]}R(U,y,ot);function P(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"square",t=arguments[1],a=arguments[2],e=arguments[3],r=document.createElement("canvas"),o=r.getContext("2d"),s=e*2,i=U[n],N=new i(e,t,a),V=o.createPattern(N.drawTile(),"repeat");return r.width=s,r.height=s,V.shapeType=n,V}function b(n){var t=void 0,a=void 0;return n.map(function(e,r,o){var s=void 0;return r===0?(s=X(),a=s,t=a):r===o.length-1?s=X([a,t]):(s=X([a]),a=s),P(s,e)})}var M={draw:P,generate:b};return M}))})(Q)),Q.exports}var jt=Dt();function Lt(x,h,l,p){h().push(null),m(l).push(""),m(p).push("")}var Ct=Z('<div><strong></strong> <button class="text-red-500 hover:text-red-600"><i class="bi bi-trash3 me-1"></i> Remove solution</button></div>'),qt=Z("<div><!></div>"),Rt=Z("<div><!> <!></div>"),Ft=Z('<div class="mt-4"><button class="border-2 rounded p-2 w-full text-blue-500 hover:bg-gray-200 hover:dark:bg-gray-700"><i class="bi bi-plus-lg me-1"></i> Add solution to compare</button></div>'),Et=Z("<!> <!>",1);function Ut(x,h){xt(h,!0);let l=D(h,"solutions",31,()=>q([])),p=D(h,"loading",15,!1),j=D(h,"years",31,()=>q([])),d=D(h,"nodes",31,()=>q([]));D(h,"carriers",27,()=>q([]));let g=D(h,"disabled",3,!1),R=D(h,"urlParamSolutions",3,"solutions"),c=D(h,"urlParamScenarios",3,"scenarios"),f=W(""),v=W(q(l().map(()=>""))),z=W(q(l().map(()=>""))),L=W(!1),C=q([]),tt=dt(()=>m(f)==""?!1:C.some(u=>u?.moreSolutionsExist?u.moreSolutionsExist():!0)),k=W(!1);mt(async()=>{if(R()==null||c()==null)return;const u=gt(R()),w=gt(c());if(u.length==0||u.length!=w.length){O(k,!0);return}O(f,u[0].split(".")[0],!0),O(v,u.map(S=>S.split(".")[1]||""),!0),O(z,w,!0),l(u.map(()=>null)),O(L,!0),A(),O(k,!0)}),G(()=>{l().map(u=>u==null?null:`${u.solution_name}.${u.scenario_name}`),ct().then(()=>{R()==null||c()==null||l().length==0||bt({[R()]:l().filter(u=>u!=null).map(u=>u.solution_name).join("~"),[c()]:l().filter(u=>u!=null).map(u=>u.scenario_name).join("~")})})}),G(()=>{l().length>1&&l()[0]===null&&!m(L)&&ct().then(()=>{l().splice(1),m(v).splice(1),m(z).splice(1)})}),G(()=>{m(L)&&l()[0]!==null&&O(L,!1)}),G(()=>{l().length>0&&l()[0]!==null&&(j(Tt(l()[0].detail)),d(l()[0].detail.system.set_nodes))});function et(u){return l().map((w,S)=>S===u||w==null?null:[m(v)[S],m(z)[S]]).filter(w=>w!=null)}function nt(u){l().splice(u,1),m(v).splice(u,1),m(z).splice(u,1)}function A(){h.onSelected?.(l())}var F=wt(),rt=ft(F);{var at=u=>{},I=u=>{var w=Et(),S=ft(w);zt(S,17,l,St,(T,E,_)=>{var Y=Rt();ut(Y,1,ht([_>0&&"mb-2 mt-4"]));var y=J(Y);{var ot=P=>{var b=Ct();ut(b,1,ht(["flex justify-between border-b","border border-gray-300 dark:border-gray-600 rounded-t bg-gray-200 dark:bg-gray-900","px-2 py-2"]));var M=J(b);M.textContent=`Solution ${_+1}`;var n=lt(M,2);n.__click=()=>nt(_),K(b),B(P,b)};H(y,P=>{_>0&&P(ot)})}var U=lt(y,2);{var X=P=>{var b=qt();ut(b,1,ht([_>0&&"border border-t-0 border-gray-300 dark:border-gray-600 rounded-b p-2"]));var M=J(b);{let n=dt(()=>et(_));Pt(kt(M,{get excludeSolutions(){return m(n)},solutionSelected:A,get disabled(){return g()},withoutSolution:_>0,urlParamSolution:null,urlParamScenario:null,get selected_solution(){return l()[_]},set selected_solution(t){l(l()[_]=t,!0)},get activeFirstLevel(){return m(f)},set activeFirstLevel(t){O(f,t,!0)},get activeSecondLevel(){return m(v)[_]},set activeSecondLevel(t){m(v)[_]=t},get activeScenario(){return m(z)[_]},set activeScenario(t){m(z)[_]=t},get loading(){return p()},set loading(t){p(t)}}),(t,a)=>C[a]=t,t=>C?.[t],()=>[_])}K(b),B(P,b)};H(U,P=>{m(v)[_]!==void 0&&m(z)[_]!==void 0&&P(X)})}K(Y),B(T,Y)});var it=lt(S,2);{var st=T=>{var E=Ft(),_=J(E);_.__click=[Lt,l,v,z],K(E),B(T,E)};H(it,T=>{m(tt)&&!l().includes(null)&&T(st)})}B(u,w)};H(rt,u=>{m(k)?u(I,!1):u(at)})}B(x,F),yt()}pt(["click"]);function Nt(x){const h=[],l=new Set;return x.data.datasets.forEach((p,j)=>{l.has(p.label||"")||(l.add(p.label||""),h.push({text:p.label||"",fontColor:x.options.color,fillStyle:p.backgroundColor||"black",strokeStyle:p.borderColor||"black",lineWidth:p.borderWidth||0,hidden:!x.isDatasetVisible(j),datasetIndex:j}))}),h}function Gt(x,h){h.data.datasets.forEach((l,p)=>{l.label===x.text&&(h.setDatasetVisibility(p,!h.isDatasetVisible(p)),h.update())})}function Jt(x,h){let l=x.split(".").pop()||x;return h!="none"&&(l=`${l} (${h})`),l}const _t=["diagonal","diagonal-right-left","dot","diamond","dot-dash","zigzag","zigzag-vertical","line","line-vertical","plus","cross","dash","cross-dash","disc","ring","weave","square","box","triangle","triangle-inverted","diamond-box"];let $=0;function Kt(){$=0}function Ht(){const x=_t[$];return $=($+1)%_t.length,x}function Qt(x,h){return{text:x,fillStyle:h!==void 0?jt.draw(h,"#aaa"):"#aaa"}}export{Ut as M,Nt as a,Qt as c,Jt as g,Ht as n,Gt as o,jt as p,Kt as r};
