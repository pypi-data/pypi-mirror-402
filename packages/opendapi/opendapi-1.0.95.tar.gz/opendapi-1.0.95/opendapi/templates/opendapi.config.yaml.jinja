# This file was generated by the OpenDAPI (https://woven.dev)
# Please add, remove and update the integrations and their overrides as needed.
# For more information on the OpenDAPI configuration schema, please visit:
# https://docs.woven.dev

schema: https://opendapi.org/spec/0-0-3/opendapi.config.json

organization:
  name: {{ org_name }}
  email_domain: {{ org_email_domain }}

repository:
  urn: {{ repo_urn | default('local:' ~ org_name_snakecase ~ '/' ~ repo_name) }}
  mainline_branch: {{ mainline_branch_name }}
  integration_mode: observability

dapis:
  runtimes:
    DEFAULT:
      integrations:
        {%- for integration in integrations %}
        - type: {{ integration }}
          projects:
            # Automatically detect and include all projects with {{ integration }} integration
            include_all: true

            {%- if show_include_projects is not defined or show_include_projects %}
            # # Include or exclude specific projects (relative to repository root)
            # # using grammar [exclude|!]? [prefix|regex|strict]? value
            # include_projects:
            #   - path/to/my_chosen_project
            #   - prefix:my_admin_project/apis/service
            #   - exclude:prefix:my_staging_project
            #   - regex:^my_project_.*$
            {%- endif %}

            # # Artifact path relative to the project path
            # # (e.g. db/schema.rb for activerecord, schema.prisma for prisma, etc.)
            # # For example, in activerecord, you can point to the schema.rb file as follows
            # #   path/to/project/db/schema.rb
            # #   path/to/project/db/structure.sql
            # #
            {%- if artifact_path %}
            artifact_path: {{ artifact_path }}
            {%- else %}
            # artifact_path: path/to/project/artifact/file.ext
            {%- endif %}

            {%- if dialect %}

            # # Dialect of the database to use for this integration and this specific project
            # # (e.g. mysql, postgres, sqlite)
            dialect: {{ dialect }}
            {%- endif %}

            {%- if show_include_models is not defined or show_include_models %}

            # # Include or exclude specific models by model name or model file path
            # # using grammar [exclude|!]? [prefix|regex|strict]? [name|path]? value
            # include_models:
            #   - regex:name:^my_dev_model.*$
            #   - path:my_admin_project/models/my_model.rb
            #   - exclude:path:my_staging_project/models/my_model.rb
            {%- endif %}


            {%- if show_overrides is not defined or show_overrides %}

            # # Project specific overrides
            # overrides:
            #   - project_path: path/to/project
            #
            #     # Artifact path relative to the project path
            #     # (e.g. schema.rb for activerecord, schema.prisma for prisma, etc.)
            #     #
            #     # artifact_path: path/to/project/artifact/file.ext
            #
            {%- if show_include_models is not defined or show_include_models %}
            #     # Include or exclude specific models by model name or model file path (relative to the project path)
            #     # using grammar [exclude|!]? [prefix|regex|strict]? [name|path]? value
            #     include_models:
            #       - regex:name:^my_dev_model.*$
            #       - path:my_admin_project/models/my_model.rb
            #       - exclude:path:my_staging_project/models/my_model.rb
            {%- endif %}
            {%- endif %}

        {%- endfor %}
