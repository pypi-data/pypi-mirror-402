{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/airbytehq/airbyte-connector-models/main/models/metadata/v0/ConnectorRegistryV0.json",
  "title": "ConnectorRegistryV0",
  "description": "describes the collection of connectors retrieved from a registry",
  "type": "object",
  "required": [
    "destinations",
    "sources"
  ],
  "properties": {
    "destinations": {
      "type": "array",
      "items": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "$id": "https://github.com/airbytehq/airbyte-platform/blob/main/airbyte-config/config-models/src/main/resources/types/ConnectorRegistryDestinationDefinition.yaml",
        "title": "ConnectorRegistryDestinationDefinition",
        "description": "describes a destination",
        "type": "object",
        "required": [
          "destinationDefinitionId",
          "name",
          "dockerRepository",
          "dockerImageTag",
          "documentationUrl",
          "spec"
        ],
        "additionalProperties": true,
        "properties": {
          "destinationDefinitionId": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "dockerRepository": {
            "type": "string"
          },
          "dockerImageTag": {
            "type": "string"
          },
          "documentationUrl": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "iconUrl": {
            "type": "string"
          },
          "spec": {
            "type": "object"
          },
          "tombstone": {
            "description": "if false, the configuration is active. if true, then this configuration is permanently off.",
            "type": "boolean",
            "default": false
          },
          "public": {
            "description": "true if this connector definition is available to all workspaces",
            "type": "boolean",
            "default": false
          },
          "custom": {
            "description": "whether this is a custom connector definition",
            "type": "boolean",
            "default": false
          },
          "releaseStage": {
            "$ref": "#/properties/sources/items/properties/releaseStage"
          },
          "supportLevel": {
            "$ref": "#/properties/sources/items/properties/supportLevel"
          },
          "releaseDate": {
            "description": "The date when this connector was first released, in yyyy-mm-dd format.",
            "type": "string",
            "format": "date"
          },
          "tags": {
            "type": "array",
            "description": "An array of tags that describe the connector. E.g: language:python, keyword:rds, etc.",
            "items": {
              "type": "string"
            }
          },
          "resourceRequirements": {
            "$ref": "#/properties/sources/items/properties/resourceRequirements"
          },
          "protocolVersion": {
            "type": "string",
            "description": "the Airbyte Protocol version supported by the connector"
          },
          "normalizationConfig": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/NormalizationDestinationDefinitionConfig.yaml",
            "title": "NormalizationDestinationDefinitionConfig",
            "description": "describes a normalization config for destination definition",
            "type": "object",
            "required": [
              "normalizationRepository",
              "normalizationTag",
              "normalizationIntegrationType"
            ],
            "additionalProperties": true,
            "properties": {
              "normalizationRepository": {
                "type": "string",
                "description": "a field indicating the name of the repository to be used for normalization. If the value of the flag is NULL - normalization is not used."
              },
              "normalizationTag": {
                "type": "string",
                "description": "a field indicating the tag of the docker repository to be used for normalization."
              },
              "normalizationIntegrationType": {
                "type": "string",
                "description": "a field indicating the type of integration dialect to use for normalization."
              }
            }
          },
          "supportsDbt": {
            "type": "boolean",
            "description": "an optional flag indicating whether DBT is used in the normalization. If the flag value is NULL - DBT is not used."
          },
          "allowedHosts": {
            "$ref": "#/properties/sources/items/properties/allowedHosts"
          },
          "releases": {
            "$ref": "#/properties/sources/items/properties/releases"
          },
          "ab_internal": {
            "$ref": "#/properties/sources/items/properties/ab_internal"
          },
          "supportsRefreshes": {
            "type": "boolean",
            "default": false
          },
          "supportsFileTransfer": {
            "type": "boolean",
            "default": false
          },
          "supportsDataActivation": {
            "type": "boolean",
            "default": false
          },
          "generated": {
            "$ref": "#/properties/sources/items/properties/generated"
          },
          "packageInfo": {
            "$ref": "#/properties/sources/items/properties/packageInfo"
          },
          "language": {
            "type": "string",
            "description": "The language the connector is written in"
          }
        }
      }
    },
    "sources": {
      "type": "array",
      "items": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "$id": "https://github.com/airbytehq/airbyte-platform/blob/main/airbyte-config/config-models/src/main/resources/types/ConnectorRegistrySourceDefinition.yaml",
        "title": "ConnectorRegistrySourceDefinition",
        "description": "describes a source",
        "type": "object",
        "required": [
          "sourceDefinitionId",
          "name",
          "dockerRepository",
          "dockerImageTag",
          "documentationUrl",
          "spec"
        ],
        "additionalProperties": true,
        "properties": {
          "sourceDefinitionId": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "dockerRepository": {
            "type": "string"
          },
          "dockerImageTag": {
            "type": "string"
          },
          "documentationUrl": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "iconUrl": {
            "type": "string"
          },
          "sourceType": {
            "type": "string",
            "enum": [
              "api",
              "file",
              "database",
              "custom"
            ]
          },
          "spec": {
            "type": "object"
          },
          "tombstone": {
            "description": "if false, the configuration is active. if true, then this configuration is permanently off.",
            "type": "boolean",
            "default": false
          },
          "public": {
            "description": "true if this connector definition is available to all workspaces",
            "type": "boolean",
            "default": false
          },
          "custom": {
            "description": "whether this is a custom connector definition",
            "type": "boolean",
            "default": false
          },
          "releaseStage": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte-platform/blob/main/airbyte-config/config-models/src/main/resources/types/ReleaseStage.yaml",
            "title": "ReleaseStage",
            "description": "enum that describes a connector's release stage",
            "type": "string",
            "enum": [
              "alpha",
              "beta",
              "generally_available",
              "custom"
            ]
          },
          "supportLevel": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors_ci/metadata_service/lib/models/src/SupportLevel.yaml",
            "title": "SupportLevel",
            "description": "enum that describes a connector's release stage",
            "type": "string",
            "enum": [
              "community",
              "certified",
              "archived"
            ]
          },
          "releaseDate": {
            "description": "The date when this connector was first released, in yyyy-mm-dd format.",
            "type": "string",
            "format": "date"
          },
          "resourceRequirements": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/ActorDefinitionResourceRequirements.yaml",
            "title": "ActorDefinitionResourceRequirements",
            "description": "actor definition specific resource requirements",
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "default": {
                "description": "if set, these are the requirements that should be set for ALL jobs run for this actor definition.",
                "$ref": "#/properties/sources/items/properties/resourceRequirements/definitions/JobTypeResourceLimit/properties/resourceRequirements"
              },
              "jobSpecific": {
                "type": "array",
                "items": {
                  "$ref": "#/properties/sources/items/properties/resourceRequirements/definitions/JobTypeResourceLimit"
                }
              }
            },
            "definitions": {
              "JobTypeResourceLimit": {
                "description": "sets resource requirements for a specific job type for an actor definition. these values override the default, if both are set.",
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "jobType",
                  "resourceRequirements"
                ],
                "properties": {
                  "jobType": {
                    "$schema": "http://json-schema.org/draft-07/schema#",
                    "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/JobType.yaml",
                    "title": "JobType",
                    "description": "enum that describes the different types of jobs that the platform runs.",
                    "type": "string",
                    "enum": [
                      "get_spec",
                      "check_connection",
                      "discover_schema",
                      "sync",
                      "reset_connection",
                      "connection_updater",
                      "replicate"
                    ]
                  },
                  "resourceRequirements": {
                    "$schema": "http://json-schema.org/draft-07/schema#",
                    "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/ResourceRequirements.yaml",
                    "title": "ResourceRequirements",
                    "description": "generic configuration for pod source requirements",
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "cpu_request": {
                        "type": "string"
                      },
                      "cpu_limit": {
                        "type": "string"
                      },
                      "memory_request": {
                        "type": "string"
                      },
                      "memory_limit": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "protocolVersion": {
            "type": "string",
            "description": "the Airbyte Protocol version supported by the connector"
          },
          "allowedHosts": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/AllowedHosts.yaml",
            "title": "AllowedHosts",
            "description": "A connector's allowed hosts.  If present, the platform will limit communication to only hosts which are listed in `AllowedHosts.hosts`.",
            "type": "object",
            "additionalProperties": true,
            "properties": {
              "hosts": {
                "type": "array",
                "description": "An array of hosts that this connector can connect to.  AllowedHosts not being present for the source or destination means that access to all hosts is allowed.  An empty list here means that no network access is granted.",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "suggestedStreams": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/SuggestedStreams.yaml",
            "title": "SuggestedStreams",
            "description": "A source's suggested streams.  These will be suggested by default for new connections using this source.  Otherwise, all streams will be selected.  This is useful for when your source has a lot of streams, but the average user will only want a subset of them synced.",
            "type": "object",
            "additionalProperties": true,
            "properties": {
              "streams": {
                "type": "array",
                "description": "An array of streams that this connector suggests the average user will want.  SuggestedStreams not being present for the source means that all streams are suggested.  An empty list here means that no streams are suggested.",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "maxSecondsBetweenMessages": {
            "description": "Number of seconds allowed between 2 airbyte protocol messages. The source will timeout if this delay is reach",
            "type": "integer"
          },
          "erdUrl": {
            "type": "string",
            "description": "The URL where you can visualize the ERD"
          },
          "releases": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/ConnectorRegistryReleases.yaml",
            "title": "ConnectorRegistryReleases",
            "description": "Contains information about different types of releases for a connector.",
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "releaseCandidates": {
                "$ref": "#/properties/sources/items/properties/releases/definitions/ConnectorReleaseCandidates"
              },
              "rolloutConfiguration": {
                "$schema": "http://json-schema.org/draft-07/schema#",
                "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/RolloutConfiguration.yaml",
                "title": "RolloutConfiguration",
                "description": "configuration for the rollout of a connector",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "enableProgressiveRollout": {
                    "type": "boolean",
                    "default": false,
                    "description": "Whether to enable progressive rollout for the connector."
                  },
                  "initialPercentage": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 100,
                    "default": 0,
                    "description": "The percentage of users that should receive the new version initially."
                  },
                  "maxPercentage": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 100,
                    "default": 50,
                    "description": "The percentage of users who should receive the release candidate during the test phase before full rollout."
                  },
                  "advanceDelayMinutes": {
                    "type": "integer",
                    "minimum": 10,
                    "default": 10,
                    "description": "The number of minutes to wait before advancing the rollout percentage."
                  }
                }
              },
              "breakingChanges": {
                "$schema": "http://json-schema.org/draft-07/schema#",
                "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/ConnectorBreakingChanges.yaml",
                "title": "ConnectorBreakingChanges",
                "description": "Each entry denotes a breaking change in a specific version of a connector that requires user action to upgrade.",
                "type": "object",
                "additionalProperties": false,
                "minProperties": 1,
                "patternProperties": {
                  "^\\d+\\.\\d+\\.\\d+$": {
                    "$ref": "#/properties/sources/items/properties/releases/properties/breakingChanges/definitions/VersionBreakingChange"
                  }
                },
                "definitions": {
                  "VersionBreakingChange": {
                    "description": "Contains information about a breaking change, including the deadline to upgrade and a message detailing the change.",
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "upgradeDeadline",
                      "message"
                    ],
                    "properties": {
                      "upgradeDeadline": {
                        "description": "The deadline by which to upgrade before the breaking change takes effect.",
                        "type": "string",
                        "format": "date"
                      },
                      "message": {
                        "description": "Descriptive message detailing the breaking change.",
                        "type": "string"
                      },
                      "deadlineAction": {
                        "description": "Action to do when the deadline is reached.",
                        "type": "string",
                        "enum": [
                          "auto_upgrade",
                          "disable"
                        ]
                      },
                      "migrationDocumentationUrl": {
                        "description": "URL to documentation on how to migrate to the current version. Defaults to ${documentationUrl}-migrations#${version}",
                        "type": "string",
                        "format": "uri"
                      },
                      "scopedImpact": {
                        "description": "List of scopes that are impacted by the breaking change. If not specified, the breaking change cannot be scoped to reduce impact via the supported scope types.",
                        "type": "array",
                        "minItems": 1,
                        "items": {
                          "$ref": "#/properties/sources/items/properties/releases/properties/breakingChanges/definitions/BreakingChangeScope"
                        }
                      }
                    }
                  },
                  "BreakingChangeScope": {
                    "description": "A scope that can be used to limit the impact of a breaking change.",
                    "type": "object",
                    "oneOf": [
                      {
                        "$ref": "#/properties/sources/items/properties/releases/properties/breakingChanges/definitions/StreamBreakingChangeScope"
                      }
                    ]
                  },
                  "StreamBreakingChangeScope": {
                    "description": "A scope that can be used to limit the impact of a breaking change to specific streams.",
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "scopeType",
                      "impactedScopes"
                    ],
                    "properties": {
                      "scopeType": {
                        "type": "string",
                        "const": "stream"
                      },
                      "impactedScopes": {
                        "description": "List of streams that are impacted by the breaking change.",
                        "type": "array",
                        "minItems": 1,
                        "items": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "migrationDocumentationUrl": {
                "description": "URL to documentation on how to migrate from the previous version to the current version. Defaults to ${documentationUrl}-migrations",
                "type": "string",
                "format": "uri"
              }
            },
            "definitions": {
              "ConnectorReleaseCandidates": {
                "description": "Each entry denotes a release candidate version of a connector.",
                "type": "object",
                "additionalProperties": false,
                "minProperties": 1,
                "maxProperties": 1,
                "patternProperties": {
                  "^\\d+\\.\\d+\\.\\d+(-[0-9A-Za-z-.]+)?$": {
                    "$ref": "#/properties/sources/items/properties/releases/definitions/VersionReleaseCandidate"
                  }
                }
              },
              "VersionReleaseCandidate": {
                "description": "Contains information about a release candidate version of a connector.",
                "additionalProperties": false,
                "type": "object",
                "oneOf": [
                  {
                    "$ref": "#/properties/sources/items"
                  },
                  {
                    "$ref": "#/properties/destinations/items"
                  }
                ]
              }
            }
          },
          "ab_internal": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors_ci/metadata_service/lib/models/src/AirbyteInternal.yml",
            "title": "AirbyteInternal",
            "description": "Fields for internal use only",
            "type": "object",
            "additionalProperties": true,
            "properties": {
              "sl": {
                "type": "integer",
                "enum": [
                  0,
                  100,
                  200,
                  300
                ]
              },
              "ql": {
                "type": "integer",
                "enum": [
                  0,
                  100,
                  200,
                  300,
                  400,
                  500,
                  600
                ]
              },
              "isEnterprise": {
                "type": "boolean",
                "default": false
              },
              "requireVersionIncrementsInPullRequests": {
                "type": "boolean",
                "default": true,
                "description": "When false, version increment checks will be skipped for this connector"
              }
            }
          },
          "generated": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors_ci/metadata_service/lib/models/src/GeneratedFields.yaml",
            "title": "GeneratedFields",
            "description": "Optional schema for fields generated at metadata upload time",
            "type": "object",
            "properties": {
              "git": {
                "$schema": "http://json-schema.org/draft-07/schema#",
                "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors/metadata_service/lib/metadata_service/models/src/GitInfo.yaml",
                "title": "GitInfo",
                "description": "Information about the author of the last commit that modified this file. DO NOT DEFINE THIS FIELD MANUALLY. It will be overwritten by the CI.",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "commit_sha": {
                    "type": "string",
                    "description": "The git commit sha of the last commit that modified this file."
                  },
                  "commit_timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The git commit timestamp of the last commit that modified this file."
                  },
                  "commit_author": {
                    "type": "string",
                    "description": "The git commit author of the last commit that modified this file."
                  },
                  "commit_author_email": {
                    "type": "string",
                    "description": "The git commit author email of the last commit that modified this file."
                  }
                }
              },
              "source_file_info": {
                "$schema": "http://json-schema.org/draft-07/schema#",
                "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors_ci/metadata_service/lib/models/src/SourceFileInfo.yaml",
                "title": "SourceFileInfo",
                "description": "Information about the source file that generated the registry entry",
                "type": "object",
                "properties": {
                  "metadata_etag": {
                    "type": "string"
                  },
                  "metadata_file_path": {
                    "type": "string"
                  },
                  "metadata_bucket_name": {
                    "type": "string"
                  },
                  "metadata_last_modified": {
                    "type": "string"
                  },
                  "registry_entry_generated_at": {
                    "type": "string"
                  }
                }
              },
              "metrics": {
                "$schema": "http://json-schema.org/draft-07/schema#",
                "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors_ci/metadata_service/lib/models/src/ConnectorMetrics.yaml",
                "title": "ConnectorMetrics",
                "description": "Information about the source file that generated the registry entry",
                "type": "object",
                "properties": {
                  "all": {
                    "type": "ConnectorMetric"
                  },
                  "cloud": {
                    "type": "ConnectorMetric"
                  },
                  "oss": {
                    "type": "ConnectorMetric"
                  }
                },
                "definitions": {
                  "ConnectorMetric": {
                    "type": "object",
                    "properties": {
                      "usage": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "string",
                            "enum": [
                              "low",
                              "medium",
                              "high"
                            ]
                          }
                        ]
                      },
                      "sync_success_rate": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "string",
                            "enum": [
                              "low",
                              "medium",
                              "high"
                            ]
                          }
                        ]
                      },
                      "connector_version": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": true
                  }
                }
              },
              "sbomUrl": {
                "type": "string",
                "description": "URL to the SBOM file"
              }
            }
          },
          "packageInfo": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://github.com/airbytehq/airbyte/airbyte-ci/connectors_ci/metadata_service/lib/models/src/ConnectorPackageInfo.yaml",
            "title": "ConnectorPackageInfo",
            "description": "Information about the contents of the connector image",
            "type": "object",
            "properties": {
              "cdk_version": {
                "type": "string"
              }
            }
          },
          "language": {
            "type": "string",
            "description": "The language the connector is written in"
          },
          "supportsFileTransfer": {
            "type": "boolean",
            "default": false
          },
          "supportsDataActivation": {
            "type": "boolean",
            "default": false
          }
        }
      }
    }
  }
}