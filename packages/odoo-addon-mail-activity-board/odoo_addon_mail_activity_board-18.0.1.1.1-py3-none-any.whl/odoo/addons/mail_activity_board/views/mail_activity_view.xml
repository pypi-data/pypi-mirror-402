<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <!--
    VIEWS
-->

    <!-- FORM POP
        Add a link to the related model instance to ease navigation
    -->
    <record id="mail_activity_view_form_popup" model="ir.ui.view">
        <field
            name="name"
        >mail.activity.view.form.popup (in mail_activity_board)</field>
        <field name="model">mail.activity</field>
        <field name="inherit_id" ref="mail.mail_activity_view_form_popup" />
        <field name="arch" type="xml">
            <field name="activity_type_id" position="before">
                <field
                    name="related_model_instance"
                    invisible="not related_model_instance"
                />
            </field>
        </field>
    </record>

    <!-- LIST VIEW -->
    <record id="mail_activity_view_tree" model="ir.ui.view">
        <field name="name">mail.activity.boards.view.list</field>
        <field name="model">mail.activity</field>
        <field name="inherit_id" ref="mail.mail_activity_view_tree" />
        <field name="arch" type="xml">
            <xpath expr="//list" position="attributes">
                <attribute name="default_order" />
                <attribute
                    name="decoration-danger"
                >(date_deadline &lt; current_date)</attribute>
                <attribute
                    name="decoration-warning"
                >(date_deadline == current_date)</attribute>
                <attribute
                    name="decoration-success"
                >(date_deadline &gt; current_date)</attribute>
            </xpath>
            <field name="res_name" position="before">
                <field name="related_model_instance" />
            </field>
            <field name="res_name" position="attributes">
                <attribute name="column_invisible">1</attribute>
            </field>
        </field>
    </record>

    <!-- SEARCH VIEW -->
    <record id="mail_activity_view_search" model="ir.ui.view">
        <field name="name">mail.activity.boards.view.search</field>
        <field name="model">mail.activity</field>
        <field name="inherit_id" ref="mail.mail_activity_view_search" />
        <field name="mode">extension</field>
        <field name="arch" type="xml">
            <xpath expr='//field[@name="res_model"]' position='before'>
                <field name="user_id" />
                <field name="res_name" string="Origin" />
            </xpath>

            <xpath
                expr='//filter[@name="filter_date_deadline_future"]'
                position='after'
            >
                <filter
                    string="Deadline"
                    name="date_deadline"
                    date="date_deadline"
                    start_year="0"
                    start_month="-1"
                    end_year="2"
                    end_month="2"
                />
            </xpath>
        </field>
    </record>

    <!--
    ACTION
-->

    <record
        id="mail.mail_activity_action_my_view_kanban"
        model="ir.actions.act_window.view"
    >
        <field name="sequence" eval="1" />
    </record>
    <record
        id="mail.mail_activity_action_my_view_tree"
        model="ir.actions.act_window.view"
    >
        <field name="view_mode">list</field>
        <field name="sequence" eval="2" />
        <field name="act_window_id" ref="mail.mail_activity_action_my" />
    </record>
    <record id="mail_activity_action_my_view_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="3" />
        <field name="view_mode">form</field>
        <field name="act_window_id" ref="mail.mail_activity_action_my" />
    </record>
    <record
        id="mail_activity_action_my_view_calendar"
        model="ir.actions.act_window.view"
    >
        <field name="sequence" eval="4" />
        <field name="view_mode">calendar</field>
        <field name="act_window_id" ref="mail.mail_activity_action_my" />
    </record>
    <record id="mail_activity_action_my_view_pivot" model="ir.actions.act_window.view">
        <field name="sequence" eval="5" />
        <field name="view_mode">pivot</field>
        <field name="act_window_id" ref="mail.mail_activity_action_my" />
    </record>
    <record id="mail_activity_action_my_view_graph" model="ir.actions.act_window.view">
        <field name="sequence" eval="6" />
        <field name="view_mode">graph</field>
        <field name="act_window_id" ref="mail.mail_activity_action_my" />
    </record>
    <record id="mail.mail_activity_action_my" model="ir.actions.act_window">
        <field name="name">Activities</field>
    </record>
</odoo>
