# Currently, the diagnostic supports comparing one dataset against one reference dataset at a time.
datasets:
  - catalog: null
    model: null
    exp: null
    source: 'lra-r100-monthly'
    regrid: null
    reader_kwargs: null # it can be a dictionary with reader kwargs
    startdate: null
    enddate: null
  # Possible second/third/fourth datasets here, no present by default
  # - catalog: 'obs'
  #   model: 'ERA5'
  #   exp: 'era5'
  #   source: 'monthly'
  #   regrid: r100

references:
  - catalog: 'obs'
    model: 'MSWEP'
    exp: 'v2.8'
    source: 'monthly'
    regrid: 'r100'
    startdate: null
    enddate: null

setup:
  loglevel: 'WARNING'

output:
  outputdir: "./"
  rebuild: true
  save_netcdf: true
  save_pdf: true
  save_png: true
  dpi: 300
  create_catalog_entry: true

diagnostics:
  globalbiases:
    run: true
    diagnostic_name: 'water_cycle'
    variables: ['tprate']
    params:
      default:
        seasons: true
        seasons_stat: 'mean' # May become a list
        vertical: false     # Vertical profile if variable 3d
        #TODO: to remove
        startdate_data: null
        enddate_data: null
        startdate_ref: "1990-01-01"
        enddate_ref: "2020-12-31"
      tprate:
        units: 'mm/day'
    plot_params:
      default: 
        projection: 'robinson'
        projection_params: {}
      tprate:
        vmin: -5
        vmax: 5
        cmap: 'BrBG'

  timeseries:
    run: true
    diagnostic_name: 'water_cycle'
    variables: ['tprate']
    center_time: true
    params:
      default:
        hourly: False
        daily: False
        monthly: True
        annual: True
        std_startdate: '19900101'
        std_enddate: '20201231'
      tprate:
        regions: ['nh', 'sh', 'europe']

  seasonalcycles:
    run: true
    diagnostic_name: 'water_cycle'
    variables: ['tprate']
    center_time: true
    params:
      default:
        std_startdate: '19900101'
        std_enddate: '20201231'
      tprate:
        regions: ['nh', 'sh', 'europe']

  lat_lon_profiles:
    run: true
    diagnostic_name: 'water_cycle'
    mean_type: 'zonal'
    center_time: true
    exclude_incomplete: true
    box_brd: true
    seasonal: true
    longterm: true
    params:
      default:
        std_startdate: '19900101'
        std_enddate: '20201231'
    variables:
      - name: 'tprate'
        regions: [null, 'tropics']  # global and tropics
