# Code generated by cnb.cool/cnb/sdk/cnb-sdk-generator. DO NOT EDIT.
# versions:
#    cnb-sdk-generator: 1.0.2
# source: https://api.cnb-dev.woa.com/swagger.json

from typing import Optional
from .models import dto
class KnowledgebaseService:    
	def __init__(self, client):
		self._client = client

	# 删除知识库
	def delete_knowledge_base(self,
		repo: str,
	    ):
		u = "/%s/-/knowledge/base" % (repo, )

		data = self._client.request(
			method="DELETE", 
			endpoint=u,
			)
		return 
		
	# 获取知识库信息
	def get_knowledge_base_info(self,
		repo: str,
	    ) -> dto.KnowledgeBaseInfoRes:
		u = "/%s/-/knowledge/base" % (repo, )

		data = self._client.request(
			method="GET", 
			endpoint=u,
			)
		return dto.KnowledgeBaseInfoRes.safe_parse(data)
		
	# 获取当前支持的 Embedding 模型列表
	def get_models(self,
		repo: str,
	    ) -> list[dto.EmbeddingModel]:
		u = "/%s/-/knowledge/embedding/models" % (repo, )

		data = self._client.request(
			method="GET", 
			endpoint=u,
			)
		return [dto.EmbeddingModel.safe_parse(item) for item in data]
		
	# 查询知识库，使用文档：https://docs.cnb.cool/zh/ai/knowledge-base.html
	def query_knowledge_base(self,
		repo: str,
	    body_params: dto.QueryKnowledgeBaseReq,
		) -> list[dto.QueryKnowledgeBaseRes]:
		u = "/%s/-/knowledge/base/query" % (repo, )

		data = self._client.request(
			method="POST", 
			endpoint=u,
			json=body_params.to_dict(),
			)
		return [dto.QueryKnowledgeBaseRes.safe_parse(item) for item in data]
		
	