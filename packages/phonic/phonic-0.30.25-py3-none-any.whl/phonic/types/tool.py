# This file was auto-generated by Fern from our API Definition.

import typing

import pydantic
from ..core.pydantic_utilities import IS_PYDANTIC_V2
from ..core.unchecked_base_model import UncheckedBaseModel
from .tool_endpoint_method import ToolEndpointMethod
from .tool_execution_mode import ToolExecutionMode
from .tool_parameter import ToolParameter
from .tool_project import ToolProject
from .tool_type import ToolType


class Tool(UncheckedBaseModel):
    id: str = pydantic.Field()
    """
    The ID of the tool.
    """

    name: str = pydantic.Field()
    """
    The name of the tool.
    """

    description: str = pydantic.Field()
    """
    Description of what the tool does.
    """

    project: ToolProject
    type: ToolType = pydantic.Field()
    """
    The type of tool.
    """

    execution_mode: ToolExecutionMode = pydantic.Field()
    """
    Mode of operation - sync waits for response, async continues without waiting.
    """

    parameters: typing.List[ToolParameter] = pydantic.Field()
    """
    Array of parameter definitions for the tool.
    """

    endpoint_method: typing.Optional[ToolEndpointMethod] = pydantic.Field(default=None)
    """
    HTTP method for webhook tools.
    """

    endpoint_url: typing.Optional[str] = pydantic.Field(default=None)
    """
    URL for webhook tools.
    """

    endpoint_headers: typing.Optional[typing.Dict[str, str]] = pydantic.Field(default=None)
    """
    Headers for webhook tools.
    """

    endpoint_timeout_ms: typing.Optional[int] = pydantic.Field(default=None)
    """
    Timeout in milliseconds for webhook tools.
    """

    tool_call_output_timeout_ms: typing.Optional[int] = pydantic.Field(default=None)
    """
    Timeout in milliseconds for WebSocket tool responses.
    """

    phone_number: typing.Optional[str] = pydantic.Field(default=None)
    """
    The E.164 formatted phone number to transfer calls to. Set to null if the agent should determine the phone number.
    """

    dtmf: typing.Optional[str] = pydantic.Field(default=None)
    """
    DTMF digits to send after the transfer connects (e.g., "1234"). Defaults to null.
    """

    use_agent_phone_number: typing.Optional[bool] = pydantic.Field(default=None)
    """
    When true, Phonic will transfer the call using the agent's phone number. When false, Phonic will transfer the call using the phone number of the party to whom the agent is connected. This is only available for built_in_transfer_to_phone_number tools.
    """

    detect_voicemail: typing.Optional[bool] = pydantic.Field(default=None)
    """
    When true, Phonic will listen in and tell the user if the transfer hits voicemail. This is only available for built_in_transfer_to_phone_number tools when use_agent_phone_number is true.
    """

    agents_to_transfer_to: typing.Optional[typing.List[str]] = pydantic.Field(default=None)
    """
    Array of agent names that the LLM can choose from when transferring. Required for built_in_transfer_to_agent tools.
    """

    require_speech_before_tool_call: typing.Optional[bool] = pydantic.Field(default=None)
    """
    When true, forces the agent to speak before executing the tool.
    """

    wait_for_speech_before_tool_call: typing.Optional[bool] = pydantic.Field(default=None)
    """
    If true, the agent will wait to finish speaking before executing the tool. This is only available for custom_webhook and custom_websocket tools.
    """

    forbid_speech_after_tool_call: typing.Optional[bool] = pydantic.Field(default=None)
    """
    When true, forbids the agent from speaking after executing the tool. Available for custom_context, custom_webhook and custom_websocket tools.
    """

    allow_tool_chaining: typing.Optional[bool] = pydantic.Field(default=None)
    """
    When true, allows the agent to chain and execute other tools after executing the tool. Available for custom_context, custom_webhook and custom_websocket tools.
    """

    wait_for_response: typing.Optional[bool] = pydantic.Field(default=None)
    """
    The agent doesn't typically wait for the response of async custom_websocket tools. When true, makes the agent wait for a response, not call other tools and inform the user of the result. Only available for async custom_websocket tools.
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
