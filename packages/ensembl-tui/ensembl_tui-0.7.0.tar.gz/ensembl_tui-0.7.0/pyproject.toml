[build-system]
requires = ["flit_core >=3.2,<4"]
build-backend = "flit_core.buildapi"

[project]
name = "ensembl_tui"
authors = [
    { name = "Gavin Huttley", email = "Gavin.Huttley@anu.edu.au" },
    { name = "Arne Becker", email = "arne@ebi.ac.uk" },
    { name = "Stefano Giorgetti", email = "sgiorgetti@ebi.ac.uk" },
]
maintainers = [
    { name = "Gavin Huttley", email = "Gavin.Huttley@anu.edu.au" },
    { name = "Arne Becker", email = "arne@ebi.ac.uk" },
    { name = "Stefano Giorgetti", email = "sgiorgetti@ebi.ac.uk" },
]
keywords = ["biology", "genomics", "evolution", "bioinformatics"]
readme = "README.md"
license = { file = "LICENSE" }
requires-python = ">=3.11,<3.15"
dependencies = [
    "click",
    "cogent3==2026.1.12a1",
    "cogent3-h5seqs==0.7.3",
    "duckdb",
    "numba",
    "numpy",
    "polars",
    "pyarrow",
    "rich",
    "scitrack",
    "typing_extensions",
    "trogon",
    "unsync",
    # restricting wakepy to macOS for now
    "wakepy>0.7; os_name == 'darwin'",
]
classifiers = [
    "Development Status :: 2 - Pre-Alpha",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: BSD License",
    "Topic :: Scientific/Engineering :: Bio-Informatics",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
]
dynamic = ["version", "description"]

[project.urls]
Documentation = "https://ensembl-tui.readthedocs.io/"
"Bug Tracker" = "https://github.com/cogent3/ensembl_tui/issues"
"Source Code" = "https://github.com/cogent3/ensembl_tui"

[project.scripts]
eti = "ensembl_tui.cli:main"

[project.optional-dependencies]
test = [
    "pytest",
    "pytest-cov",
    "pytest-timeout",
    "pytest-xdist",
    "ruff==0.14.11",
    "nox",
]
doc = [
    "mkdocs>=1.6.1",
    "markdown-exec[ansi]>=1.10.0",
    "mkdocs-jupyter>=0.25.1",
    "markdown>=3.7",
    "mdformat",
    "mdformat-mkdocs",
    "mdformat-black",
]
dev = [
    "cogapp",
    "flit",
    "numpydoc",
    "psutil",
    "scriv",
    "ensembl_tui[doc]",
    "ensembl_tui[test]",
]

[tool.flit.sdist]
include = ["src/*", "tests/*", "pyproject.toml"]

[tool.pytest.ini_options]
markers = [
    "slow: marks tests as slow (deselect with '-m \"not slow\"')",
    "internet: marks tests that require internet access  (deselect with '-m \"not internet\"')",
]
norecursedirs = ["doc", ".nox", "working"]
addopts = ["--strict-config"]
testpaths = "tests"

[tool.scriv]
format = "md"
categories = [
    "Contributors",
    "ENH",
    "BUG",
    "DOC",
    "Deprecations",
    "Discontinued",
]
output_file = "changelog.md"
version = "literal: src/ensembl_tui/__init__.py:__version__"
skip_fragments = "README.*"
new_fragment_template = "file: changelog.d/templates/new.md.j2"
entry_title_template = "file: changelog.d/templates/title.md.j2"

[tool.uv]
reinstall-package = ["cogent3"]
