# Custom Structure Configuration Example
#
# This example demonstrates a customized structure validation setup for a project
# with specific architectural requirements. This shows how to adapt the structure
# validator to match your team's conventions and domain language.
#
# Scenario: A web application using a services-based architecture with separate
# API and web components. Legacy code is simply not included in search_paths.

[tool.structure-lint]
enabled = true

# Only validate "lib" - legacy and experimental dirs are simply not listed
# This is the opt-in model: only listed search paths are validated
# This applies to ALL validators (line_limits, one_per_file, structure)
search_paths = ["lib"]

[tool.structure-lint.validators]
# Enable all validators including structure validation
structure = true        # Enforce our custom structure
line_limits = true      # Keep files modular
one_per_file = true     # Single responsibility

[tool.structure-lint.line_limits]
# Slightly more lenient line limit for service classes
max_lines = 200

[tool.structure-lint.structure]

# Allow 3 levels of feature folder nesting for complex features
folder_depth = 3

# Using MVC-style organization plus additional layers
# Base folders (api, web, services) are automatically detected under lib/
# - models: Data models and schemas
# - views: View logic and templates
# - controllers: Request handlers
# - services: Business logic layer
# - repositories: Data access layer
# - _types: Type definitions
# - _functions: Helper functions
# - _tests: Unit and integration tests
standard_folders = [
    "models",
    "views",
    "controllers",
    "services",
    "repositories",
    "_types",
    "_functions",
    "_tests"
]

# Python files allowed in any directory (non-.py files like README.md are automatically ignored)
files_allowed_anywhere = ["__init__.py", "conftest.py"]

# ============================================================================
# Resulting Project Structure:
# ============================================================================
#
# project/
# ├── pyproject.toml
# ├── lib/                        (in search_paths - validated)
# │   ├── api/                    (base folder - API backend)
# │   │   ├── authentication/     (feature at depth 0)
# │   │   │   ├── models/         (User model, Token model, etc.)
# │   │   │   ├── controllers/    (Login handler, Logout handler)
# │   │   │   ├── services/       (Authentication service)
# │   │   │   ├── repositories/   (User repository)
# │   │   │   ├── _types/         (API schemas)
# │   │   │   ├── _functions/     (Password hashing, JWT helpers)
# │   │   │   ├── _tests/
# │   │   │   └── oauth/          (feature folder, nested)
# │   │   │       ├── _types/
# │   │   │       └── google/     (nested feature folder)
# │   │   │           └── _types/
# │   │   └── users/              (another feature at depth 0)
# │   │       ├── models/
# │   │       ├── controllers/
# │   │       └── ...
# │   │
# │   ├── web/                    (base folder - web frontend)
# │   │   ├── dashboard/
# │   │   │   ├── views/          (Dashboard templates)
# │   │   │   ├── controllers/    (Dashboard controller)
# │   │   │   └── widgets/        (feature folder, nested)
# │   │   │       └── _types/
# │   │   └── profile/
# │   │       └── ...
# │   │
# │   └── services/               (base folder - shared services)
# │       ├── email/
# │       │   ├── services/
# │       │   ├── _types/
# │       │   └── _tests/
# │       └── notifications/
# │           └── ...
# │
# ├── legacy/                     (NOT in search_paths - ignored)
# │   └── old_code/
# │       └── anything_goes.py
# │
# └── experimental/               (NOT in search_paths - ignored)
#     └── new_feature_poc/
#
# ============================================================================
# The Two Rules in Action:
# ============================================================================
#
# Rule 1: Standard folders (models/, views/, etc.) cannot have subdirectories
#         They contain Python files directly.
#
# Rule 2: Python files only allowed in standard folders or files_allowed_anywhere
#         No loose .py files in feature directories (except __init__.py, conftest.py)
#
# ============================================================================
# Why This Structure?
# ============================================================================
#
# 1. **Domain Language**: Uses "lib" to match team conventions
#
# 2. **Component Separation**: Clear boundaries between api, web, and services
#
# 3. **Layered Architecture**:
#    - models: Data layer
#    - repositories: Data access
#    - services: Business logic
#    - controllers: Request handling
#    - views: Presentation
#
# 4. **Migration Path**: Legacy code not in search_paths (ignored)
#
# 5. **Innovation Space**: Experimental folder for prototyping without constraints
#
# ============================================================================
# Migration Strategy:
# ============================================================================
#
# Phase 1 (Current):
#   - New code follows structure in lib/api/, lib/web/, lib/services/
#   - Legacy code in legacy/ at project root (not validated - not in search_paths)
#
# Phase 2 (Next Quarter):
#   - Refactor legacy code incrementally
#   - Move refactored code to appropriate base folders in lib/
#
# Phase 3 (Future):
#   - Add "legacy" to search_paths once fully refactored
#   - All code follows structure
#
# ============================================================================
# Team Guidelines:
# ============================================================================
#
# 1. New Features:
#    - Choose appropriate base folder (lib/api/, lib/web/, lib/services/)
#    - Create feature directory
#    - Add standard folders as needed
#    - For sub-features, create nested folders
#
# 2. File Naming:
#    - models/user.py (not models/user_model.py)
#    - controllers/login.py (not controllers/login_controller.py)
#    - File name = what it contains (one-per-file validator)
#
# 3. When to Use Each Layer:
#    - models/: Data structures and validation
#    - repositories/: Database queries
#    - services/: Business logic, orchestration
#    - controllers/: HTTP request handling
#    - views/: Templates and rendering
#    - _types/: Type hints, protocols
#    - _functions/: Pure functions, helpers
#
