import"../chunks/DsnmJJEf.js";import{i as Fe}from"../chunks/CJfK95G9.js";import{Z as Ve,n as Se,at as Bt,a0 as ft,U as Nt,T as Pt,a as t,b as gt,W as Mt,X as Lt,Y as it,_ as Ke,a7 as Ne,au as jt,av as At,a1 as Ze,a4 as Ft,a2 as Ie,aw as mt,ax as Wt,w as W,ay as ct,az as Ht,a5 as pt,a6 as Ut,aA as zt,aB as Ye,aC as ht,aD as Jt,aE as Rt,aF as Vt,aG as Kt,aH as Yt,aI as Gt,e as Qt,aJ as Xt,ap as Zt,u as re,a9 as ea,aK as ta,B as aa,y as _t,E as We,F as He,as as bt,aL as Me,s as g,aM as yt,G as $,K as o,M as i,O as r,Q as Z,aN as F,I as b,J as Ue,aO as wt,R as U,ai as Oe,ah as De,aP as xt,aQ as Pe,ar as $e,aR as sa}from"../chunks/BuqN16dl.js";import{s as je,r as et}from"../chunks/CqGBZ1eE.js";import{s as Be,a as ze}from"../chunks/DS1KsV6G.js";import{c as Tt,a as ra,b as na,d as oa,s as la}from"../chunks/CJcFZItD.js";import{i as A,b as kt}from"../chunks/CZCJ4YwQ.js";import{p as ia}from"../chunks/BdkWYYUx.js";import{T as ca}from"../chunks/Cnd7tU1A.js";function va(a,n,e){for(var s=a.items,f=[],c=n.length,d=0;d<c;d++)Kt(n[d].e,f,!0);var p=c>0&&f.length===0&&e!==null;if(p){var T=e.parentNode;Yt(T),T.append(e),s.clear(),ke(a,n[0].prev,n[c-1].next)}Gt(f,()=>{for(var u=0;u<c;u++){var B=n[u];p||(s.delete(B.k),ke(a,B.prev,B.next)),ht(B.e,!p)}})}function at(a,n,e,s,f,c=null){var d=a,p={flags:n,items:new Map,first:null};{var T=a;d=Se?Ve(Bt(T)):T.appendChild(ft())}Se&&Nt();var u=null,B=!1,x=new Map,h=gt(()=>{var q=e();return Wt(q)?q:q==null?[]:mt(q)}),C,k;function I(){da(k,C,p,x,d,f,n,s,e),c!==null&&(C.length===0?u?pt(u):u=Ze(()=>c(d)):u!==null&&Ut(u,()=>{u=null}))}Pt(()=>{k??=Qt,C=t(h);var q=C.length;if(B&&q===0)return;B=q===0;let N=!1;if(Se){var R=Mt(d)===Lt;R!==(q===0)&&(d=it(),Ve(d),Ke(!1),N=!0)}if(Se){for(var D=null,M,j=0;j<q;j++){if(Ne.nodeType===jt&&Ne.data===At){d=Ne,N=!0,Ke(!1);break}var V=C[j],z=s(V,j);M=tt(Ne,p,D,null,V,z,j,f,n,e),p.items.set(z,M),D=M}q>0&&Ve(it())}if(Se)q===0&&c&&(u=Ze(()=>c(d)));else if(Ft()){var te=new Set,G=Ie;for(j=0;j<q;j+=1){V=C[j],z=s(V,j);var K=p.items.get(z)??x.get(z);K?St(K,V,j):(M=tt(null,p,null,null,V,z,j,f,n,e,!0),x.set(z,M)),te.add(z)}for(const[ae,ee]of p.items)te.has(ae)||G.skipped_effects.add(ee.e);G.add_callback(I)}else I();N&&Ke(!0),t(h)}),Se&&(d=Ne)}function da(a,n,e,s,f,c,d,p,T){var u=n.length,B=e.items,x=e.first,h=x,C,k=null,I=[],q=[],N,R,D,M;for(M=0;M<u;M+=1){if(N=n[M],R=p(N,M),D=B.get(R),D===void 0){var j=s.get(R);if(j!==void 0){s.delete(R),B.set(R,j);var V=k?k.next:h;ke(e,k,j),ke(e,j,V),Ge(j,V,f),k=j}else{var z=h?h.e.nodes_start:f;k=tt(z,e,k,k===null?e.first:k.next,N,R,M,c,d,T)}B.set(R,k),I=[],q=[],h=k.next;continue}if(St(D,N,M),(D.e.f&Ye)!==0&&pt(D.e),D!==h){if(C!==void 0&&C.has(D)){if(I.length<q.length){var te=q[0],G;k=te.prev;var K=I[0],ae=I[I.length-1];for(G=0;G<I.length;G+=1)Ge(I[G],te,f);for(G=0;G<q.length;G+=1)C.delete(q[G]);ke(e,K.prev,ae.next),ke(e,k,K),ke(e,ae,te),h=te,k=ae,M-=1,I=[],q=[]}else C.delete(D),Ge(D,h,f),ke(e,D.prev,D.next),ke(e,D,k===null?e.first:k.next),ke(e,k,D),k=D;continue}for(I=[],q=[];h!==null&&h.k!==R;)(h.e.f&Ye)===0&&(C??=new Set).add(h),q.push(h),h=h.next;if(h===null)continue;D=h}I.push(D),k=D,h=D.next}if(h!==null||C!==void 0){for(var ee=C===void 0?[]:mt(C);h!==null;)(h.e.f&Ye)===0&&ee.push(h),h=h.next;var ne=ee.length;if(ne>0){var le=u===0?f:null;va(e,ee,le)}}a.first=e.first&&e.first.e,a.last=k&&k.e;for(var oe of s.values())ht(oe.e);s.clear()}function St(a,n,e,s){Ht(a.v,n),a.i=e}function tt(a,n,e,s,f,c,d,p,T,u,B){var x=(T&Jt)!==0,h=(T&Rt)===0,C=x?h?W(f,!1,!1):ct(f):f,k=(T&zt)===0?d:ct(d),I={i:k,v:C,k:c,a:null,e:null,prev:e,next:s};try{if(a===null){var q=document.createDocumentFragment();q.append(a=ft())}return I.e=Ze(()=>p(a,C,k,u),Se),I.e.prev=e&&e.e,I.e.next=s&&s.e,e===null?B||(n.first=I):(e.next=I,e.e.next=I.e),s!==null&&(s.prev=I,s.e.prev=I.e),I}finally{}}function Ge(a,n,e){for(var s=a.next?a.next.e.nodes_start:e,f=n?n.e.nodes_start:e,c=a.e.nodes_start;c!==null&&c!==s;){var d=Vt(c);f.before(c),c=d}}function ke(a,n,e){n===null?a.first=e:(n.next=e,n.e.next=e&&e.e),e!==null&&(e.prev=n,e.e.prev=n&&n.e)}const vt=[...` 	
\r\fÂ \v\uFEFF`];function ua(a,n,e){var s=a==null?"":""+a;if(n&&(s=s?s+" "+n:n),e){for(var f in e)if(e[f])s=s?s+" "+f:f;else if(s.length)for(var c=f.length,d=0;(d=s.indexOf(f,d))>=0;){var p=d+c;(d===0||vt.includes(s[d-1]))&&(p===s.length||vt.includes(s[p]))?s=(d===0?"":s.substring(0,d))+s.substring(p+1):d=p}}return s===""?null:s}function J(a,n,e,s,f,c){var d=a.__className;if(Se||d!==e||d===void 0){var p=ua(e,s,c);(!Se||p!==a.getAttribute("class"))&&(p==null?a.removeAttribute("class"):a.className=p),a.__className=e}else if(c&&f!==c)for(var T in c){var u=!!c[T];(f==null||u!==!!f[T])&&a.classList.toggle(T,u)}return c}function Ae(a,n,e=n){var s=new WeakSet;Xt(a,"input",async f=>{var c=f?a.defaultValue:a.value;if(c=Qe(a)?Xe(c):c,e(c),Ie!==null&&s.add(Ie),await Zt(),c!==(c=n())){var d=a.selectionStart,p=a.selectionEnd,T=a.value.length;if(a.value=c??"",p!==null){var u=a.value.length;d===p&&p===T&&u>T?(a.selectionStart=u,a.selectionEnd=u):(a.selectionStart=d,a.selectionEnd=Math.min(p,u))}}}),(Se&&a.defaultValue!==a.value||re(n)==null&&a.value)&&(e(Qe(a)?Xe(a.value):a.value),Ie!==null&&s.add(Ie)),ea(()=>{var f=n();if(a===document.activeElement){var c=ta??Ie;if(s.has(c))return}Qe(a)&&f===Xe(a.value)||a.type==="date"&&!f&&!a.value||f!==a.value&&(a.value=f??"")})}function Qe(a){var n=a.type;return n==="number"||n==="range"}function Xe(a){return a===""?null:+a}const Ct={connected:!1,bot_token:null,bot_username:null,chat_id:null,messages:[],unread_count:0},_e=aa(Ct);let ye=null;async function fa(a,n){try{return(await(await fetch("/api/telegram/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bot_token:a,chat_id:n||null})})).json()).status==="ok"?(await Le(),!0):!1}catch(e){return console.error("Error connecting to Telegram:",e),!1}}async function dt(a){try{const e=await(await fetch("/api/telegram/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bot_token:a})})).json();return e.status==="ok"&&e.bot_info?e.bot_info:e.error?{error:e.error}:null}catch(n){return console.error("Error testing Telegram connection:",n),{error:"Network error - please check your connection"}}}function ga(){ye&&(ye.close(),ye=null),_e.set(Ct)}async function ma(a,n){const s=_t(_e).chat_id;if(!s)return console.error("No chat ID available for sending message"),!1;try{if(ye&&ye.readyState===WebSocket.OPEN){ye.send(JSON.stringify({type:"telegram_send",chat_id:s,message:a}));const d={chat_id:s,user_id:0,username:"bot",message:a,timestamp:Date.now()/1e3,direction:"outgoing"};return _e.update(p=>({...p,messages:[...p.messages,d]})),!0}return(await(await fetch("/api/telegram/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s,message:a})})).json()).status==="ok"}catch(f){return console.error("Error sending Telegram message:",f),!1}}async function pa(){try{return(await(await fetch("/api/telegram/status")).json()).server_running===!0}catch(a){return console.error("Error checking Telegram server status:",a),!1}}async function ha(){try{const n=await(await fetch("/api/telegram/start_server",{method:"POST",headers:{"Content-Type":"application/json"}})).json();return n.status==="ok"?(console.log("[Telegram] Bot server started:",n.url),{success:!0,url:n.url}):(console.error("[Telegram] Failed to start bot server:",n.error),{success:!1,error:n.error||"Unknown error"})}catch(a){return console.error("Error starting Telegram server:",a),{success:!1,error:String(a)}}}async function st(){const a=_t(_e);if(!a.bot_username){console.warn("Bot username not available");return}if(!await pa()){console.log("[Telegram] Bot server not running, starting automatically...");const e=await ha();e.success?(console.log("[Telegram] Bot server started successfully"),await new Promise(s=>setTimeout(s,2e3))):console.error("[Telegram] Failed to auto-start bot server:",e.error)}window.open(`https://t.me/${a.bot_username}`,"_blank")}async function _a(){const n=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/telegram`;ye=new WebSocket(n),ye.addEventListener("open",()=>{console.log("Telegram WebSocket connected")}),ye.addEventListener("message",e=>{try{const s=JSON.parse(e.data);ba(s)}catch(s){console.error("Error parsing WebSocket message:",s)}}),ye.addEventListener("close",()=>{console.log("Telegram WebSocket closed"),_e.update(e=>({...e,connected:!1}))}),ye.addEventListener("error",e=>{console.error("Telegram WebSocket error:",e)})}function ba(a){switch(a.type){case"telegram_message":{const n={chat_id:a.chat_id,user_id:a.user_id,username:a.username,message:a.message,timestamp:a.timestamp,direction:"incoming"};_e.update(e=>({...e,messages:[...e.messages,n],unread_count:e.unread_count+1}));break}case"telegram_status":{const e=a.status==="connected";_e.update(s=>({...s,connected:e}));break}default:console.log("Unknown Telegram WebSocket message type:",a.type)}}function ut(){_e.update(a=>({...a,unread_count:0}))}async function Le(){try{const n=await(await fetch("/api/telegram/status")).json();if(console.log("[Telegram] Status check:",n),n.credentials_saved)if(n.connected&&n.bot_info){console.log("[Telegram] Connected! Bot:",n.bot_info.username,n.from_keyring?"(from keyring)":"");try{localStorage.setItem("telegram_bot_info",JSON.stringify(n.bot_info))}catch(e){console.warn("[Telegram] Failed to cache bot info:",e)}_e.update(e=>({...e,connected:!0,bot_username:n.bot_info.username,chat_id:n.chat_id||e.chat_id,bot_token:"***"})),(!ye||ye.readyState!==WebSocket.OPEN)&&await _a()}else{let e=null;try{const s=localStorage.getItem("telegram_bot_info");s&&(e=JSON.parse(s),console.log("[Telegram] Using cached bot info:",e.username))}catch(s){console.warn("[Telegram] Failed to read cached bot info:",s)}_e.update(s=>({...s,connected:!0,bot_username:e?.username||null,chat_id:n.chat_id||null,bot_token:"***"})),e||console.warn("[Telegram] Credentials saved but bot connection test failed and no cached info available")}else console.log("[Telegram] Not connected. Error:",n.error),_e.update(e=>({...e,connected:!1,bot_username:null,chat_id:n.chat_id||null}))}catch(a){console.error("Error fetching Telegram status:",a)}}var ya=$('<span class="unread-badge svelte-1qwqu3f"> </span>'),wa=$('<button class="btn-icon svelte-1qwqu3f" title="Open in Telegram" aria-label="Open in Telegram"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></button>'),xa=$('<div class="empty-state svelte-1qwqu3f"><p class="empty-text svelte-1qwqu3f">Not connected to Telegram</p> <p class="empty-hint svelte-1qwqu3f">Configure your bot in Settings to get started</p></div>'),Ta=$('<div class="empty-state svelte-1qwqu3f"><p class="empty-text svelte-1qwqu3f">No messages yet</p> <p class="empty-hint svelte-1qwqu3f">Send a message to start the conversation</p></div>'),ka=$('<div><div class="message-header svelte-1qwqu3f"><span class="message-username svelte-1qwqu3f"> </span> <span class="message-timestamp svelte-1qwqu3f"> </span></div> <div class="message-content svelte-1qwqu3f"> </div></div>'),Sa=$('<div class="messages-list svelte-1qwqu3f"></div>'),Ca=$('<div class="input-container svelte-1qwqu3f"><textarea placeholder="Type a message..." rows="1" class="message-input svelte-1qwqu3f"></textarea> <button class="send-button svelte-1qwqu3f" title="Send message" aria-label="Send message"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg></button></div>'),Ea=$('<div><div class="chat-header svelte-1qwqu3f"><div class="header-title svelte-1qwqu3f"><svg class="telegram-icon svelte-1qwqu3f" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.654-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"></path></svg> <span>Telegram</span> <!></div> <div class="header-actions svelte-1qwqu3f"><!></div></div> <div class="messages-container svelte-1qwqu3f"><!></div> <!></div>');function qa(a,n){We(n,!1);const e=()=>Be(_e,"$telegramStore",s),[s,f]=ze(),c=W(),d=W();let p=ia(n,"collapsed",8,!1),T=W(""),u=W(),B=W(!0);He(()=>{p()||ut()}),bt(()=>{});function x(){t(u)&&requestAnimationFrame(()=>{wt(u,t(u).scrollTop=t(u).scrollHeight)})}function h(){if(!t(u))return;const{scrollTop:S,scrollHeight:O,clientHeight:H}=t(u);g(B,O-S-H<50),t(B)&&!p()&&ut()}async function C(){const S=t(T).trim();if(!S)return;await ma(S)?(g(T,""),x()):console.error("Failed to send Telegram message")}function k(S){S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),C())}function I(S){const O=new Date(S*1e3),H=new Date;return O.toDateString()===H.toDateString()?O.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):O.toLocaleDateString([],{month:"short",day:"numeric"})+" "+O.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function q(){!e().connected||!e().bot_username||st()}Me(()=>e(),()=>{g(c,e().messages.length>0)}),Me(()=>e(),()=>{g(d,e().unread_count>0)}),Me(()=>(e(),t(u),t(B)),()=>{e().messages&&t(u)&&t(B)&&x()}),yt(),Fe();var N=Ea();let R;var D=o(N),M=o(D),j=i(o(M),4);{var V=S=>{var O=ya(),H=o(O,!0);r(O),Z(()=>U(H,(e(),re(()=>e().unread_count)))),b(S,O)};A(j,S=>{t(d)&&S(V)})}r(M);var z=i(M,2),te=o(z);{var G=S=>{var O=wa();F("click",O,q),b(S,O)};A(te,S=>{e(),re(()=>e().connected&&e().bot_username)&&S(G)})}r(z),r(D);var K=i(D,2),ae=o(K);{var ee=S=>{var O=xa();b(S,O)},ne=S=>{var O=Oe(),H=De(O);{var fe=ie=>{var ge=Ta();b(ie,ge)},se=ie=>{var ge=Sa();at(ge,5,()=>(e(),re(()=>e().messages)),ce=>ce.timestamp+ce.direction,(ce,Q)=>{var ve=ka();let me;var be=o(ve),_=o(be),E=o(_,!0);r(_);var P=i(_,2),v=o(P,!0);r(P),r(be);var y=i(be,2),w=o(y,!0);r(y),r(ve),Z((l,m)=>{me=J(ve,1,"message svelte-1qwqu3f",null,me,l),U(E,(t(Q),re(()=>t(Q).username))),U(v,m),U(w,(t(Q),re(()=>t(Q).message)))},[()=>({incoming:t(Q).direction==="incoming",outgoing:t(Q).direction==="outgoing"}),()=>(t(Q),re(()=>I(t(Q).timestamp)))]),b(ce,ve)}),r(ge),b(ie,ge)};A(H,ie=>{t(c)?ie(se,!1):ie(fe)},!0)}b(S,O)};A(ae,S=>{e(),re(()=>!e().connected)?S(ee):S(ne,!1)})}r(K),kt(K,S=>g(u,S),()=>t(u));var le=i(K,2);{var oe=S=>{var O=Ca(),H=o(O);xt(H);var fe=i(H,2);r(O),Z(se=>{H.disabled=(e(),re(()=>!e().connected)),fe.disabled=se},[()=>(t(T),e(),re(()=>!t(T).trim()||!e().connected))]),Ae(H,()=>t(T),se=>g(T,se)),F("keypress",H,k),F("click",fe,C),b(S,O)};A(le,S=>{e(),re(()=>e().connected)&&S(oe)})}r(N),Z(S=>R=J(N,1,"telegram-chat svelte-1qwqu3f",null,R,S),[()=>({collapsed:p()})]),F("scroll",K,h),b(a,N),Ue(),f()}var Da=$('<span class="badge svelte-191yngm"> </span>'),$a=$('<button aria-label="Toggle Telegram panel"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="svelte-191yngm"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.654-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z" class="svelte-191yngm"></path></svg> <!></button> <button class="btn-secondary svelte-191yngm" data-testid="telegram-launch-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-191yngm"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" class="svelte-191yngm"></path><polyline points="15 3 21 3 21 9" class="svelte-191yngm"></polyline><line x1="10" y1="14" x2="21" y2="3" class="svelte-191yngm"></line></svg> Launch in Telegram</button>',1),Ia=$('<div class="empty-state svelte-191yngm"><svg class="empty-icon svelte-191yngm" xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" class="svelte-191yngm"></path></svg> <p class="empty-text svelte-191yngm">Start a conversation with Claude Code</p> <p class="empty-hint svelte-191yngm">Type a message below to begin</p></div>'),Oa=$('<div><div class="message-header svelte-191yngm"><span class="message-role svelte-191yngm"> </span> <span class="message-timestamp svelte-191yngm"> </span></div> <div class="message-content svelte-191yngm"> </div></div>'),Ba=$('<div class="messages-list svelte-191yngm"></div>'),Na=$('<div class="loading-indicator svelte-191yngm"><div class="loading-dot svelte-191yngm"></div> <div class="loading-dot svelte-191yngm"></div> <div class="loading-dot svelte-191yngm"></div></div>'),Pa=$('<div class="telegram-panel svelte-191yngm"><!></div>'),Ma=$('<div class="config-popup svelte-191yngm" data-testid="telegram-config-popup">Enter a bot token in Settings to enable Telegram</div>'),La=$('<div class="chat-layout svelte-191yngm"><div><div class="chat-header svelte-191yngm"><div class="header-left svelte-191yngm"><h2 class="svelte-191yngm">Chat with Claude Code</h2></div> <div class="header-right svelte-191yngm"><!> <button class="btn-secondary svelte-191yngm" title="Clear chat history">Clear</button></div></div> <div class="messages-container svelte-191yngm"><!> <!></div> <div class="input-container svelte-191yngm"><textarea placeholder="Type your message to Claude Code..." rows="1" class="message-input svelte-191yngm"></textarea> <button class="send-button svelte-191yngm" title="Send message" aria-label="Send message"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-191yngm"><line x1="22" y1="2" x2="11" y2="13" class="svelte-191yngm"></line><polygon points="22 2 15 22 11 13 2 9 22 2" class="svelte-191yngm"></polygon></svg></button></div></div> <!> <!></div>');function ja(a,n){We(n,!1);const e=()=>Be(Tt,"$currentProject",f),s=()=>Be(_e,"$telegramStore",f),[f,c]=ze(),d=W(),p=W();let T=W([]),u=W(""),B=W(!1),x=W(!1),h=W(!1),C=W(),k=null;He(async()=>{await Le(),I(),V()}),bt(()=>{k&&k.close()});function I(){const y=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;k=new WebSocket(y),k.addEventListener("open",()=>{console.log("Chat WebSocket connected")}),k.addEventListener("message",w=>{try{const l=JSON.parse(w.data);q(l)}catch(l){console.error("Error parsing WebSocket message:",l)}}),k.addEventListener("close",()=>{console.log("Chat WebSocket closed"),setTimeout(()=>{(!k||k.readyState===WebSocket.CLOSED)&&I()},3e3)}),k.addEventListener("error",w=>{console.error("Chat WebSocket error:",w)})}function q(v){if(v.type==="message"||v.content){const y={id:crypto.randomUUID(),role:v.role||"assistant",content:v.content||"",timestamp:Date.now()};g(T,[...t(T),y]),z(),D()}}async function N(){if(!t(p))return;const v=t(u).trim();g(u,"");const y={id:crypto.randomUUID(),role:"user",content:v,timestamp:Date.now()};g(T,[...t(T),y]),z(),D(),g(B,!0);try{if(k&&k.readyState===WebSocket.OPEN)k.send(JSON.stringify({type:"chat",message:v,project_path:e()||process.cwd()}));else{const w=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:v,project_path:e()||process.cwd()})});if(!w.ok)throw new Error("Failed to send message");const l=await w.json();if(l.response){const m={id:crypto.randomUUID(),role:"assistant",content:l.response,timestamp:Date.now()};g(T,[...t(T),m]),z(),D()}}}catch(w){console.error("Error sending message:",w);const l={id:crypto.randomUUID(),role:"system",content:"Error: Failed to send message. Please try again.",timestamp:Date.now()};g(T,[...t(T),l]),z()}finally{g(B,!1)}}function R(v){v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),N())}function D(){t(C)&&requestAnimationFrame(()=>{wt(C,t(C).scrollTop=t(C).scrollHeight)})}function M(){g(x,!t(x))}function j(){if(!s().connected||!s().bot_username){g(h,!0),setTimeout(()=>{g(h,!1)},3e3);return}st()}function V(){try{const v=localStorage.getItem("chat_history");v&&g(T,JSON.parse(v))}catch(v){console.error("Error loading chat history:",v)}}function z(){try{localStorage.setItem("chat_history",JSON.stringify(t(T)))}catch(v){console.error("Error saving chat history:",v)}}function te(){g(T,[]),z()}function G(v){return new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}Me(()=>t(T),()=>{g(d,t(T).length>0)}),Me(()=>(t(u),t(B)),()=>{g(p,t(u).trim().length>0&&!t(B))}),yt(),Fe();var K=La(),ae=o(K);let ee;var ne=o(ae),le=i(o(ne),2),oe=o(le);{var S=v=>{var y=$a(),w=De(y);let l;var m=i(o(w),2);{var L=X=>{var de=Da(),pe=o(de,!0);r(de),Z(()=>U(pe,(s(),re(()=>s().unread_count)))),b(X,de)};A(m,X=>{s(),re(()=>s().unread_count>0)&&X(L)})}r(w);var Y=i(w,2);Z(X=>{l=J(w,1,"btn-icon svelte-191yngm",null,l,X),je(w,"title",t(x)?"Hide Telegram":"Show Telegram"),Y.disabled=(s(),re(()=>!s().connected||!s().bot_username)),je(Y,"title",(s(),re(()=>s().bot_username?`Launch @${s().bot_username} in Telegram`:"Configure Telegram in Settings")))},[()=>({active:t(x)})]),F("click",w,M),F("click",Y,j),b(v,y)};A(oe,v=>{s(),re(()=>s().connected)&&v(S)})}var O=i(oe,2);r(le),r(ne);var H=i(ne,2),fe=o(H);{var se=v=>{var y=Ia();b(v,y)},ie=v=>{var y=Ba();at(y,5,()=>t(T),w=>w.id,(w,l)=>{var m=Oa();let L;var Y=o(m),X=o(Y),de=o(X,!0);r(X);var pe=i(X,2),we=o(pe,!0);r(pe),r(Y);var ue=i(Y,2),Ce=o(ue,!0);r(ue),r(m),Z((Ee,he)=>{L=J(m,1,"message svelte-191yngm",null,L,Ee),U(de,(t(l),re(()=>t(l).role==="user"?"You":t(l).role==="assistant"?"Claude":"System"))),U(we,he),U(Ce,(t(l),re(()=>t(l).content)))},[()=>({user:t(l).role==="user",assistant:t(l).role==="assistant",system:t(l).role==="system"}),()=>(t(l),re(()=>G(t(l).timestamp)))]),b(w,m)}),r(y),b(v,y)};A(fe,v=>{t(d)?v(ie,!1):v(se)})}var ge=i(fe,2);{var ce=v=>{var y=Na();b(v,y)};A(ge,v=>{t(B)&&v(ce)})}r(H),kt(H,v=>g(C,v),()=>t(C));var Q=i(H,2),ve=o(Q);xt(ve);var me=i(ve,2);r(Q),r(ae);var be=i(ae,2);{var _=v=>{var y=Pa(),w=o(y);{let l=gt(()=>!t(x));qa(w,{get collapsed(){return t(l)}})}r(y),b(v,y)};A(be,v=>{t(x)&&v(_)})}var E=i(be,2);{var P=v=>{var y=Ma();b(v,y)};A(E,v=>{t(h)&&v(P)})}r(K),Z(v=>{ee=J(ae,1,"main-chat-panel svelte-191yngm",null,ee,v),O.disabled=!t(d),ve.disabled=t(B),me.disabled=!t(p)},[()=>({"with-telegram":t(x)})]),F("click",O,te),Ae(ve,()=>t(u),v=>g(u,v)),F("keypress",ve,R),F("click",me,N),b(a,K),Ue(),c()}var Aa=$('<div class="diff-container svelte-n31mvn"><div class="diff-header svelte-n31mvn"><h2 class="svelte-n31mvn">Diff Viewer</h2></div> <div class="diff-content svelte-n31mvn"><p class="placeholder-text svelte-n31mvn">Diff viewer coming soon...</p></div></div>');function Fa(a){var n=Aa();b(a,n)}var Wa=$('<div class="history-container svelte-1t4jzn8"><div class="history-header svelte-1t4jzn8"><h2 class="svelte-1t4jzn8">Conversation History</h2></div> <div class="history-content svelte-1t4jzn8"><p class="placeholder-text svelte-1t4jzn8">History viewer coming soon...</p></div></div>');function Ha(a){var n=Wa();b(a,n)}var Ua=$('<span class="spinner svelte-x4gxra"></span> Starting server...',1),za=sa(`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="svelte-x4gxra"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97
								9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002
								0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.654-.64.135-.954l11.566-4.458c.538-.196
								1.006.128.832.941z"></path></svg> Open in Telegram`,1),Ja=$('<div class="bot-info svelte-x4gxra"><span class="bot-username svelte-x4gxra"> </span> <button class="open-telegram-btn svelte-x4gxra"><!></button></div>'),Ra=$('<div class="bot-info svelte-x4gxra"><span class="status-note svelte-x4gxra">Bot not verified - click Test Connection to verify</span></div>'),Va=$('<div data-testid="telegram-status"> </div>'),Ka=$('<div class="test-result svelte-x4gxra"><h4 class="svelte-x4gxra">Bot Information:</h4> <ul class="svelte-x4gxra"><li class="svelte-x4gxra"><strong>Username:</strong> </li> <li class="svelte-x4gxra"><strong>Name:</strong> </li> <li class="svelte-x4gxra"><strong>ID:</strong> </li> <li class="svelte-x4gxra"><strong>Link:</strong> <a target="_blank" class="svelte-x4gxra"> </a></li></ul></div>'),Ya=$('<button class="btn btn-primary svelte-x4gxra" data-testid="telegram-test-button"> </button> <button class="btn btn-success svelte-x4gxra" data-testid="telegram-save-button"> </button>',1),Ga=$('<button class="btn btn-primary svelte-x4gxra" data-testid="telegram-test-button"> </button> <button class="btn btn-danger svelte-x4gxra" data-testid="telegram-disconnect-button">Disconnect</button>',1),Qa=$('<button class="btn btn-danger svelte-x4gxra" data-testid="telegram-disconnect-button">Disconnect</button>'),Xa=$('<div class="config-popup svelte-x4gxra" data-testid="telegram-config-popup">Enter a bot token in the configuration</div>'),Za=$(`<div class="telegram-settings svelte-x4gxra"><div class="settings-header svelte-x4gxra"><h2 class="svelte-x4gxra">Telegram Integration</h2> <p class="description svelte-x4gxra">Connect your Telegram bot to receive real-time notifications and interact with Claude Code
			from Telegram.</p></div> <div class="status-section svelte-x4gxra"><div><span class="status-dot svelte-x4gxra"></span> <span class="status-text svelte-x4gxra"><!></span></div> <!></div> <div class="config-section svelte-x4gxra"><h3 class="svelte-x4gxra">Configuration</h3> <div class="instructions svelte-x4gxra"><p class="svelte-x4gxra"><strong>Setup Instructions:</strong></p> <ol class="svelte-x4gxra"><li class="svelte-x4gxra">Open Telegram and search for <a href="https://t.me/BotFather" target="_blank" class="svelte-x4gxra">@BotFather</a></li> <li class="svelte-x4gxra">Send <code class="svelte-x4gxra">/newbot</code> command and follow the prompts</li> <li class="svelte-x4gxra">Copy your bot token (looks like: <code class="svelte-x4gxra">123456:ABC-DEF1234...</code>)</li> <li class="svelte-x4gxra">Paste the token below and click "Save Credentials"</li> <li class="svelte-x4gxra">Open your bot in Telegram and send a message to activate it</li></ol></div> <div class="form-group svelte-x4gxra"><label for="bot-token" class="svelte-x4gxra">Bot Token</label> <input id="bot-token" type="password" placeholder="123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11" class="token-input svelte-x4gxra"/> <span class="help-text svelte-x4gxra">Your Telegram bot token from @BotFather</span></div> <div class="form-group svelte-x4gxra"><label for="chat-id" class="svelte-x4gxra">Chat ID (Optional)</label> <input id="chat-id" type="text" placeholder="Auto-detected when you message the bot" class="chat-id-input svelte-x4gxra"/> <span class="help-text svelte-x4gxra">Leave empty for auto-detection</span></div> <!> <!> <div class="button-group svelte-x4gxra"><!></div></div> <!></div>`);function es(a,n){We(n,!1);const e=()=>Be(_e,"$telegramStore",s),[s,f]=ze();let c=W(""),d=W(""),p=W(""),T=W("info"),u=W(!1),B=W(!1),x=W(null),h=W(!1);He(async()=>{await Le()});async function C(){if(!t(c).trim()){N("Please enter a bot token","error");return}if(g(u,!0),N("Saving credentials...","info"),await fa(t(c),t(d).trim()||void 0)){N("Credentials saved. Testing connection...","success");const E=t(c);if(g(c,""),g(x,await dt(E)),t(x)&&!("error"in t(x)))N(`Connection successful! Bot: @${t(x).username} (${t(x).first_name})`,"success"),await Le();else{const P=t(x)&&"error"in t(x)?t(x).error:"Connection test failed";N(`Credentials saved, but ${P}`,"error"),g(x,null)}}else N("Failed to save credentials","error");g(u,!1)}async function k(){if(!t(c).trim()){N("Please enter a bot token","error");return}g(u,!0),N("Testing connection...","info"),g(x,await dt(t(c))),t(x)?"error"in t(x)?(N(t(x).error,"error"),g(x,null)):(N(`Connection successful! Bot: @${t(x).username} (${t(x).first_name})`,"success"),await Le()):(N("Connection failed. Please check your bot token.","error"),g(x,null)),g(u,!1)}function I(){ga(),g(c,""),g(d,""),g(x,null),N("Disconnected from Telegram","info")}async function q(){if(!e().connected||!e().bot_username){g(B,!0),window.setTimeout(()=>{g(B,!1)},3e3);return}g(h,!0);try{await st()}catch(_){console.error("Error opening Telegram:",_),N("Failed to open Telegram bot","error")}finally{g(h,!1)}}function N(_,E){g(p,_),g(T,E)}Fe();var R=Za(),D=i(o(R),2),M=o(D);let j;var V=i(o(M),2),z=o(V);{var te=_=>{var E=$e("Connected");b(_,E)},G=_=>{var E=Oe(),P=De(E);{var v=w=>{var l=$e("Credentials Configured");b(w,l)},y=w=>{var l=$e("Disconnected");b(w,l)};A(P,w=>{e().connected?w(v):w(y,!1)},!0)}b(_,E)};A(z,_=>{e().connected&&e().bot_username?_(te):_(G,!1)})}r(V),r(M);var K=i(M,2);{var ae=_=>{var E=Ja(),P=o(E),v=o(P);r(P);var y=i(P,2),w=o(y);{var l=L=>{var Y=Ua();Pe(),b(L,Y)},m=L=>{var Y=za();Pe(),b(L,Y)};A(w,L=>{t(h)?L(l):L(m,!1)})}r(y),r(E),Z(()=>{U(v,`@${e().bot_username??""}`),y.disabled=t(h),je(y,"title",t(h)?"Starting bot server...":"Open in Telegram")}),F("click",y,q),b(_,E)},ee=_=>{var E=Oe(),P=De(E);{var v=y=>{var w=Ra();b(y,w)};A(P,y=>{e().connected&&y(v)},!0)}b(_,E)};A(K,_=>{e().connected&&e().bot_username?_(ae):_(ee,!1)})}r(D);var ne=i(D,2),le=i(o(ne),4),oe=i(o(le),2);et(oe),Pe(2),r(le);var S=i(le,2),O=i(o(S),2);et(O),Pe(2),r(S);var H=i(S,2);{var fe=_=>{var E=Va(),P=o(E,!0);r(E),Z(()=>{J(E,1,`status-message ${t(T)??""}`,"svelte-x4gxra"),U(P,t(p))}),b(_,E)};A(H,_=>{t(p)&&_(fe)})}var se=i(H,2);{var ie=_=>{var E=Ka(),P=i(o(E),2),v=o(P),y=i(o(v));r(v);var w=i(v,2),l=i(o(w));r(w);var m=i(w,2),L=i(o(m));r(m);var Y=i(m,2),X=i(o(Y),2),de=o(X,!0);r(X),r(Y),r(P),r(E),Z(()=>{U(y,` @${t(x).username??""}`),U(l,` ${t(x).first_name??""}`),U(L,` ${t(x).id??""}`),je(X,"href",t(x).deep_link),U(de,t(x).deep_link)}),b(_,E)};A(se,_=>{t(x)&&_(ie)})}var ge=i(se,2),ce=o(ge);{var Q=_=>{var E=Ya(),P=De(E),v=o(P,!0);r(P);var y=i(P,2),w=o(y,!0);r(y),Z((l,m)=>{P.disabled=l,U(v,t(u)?"Testing...":"Test Connection"),y.disabled=m,U(w,t(u)?"Saving...":"Save Credentials")},[()=>t(u)||!t(c).trim(),()=>t(u)||!t(c).trim()]),F("click",P,k),F("click",y,C),b(_,E)},ve=_=>{var E=Oe(),P=De(E);{var v=w=>{var l=Ga(),m=De(l),L=o(m,!0);r(m);var Y=i(m,2);Z(X=>{m.disabled=X,U(L,t(u)?"Testing...":"Test Connection")},[()=>t(u)||!t(c).trim()]),F("click",m,k),F("click",Y,I),b(w,l)},y=w=>{var l=Qa();F("click",l,I),b(w,l)};A(P,w=>{e().bot_username?w(y,!1):w(v)},!0)}b(_,E)};A(ce,_=>{e().connected?_(ve,!1):_(Q)})}r(ge),r(ne);var me=i(ne,2);{var be=_=>{var E=Xa();b(_,E)};A(me,_=>{t(B)&&_(be)})}r(R),Z(_=>{j=J(M,1,"status-indicator svelte-x4gxra",null,j,_),oe.disabled=t(u)||e().connected,O.disabled=t(u)||e().connected},[()=>({connected:e().connected})]),Ae(oe,()=>t(c),_=>g(c,_)),Ae(O,()=>t(d),_=>g(d,_)),b(a,R),Ue(),f()}var ts=$('<div class="general-settings svelte-anx9w7"><h2 class="svelte-anx9w7">General Settings</h2> <p class="placeholder-text svelte-anx9w7">General settings coming soon...</p></div>'),as=$('<div class="settings-container svelte-anx9w7"><div class="settings-sidebar svelte-anx9w7"><button>General</button> <button>Telegram</button></div> <div class="settings-content svelte-anx9w7"><!></div></div>');function ss(a){let n=W("telegram");var e=as(),s=o(e),f=o(s);let c;var d=i(f,2);let p;r(s);var T=i(s,2),u=o(T);{var B=h=>{var C=ts();b(h,C)},x=h=>{var C=Oe(),k=De(C);{var I=q=>{es(q,{})};A(k,q=>{t(n)==="telegram"&&q(I)},!0)}b(h,C)};A(u,h=>{t(n)==="general"?h(B):h(x,!1)})}r(T),r(e),Z((h,C)=>{c=J(f,1,"settings-tab svelte-anx9w7",null,c,h),p=J(d,1,"settings-tab svelte-anx9w7",null,p,C)},[()=>({active:t(n)==="general"}),()=>({active:t(n)==="telegram"})]),F("click",f,()=>g(n,"general")),F("click",d,()=>g(n,"telegram")),b(a,e)}var rs=$('<div class="error-message svelte-18c3yff"><span> </span> <button class="close-error svelte-18c3yff">Ã—</button></div>'),ns=$('<div class="loading-state svelte-18c3yff"><div class="spinner svelte-18c3yff"></div> <p>Loading backlog tasks...</p></div>'),os=$('<div class="empty-state svelte-18c3yff"><p class="svelte-18c3yff">No tasks found</p> <small class="svelte-18c3yff"><!></small></div>'),ls=$("<span> </span>"),is=$('<p class="task-description svelte-18c3yff"> </p>'),cs=$('<div class="task-card svelte-18c3yff"><div class="task-header svelte-18c3yff"><div class="task-title-section svelte-18c3yff"><span> </span> <h3 class="task-title svelte-18c3yff"> </h3></div> <div class="task-meta svelte-18c3yff"><!> <span class="task-id svelte-18c3yff"> </span></div></div> <!></div>'),vs=$('<div class="tasks-list svelte-18c3yff"></div>'),ds=$('<div class="backlog-container svelte-18c3yff"><div class="backlog-header svelte-18c3yff"><h2 class="svelte-18c3yff">Project Backlog</h2> <div class="header-stats svelte-18c3yff"><div class="stat svelte-18c3yff"><span class="stat-label svelte-18c3yff">To Do:</span> <span class="stat-value svelte-18c3yff"> </span></div> <div class="stat svelte-18c3yff"><span class="stat-label svelte-18c3yff">In Progress:</span> <span class="stat-value svelte-18c3yff"> </span></div> <div class="stat svelte-18c3yff"><span class="stat-label svelte-18c3yff">Done:</span> <span class="stat-value svelte-18c3yff"> </span></div></div></div> <div class="backlog-controls svelte-18c3yff"><div class="search-box svelte-18c3yff"><input type="text" placeholder="Search tasks..." class="search-input svelte-18c3yff"/></div> <div class="filter-buttons svelte-18c3yff"><button>All</button> <button>To Do</button> <button>In Progress</button> <button>Done</button></div> <button class="refresh-button svelte-18c3yff" title="Refresh backlog"><!></button></div> <!> <div class="tasks-container svelte-18c3yff"><!></div> <div class="backlog-info svelte-18c3yff"><p class="svelte-18c3yff">ðŸ’¡ <strong>Tip:</strong> Backlog.md is integrated with AI agents. Use <code class="svelte-18c3yff">clud</code> to manage tasks from the terminal.</p></div></div>');function us(a,n){We(n,!1);let e=W([]),s=W(!1),f=W(null),c=W("all"),d=W("");He(async()=>{await p()});async function p(){g(s,!0),g(f,null);try{const l=await fetch("/api/backlog");if(!l.ok)throw new Error(`Failed to load backlog: ${l.statusText}`);const m=await l.json();g(e,Array.isArray(m)?m:m.tasks||[])}catch(l){g(f,l instanceof Error?l.message:"Failed to load backlog tasks"),g(e,[])}g(s,!1)}function T(){return t(e).filter(l=>{const m=t(c)==="all"||l.status===t(c),L=t(d)===""||l.title.toLowerCase().includes(t(d).toLowerCase())||(l.description?.toLowerCase().includes(t(d).toLowerCase())??!1);return m&&L})}function u(l){switch(l){case"todo":return"status-todo";case"in_progress":return"status-in-progress";case"done":return"status-done";default:return"status-todo"}}function B(l){switch(l){case"todo":return"To Do";case"in_progress":return"In Progress";case"done":return"Done";default:return l}}function x(l){return l?l.charAt(0).toUpperCase()+l.slice(1):""}const h=T(),C=t(e).filter(l=>l.status==="todo").length,k=t(e).filter(l=>l.status==="in_progress").length,I=t(e).filter(l=>l.status==="done").length;Fe();var q=ds(),N=o(q),R=i(o(N),2),D=o(R),M=i(o(D),2),j=o(M,!0);r(M),r(D);var V=i(D,2),z=i(o(V),2),te=o(z,!0);r(z),r(V);var G=i(V,2),K=i(o(G),2),ae=o(K,!0);r(K),r(G),r(R),r(N);var ee=i(N,2),ne=o(ee),le=o(ne);et(le),r(ne);var oe=i(ne,2),S=o(oe);let O;var H=i(S,2);let fe;var se=i(H,2);let ie;var ge=i(se,2);let ce;r(oe);var Q=i(oe,2),ve=o(Q);{var me=l=>{var m=$e("âŸ³");b(l,m)},be=l=>{var m=$e("â†»");b(l,m)};A(ve,l=>{t(s)?l(me):l(be,!1)})}r(Q),r(ee);var _=i(ee,2);{var E=l=>{var m=rs(),L=o(m),Y=o(L);r(L);var X=i(L,2);r(m),Z(()=>U(Y,`âš ï¸ ${t(f)??""}`)),F("click",X,()=>g(f,null)),b(l,m)};A(_,l=>{t(f)&&l(E)})}var P=i(_,2),v=o(P);{var y=l=>{var m=ns();b(l,m)},w=l=>{var m=Oe(),L=De(m);{var Y=de=>{var pe=os(),we=i(o(pe),2),ue=o(we);{var Ce=he=>{var xe=$e("Your backlog is empty. Check that Backlog.md is initialized in your project.");b(he,xe)},Ee=he=>{var xe=$e("No tasks match the current filter.");b(he,xe)};A(ue,he=>{t(e).length===0?he(Ce):he(Ee,!1)})}r(we),r(pe),b(de,pe)},X=de=>{var pe=vs();at(pe,5,()=>h,we=>we.id,(we,ue)=>{var Ce=cs(),Ee=o(Ce),he=o(Ee),xe=o(he),Je=o(xe,!0);r(xe);var rt=i(xe,2),Et=o(rt,!0);r(rt),r(he);var nt=i(he,2),ot=o(nt);{var qt=qe=>{var Te=ls(),Re=o(Te,!0);r(Te),Z(Ot=>{J(Te,1,`priority-badge priority-${t(ue).priority}`,"svelte-18c3yff"),U(Re,Ot)},[()=>x(t(ue).priority)]),b(qe,Te)};A(ot,qe=>{t(ue).priority&&qe(qt)})}var lt=i(ot,2),Dt=o(lt);r(lt),r(nt),r(Ee);var $t=i(Ee,2);{var It=qe=>{var Te=is(),Re=o(Te,!0);r(Te),Z(()=>U(Re,t(ue).description)),b(qe,Te)};A($t,qe=>{t(ue).description&&qe(It)})}r(Ce),Z((qe,Te)=>{J(xe,1,qe,"svelte-18c3yff"),U(Je,Te),U(Et,t(ue).title),U(Dt,`#${t(ue).id??""}`)},[()=>`status-badge ${u(t(ue).status)}`,()=>B(t(ue).status)]),b(we,Ce)}),r(pe),b(de,pe)};A(L,de=>{h.length===0?de(Y):de(X,!1)},!0)}b(l,m)};A(v,l=>{t(s)?l(y):l(w,!1)})}r(P),Pe(2),r(q),Z((l,m,L,Y)=>{U(j,C),U(te,k),U(ae,I),O=J(S,1,"filter-button svelte-18c3yff",null,O,l),fe=J(H,1,"filter-button svelte-18c3yff",null,fe,m),ie=J(se,1,"filter-button svelte-18c3yff",null,ie,L),ce=J(ge,1,"filter-button svelte-18c3yff",null,ce,Y),Q.disabled=t(s)},[()=>({active:t(c)==="all"}),()=>({active:t(c)==="todo"}),()=>({active:t(c)==="in_progress"}),()=>({active:t(c)==="done"})]),Ae(le,()=>t(d),l=>g(d,l)),F("click",S,()=>g(c,"all")),F("click",H,()=>g(c,"todo")),F("click",se,()=>g(c,"in_progress")),F("click",ge,()=>g(c,"done")),F("click",Q,p),b(a,q),Ue()}var fs=$('<div class="app-container svelte-1uha8ag"><header class="app-header svelte-1uha8ag"><div class="header-left svelte-1uha8ag"><h1 class="app-title svelte-1uha8ag">Claude Code</h1> <div class="project-selector svelte-1uha8ag"><span class="project-label svelte-1uha8ag">Project:</span> <span class="project-name svelte-1uha8ag"> </span></div></div> <div class="header-right svelte-1uha8ag"><button class="theme-toggle svelte-1uha8ag" title="Toggle Theme"><span class="theme-icon svelte-1uha8ag"> </span></button></div></header> <nav class="tab-nav svelte-1uha8ag"><button>Chat</button> <button>Terminal</button> <button>Backlog</button> <button>Diff</button> <button>History</button> <button>Settings</button></nav> <main class="tab-content svelte-1uha8ag"><div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div></main></div>');function Ts(a,n){We(n,!1);const e=()=>Be(na,"$themeIcon",f),s=()=>Be(ra,"$activeTab",f),[f,c]=ze();let d=W("");He(async()=>{try{const L=await(await fetch("/api/cwd")).json();g(d,L.cwd),Tt.set(t(d))}catch(m){console.error("Error fetching current directory:",m),g(d,"Current Directory")}});function p(m){la(m)}function T(m){if(!m)return"Loading...";const L=m.split(/[\\/]/).filter(Boolean);return L[L.length-1]||m}Fe();var u=fs(),B=o(u),x=o(B),h=i(o(x),2),C=i(o(h),2),k=o(C,!0);r(C),r(h),r(x);var I=i(x,2),q=o(I),N=o(q),R=o(N,!0);r(N),r(q),r(I),r(B);var D=i(B,2),M=o(D);let j;var V=i(M,2);let z;var te=i(V,2);let G;var K=i(te,2);let ae;var ee=i(K,2);let ne;var le=i(ee,2);let oe;r(D);var S=i(D,2),O=o(S);let H;var fe=o(O);ja(fe,{}),r(O);var se=i(O,2);let ie;var ge=o(se);ca(ge,{}),r(se);var ce=i(se,2);let Q;var ve=o(ce);us(ve,{}),r(ce);var me=i(ce,2);let be;var _=o(me);Fa(_),r(me);var E=i(me,2);let P;var v=o(E);Ha(v),r(E);var y=i(E,2);let w;var l=o(y);ss(l),r(y),r(S),r(u),Z((m,L,Y,X,de,pe,we,ue,Ce,Ee,he,xe,Je)=>{je(C,"title",t(d)),U(k,m),U(R,e()),j=J(M,1,"tab-button svelte-1uha8ag",null,j,L),z=J(V,1,"tab-button svelte-1uha8ag",null,z,Y),G=J(te,1,"tab-button svelte-1uha8ag",null,G,X),ae=J(K,1,"tab-button svelte-1uha8ag",null,ae,de),ne=J(ee,1,"tab-button svelte-1uha8ag",null,ne,pe),oe=J(le,1,"tab-button svelte-1uha8ag",null,oe,we),H=J(O,1,"tab-panel svelte-1uha8ag",null,H,ue),ie=J(se,1,"tab-panel svelte-1uha8ag",null,ie,Ce),Q=J(ce,1,"tab-panel svelte-1uha8ag",null,Q,Ee),be=J(me,1,"tab-panel svelte-1uha8ag",null,be,he),P=J(E,1,"tab-panel svelte-1uha8ag",null,P,xe),w=J(y,1,"tab-panel svelte-1uha8ag",null,w,Je)},[()=>T(t(d)),()=>({active:s()==="chat"}),()=>({active:s()==="terminal"}),()=>({active:s()==="backlog"}),()=>({active:s()==="diff"}),()=>({active:s()==="history"}),()=>({active:s()==="settings"}),()=>({active:s()==="chat"}),()=>({active:s()==="terminal"}),()=>({active:s()==="backlog"}),()=>({active:s()==="diff"}),()=>({active:s()==="history"}),()=>({active:s()==="settings"})]),F("click",q,function(...m){oa?.apply(this,m)}),F("click",M,()=>p("chat")),F("click",V,()=>p("terminal")),F("click",te,()=>p("backlog")),F("click",K,()=>p("diff")),F("click",ee,()=>p("history")),F("click",le,()=>p("settings")),b(a,u),Ue(),c()}export{Ts as component};
