Metadata-Version: 2.4
Name: sienge-ecbiesek-mcp
Version: 3.1.0
Summary: ğŸ—ï¸ Model Context Protocol (MCP) server for Sienge API integration - Brazilian construction ERP system. Connect Claude AI to Sienge with 60+ powerful tools including smart validation, error parsing, complete invoice pipeline, and advanced caching for comprehensive business management.
Author-email: ECBIESEK <ti@ecbiesek.com>
License-Expression: MIT
Project-URL: Homepage, https://github.com/INOTECH-ecbiesek/Sienge-MCP
Project-URL: Documentation, https://github.com/INOTECH-ecbiesek/Sienge-MCP#readme
Project-URL: Repository, https://github.com/INOTECH-ecbiesek/Sienge-MCP.git
Project-URL: Issues, https://github.com/INOTECH-ecbiesek/Sienge-MCP/issues
Project-URL: Bug Reports, https://github.com/INOTECH-ecbiesek/Sienge-MCP/issues
Project-URL: Source Code, https://github.com/INOTECH-ecbiesek/Sienge-MCP
Project-URL: PyPI, https://pypi.org/project/sienge-ecbiesek-mcp/
Keywords: sienge,mcp,model-context-protocol,claude,api,construction,erp,brazil,ecbiesek,fastmcp,ai-integration
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: End Users/Desktop
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Office/Business :: Financial
Classifier: Topic :: Scientific/Engineering :: Interface Engine/Protocol Translator
Classifier: Topic :: Internet :: WWW/HTTP :: Dynamic Content
Classifier: Environment :: Console
Classifier: Framework :: FastAPI
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastmcp>=2.12.3
Requires-Dist: httpx>=0.25.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: supabase>=2.0.0
Provides-Extra: postgres
Requires-Dist: psycopg[binary]>=3.0.0; extra == "postgres"
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: flake8>=6.0.0; extra == "dev"
Requires-Dist: build>=0.10.0; extra == "dev"
Requires-Dist: twine>=4.0.0; extra == "dev"
Requires-Dist: toml>=0.10.2; extra == "dev"
Dynamic: license-file

# ğŸ—ï¸ SIENGE MCP Server

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![PyPI version](https://badge.fury.io/py/sienge-ecbiesek-mcp.svg)](https://badge.fury.io/py/sienge-ecbiesek-mcp)
[![Status: Production](https://img.shields.io/badge/status-production-green.svg)](https://pypi.org/project/sienge-ecbiesek-mcp/)

**Model Context Protocol (MCP) server** para integraÃ§Ã£o com a API do Sienge, o principal sistema ERP de gestÃ£o de construÃ§Ã£o do Brasil. Conecte Claude AI ao Sienge com **60+ ferramentas poderosas** incluindo validaÃ§Ã£o inteligente, parser de erros, pipeline completo de notas fiscais e cache avanÃ§ado.

## ğŸ“‹ Ãndice

- [Sobre o Projeto](#-sobre-o-projeto)
- [CaracterÃ­sticas Principais](#-caracterÃ­sticas-principais)
- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o)
- [ConfiguraÃ§Ã£o](#-configuraÃ§Ã£o)
- [Uso](#-uso)
- [Ferramentas DisponÃ­veis](#-ferramentas-disponÃ­veis)
- [Arquitetura](#-arquitetura)
- [Deploy](#-deploy)
- [Contribuindo](#-contribuindo)
- [LicenÃ§a](#-licenÃ§a)

## ğŸ¯ Sobre o Projeto

O **SIENGE MCP Server** Ã© um servidor Model Context Protocol que permite integraÃ§Ã£o completa entre **Claude AI** e o sistema **Sienge ERP**, facilitando a gestÃ£o de dados de construÃ§Ã£o atravÃ©s de inteligÃªncia artificial.

### PÃºblico-Alvo

- âœ… Empresas de construÃ§Ã£o que utilizam Sienge ERP
- âœ… Desenvolvedores construindo integraÃ§Ãµes com IA
- âœ… UsuÃ¡rios do Claude Desktop buscando conectividade com Sienge
- âœ… Profissionais da indÃºstria da construÃ§Ã£o brasileira

### Foco Regional

Especificamente projetado para **empresas brasileiras de construÃ§Ã£o** que utilizam o sistema ERP Sienge, com documentaÃ§Ã£o em portuguÃªs e funcionalidades localizadas.

## ğŸš€ CaracterÃ­sticas Principais

### âœ¨ Funcionalidades Core

- ğŸ”Œ **60+ Ferramentas** - Acesso completo Ã  API do Sienge
- ğŸ” **AutenticaÃ§Ã£o FlexÃ­vel** - Suporta Bearer Token e Basic Auth
- ğŸ§  **Parser de Erros Inteligente** - Identifica e sugere correÃ§Ãµes para 14+ tipos de erros
- âš¡ **Cache AvanÃ§ado** - Sistema de cache in-memory com TTL configurÃ¡vel
- ğŸ”„ **Retry AutomÃ¡tico** - Retry com backoff exponencial para requisiÃ§Ãµes
- ğŸ“Š **Pipeline Completo** - Processamento completo de notas fiscais de compra
- ğŸ” **Busca Universal** - Busca em mÃºltiplas entidades simultaneamente
- ğŸ’¾ **IntegraÃ§Ã£o Supabase** - Acesso direto a dados sincronizados

### ğŸ“¦ MÃ³dulos DisponÃ­veis

- **Utilities** - Testes de conexÃ£o e busca universal
- **Master Data** - Clientes, fornecedores, projetos, centros de custo
- **Purchases** - Pedidos de compra, requisiÃ§Ãµes, notas fiscais
- **Accounts Payable** - TÃ­tulos a pagar, parcelas, anexos
- **Financial** - Contas a receber, tÃ­tulos, anÃ¡lises financeiras
- **Inventory** - Estoque, inventÃ¡rio, reservas
- **Supabase Tools** - Queries diretas no banco sincronizado

## ğŸ“¥ InstalaÃ§Ã£o

### PrÃ©-requisitos

- Python 3.10 ou superior
- Conta Sienge com acesso Ã  API
- Claude Desktop (para uso com Claude AI)

### InstalaÃ§Ã£o via PyPI (Recomendado)

```bash
pip install sienge-ecbiesek-mcp
```

### InstalaÃ§Ã£o via pipx (Isolada)

```bash
pipx install sienge-ecbiesek-mcp
```

### InstalaÃ§Ã£o do CÃ³digo Fonte

```bash
# Clonar repositÃ³rio
git clone https://github.com/INOTECH-ecbiesek/Sienge-MCP.git
cd Sienge-MCP

# Criar ambiente virtual
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# ou
.venv\Scripts\activate  # Windows

# Instalar dependÃªncias
pip install -r requirements.txt

# Instalar em modo desenvolvimento
pip install -e .
```

## âš™ï¸ ConfiguraÃ§Ã£o

### 1. VariÃ¡veis de Ambiente

Crie um arquivo `.env` na raiz do projeto ou configure as variÃ¡veis de ambiente:

```env
# ObrigatÃ³rias (escolha uma opÃ§Ã£o de autenticaÃ§Ã£o)

# OpÃ§Ã£o 1: Bearer Token (Recomendado)
SIENGE_API_KEY=sua_api_key_aqui

# OpÃ§Ã£o 2: Basic Auth
SIENGE_USERNAME=seu_usuario
SIENGE_PASSWORD=sua_senha
SIENGE_SUBDOMAIN=sua_empresa

# Opcionais
SIENGE_BASE_URL=https://api.sienge.com.br
REQUEST_TIMEOUT=30

# IntegraÃ§Ã£o Supabase (Opcional)
SUPABASE_URL=https://seu-projeto.supabase.co
SUPABASE_SERVICE_ROLE_KEY=sua_service_role_key
```

### 2. ConfiguraÃ§Ã£o Claude Desktop

Adicione ao arquivo de configuraÃ§Ã£o do Claude Desktop (`claude_desktop_config.json`):

**Windows:**
```
%APPDATA%\Claude\claude_desktop_config.json
```

**macOS:**
```
~/Library/Application Support/Claude/claude_desktop_config.json
```

**Linux:**
```
~/.config/Claude/claude_desktop_config.json
```

```json
{
  "mcpServers": {
    "sienge": {
      "command": "sienge-ecbiesek-mcp",
      "env": {
        "SIENGE_API_KEY": "sua_api_key_aqui",
        "SIENGE_SUBDOMAIN": "sua_empresa",
        "SIENGE_USERNAME": "seu_usuario",
        "SIENGE_PASSWORD": "sua_senha"
      }
    }
  }
}
```

### 3. Testar ConexÃ£o

ApÃ³s configurar, reinicie o Claude Desktop e teste a conexÃ£o:

```
Teste a conexÃ£o com a API do Sienge
```

## ğŸ’» Uso

### Uso BÃ¡sico

Uma vez configurado, vocÃª pode usar as ferramentas diretamente no Claude:

```
Busque todos os clientes cadastrados no Sienge
```

```
Crie uma nota fiscal de compra para o pedido de compra 12345
```

```
Liste todos os projetos/empreendimentos ativos
```

### Exemplos de Uso

#### Buscar Clientes

```
Busque clientes com nome contendo "Construtora"
```

#### Criar Nota Fiscal

```
Crie uma nota fiscal de compra:
- NÃºmero: 123456
- Fornecedor: ID 100
- Empresa: ID 1
- Data de movimento: 2025-01-15
- Data de emissÃ£o: 2025-01-15
```

#### Buscar TÃ­tulos a Pagar

```
Liste todos os tÃ­tulos a pagar do mÃªs de janeiro de 2025
```

## ğŸ› ï¸ Ferramentas DisponÃ­veis

### ğŸ”§ Utilities

- `test_sienge_connection` - Testa conexÃ£o com a API do Sienge
- `list_sienge_entities` - Lista entidades disponÃ­veis
- `search_sienge_data` - Busca universal em mÃºltiplas entidades

### ğŸ‘¥ Master Data

- `get_sienge_customers` - Busca clientes
- `get_sienge_customer_types` - Tipos de cliente
- `get_sienge_creditors` - Busca fornecedores/credores
- `get_sienge_projects` - Lista projetos/empreendimentos
- `get_sienge_cost_centers` - Centros de custo
- `get_sienge_project_units` - Unidades de empreendimento
- `get_sienge_payment_categories` - Categorias de plano financeiro

### ğŸ›’ Purchases

- `get_sienge_purchase_orders` - Busca pedidos de compra
- `get_sienge_purchase_order_items` - Itens de pedido de compra
- `get_sienge_purchase_requests` - RequisiÃ§Ãµes de compra
- `get_sienge_purchase_invoices` - Notas fiscais de compra
- `create_sienge_purchase_invoice` - Cria nota fiscal
- `add_items_to_purchase_invoice` - Adiciona itens Ã  NF
- `validate_purchase_order_company` - Valida empresa do pedido
- `process_purchase_invoice_pipeline` - Pipeline completo de NF

### ğŸ’° Accounts Payable

- `get_sienge_bills` - Busca tÃ­tulos a pagar
- `ap_list_installments` - Lista parcelas de um tÃ­tulo
- `ap_update_installment` - Atualiza uma parcela especÃ­fica do tÃ­tulo
- `ap_update_auto_bill_installments` - Atualiza parcelas automÃ¡ticas
- `ap_patch_bill` - Atualiza campos do tÃ­tulo
- `ap_attach_bill` - Anexa arquivo ao tÃ­tulo
- `ap_finalize_bill` - Orquestrador: PATCH + anexo + auditoria
- `ap_audit_bill_completeness` - Audita completude do tÃ­tulo

### ğŸ“Š Financial

- `get_sienge_accounts_receivable` - Contas a receber
- `get_sienge_bills` - TÃ­tulos a pagar
- `search_sienge_financial_data` - Busca avanÃ§ada em dados financeiros
- `get_sienge_dashboard_summary` - Dashboard com resumo completo

### ğŸ“¦ Inventory

- `get_sienge_stock_inventory` - InventÃ¡rio de estoque
- `get_sienge_stock_reservations` - Reservas de estoque

### ğŸ—„ï¸ Supabase Tools

- `query_supabase_database` - Queries diretas no Supabase
- `get_supabase_table_info` - InformaÃ§Ãµes de tabelas
- `search_supabase_data` - Busca universal no Supabase

## ğŸ›ï¸ Arquitetura

### Estrutura do Projeto

```
Sienge-MCP/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ sienge_mcp/
â”‚       â”œâ”€â”€ server.py          # Core: FastMCP, autenticaÃ§Ã£o, cache
â”‚       â”œâ”€â”€ metadata.py        # Metadados do MCP
â”‚       â”œâ”€â”€ tools/             # MÃ³dulos especializados
â”‚       â”‚   â”œâ”€â”€ utilities.py   # Testes e busca universal
â”‚       â”‚   â”œâ”€â”€ master_data.py # Dados mestres
â”‚       â”‚   â”œâ”€â”€ purchases.py   # Compras e notas fiscais
â”‚       â”‚   â”œâ”€â”€ accounts_payable.py  # Contas a pagar
â”‚       â”‚   â”œâ”€â”€ financial.py   # Financeiro
â”‚       â”‚   â”œâ”€â”€ inventory.py   # Estoque
â”‚       â”‚   â””â”€â”€ supabase_tools.py  # IntegraÃ§Ã£o Supabase
â”‚       â””â”€â”€ utils/
â”‚           â””â”€â”€ logger.py      # Sistema de logging
â”œâ”€â”€ app.py                     # Entry point para Railway
â”œâ”€â”€ Dockerfile                 # Container para deploy
â”œâ”€â”€ pyproject.toml            # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ requirements.txt          # DependÃªncias
â””â”€â”€ README.md                 # Este arquivo
```

### CaracterÃ­sticas TÃ©cnicas

- **Framework:** FastMCP 2.12.3+
- **HTTP Client:** httpx (async)
- **ValidaÃ§Ã£o:** Pydantic 2.0+
- **Cache:** In-memory com TTL configurÃ¡vel
- **Retry:** Exponential backoff (5 tentativas)
- **Error Handling:** Parser inteligente com sugestÃµes contextuais

## ğŸš¢ Deploy

### Railway

O projeto inclui configuraÃ§Ã£o para deploy no Railway:

```bash
# O Railway detecta automaticamente o Dockerfile
# Configure as variÃ¡veis de ambiente no dashboard do Railway
```

**VariÃ¡veis de Ambiente no Railway:**
- `SIENGE_API_KEY` ou `SIENGE_USERNAME` + `SIENGE_PASSWORD` + `SIENGE_SUBDOMAIN`
- `PORT` (definido automaticamente pelo Railway)

### Docker

```bash
# Build
docker build -t sienge-mcp .

# Run
docker run -p 8000:8000 \
  -e SIENGE_API_KEY=sua_key \
  -e SIENGE_SUBDOMAIN=sua_empresa \
  sienge-mcp
```

## ğŸ¤ Contribuindo

ContribuiÃ§Ãµes sÃ£o bem-vindas! Por favor:

1. Fork o projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

### PadrÃµes de CÃ³digo

Este projeto segue padrÃµes de qualidade de cÃ³digo:

- âœ… **Flake8** para verificaÃ§Ã£o de linting
- âœ… **Black** para formataÃ§Ã£o de cÃ³digo
- âœ… **Pydantic** para validaÃ§Ã£o de dados
- âœ… Type hints em todas as funÃ§Ãµes

### Desenvolvimento

```bash
# Instalar dependÃªncias de desenvolvimento
pip install -e ".[dev]"

# Executar testes
pytest

# Formatar cÃ³digo
black src/

# Verificar lint com flake8
flake8 src/ --config=.flake8

# Verificar lint com estatÃ­sticas
flake8 src/ --config=.flake8 --statistics
```

#### ConfiguraÃ§Ã£o do Flake8

O projeto utiliza **flake8** para verificaÃ§Ã£o de qualidade de cÃ³digo. A configuraÃ§Ã£o estÃ¡ em `.flake8`:

- **Max line length:** 127 caracteres
- **Max complexity:** 15
- **Ignorados:** E203, E501, W503, C901
- **ExcluÃ­dos:** `__pycache__`, `build`, `dist`, `.venv`, `*.egg-info`

## ğŸ“ LicenÃ§a

Este projeto estÃ¡ licenciado sob a LicenÃ§a MIT - veja o arquivo [LICENSE](LICENSE) para detalhes.

## ğŸ“ Suporte

- **Issues:** [GitHub Issues](https://github.com/INOTECH-ecbiesek/Sienge-MCP/issues)
- **Email:** ti@ecbiesek.com
- **DocumentaÃ§Ã£o:** [GitHub Wiki](https://github.com/INOTECH-ecbiesek/Sienge-MCP/wiki)

## ğŸ”— Links Ãšteis

- [PyPI Package](https://pypi.org/project/sienge-ecbiesek-mcp/)
- [Sienge API Documentation](https://api.sienge.com.br)
- [Model Context Protocol](https://modelcontextprotocol.io)
- [Claude Desktop](https://claude.ai/download)

## ğŸ“ˆ Status do Projeto

- âœ… **Production Ready** (v2.1.0)
- âœ… **Active Development**
- âœ… **Published on PyPI**
- âœ… **Full Documentation**
- âœ… **60+ Tools Available**
- âœ… **Supabase Integration**
- âœ… **Railway Deployment Ready**

---

**Desenvolvido com â¤ï¸ por [ECBIESEK](https://github.com/INOTECH-ecbiesek)**
