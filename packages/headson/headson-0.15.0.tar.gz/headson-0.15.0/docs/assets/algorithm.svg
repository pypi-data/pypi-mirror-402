<svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 597.039px; background-color: transparent;" viewBox="-8 -8 597.0390625 811" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#my-svg{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,'Apple Color Emoji','Segoe UI Emoji',sans-serif;font-size:14px;fill:#000000;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:2px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#666;stroke:#666;}#my-svg .marker.cross{stroke:#666;}#my-svg svg{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,'Apple Color Emoji','Segoe UI Emoji',sans-serif;font-size:14px;}#my-svg .label{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,'Apple Color Emoji','Segoe UI Emoji',sans-serif;color:#000000;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span,#my-svg p{color:#333;}#my-svg .label text,#my-svg span,#my-svg p{fill:#000000;color:#000000;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#eee;stroke:#999;stroke-width:1px;}#my-svg .flowchart-label text{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .node .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#666;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#666;fill:none;}#my-svg .edgeLabel{background-color:white;text-align:center;}#my-svg .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#my-svg .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#my-svg .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span,#my-svg p{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,'Apple Color Emoji','Segoe UI Emoji',sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#my-svg .des&gt;*{fill:#eaf2ff!important;stroke:#3b82f6!important;stroke-width:1px!important;color:#0f172a!important;}#my-svg .des span{fill:#eaf2ff!important;stroke:#3b82f6!important;stroke-width:1px!important;color:#0f172a!important;}#my-svg .des tspan{fill:#0f172a!important;}#my-svg .prio&gt;*{fill:#ecfdf5!important;stroke:#10b981!important;stroke-width:1px!important;color:#064e3b!important;}#my-svg .prio span{fill:#ecfdf5!important;stroke:#10b981!important;stroke-width:1px!important;color:#064e3b!important;}#my-svg .prio tspan{fill:#064e3b!important;}#my-svg .ser&gt;*{fill:#fff1f2!important;stroke:#f43f5e!important;stroke-width:1px!important;color:#7f1d1d!important;}#my-svg .ser span{fill:#fff1f2!important;stroke:#f43f5e!important;stroke-width:1px!important;color:#7f1d1d!important;}#my-svg .ser tspan{fill:#7f1d1d!important;}</style><g><marker id="my-svg_flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="6" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"><g class="cluster default flowchart-label" id="Serialization"><rect style="" rx="0" ry="0" x="0" y="442" width="231.734375" height="353"/></g><g class="cluster default flowchart-label" id="Prioritization"><rect style="" rx="0" ry="0" x="251.734375" y="442" width="229.625" height="214"/></g><g class="cluster default flowchart-label" id="Deserialization"><rect style="" rx="0" ry="0" x="197.60546875" y="0" width="383.43359375" height="378"/></g></g><g class="edgePaths"><path d="M335.473,75L326.746,81.917C318.019,88.833,300.564,102.667,291.837,121.667C283.109,140.667,283.109,164.833,283.109,187.417C283.109,210,283.109,231,289.147,246.285C295.184,261.569,307.258,271.139,313.295,275.923L319.333,280.708" id="L-A-C-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-C" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M389.73,75L398.457,81.917C407.184,88.833,424.639,102.667,433.366,115.617C442.094,128.567,442.094,140.633,442.094,146.667L442.094,152.7" id="L-A-D-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-D" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M442.094,220L442.094,225.333C442.094,230.667,442.094,241.333,436.057,251.451C430.019,261.569,417.945,271.139,411.908,275.923L405.87,280.708" id="L-D-C-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-D LE-C" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M362.602,346L362.602,351.333C362.602,356.667,362.602,367.333,362.602,378C362.602,388.667,362.602,399.333,362.602,410C362.602,420.667,362.602,431.333,362.602,441.117C362.602,450.9,362.602,459.8,362.602,464.25L362.602,468.7" id="L-C-E-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-E" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M362.602,517L362.602,522.333C362.602,527.667,362.602,538.333,362.93,548.119C363.258,557.905,363.915,566.81,364.243,571.262L364.572,575.714" id="L-E-F-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-E LE-F" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M283.734,581.462L262.438,576.052C241.141,570.641,198.547,559.821,173.784,549.784C149.02,539.747,142.087,530.494,138.621,525.868L135.155,521.241" id="L-F-G-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-F LE-G" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M99.758,517L95.762,522.333C91.766,527.667,83.773,538.333,113.567,549.884C143.361,561.435,210.942,573.869,244.732,580.086L278.522,586.304" id="L-G-F-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-F" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M366.547,624L366.547,629.333C366.547,634.667,366.547,645.333,324.767,656C282.987,666.667,199.427,677.333,157.647,687.117C115.867,696.9,115.867,705.8,115.867,710.25L115.867,714.7" id="L-F-H-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-F LE-H" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(283.109375, 189)"><g class="label" transform="translate(-20.0390625, -9.5)"><foreignObject width="40.078125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Single</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(442.09375, 116.5)"><g class="label" transform="translate(-26.875, -9.5)"><foreignObject width="53.75" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Multiple</span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default ser flowchart-label" id="flowchart-G-9" data-node="true" data-id="G" transform="translate(115.8671875, 495.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-68.171875" y="-21.5" width="136.34375" height="43"/><g class="label" style="" transform="translate(-56.171875, -9.5)"><rect/><foreignObject width="112.34375" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Render attempt ⁴</span></div></foreignObject></g></g><g class="node default ser flowchart-label" id="flowchart-H-10" data-node="true" data-id="H" transform="translate(115.8671875, 741.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-83.8671875" y="-21.5" width="167.734375" height="43"/><g class="label" style="" transform="translate(-71.8671875, -9.5)"><rect/><foreignObject width="143.734375" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Output preview string</span></div></foreignObject></g></g><g class="node default prio flowchart-label" id="flowchart-E-7" data-node="true" data-id="E" transform="translate(362.6015625, 495.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-78.8671875" y="-21.5" width="157.734375" height="43"/><g class="label" style="" transform="translate(-66.8671875, -9.5)"><rect/><foreignObject width="133.734375" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Build priority order ²</span></div></foreignObject></g></g><g class="node default prio flowchart-label" id="flowchart-F-8" data-node="true" data-id="F" transform="translate(366.546875, 602.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-82.8125" y="-21.5" width="165.625" height="43"/><g class="label" style="" transform="translate(-70.8125, -9.5)"><rect/><foreignObject width="141.625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Choose top N nodes ³</span></div></foreignObject></g></g><g class="node default des flowchart-label" id="flowchart-A-0" data-node="true" data-id="A" transform="translate(362.6015625, 53.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-49.203125" y="-21.5" width="98.40625" height="43"/><g class="label" style="" transform="translate(-37.203125, -9.5)"><rect/><foreignObject width="74.40625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Input file(s)</span></div></foreignObject></g></g><g class="node default des flowchart-label" id="flowchart-C-2" data-node="true" data-id="C" transform="translate(362.6015625, 315)"><rect class="basic label-container" style="" rx="0" ry="0" x="-98.96875" y="-31" width="197.9375" height="62"/><g class="label" style="" transform="translate(-86.96875, -19)"><rect/><foreignObject width="173.9375" height="38"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Parse into optimized tree<br />(with array pre‑sampling) ¹</span></div></foreignObject></g></g><g class="node default des flowchart-label" id="flowchart-D-4" data-node="true" data-id="D" transform="translate(442.09375, 189)"><rect class="basic label-container" style="" rx="0" ry="0" x="-106.9453125" y="-31" width="213.890625" height="62"/><g class="label" style="" transform="translate(-94.9453125, -19)"><rect/><foreignObject width="189.890625" height="38"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Parse each file<br />and wrap into a fileset object</span></div></foreignObject></g></g></g></g></g><style>/* Mermaid diagram CSS overrides for good light/dark rendering on GitHub/docs.rs */
/* Use a GitHub-like sans-serif stack for consistent sizing/flow */
svg, svg * { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif; }

/* Define light defaults */
svg { --m-text: #0f172a; /* slate-900 */
      --m-edge: #334155; /* slate-700 */
      --m-label-outline: #ffffff;
      --m-cluster-bg: #f8fafc; /* zinc-50 */
      --m-cluster-border: #e5e7eb; /* zinc-200 */
      --m-cluster-bg-opacity: 0.85;
      --m-cluster-label-bg: #ffffff;
      --m-cluster-label-fg: #0f172a;
      --m-des-fill: #eaf2ff; --m-des-stroke: #3b82f6;
      --m-pri-fill: #ecfdf5; --m-pri-stroke: #10b981;
      --m-ser-fill: #fff1f2; --m-ser-stroke: #f43f5e; }

/* Dark mode overrides */
@media (prefers-color-scheme: dark) {
  svg { --m-text: #e5e7eb; /* zinc-200 */
        --m-edge: #cbd5e1; /* slate-300 */
        --m-label-outline: #0b1220;
        --m-cluster-bg: #0b1220; /* deep slate */
        --m-cluster-border: #1f2937; /* slate-800 */
        --m-cluster-bg-opacity: 0.75;
        --m-cluster-label-bg: #000000;
        --m-cluster-label-fg: #ffffff;
        --m-des-fill: #0b1220; --m-des-stroke: #60a5fa; /* deeper blue bg, soft blue border */
        --m-pri-fill: #052e2b; --m-pri-stroke: #34d399; /* deep teal bg, green border */
        --m-ser-fill: #2a0f12; --m-ser-stroke: #fb7185; /* deep rose bg, rose border */ }
}

/* General text and edges */
svg text { fill: var(--m-text) !important; }
svg .edgePath path, svg path { stroke: var(--m-edge) !important; }
/* Slimmer edges and smaller arrowheads */
svg .edgePath path { stroke-width: 1.1px !important; }
svg marker path {
  fill: var(--m-edge) !important;
  stroke: var(--m-edge) !important;
  stroke-width: 1.2px !important;
  transform-box: fill-box;
  transform-origin: 50% 50%;
  transform: scale(0.75);
}

/* Avoid overriding label metrics; let Mermaid compute sizes */

/* Node category fills based on classDef in the diagram (des/prio/ser) */
/* Remove borders from all nodes */
svg .node rect, svg g.node &gt; rect, svg .label-container &gt; rect { stroke: none !important; }
svg .des rect { fill: var(--m-des-fill) !important; }
svg .prio rect { fill: var(--m-pri-fill) !important; }
svg .ser rect { fill: var(--m-ser-fill) !important; }

/* Cluster boxes invisible; labels styled */
/* Subgraphs: no background or border, only label visible */
svg g.cluster rect { fill: transparent !important; stroke: transparent !important; }
/* Subgraph label sizing/styling for both SVG and HTML label renderers */
svg .clusterLabel &gt; text, svg .cluster-label &gt; text { font-size: 22px !important; font-weight: 700 !important; fill: var(--m-text) !important; }
/* HTML-based cluster labels (when htmlLabels=true) */
svg foreignObject .clusterLabel,
svg foreignObject .cluster-label,
svg foreignObject div[class*="clusterLabel"],
svg foreignObject div[class*="cluster-label"] {
  display: inline-block;
  padding: 3px 12px;
  border-radius: 6px;
  background-color: var(--m-cluster-label-bg) !important;
  color: var(--m-cluster-label-fg) !important;
  font-size: 22px !important;
  font-weight: 700 !important;
  /* Mask nearby edges without outlines */
  box-shadow: 0 0 0 6px var(--m-cluster-label-bg);
}
</style>
<!-- moved cluster labels to top layer -->
<g class="cluster-label" transform="translate(75.7265625, 442)"><foreignObject width="80.28125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Serialization</span></div></foreignObject></g>
<g class="cluster-label" transform="translate(324.234375, 442)"><foreignObject width="84.625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Prioritization</span></div></foreignObject></g>
<g class="cluster-label" transform="translate(340.611328125, 0)"><foreignObject width="97.421875" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Deserialization</span></div></foreignObject></g>
</svg>