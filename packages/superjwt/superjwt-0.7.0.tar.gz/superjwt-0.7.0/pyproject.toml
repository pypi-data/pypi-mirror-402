[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[project]
name = "superjwt"
dynamic = ["version"]
dependencies = [
    "pydantic>=2",
    "typing-extensions>=4.0.1",
]
requires-python = ">=3.10"
authors = [{name = "ixunio", email = "ixunio.dev@gmail.com"}]
description = "A super simple JWT library for Python"
readme = "README.md"
license = "MIT"
classifiers = [
    "Development Status :: 5 - Production/Stable",
    "Intended Audience :: Developers",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3 :: Only",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
    "Topic :: Internet :: WWW/HTTP",
    "Topic :: Security",
]
keywords = [
    "jwt",
    "json",
    "web",
    "token",
    "security",
    "authentication",
    "authorization",
    "auth",
    "oauth",
    "bearer",
    "jose",
    "pydantic",
]

[project.optional-dependencies]
asymmetric = [
    "cryptography>=43.0.0",
]

[project.urls]
Homepage = "https://github.com/ixunio/superjwt"
Repository = "https://github.com/ixunio/superjwt.git"
Changelog = "https://github.com/ixunio/superjwt/blob/main/CHANGELOG.md"

[dependency-groups]
dev = [
    {include-group = "lint"},
    {include-group = "test"},
]
docs = [
    "mkdocs-material",
    "mkdocs-mermaid2-plugin",
    "mike",
]
lint = [
    "ruff",
]
test = [
    "pytest",
    "pytest-cov",
]

[tool.setuptools.dynamic]
version = {attr = "superjwt._version.__version__"}

[tool.ruff]
line-length = 90
target-version = "py310"
src = ["superjwt", "tests"]
exclude = [
    ".venv",
    ".git",
    "__pycache__",
    "dev_*",
]
show-fixes = true

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
line-ending = "lf"

[tool.ruff.lint]
select = [
    "E",     # pycodestyle errors
    "F",     # pyflakes
    "W",     # pycodestyle warnings
    "I",     # isort (import sorting)
    "B",     # flake8-bugbear (common bugs)
    "UP",    # pyupgrade (modern Python syntax)
    "N",     # pep8-naming (consistent naming)
    "ASYNC", # async best practices
    "RUF",   # Ruff-specific rules
    "TC",    # flake8-type-checking (type-checking imports)
]
ignore = [
    "E501",  # line length (handled by Black)
    "N803",  # argument name should be lowercase
    "N806",  # variable in function should be lowercase
]
# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"

[tool.ruff.lint.flake8-type-checking]
# Add quotes around type annotations, if doing so would allow
# an import to be moved into a type-checking block.
quote-annotations = false

[tool.ruff.lint.isort]
split-on-trailing-comma = true
lines-after-imports = 2

[tool.mypy]
# ... other mypy settings
plugins = ["pydantic.mypy"]

[tool.pytest.ini_options]
addopts = "-v -p no:warnings --cov=superjwt/ --cov-report=term-missing"
python_files = "test_*.py"
