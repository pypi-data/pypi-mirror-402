<!-- Nitro Phone Field - With automatic masking (XXX-XXX-XXXX) -->
{% if is_edit_buffer %}
<template x-if="{{ buffer_name }}">
    <div>
        {% if label %}
        <label class="block text-xs text-gray-600 mb-1">
            {{ label }}{% if required %} *{% endif %}
        </label>
        {% endif %}
        <input
            type="tel"
            class="w-full rounded-lg border-gray-300"
            {% if placeholder %}placeholder="{{ placeholder }}"{% else %}placeholder="809-555-1234"{% endif %}
            x-model="{{ field }}"
            @input="let v=$el.value.replace(/\D/g,'').slice(0,10); $el.value=v.length>6?v.slice(0,3)+'-'+v.slice(3,6)+'-'+v.slice(6):v.length>3?v.slice(0,3)+'-'+v.slice(3):v; {{ field }}=$el.value"
            @blur="trackChange('{{ field }}'); call('_sync_field', {field: '{{ field }}', value: {{ safe_field }}}, null, {silent: true})"
            :class="{'border-red-500': {{ error_path }}}"
            {{ extra_attrs|safe }}
        >
    </div>
</template>
{% else %}
<div>
    {% if label %}
    <label class="block text-xs text-gray-600 mb-1">
        {{ label }}{% if required %} *{% endif %}
    </label>
    {% endif %}
    <input
        type="tel"
        class="w-full rounded-lg border-gray-300"
        {% if placeholder %}placeholder="{{ placeholder }}"{% else %}placeholder="809-555-1234"{% endif %}
        x-model="{{ field }}"
        @input="let v=$el.value.replace(/\D/g,'').slice(0,10); $el.value=v.length>6?v.slice(0,3)+'-'+v.slice(3,6)+'-'+v.slice(6):v.length>3?v.slice(0,3)+'-'+v.slice(3):v; {{ field }}=$el.value"
        @blur="trackChange('{{ field }}'); call('_sync_field', {field: '{{ field }}', value: {{ safe_field }}}, null, {silent: true})"
        :class="{'border-red-500': {{ error_path }}}"
        {{ extra_attrs|safe }}
    >
</div>
{% endif %}
