id: data_processor
description: Process CSV data to extract and summarize information

flows:
  - type: Flow
    id: process_customers
    description: Load customer data and count records
    
    variables:
      - id: file_path
        type: text
      - id: name
        type: text
      - id: region
        type: text
      - id: purchases
        type: int
      - id: stats
        type: AggregateStats
    
    inputs:
      - file_path
    
    outputs:
      - stats
      - name
      - region
      - purchases

    steps:
      # Step 1: Read CSV file (emits many records, one per row)
      - id: load_file
        type: FileSource
        path: file_path
        inputs:
          - file_path
        outputs:
          - name
          - region
          - purchases
      
      # Step 2: Count all records
      - id: count_records
        type: Aggregate
        inputs:
          - region
        outputs:
          - stats
