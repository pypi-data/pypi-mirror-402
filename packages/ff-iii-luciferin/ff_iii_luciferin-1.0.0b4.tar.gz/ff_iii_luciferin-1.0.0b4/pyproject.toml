[project]
name = "ff-iii-luciferin"
version = "1.0.0b4"
description = "A Firefly III enrichment engine that makes your data glow"
authors = [{ name = "wini83", email = "rico.gotti210@gmail.com" }]
readme = "README.md"
requires-python = ">=3.12"

license = { text = "MIT" }

keywords = ["firefly-iii", "finance", "enrichment", "transactions", "api"]

classifiers = [
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.12",
    "Operating System :: OS Independent",
]

# --------------------
# Runtime dependencies
# --------------------
dependencies = [
    "aenum>=3.1.16",
    "httpx",
]

# --------------------
# Commitizen
# --------------------
[tool.commitizen]
name = "cz_conventional_commits"
version = "1.0.0b4"
tag_format = "v$version"
version_files = ["pyproject.toml"]
update_changelog_on_bump = true
annotated_tag = true

# --------------------
# Ruff (lint + format)
# --------------------
[tool.ruff]
line-length = 88
target-version = "py312"

exclude = [
    ".git",
    ".venv",
    "__pycache__",
    "build",
    "dist",
    "ff_iii_luciferin/openapi",
]

[tool.ruff.lint]
select = ["E", "F", "I", "N"]
ignore = ["N818"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"

# --------------------
# MyPy
# --------------------
[tool.mypy]
python_version = "3.12"
strict = true
ignore_missing_imports = true
follow_imports = "skip"

exclude = [
    "build",
    "examples",
    "ff_iii_luciferin/openapi",
]

[[tool.mypy.overrides]]
module = "tests.*"
disallow_untyped_defs = false
disallow_untyped_decorators = false

# --------------------
# Build backend
# --------------------
[build-system]
requires = ["setuptools>=61.0", "wheel"]
build-backend = "setuptools.build_meta"

# --------------------
# Dependency groups (uv)
# --------------------
[dependency-groups]
dev = [
    "pre-commit>=4.5.1",
    "pydantic-settings>=2.12.0",
    "pytest",
    "pytest-cov",
    "ruff",
    "mypy",
    "commitizen",
    "python-dotenv",
    "black"
]

# --------------------
# Setuptools
# --------------------
[tool.setuptools.package-data]
"ff_iii_luciferin" = ["py.typed"]

[tool.setuptools.packages.find]
# Explicit include to avoid setuptools flat-layout auto-discovery issues
include = ["ff_iii_luciferin*"]


# --------------------
# Black (only for legacy / editors)
# --------------------
[tool.black]
line-length = 88
exclude = '''
(
    \.venv
  | venv
  | site-packages
  | build
  | dist
  | ff_iii_luciferin/openapi
)
'''

[tool.coverage.run]
branch = true
source = ["ff_iii_luciferin"]
omit = [
    "ff_iii_luciferin/openapi/*",
    "ff_iii_luciferin/openapi/**",
    "tests/*",
]

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "if TYPE_CHECKING:",
]

[project.urls]
Homepage = "https://github.com/wini83/ff-iii-luciferin"
Repository = "https://github.com/wini83/ff-iii-luciferin"
Issues = "https://github.com/wini83/ff-iii-luciferin/issues"
Changelog = "https://github.com/wini83/ff-iii-luciferin/blob/main/CHANGELOG.md"

