Metadata-Version: 2.4
Name: sleap-io
Version: 0.6.3
Summary: Standalone utilities for working with pose data from SLEAP and other tools.
Author-email: Divya Murali <divya@talmolab.org>, Liezl Maree <lmaree@salk.edu>, David Samy <davidasamy@gmail.com>, Talmo Pereira <talmo@salk.edu>
License: BSD-3-Clause
Project-URL: Homepage, https://io.sleap.ai
Project-URL: Repository, https://github.com/talmolab/sleap-io
Keywords: sleap,pose tracking,pose estimation,behavior
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: numpy
Requires-Dist: attrs
Requires-Dist: h5py>=3.8.0
Requires-Dist: pynwb
Requires-Dist: ndx-pose>=0.2.1
Requires-Dist: ndx-multisubjects>=0.1.1
Requires-Dist: pandas
Requires-Dist: simplejson
Requires-Dist: imageio
Requires-Dist: imageio-ffmpeg>=0.5.0
Requires-Dist: tifffile
Requires-Dist: tqdm
Requires-Dist: pyyaml
Requires-Dist: rich_click
Requires-Dist: lazy-loader>=0.4
Requires-Dist: skia-python>=87.0
Requires-Dist: colorcet>=3.0
Provides-Extra: opencv
Requires-Dist: opencv-python; extra == "opencv"
Provides-Extra: pyav
Requires-Dist: av<16.0.0; extra == "pyav"
Provides-Extra: mat
Requires-Dist: pymatreader; extra == "mat"
Provides-Extra: polars
Requires-Dist: polars; extra == "polars"
Requires-Dist: pyarrow; extra == "polars"
Provides-Extra: all
Requires-Dist: opencv-python; extra == "all"
Requires-Dist: av<16.0.0; extra == "all"
Requires-Dist: pymatreader; extra == "all"
Requires-Dist: polars; extra == "all"
Requires-Dist: pyarrow; extra == "all"
Dynamic: license-file

# sleap-io

[![CI](https://github.com/talmolab/sleap-io/actions/workflows/ci.yml/badge.svg)](https://github.com/talmolab/sleap-io/actions/workflows/ci.yml)
[![codecov](https://codecov.io/gh/talmolab/sleap-io/branch/main/graph/badge.svg?token=Sj8kIFl3pi)](https://codecov.io/gh/talmolab/sleap-io)
[![Release](https://img.shields.io/github/v/release/talmolab/sleap-io?label=Latest)](https://github.com/talmolab/sleap-io/releases/)
[![PyPI](https://img.shields.io/pypi/v/sleap-io?label=PyPI)](https://pypi.org/project/sleap-io)
![PyPI - Python Version](https://img.shields.io/pypi/pyversions/sleap-io)

Standalone utilities for working with animal pose tracking data.

This is intended to be a complement to the core [SLEAP](https://github.com/talmolab/sleap)
package that aims to provide functionality for interacting with pose tracking-related
data structures and file formats with minimal dependencies. This package *does not*
have any functionality related to labeling, training, or inference.

**ðŸ“š [Documentation](https://io.sleap.ai)** - Comprehensive guides and API reference

## Installation

### From PyPI
```
pip install sleap-io
```

### From source (latest version)
```
pip install git+https://github.com/talmolab/sleap-io.git@main
```

For video backend support, install with extras:
```
pip install sleap-io[opencv]  # For OpenCV backend (fastest)
pip install sleap-io[ffmpeg]   # For FFMPEG backend (most reliable)
pip install sleap-io[pyav]     # For PyAV backend (balanced)
pip install sleap-io[all]      # For all video backends
```

For development, use one of the following:
```
uv sync --all-extras           # Recommended: install with uv
```
```
conda env create -f environment.yml
```
```
pip install -e .[dev,all]      # Install with all extras for development
```
See [`CONTRIBUTING.md`](CONTRIBUTING.md) for more information on development.

## Usage

### Load and save in different formats

```py
import sleap_io as sio

# Load from SLEAP file.
labels = sio.load_file("predictions.slp")

# Save to NWB file.
sio.save_file(labels, "predictions.nwb")
# Or:
# labels.save("predictions.nwb")
```

### Convert labels to raw arrays

```py
import sleap_io as sio

labels = sio.load_slp("tests/data/slp/centered_pair_predictions.slp")

# Convert predictions to point coordinates in a single array.
trx = labels.numpy()
n_frames, n_tracks, n_nodes, xy = trx.shape
assert xy == 2

# Convert to array with confidence scores appended.
trx_with_scores = labels.numpy(return_confidence=True)
n_frames, n_tracks, n_nodes, xy_score = trx.shape 
assert xy_score == 3
```

### Read video data

```py
import sleap_io as sio

video = sio.load_video("test.mp4")
n_frames, height, width, channels = video.shape

frame = video[0]
height, width, channels = frame.shape
```

### Create labels from raw data

```py
import sleap_io as sio
import numpy as np

# Create skeleton.
skeleton = sio.Skeleton(
    nodes=["head", "thorax", "abdomen"],
    edges=[("head", "thorax"), ("thorax", "abdomen")]
)

# Create video.
video = sio.load_video("test.mp4")

# Create instance.
instance = sio.Instance.from_numpy(
    points=np.array([
        [10.2, 20.4],
        [5.8, 15.1],
        [0.3, 10.6],
    ]),
    skeleton=skeleton
)

# Create labeled frame.
lf = sio.LabeledFrame(video=video, frame_idx=0, instances=[instance])

# Create labels.
labels = sio.Labels(videos=[video], skeletons=[skeleton], labeled_frames=[lf])

# Save.
labels.save("labels.slp")
```

## Support
For technical inquiries specific to this package, please [open an Issue](https://github.com/talmolab/sleap-io/issues)
with a description of your problem or request.

For general SLEAP usage, see the [main website](https://sleap.ai).

Other questions? Reach out to `talmo@salk.edu`.

## License
This package is distributed under a BSD 3-Clause License and can be used without
restrictions. See [`LICENSE`](LICENSE) for details.
