"use strict";(self.webpackChunkjupyterlab_launcher_sections_extension=self.webpackChunkjupyterlab_launcher_sections_extension||[]).push([[859],{859(e,t,o){o.r(t),o.d(t,{default:()=>c});var n=o(469),s=o(830),r=o(840);class i{constructor(){this._configs=new Map,this._observer=null,this._processedSections=new WeakSet}setConfigs(e){this._configs.clear();for(const t of e)this._configs.set(t.section,t)}start(){this._observer||(this._applyToExistingSections(),this._observer=new MutationObserver(e=>{for(const t of e)if("childList"===t.type){const e=Array.from(t.addedNodes);for(const t of e)t instanceof Element&&this._processElement(t)}}),this._observer.observe(document.body,{childList:!0,subtree:!0}))}stop(){this._observer&&(this._observer.disconnect(),this._observer=null)}_applyToExistingSections(){const e=Array.from(document.querySelectorAll(".jp-Launcher-section"));for(const t of e)this._applySectionConfig(t)}_processElement(e){e.classList.contains("jp-Launcher-section")&&this._applySectionConfig(e);const t=Array.from(e.querySelectorAll(".jp-Launcher-section"));for(const e of t)this._applySectionConfig(e)}_applySectionConfig(e){var t;if(this._processedSections.has(e))return;const o=e.querySelector(".jp-Launcher-sectionTitle");if(!o)return;const n=null===(t=o.textContent)||void 0===t?void 0:t.trim();if(!n)return;const s=this._configs.get(n);s&&(this._processedSections.add(e),s.icon&&this._applyIcon(e,s.icon),s.tooltip&&this._applyTooltip(e,s.tooltip))}_applyIcon(e,t){const o=e.querySelector(".jp-Launcher-sectionHeader");if(!o)return;let n=o.querySelector(".jp-icon-selectable");if(!n){const e=o.querySelector(".jp-Launcher-sectionTitle");if(e){let t=e.previousElementSibling;for(;t;){if(t.querySelector("svg")||"SVG"===t.tagName){n=t;break}t=t.previousElementSibling}}}if(!n)return;const s=`launcher-section-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i=new r.LabIcon({name:s,svgstr:t}).element({className:"jp-icon-selectable",tag:"span",stylesheet:"launcherSection"});n.replaceWith(i)}_applyTooltip(e,t){const o=e.querySelector(".jp-Launcher-sectionHeader");o instanceof HTMLElement&&(o.title=t)}}const c={id:"jupyterlab_launcher_sections_extension:plugin",description:"Jupyterlab extension to allow setting section-specific icons for the launcher",autoStart:!0,activate:async e=>{console.log("JupyterLab extension jupyterlab_launcher_sections_extension is activated!");const t=new i;try{const e=await async function(e="",t={}){const o=s.ServerConnection.makeSettings(),r=n.URLExt.join(o.baseUrl,"jupyterlab-launcher-sections-extension",e);let i;try{i=await s.ServerConnection.makeRequest(r,t,o)}catch(e){throw new s.ServerConnection.NetworkError(e)}let c=await i.text();if(c.length>0)try{c=JSON.parse(c)}catch(e){console.log("Not a JSON response body.",i)}if(!i.ok)throw new s.ServerConnection.ResponseError(i,c.message||c);return c}("config");t.setConfigs(e.sections)}catch(e){return void console.error(`[LauncherSectionIcons] Failed to load configurations: ${e}`)}e.restored.then(()=>{t.start()})}}}}]);