

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>README &mdash; open_nipals 1.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=292eb321"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Package documentation open_nipals" href="open_nipals.html" />
    <link rel="prev" title="open_nipals documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            open_nipals
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nipals-pca-and-pls-package">NIPALS PCA and PLS package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nipals-pca">Nipals PCA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nipals-pls">Nipals PLS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pypi">PyPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-repository">Git repository</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-usage">Example usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preprocessing">Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-fitting">Model fitting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pca">PCA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pls">PLS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#distances">Distances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pls-prediction">PLS prediction</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="open_nipals.html">Package documentation open_nipals</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How can I contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Contributors’ list</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">open_nipals</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">README</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="readme">
<h1>README<a class="headerlink" href="#readme" title="Link to this heading"></a></h1>
<section id="nipals-pca-and-pls-package">
<h2>NIPALS PCA and PLS package<a class="headerlink" href="#nipals-pca-and-pls-package" title="Link to this heading"></a></h2>
<p>This package implements the nonlinear iterative partial least squares (NIPALS) algorithm for principal component analysis (PCA) and partial least squares (PLS) regression.</p>
<section id="nipals-pca">
<h3>Nipals PCA<a class="headerlink" href="#nipals-pca" title="Link to this heading"></a></h3>
<p>Implements the NIPALS algorithm for principal components analysis in python.</p>
<p>One of the most concise definitions can be found in this paper on page 7:
Geladi, P.; Kowalski, B. R. Partial Least-Squares Regression: A Tutorial.
Analytica Chimica Acta 1986, 185, 1–17.
https://doi.org/10.1016/0003-2670(86)80028-9.</p>
<p>For the transformation part also see:
Nelson, P. R. C.; Taylor, P. A.; MacGregor, J. F. Missing data methods
in PCA and PLS: Score calculations with incomplete observations.
Chemometrics and Intelligent Laboratory Systems 1996, 35(1), 45-65.</p>
</section>
<section id="nipals-pls">
<h3>Nipals PLS<a class="headerlink" href="#nipals-pls" title="Link to this heading"></a></h3>
<p>Implements the NIPALS algorithm for partial least squares regression in python.</p>
<p>Algorithm implemented from Chapter 6 of:
Chiang, Leo H., Evan L. Russell, and Richard D. Braatz.
Fault detection and diagnosis in industrial systems.
Springer Science &amp; Business Media, 2000.</p>
<p>Alternative algorithm derivation from:
Geladi, P.; Kowalski, B. R.
Partial Least-Squares Regression: A Tutorial.
Analytica Chimica Acta 1986, 185, 1–17.
https://doi.org/10.1016/0003-2670(86)80028-9.</p>
<p>For the transformation part also see:
Nelson, P. R. C.; Taylor, P. A.; MacGregor, J. F.
Missing data methods in PCA and PLS: Score calculations
with incomplete observations.
Chemometrics and Intelligent Laboratory Systems 1996, 35(1), 45-65.</p>
</section>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>The package can be installed via the python package index (PyPI) or from the cloned git repo.
If you would like to only use the package without needing acccess to the code, the first version is recommended.
If you would like to modify the code and/or contribute to the package, it is recommended to install via cloning the git repository.</p>
<section id="pypi">
<h3>PyPI<a class="headerlink" href="#pypi" title="Link to this heading"></a></h3>
<p>You can install the package from PyPI with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">open-nipals</span></code>.</p>
</section>
<section id="git-repository">
<h3>Git repository<a class="headerlink" href="#git-repository" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Clone git repository</p></li>
<li><p>Open a command line</p></li>
<li><p>Navigate to git repository</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code></p></li>
</ol>
<p>NOTE: if you plan on working on the package please see <a class="reference internal" href="#./CONTRIBUTING.md"><span class="xref myst">CONTRIBUTING.md</span></a> for installation and environment setup instructions</p>
</section>
</section>
<section id="example-usage">
<h2>Example usage<a class="headerlink" href="#example-usage" title="Link to this heading"></a></h2>
<section id="preprocessing">
<h3>Preprocessing<a class="headerlink" href="#preprocessing" title="Link to this heading"></a></h3>
<p>Both the <code class="docutils literal notranslate"><span class="pre">NipalsPCA</span></code> and <code class="docutils literal notranslate"><span class="pre">NipalsPLS</span></code> classes expect a numpy array as an input with rows as samples and columns as features. Additionally, these array columns should have zero mean for best performance; typically this is done with a sklearn <code class="docutils literal notranslate"><span class="pre">StandardScaler</span></code> object.</p>
<p>Note: If the input data is a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframe, you can train an <code class="docutils literal notranslate"><span class="pre">ArrangeData</span></code> object which will ensure all future datasets come to the appropriate shape and column order.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">open_nipals.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArrangeData</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="c1"># Load some arbitrary data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;my_data.csv&#39;</span><span class="p">)</span>

<span class="c1"># Invoke preprocessing pipeline</span>
<span class="n">arrdat</span> <span class="o">=</span> <span class="n">ArrangeData</span><span class="p">()</span>
<span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>

<span class="c1"># Both scaler and arrdat should be saved for future use</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">arrdat</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>

<span class="c1"># data is ready to model</span>
</pre></div>
</div>
</section>
<section id="model-fitting">
<h3>Model fitting<a class="headerlink" href="#model-fitting" title="Link to this heading"></a></h3>
<p>The number of components can be specified as an argument to the constructor, with the default <code class="docutils literal notranslate"><span class="pre">n_components=2</span></code>. After fitting, components can be added by the <code class="docutils literal notranslate"><span class="pre">set_components()</span></code> method without having to fit the entire model again from scratch.</p>
<section id="pca">
<h4>PCA<a class="headerlink" href="#pca" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">open_nipals.nipalsPCA</span><span class="w"> </span><span class="kn">import</span> <span class="n">NipalsPCA</span>

<span class="c1"># data is the numpy data matrix generated in the preprocessing</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">NipalsPCA</span><span class="p">()</span>
<span class="n">transformed_data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pls">
<h4>PLS<a class="headerlink" href="#pls" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">open_nipals.nipalsPLS</span><span class="w"> </span><span class="kn">import</span> <span class="n">NipalsPLS</span>

<span class="c1"># note the X/Y data blocks would need to have</span>
<span class="c1"># separate arrangeData and StandardScaler objects</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">NipalsPLS</span><span class="p">()</span>
<span class="n">transformed_x_data</span><span class="p">,</span> <span class="n">transformed_y_data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">data_x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">data_y</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="distances">
<h3>Distances<a class="headerlink" href="#distances" title="Link to this heading"></a></h3>
<p>In-model distances (IMD) and out-of-model distances (OOMD) can be calculated for both PCA and PLS models</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Must be scaled data</span>
<span class="n">hotelling_t2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calc_imd</span><span class="p">(</span><span class="n">input_array</span> <span class="o">=</span> <span class="n">data</span><span class="p">)</span>

<span class="c1"># also must be scaled, default metric is QResiduals or &#39;QRes&#39;</span>
<span class="n">dmodx</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calc_oomd</span><span class="p">(</span><span class="n">input_array</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">metric</span> <span class="o">=</span> <span class="s2">&quot;DModX&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pls-prediction">
<h3>PLS prediction<a class="headerlink" href="#pls-prediction" title="Link to this heading"></a></h3>
<p>One particular feature of PLS models is that they can predict dependent variables. To this end, run <code class="docutils literal notranslate"><span class="pre">model.predict()</span></code>, where either a matrix of X data <code class="docutils literal notranslate"><span class="pre">input_x</span></code>,
or a matrix of X scores <code class="docutils literal notranslate"><span class="pre">scores_x</span></code> need to be given as arguments, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">predicted_y_data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">data_x</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="open_nipals documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="open_nipals.html" class="btn btn-neutral float-right" title="Package documentation open_nipals" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, David R. Ochsenbein, Niels Schlusser, Ryan M. Wall.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>