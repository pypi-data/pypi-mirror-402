[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[project]
name = "werr"
version = "0.3.0"
description = "A python project task runner"
readme = "README.md"
requires-python = ">=3.14"
scripts = { "werr" = "werrlib.main:console_entry" }
urls = { "Homepage" = "https://github.com/jhjn/werr", "Repository" = "https://github.com/jhjn/werr" }
keywords = ["tasks", "task-runner", "makefile", "checks", "uv", "automation", "werr"]
classifiers = [
  "Environment :: Console",
  "Intended Audience :: Developers",
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.14",
  "Programming Language :: Python",
  "Topic :: Software Development :: Build Tools",
  "Topic :: Software Development :: Quality Assurance",
  "Topic :: Software Development :: Testing"
]
dependencies = []

[dependency-groups]
dev = [
    "black>=25.12.0",
    "mkdocs-material>=9.7.1",
    "pytest>=9.0.2",
    "ruff>=0.14.10",
    "ty>=0.0.9",
]

[tool.uv]
package = true

[tool.werr]
variable = {packages = "werrlib/ tests/"}
task.check = [
    {parallel = true},
    "black --check {packages}",
    "ruff check {packages}",
    "ty check {packages}",
    "pytest {project}",
]
task.fix = [
    "black {packages}",
    "ruff check --fix {packages}",
]
task.docs = [
    {reporter = "live"},
    "mkdocs gh-deploy --force",
]
task.demo = [
    {reporter = "live"},
    "echo hi",
]

[tool.ruff.lint]
select = ["ALL"]
ignore = [
    "COM812",  # Trailing comma missing
    "D203",    # one-blank-line-before-class
    "D205",    # 1 blank line required between summary line and description
    "D213",    # Multi line summary on the second line
    "D401",    # First line of docstring should be in imperative mood
    "EM101",   # Exception must not use a string literal, assign to variable first
    "EM102",   # Exception must not use an f-string literal, assign to variable first
    "FIX002",  # Allow TODO comments for future enhancements
    "S101",    # Use of `assert` detected
    "S602",    # `subprocess` call with `shell=True` identified, security issue
    "S603",    # `subprocess` call: check for execution of untrusted input
    "SIM108",  # Use ternary operator
    "T201",    # `print` found
    "TD002",   # Missing author in TODO; try: `# TODO(<author_name>): ...` or `# TODO @<author_name>: ...`
    "TD003",   # Missing issue link for this TODO
    "TRY003",  # Avoid specifying long messages outside the exception class
]

[tool.pytest.ini_options]
testpaths = ["tests"]
