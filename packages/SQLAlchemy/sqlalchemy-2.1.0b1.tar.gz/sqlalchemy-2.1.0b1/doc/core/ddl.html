<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    Customizing DDL
 &mdash;
    SQLAlchemy 2.1 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.1 Documentation" href="../index.html" />
        <link rel="up" title="Schema Definition Language" href="schema.html" />
        <link rel="next" title="SQL Datatype Objects" href="types.html" />
        <link rel="prev" title="Defining Constraints and Indexes" href="constraints.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.1.0b1</span>


        | Release Date: January 21, 2026

    </div>

    <h1><a href="../index.html">SQLAlchemy 2.1 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 2.1 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy Core">SQLAlchemy Core</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="expression_api.html">SQL Statements and Expressions API</a></span></li>
<li><span class="link-container"><a class="reference external" href="schema.html">Schema Definition Language</a></span><ul>
<li><span class="link-container"><a class="reference external" href="metadata.html">Describing Databases with MetaData</a></span></li>
<li><span class="link-container"><a class="reference external" href="reflection.html">Reflecting Database Objects</a></span></li>
<li><span class="link-container"><a class="reference external" href="defaults.html">Column INSERT/UPDATE Defaults</a></span></li>
<li><span class="link-container"><a class="reference external" href="constraints.html">Defining Constraints and Indexes</a></span></li>
<li class="selected"><span class="link-container"><strong>Customizing DDL</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#custom-ddl">Custom DDL</a></span></li>
<li><span class="link-container"><a class="reference external" href="#controlling-ddl-sequences">Controlling DDL Sequences</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-the-built-in-ddlelement-classes">Using the built-in DDLElement Classes</a></span></li>
<li><span class="link-container"><a class="reference external" href="#controlling-ddl-generation-of-constraints-and-indexes">Controlling DDL Generation of Constraints and Indexes</a></span></li>
<li><span class="link-container"><a class="reference external" href="#ddl-expression-constructs-api">DDL Expression Constructs API</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.sort_tables"><code class="docutils literal notranslate"><span class="pre">sort_tables()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.sort_tables_and_constraints"><code class="docutils literal notranslate"><span class="pre">sort_tables_and_constraints()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.BaseDDLElement"><code class="docutils literal notranslate"><span class="pre">BaseDDLElement</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.ExecutableDDLElement"><code class="docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.ExecutableDDLElement.__call__"><code class="docutils literal notranslate"><span class="pre">ExecutableDDLElement.__call__()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.ExecutableDDLElement.against"><code class="docutils literal notranslate"><span class="pre">ExecutableDDLElement.against()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DDL"><code class="docutils literal notranslate"><span class="pre">DDL</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DDL.__init__"><code class="docutils literal notranslate"><span class="pre">DDL.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CheckFirst"><code class="docutils literal notranslate"><span class="pre">CheckFirst</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CheckFirst.INDEXES"><code class="docutils literal notranslate"><span class="pre">CheckFirst.INDEXES</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CheckFirst.NONE"><code class="docutils literal notranslate"><span class="pre">CheckFirst.NONE</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CheckFirst.SEQUENCES"><code class="docutils literal notranslate"><span class="pre">CheckFirst.SEQUENCES</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CheckFirst.TABLES"><code class="docutils literal notranslate"><span class="pre">CheckFirst.TABLES</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CheckFirst.TYPES"><code class="docutils literal notranslate"><span class="pre">CheckFirst.TYPES</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CheckFirst.VIEWS"><code class="docutils literal notranslate"><span class="pre">CheckFirst.VIEWS</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema._CreateDropBase"><code class="docutils literal notranslate"><span class="pre">_CreateDropBase</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CreateTable"><code class="docutils literal notranslate"><span class="pre">CreateTable</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CreateTable.__init__"><code class="docutils literal notranslate"><span class="pre">CreateTable.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropTable"><code class="docutils literal notranslate"><span class="pre">DropTable</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropTable.__init__"><code class="docutils literal notranslate"><span class="pre">DropTable.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropView"><code class="docutils literal notranslate"><span class="pre">DropView</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropView.materialized"><code class="docutils literal notranslate"><span class="pre">DropView.materialized</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CreateColumn"><code class="docutils literal notranslate"><span class="pre">CreateColumn</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.insert_sentinel"><code class="docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CreateSequence"><code class="docutils literal notranslate"><span class="pre">CreateSequence</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropSequence"><code class="docutils literal notranslate"><span class="pre">DropSequence</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CreateIndex"><code class="docutils literal notranslate"><span class="pre">CreateIndex</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CreateIndex.__init__"><code class="docutils literal notranslate"><span class="pre">CreateIndex.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropIndex"><code class="docutils literal notranslate"><span class="pre">DropIndex</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropIndex.__init__"><code class="docutils literal notranslate"><span class="pre">DropIndex.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.AddConstraint"><code class="docutils literal notranslate"><span class="pre">AddConstraint</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.AddConstraint.__init__"><code class="docutils literal notranslate"><span class="pre">AddConstraint.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropConstraint"><code class="docutils literal notranslate"><span class="pre">DropConstraint</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropConstraint.__init__"><code class="docutils literal notranslate"><span class="pre">DropConstraint.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CreateSchema"><code class="docutils literal notranslate"><span class="pre">CreateSchema</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.CreateSchema.__init__"><code class="docutils literal notranslate"><span class="pre">CreateSchema.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropSchema"><code class="docutils literal notranslate"><span class="pre">DropSchema</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.schema.DropSchema.__init__"><code class="docutils literal notranslate"><span class="pre">DropSchema.__init__()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="types.html">SQL Datatype Objects</a></span></li>
<li><span class="link-container"><a class="reference external" href="engines_connections.html">Engine and Connection Use</a></span></li>
<li><span class="link-container"><a class="reference external" href="api_basics.html">Core API Basics</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="constraints.html" title="previous chapter">Defining Constraints and Indexes</a></li>
                <li><b>Next:</b>
                <a href="types.html" title="next chapter">SQL Datatype Objects</a></li>

            <li><b>Up:</b> <a href="../index.html">Home</a></li>
                    <ul><li><a href="index.html" title="SQLAlchemy Core">SQLAlchemy Core</a></li>
                    <ul><li><a href="schema.html" title="Schema Definition Language">Schema Definition Language</a></li>
                </ul>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#customizing-ddl">Customizing DDL</a><ul>
<li><a class="reference internal" href="#custom-ddl">Custom DDL</a></li>
<li><a class="reference internal" href="#controlling-ddl-sequences">Controlling DDL Sequences</a></li>
<li><a class="reference internal" href="#using-the-built-in-ddlelement-classes">Using the built-in DDLElement Classes</a></li>
<li><a class="reference internal" href="#controlling-ddl-generation-of-constraints-and-indexes">Controlling DDL Generation of Constraints and Indexes</a></li>
<li><a class="reference internal" href="#ddl-expression-constructs-api">DDL Expression Constructs API</a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.sort_tables"><code class="docutils literal notranslate"><span class="pre">sort_tables()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints"><code class="docutils literal notranslate"><span class="pre">sort_tables_and_constraints()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.BaseDDLElement"><code class="docutils literal notranslate"><span class="pre">BaseDDLElement</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement"><code class="docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.__call__"><code class="docutils literal notranslate"><span class="pre">ExecutableDDLElement.__call__()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.against"><code class="docutils literal notranslate"><span class="pre">ExecutableDDLElement.against()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.DDL"><code class="docutils literal notranslate"><span class="pre">DDL</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.DDL.__init__"><code class="docutils literal notranslate"><span class="pre">DDL.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckFirst"><code class="docutils literal notranslate"><span class="pre">CheckFirst</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.INDEXES"><code class="docutils literal notranslate"><span class="pre">CheckFirst.INDEXES</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.NONE"><code class="docutils literal notranslate"><span class="pre">CheckFirst.NONE</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.SEQUENCES"><code class="docutils literal notranslate"><span class="pre">CheckFirst.SEQUENCES</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.TABLES"><code class="docutils literal notranslate"><span class="pre">CheckFirst.TABLES</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.TYPES"><code class="docutils literal notranslate"><span class="pre">CheckFirst.TYPES</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.VIEWS"><code class="docutils literal notranslate"><span class="pre">CheckFirst.VIEWS</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema._CreateDropBase"><code class="docutils literal notranslate"><span class="pre">_CreateDropBase</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CreateTable"><code class="docutils literal notranslate"><span class="pre">CreateTable</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.CreateTable.__init__"><code class="docutils literal notranslate"><span class="pre">CreateTable.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.DropTable"><code class="docutils literal notranslate"><span class="pre">DropTable</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.DropTable.__init__"><code class="docutils literal notranslate"><span class="pre">DropTable.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.DropView"><code class="docutils literal notranslate"><span class="pre">DropView</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.DropView.materialized"><code class="docutils literal notranslate"><span class="pre">DropView.materialized</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.CreateColumn"><code class="docutils literal notranslate"><span class="pre">CreateColumn</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.insert_sentinel"><code class="docutils literal notranslate"><span class="pre">insert_sentinel()</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CreateSequence"><code class="docutils literal notranslate"><span class="pre">CreateSequence</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.DropSequence"><code class="docutils literal notranslate"><span class="pre">DropSequence</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.schema.CreateIndex"><code class="docutils literal notranslate"><span class="pre">CreateIndex</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.CreateIndex.__init__"><code class="docutils literal notranslate"><span class="pre">CreateIndex.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.DropIndex"><code class="docutils literal notranslate"><span class="pre">DropIndex</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.DropIndex.__init__"><code class="docutils literal notranslate"><span class="pre">DropIndex.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.AddConstraint"><code class="docutils literal notranslate"><span class="pre">AddConstraint</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.AddConstraint.__init__"><code class="docutils literal notranslate"><span class="pre">AddConstraint.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.DropConstraint"><code class="docutils literal notranslate"><span class="pre">DropConstraint</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.DropConstraint.__init__"><code class="docutils literal notranslate"><span class="pre">DropConstraint.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.CreateSchema"><code class="docutils literal notranslate"><span class="pre">CreateSchema</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.CreateSchema.__init__"><code class="docutils literal notranslate"><span class="pre">CreateSchema.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.schema.DropSchema"><code class="docutils literal notranslate"><span class="pre">DropSchema</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.schema.DropSchema.__init__"><code class="docutils literal notranslate"><span class="pre">DropSchema.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar core-ddl" >
        
<section id="customizing-ddl">
<span id="metadata-ddl"></span><span id="metadata-ddl-toplevel"></span><h1>Customizing DDL<a class="headerlink" href="#customizing-ddl" title="Link to this heading">¶</a></h1>
<p>In the preceding sections we’ve discussed a variety of schema constructs
including <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>,
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>,
<a class="reference internal" href="constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a>, and
<a class="reference internal" href="defaults.html#sqlalchemy.schema.Sequence" title="sqlalchemy.schema.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>. Throughout, we’ve relied upon the
<code class="docutils literal notranslate"><span class="pre">create()</span></code> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_all()</span></code></a> methods of
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> in
order to issue data definition language (DDL) for all constructs. When issued,
a pre-determined order of operations is invoked, and DDL to create each table
is created unconditionally including all constraints and other objects
associated with it. For more complex scenarios where database-specific DDL is
required, SQLAlchemy offers two techniques which can be used to add any DDL
based on any condition, either accompanying the standard generation of tables
or by itself.</p>
<section id="custom-ddl">
<h2>Custom DDL<a class="headerlink" href="#custom-ddl" title="Link to this heading">¶</a></h2>
<p>Custom DDL phrases are most easily achieved using the
<a class="reference internal" href="#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a> construct. This construct works like all the
other DDL elements except it accepts a string which is the text to be emitted:</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="s2">&quot;after_create&quot;</span><span class="p">,</span>
    <span class="n">DDL</span><span class="p">(</span>
        <span class="s2">&quot;ALTER TABLE users ADD CONSTRAINT &quot;</span>
        <span class="s2">&quot;cst_user_name_length &quot;</span>
        <span class="s2">&quot; CHECK (length(user_name) &gt;= 8)&quot;</span>
    <span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>A more comprehensive method of creating libraries of DDL constructs is to use
custom compilation - see <a class="reference internal" href="compiler.html"><span class="std std-ref">Custom SQL Constructs and Compilation Extension</span></a> for
details.</p>
</section>
<section id="controlling-ddl-sequences">
<span id="schema-ddl-sequences"></span><h2>Controlling DDL Sequences<a class="headerlink" href="#controlling-ddl-sequences" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a> construct introduced previously also has the
ability to be invoked conditionally based on inspection of the
database.  This feature is available using the <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a>
method.  For example, if we wanted to create a trigger but only on
the PostgreSQL backend, we could invoke this as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mytable</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
<span class="p">)</span>

<span class="n">func</span> <span class="o">=</span> <span class="n">DDL</span><span class="p">(</span>
    <span class="s2">&quot;CREATE FUNCTION my_func() &quot;</span>
    <span class="s2">&quot;RETURNS TRIGGER AS $$ &quot;</span>
    <span class="s2">&quot;BEGIN &quot;</span>
    <span class="s2">&quot;NEW.data := &#39;ins&#39;; &quot;</span>
    <span class="s2">&quot;RETURN NEW; &quot;</span>
    <span class="s2">&quot;END; $$ LANGUAGE PLPGSQL&quot;</span>
<span class="p">)</span>

<span class="n">trigger</span> <span class="o">=</span> <span class="n">DDL</span><span class="p">(</span>
    <span class="s2">&quot;CREATE TRIGGER dt_ins BEFORE INSERT ON mytable &quot;</span>
    <span class="s2">&quot;FOR EACH ROW EXECUTE PROCEDURE my_func();&quot;</span>
<span class="p">)</span>

<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">mytable</span><span class="p">,</span> <span class="s2">&quot;after_create&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s2">&quot;postgresql&quot;</span><span class="p">))</span>

<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">mytable</span><span class="p">,</span> <span class="s2">&quot;after_create&quot;</span><span class="p">,</span> <span class="n">trigger</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s2">&quot;postgresql&quot;</span><span class="p">))</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.dialect" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if.dialect</span></code></a> keyword also accepts a tuple
of string dialect names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">mytable</span><span class="p">,</span> <span class="s2">&quot;after_create&quot;</span><span class="p">,</span> <span class="n">trigger</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;postgresql&quot;</span><span class="p">,</span> <span class="s2">&quot;mysql&quot;</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">mytable</span><span class="p">,</span> <span class="s2">&quot;before_drop&quot;</span><span class="p">,</span> <span class="n">trigger</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;postgresql&quot;</span><span class="p">,</span> <span class="s2">&quot;mysql&quot;</span><span class="p">))</span>
<span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> method can also work against a callable
function that will receive the database connection in use.  In the
example below, we use this to conditionally create a CHECK constraint,
first looking within the PostgreSQL catalogs to see if it exists:</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">should_create</span><span class="p">(</span><span class="n">ddl</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s2">&quot;select conname from pg_constraint where conname=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">ddl</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">name</span>
    <span class="p">)</span><span class="o">.</span><span class="n">scalar</span><span class="p">()</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="n">bool</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">should_drop</span><span class="p">(</span><span class="n">ddl</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="n">should_create</span><span class="p">(</span><span class="n">ddl</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>


<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">users</span><span class="p">,</span>
    <span class="s2">&quot;after_create&quot;</span><span class="p">,</span>
    <span class="n">DDL</span><span class="p">(</span>
        <span class="s2">&quot;ALTER TABLE users ADD CONSTRAINT &quot;</span>
        <span class="s2">&quot;cst_user_name_length CHECK (length(user_name) &gt;= 8)&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">callable_</span><span class="o">=</span><span class="n">should_create</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">users</span><span class="p">,</span>
    <span class="s2">&quot;before_drop&quot;</span><span class="p">,</span>
    <span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;ALTER TABLE users DROP CONSTRAINT cst_user_name_length&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span>
        <span class="n">callable_</span><span class="o">=</span><span class="n">should_drop</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">users</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<div class='show_sql'><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">user_name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
<span class="p">)</span>

<span class="k">SELECT</span><span class="w"> </span><span class="n">conname</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pg_constraint</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">conname</span><span class="o">=</span><span class="s1">&#39;cst_user_name_length&#39;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">cst_user_name_length</span><span class="w">  </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="k">length</span><span class="p">(</span><span class="n">user_name</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
</div><span class="n">users</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<div class='show_sql'><span class="k">SELECT</span><span class="w"> </span><span class="n">conname</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pg_constraint</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">conname</span><span class="o">=</span><span class="s1">&#39;cst_user_name_length&#39;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="k">DROP</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">cst_user_name_length</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">users</span>
</div></pre></div>
</div>
</section>
<section id="using-the-built-in-ddlelement-classes">
<h2>Using the built-in DDLElement Classes<a class="headerlink" href="#using-the-built-in-ddlelement-classes" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema</span></code> package contains SQL expression constructs that
provide DDL expressions, all of which extend from the common base
<a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a>. For example, to produce a <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement,
one can use the <a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct:</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.schema</span><span class="w"> </span><span class="kn">import</span> <span class="n">CreateTable</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">CreateTable</span><span class="p">(</span><span class="n">mytable</span><span class="p">))</span>
<div class='show_sql'><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">col1</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col2</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col3</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col4</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col5</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">col6</span><span class="w"> </span><span class="nb">INTEGER</span>
<span class="p">)</span>
</div></pre></div>
</div>
<p>Above, the <a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct works like any
other expression construct (such as <code class="docutils literal notranslate"><span class="pre">select()</span></code>, <code class="docutils literal notranslate"><span class="pre">table.insert()</span></code>, etc.).
All of SQLAlchemy’s DDL oriented constructs are subclasses of
the <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> base class; this is the base of all the
objects corresponding to CREATE and DROP as well as ALTER,
not only in SQLAlchemy but in Alembic Migrations as well.
A full reference of available constructs is in <a class="reference internal" href="#schema-api-ddl"><span class="std std-ref">DDL Expression Constructs API</span></a>.</p>
<p>User-defined DDL constructs may also be created as subclasses of
<a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> itself.   The documentation in
<a class="reference internal" href="compiler.html"><span class="std std-ref">Custom SQL Constructs and Compilation Extension</span></a> has several examples of this.</p>
</section>
<section id="controlling-ddl-generation-of-constraints-and-indexes">
<span id="schema-ddl-ddl-if"></span><h2>Controlling DDL Generation of Constraints and Indexes<a class="headerlink" href="#controlling-ddl-generation-of-constraints-and-indexes" title="Link to this heading">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.0.</span></p>
</div>
<p>While the previously mentioned <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> method is
useful for custom <a class="reference internal" href="#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a> classes which need to invoke conditionally,
there is also a common need for elements that are typically related to a
particular <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, namely constraints and indexes, to also be
subject to “conditional” rules, such as an index that includes features
that are specific to a particular backend such as PostgreSQL or SQL Server.
For this use case, the <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint.ddl_if" title="sqlalchemy.schema.Constraint.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Constraint.ddl_if()</span></code></a> and <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index.ddl_if" title="sqlalchemy.schema.Index.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.ddl_if()</span></code></a>
methods may be used against constructs such as <a class="reference internal" href="constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a>,
<a class="reference internal" href="constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> and <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>, accepting the same
arguments as the <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a> method in order to control
whether or not their DDL will be emitted in terms of their parent
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object.  These methods may be used inline when
creating the definition for a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
(or similarly, when using the <code class="docutils literal notranslate"><span class="pre">__table_args__</span></code> collection in an ORM
declarative mapping), such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">CheckConstraint</span><span class="p">,</span> <span class="n">Index</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span>

<span class="n">meta</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

<span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;my_table&quot;</span><span class="p">,</span>
    <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;num&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">),</span>
    <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;my_pg_index&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ddl_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s2">&quot;postgresql&quot;</span><span class="p">),</span>
    <span class="n">CheckConstraint</span><span class="p">(</span><span class="s2">&quot;num &gt; 5&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ddl_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s2">&quot;postgresql&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>In the above example, the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> construct refers to both an
<a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> and a <a class="reference internal" href="constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> construct, both which
indicate <code class="docutils literal notranslate"><span class="pre">.ddl_if(dialect=&quot;postgresql&quot;)</span></code>, which indicates that these
elements will be included in the CREATE TABLE sequence only against the
PostgreSQL dialect.  If we run <code class="docutils literal notranslate"><span class="pre">meta.create_all()</span></code> against the SQLite
dialect, for example, neither construct will be included:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sqlite_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+pysqlite://&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">sqlite_engine</span><span class="p">)</span>
<div class='show_sql'><span class="k">BEGIN</span><span class="w"> </span><span class="p">(</span><span class="k">implicit</span><span class="p">)</span>
<span class="n">PRAGMA</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">table_info</span><span class="p">(</span><span class="ss">&quot;my_table&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="n">raw</span><span class="w"> </span><span class="k">sql</span><span class="p">]</span><span class="w"> </span><span class="p">()</span>
<span class="n">PRAGMA</span><span class="w"> </span><span class="n">temp</span><span class="p">.</span><span class="n">table_info</span><span class="p">(</span><span class="ss">&quot;my_table&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="n">raw</span><span class="w"> </span><span class="k">sql</span><span class="p">]</span><span class="w"> </span><span class="p">()</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">my_table</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">num</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">data</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>
</div></pre></div>
</div>
<p>However, if we run the same commands against a PostgreSQL database, we will
see inline DDL for the CHECK constraint as well as a separate CREATE
statement emitted for the index:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">postgresql_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
<span class="go">...     &quot;postgresql+psycopg2://scott:tiger@localhost/test&quot;, echo=True</span>
<span class="go">... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">postgresql_engine</span><span class="p">)</span>
<div class='show_sql'><span class="k">BEGIN</span><span class="w"> </span><span class="p">(</span><span class="k">implicit</span><span class="p">)</span>
<span class="k">select</span><span class="w"> </span><span class="n">relname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">pg_class</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">pg_namespace</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">n</span><span class="p">.</span><span class="n">oid</span><span class="o">=</span><span class="k">c</span><span class="p">.</span><span class="n">relnamespace</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">pg_catalog</span><span class="p">.</span><span class="n">pg_table_is_visible</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">oid</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">relname</span><span class="o">=%</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="n">s</span>
<span class="p">[</span><span class="k">generated</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">00009</span><span class="n">s</span><span class="p">]</span><span class="w"> </span><span class="err">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;my_table&#39;</span><span class="err">}</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">my_table</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">num</span><span class="w"> </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="k">data</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">),</span>
<span class="w">    </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="p">)</span>
<span class="p">[</span><span class="k">no</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">00007</span><span class="n">s</span><span class="p">]</span><span class="w"> </span><span class="err">{}</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">my_pg_index</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">my_table</span><span class="w"> </span><span class="p">(</span><span class="k">data</span><span class="p">)</span>
<span class="p">[</span><span class="k">no</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">00013</span><span class="n">s</span><span class="p">]</span><span class="w"> </span><span class="err">{}</span>
<span class="k">COMMIT</span>
</div></pre></div>
</div>
<p>The <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint.ddl_if" title="sqlalchemy.schema.Constraint.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Constraint.ddl_if()</span></code></a> and <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index.ddl_if" title="sqlalchemy.schema.Index.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.ddl_if()</span></code></a> methods create
an event hook that may be consulted not just at DDL execution time, as is the
behavior with <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="sqlalchemy.schema.ExecutableDDLElement.execute_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute_if()</span></code></a>, but also within the SQL compilation
phase of the <a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> object, which is responsible for rendering
the <code class="docutils literal notranslate"><span class="pre">CHECK</span> <span class="pre">(num</span> <span class="pre">&gt;</span> <span class="pre">5)</span></code> DDL inline within the CREATE TABLE statement.
As such, the event hook that is received by the <code class="xref py py-meth docutils literal notranslate"><span class="pre">ddl_if.callable_()</span></code>
parameter has a richer argument set present, including that there is
a <code class="docutils literal notranslate"><span class="pre">dialect</span></code> keyword argument passed, as well as an instance of <a class="reference internal" href="internals.html#sqlalchemy.sql.compiler.DDLCompiler" title="sqlalchemy.sql.compiler.DDLCompiler"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLCompiler</span></code></a>
via the <code class="docutils literal notranslate"><span class="pre">compiler</span></code> keyword argument for the “inline rendering” portion of the
sequence.  The <code class="docutils literal notranslate"><span class="pre">bind</span></code> argument is <strong>not</strong> present when the event is triggered
within the <a class="reference internal" href="internals.html#sqlalchemy.sql.compiler.DDLCompiler" title="sqlalchemy.sql.compiler.DDLCompiler"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLCompiler</span></code></a> sequence, so a modern event hook that wishes
to inspect the database versioning information would best use the given
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> object, such as to test PostgreSQL versioning:</p>
<div class="highlight-python+sql notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">only_pg_14</span><span class="p">(</span><span class="n">ddl_element</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">bind</span><span class="p">,</span> <span class="n">dialect</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">dialect</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;postgresql&quot;</span> <span class="ow">and</span> <span class="n">dialect</span><span class="o">.</span><span class="n">server_version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">14</span><span class="p">,)</span>


<span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;my_table&quot;</span><span class="p">,</span>
    <span class="n">meta</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;num&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">),</span>
    <span class="n">Index</span><span class="p">(</span><span class="s2">&quot;my_pg_index&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ddl_if</span><span class="p">(</span><span class="n">callable_</span><span class="o">=</span><span class="n">only_pg_14</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint.ddl_if" title="sqlalchemy.schema.Constraint.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Constraint.ddl_if()</span></code></a></p>
<p><a class="reference internal" href="constraints.html#sqlalchemy.schema.Index.ddl_if" title="sqlalchemy.schema.Index.ddl_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.ddl_if()</span></code></a></p>
</div>
</section>
<section id="ddl-expression-constructs-api">
<span id="schema-api-ddl"></span><h2>DDL Expression Constructs API<a class="headerlink" href="#ddl-expression-constructs-api" title="Link to this heading">¶</a></h2>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema._CreateDropBase"><span class="sig-name descname">_CreateDropBase</span></a></p></td>
<td><p>Base class for DDL constructs that represent CREATE and DROP or
equivalents.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.AddConstraint"><span class="sig-name descname">AddConstraint</span></a></p></td>
<td><p>Represent an ALTER TABLE ADD CONSTRAINT statement.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.BaseDDLElement"><span class="sig-name descname">BaseDDLElement</span></a></p></td>
<td><p>The root of DDL constructs, including those that are sub-elements
within the “create table” and other processes.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CheckFirst"><span class="sig-name descname">CheckFirst</span></a></p></td>
<td><p>Enumeration for the <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all.params.checkfirst" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.create_all.checkfirst</span></code></a>
parameter passed to methods like <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>,
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.create" title="sqlalchemy.schema.Table.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.create()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.drop" title="sqlalchemy.schema.Table.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.drop()</span></code></a> and
others.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CreateColumn"><span class="sig-name descname">CreateColumn</span></a></p></td>
<td><p>Represent a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
as rendered in a CREATE TABLE statement,
via the <a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CreateIndex"><span class="sig-name descname">CreateIndex</span></a></p></td>
<td><p>Represent a CREATE INDEX statement.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CreateSchema"><span class="sig-name descname">CreateSchema</span></a></p></td>
<td><p>Represent a CREATE SCHEMA statement.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CreateSequence"><span class="sig-name descname">CreateSequence</span></a></p></td>
<td><p>Represent a CREATE SEQUENCE statement.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CreateTable"><span class="sig-name descname">CreateTable</span></a></p></td>
<td><p>Represent a CREATE TABLE statement.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DDL"><span class="sig-name descname">DDL</span></a></p></td>
<td><p>A literal DDL statement.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropConstraint"><span class="sig-name descname">DropConstraint</span></a></p></td>
<td><p>Represent an ALTER TABLE DROP CONSTRAINT statement.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropIndex"><span class="sig-name descname">DropIndex</span></a></p></td>
<td><p>Represent a DROP INDEX statement.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropSchema"><span class="sig-name descname">DropSchema</span></a></p></td>
<td><p>Represent a DROP SCHEMA statement.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropSequence"><span class="sig-name descname">DropSequence</span></a></p></td>
<td><p>Represent a DROP SEQUENCE statement.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropTable"><span class="sig-name descname">DropTable</span></a></p></td>
<td><p>Represent a DROP TABLE statement.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropView"><span class="sig-name descname">DropView</span></a></p></td>
<td><p>‘DROP VIEW’ construct.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement"><span class="sig-name descname">ExecutableDDLElement</span></a></p></td>
<td><p>Base class for standalone executable DDL expression constructs.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.insert_sentinel"><span class="sig-name descname">insert_sentinel</span></a>([name, type_], *, [default, omit_from_statements])</p></td>
<td><p>Provides a surrogate <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that will act as a
dedicated insert <a class="reference internal" href="../glossary.html#term-sentinel"><span class="xref std std-term">sentinel</span></a> column, allowing efficient bulk
inserts with deterministic RETURNING sorting for tables that
don’t otherwise have qualifying primary key configurations.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.sort_tables"><span class="sig-name descname">sort_tables</span></a>(tables[, skip_fn, extra_dependencies])</p></td>
<td><p>Sort a collection of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects based on
dependency.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints"><span class="sig-name descname">sort_tables_and_constraints</span></a>(tables[, filter_fn, extra_dependencies, _warn_for_cycles])</p></td>
<td><p>Sort a collection of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>  /
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
objects.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.schema.sort_tables">
<span class="property"><span class="pre">function</span> </span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">sort_tables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><span class="pre">TableClause</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><span class="pre">ForeignKeyConstraint</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_dependencies</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">typing_Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="sqlelement.html#sqlalchemy.sql.expression.Tuple" title="sqlalchemy.sql.expression.Tuple"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><span class="pre">TableClause</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><span class="pre">TableClause</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><span class="pre">Table</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.schema.sort_tables" title="Link to this definition">¶</a></dt>
<dd><p>Sort a collection of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects based on
dependency.</p>
<p>This is a dependency-ordered sort which will emit <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects such that they will follow their dependent <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects.
Tables are dependent on another based on the presence of
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
objects as well as explicit dependencies
added by <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.add_is_dependent_on" title="sqlalchemy.schema.Table.add_is_dependent_on"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.add_is_dependent_on()</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#sqlalchemy.schema.sort_tables" title="sqlalchemy.schema.sort_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">sort_tables()</span></code></a> function cannot by itself
accommodate automatic resolution of dependency cycles between
tables, which are usually caused by mutually dependent foreign key
constraints. When these cycles are detected, the foreign keys
of these tables are omitted from consideration in the sort.
A warning is emitted when this condition occurs, which will be an
exception raise in a future release.   Tables which are not part
of the cycle will still be returned in dependency order.</p>
<p>To resolve these cycles, the
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint.params.use_alter" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ForeignKeyConstraint.use_alter</span></code></a> parameter may be
applied to those constraints which create a cycle.  Alternatively,
the <a class="reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints" title="sqlalchemy.schema.sort_tables_and_constraints"><code class="xref py py-func docutils literal notranslate"><span class="pre">sort_tables_and_constraints()</span></code></a> function will
automatically return foreign key constraints in a separate
collection when cycles are detected so that they may be applied
to a schema separately.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.sort_tables.params.tables"></span><strong>tables</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.sort_tables.params.tables">¶</a> – a sequence of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.sort_tables.params.skip_fn"></span><strong>skip_fn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.sort_tables.params.skip_fn">¶</a> – optional callable which will be passed a
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> object; if it returns True, this
constraint will not be considered as a dependency.  Note this is
<strong>different</strong> from the same parameter in
<a class="reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints" title="sqlalchemy.schema.sort_tables_and_constraints"><code class="xref py py-func docutils literal notranslate"><span class="pre">sort_tables_and_constraints()</span></code></a>, which is
instead passed the owning <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> object.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.sort_tables.params.extra_dependencies"></span><strong>extra_dependencies</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.sort_tables.params.extra_dependencies">¶</a> – a sequence of 2-tuples of tables which will
also be considered as dependent on each other.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints" title="sqlalchemy.schema.sort_tables_and_constraints"><code class="xref py py-func docutils literal notranslate"><span class="pre">sort_tables_and_constraints()</span></code></a></p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.sorted_tables" title="sqlalchemy.schema.MetaData.sorted_tables"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MetaData.sorted_tables</span></code></a> - uses this function to sort</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.schema.sort_tables_and_constraints">
<span class="property"><span class="pre">function</span> </span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">sort_tables_and_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_dependencies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_warn_for_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.sort_tables_and_constraints" title="Link to this definition">¶</a></dt>
<dd><p>Sort a collection of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>  /
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
objects.</p>
<p>This is a dependency-ordered sort which will emit tuples of
<code class="docutils literal notranslate"><span class="pre">(Table,</span> <span class="pre">[ForeignKeyConstraint,</span> <span class="pre">...])</span></code> such that each
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> follows its dependent <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects.
Remaining <a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
objects that are separate due to
dependency rules not satisfied by the sort are emitted afterwards
as <code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">[ForeignKeyConstraint</span> <span class="pre">...])</span></code>.</p>
<p>Tables are dependent on another based on the presence of
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> objects, explicit dependencies
added by <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.add_is_dependent_on" title="sqlalchemy.schema.Table.add_is_dependent_on"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.add_is_dependent_on()</span></code></a>,
as well as dependencies
stated here using the <a class="reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints.params.skip_fn" title="sqlalchemy.schema.sort_tables_and_constraints"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">sort_tables_and_constraints.skip_fn</span></code></a>
and/or <a class="reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints.params.extra_dependencies" title="sqlalchemy.schema.sort_tables_and_constraints"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">sort_tables_and_constraints.extra_dependencies</span></code></a>
parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.sort_tables_and_constraints.params.tables"></span><strong>tables</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints.params.tables">¶</a> – a sequence of <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.sort_tables_and_constraints.params.filter_fn"></span><strong>filter_fn</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints.params.filter_fn">¶</a> – optional callable which will be passed a
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> object,
and returns a value based on
whether this constraint should definitely be included or excluded as
an inline constraint, or neither.   If it returns False, the constraint
will definitely be included as a dependency that cannot be subject
to ALTER; if True, it will <strong>only</strong> be included as an ALTER result at
the end.   Returning None means the constraint is included in the
table-based result unless it is detected as part of a dependency cycle.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.sort_tables_and_constraints.params.extra_dependencies"></span><strong>extra_dependencies</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.sort_tables_and_constraints.params.extra_dependencies">¶</a> – a sequence of 2-tuples of tables which will
also be considered as dependent on each other.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.sort_tables" title="sqlalchemy.schema.sort_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">sort_tables()</span></code></a></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.BaseDDLElement">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">BaseDDLElement</span></span><a class="headerlink" href="#sqlalchemy.schema.BaseDDLElement" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <a class="reference internal" href="foundation.html#sqlalchemy.sql.expression.ClauseElement" title="sqlalchemy.sql.expression.ClauseElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.ClauseElement</span></code></a></p>
</div>
<p>The root of DDL constructs, including those that are sub-elements
within the “create table” and other processes.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.ExecutableDDLElement">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">ExecutableDDLElement</span></span><a class="headerlink" href="#sqlalchemy.schema.ExecutableDDLElement" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.roles.DDLRole</span></code>, <a class="reference internal" href="selectable.html#sqlalchemy.sql.expression.Executable" title="sqlalchemy.sql.expression.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression.Executable</span></code></a>, <a class="reference internal" href="#sqlalchemy.schema.BaseDDLElement" title="sqlalchemy.schema.BaseDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.BaseDDLElement</span></code></a></p>
</div>
<p>Base class for standalone executable DDL expression constructs.</p>
<p>This class is the base for the general purpose <a class="reference internal" href="#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a> class,
as well as the various create/drop clause constructs such as
<a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a>, <a class="reference internal" href="#sqlalchemy.schema.DropTable" title="sqlalchemy.schema.DropTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropTable</span></code></a>, <a class="reference internal" href="#sqlalchemy.schema.AddConstraint" title="sqlalchemy.schema.AddConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddConstraint</span></code></a>,
etc.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> is renamed from
<code class="xref py py-class docutils literal notranslate"><span class="pre">DDLElement</span></code>, which still exists for backwards compatibility.</p>
</div>
<p><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> integrates closely with SQLAlchemy events,
introduced in <a class="reference internal" href="event.html"><span class="std std-ref">Events</span></a>.  An instance of one is
itself an event receiving callable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">users</span><span class="p">,</span>
    <span class="s2">&quot;after_create&quot;</span><span class="p">,</span>
    <span class="n">AddConstraint</span><span class="p">(</span><span class="n">constraint</span><span class="p">,</span> <span class="n">isolate_from_table</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span>
        <span class="n">dialect</span><span class="o">=</span><span class="s2">&quot;postgresql&quot;</span>
    <span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a></p>
<p><a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents" title="sqlalchemy.events.DDLEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLEvents</span></code></a></p>
<p><a class="reference internal" href="event.html"><span class="std std-ref">Events</span></a></p>
<p><a class="reference internal" href="#schema-ddl-sequences"><span class="std std-ref">Controlling DDL Sequences</span></a></p>
</div>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.__call__"><span class="sig-name descname">__call__</span></a>()</p></td>
<td><p>Execute the DDL as a ddl_listener.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.against"><span class="sig-name descname">against</span></a>()</p></td>
<td><p>Return a copy of this <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> which
will include the given target.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if"><span class="sig-name descname">execute_if</span></a>()</p></td>
<td><p>Return a callable that will execute this
<a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> conditionally within an event
handler.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ExecutableDDLElement.__call__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ExecutableDDLElement.</span></code></a><span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.ExecutableDDLElement.__call__" title="Link to this definition">¶</a></dt>
<dd><p>Execute the DDL as a ddl_listener.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ExecutableDDLElement.against">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ExecutableDDLElement.</span></code></a><span class="sig-name descname"><span class="pre">against</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><span class="pre">SchemaItem</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ExecutableDDLElement.against" title="Link to this definition">¶</a></dt>
<dd><p>Return a copy of this <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> which
will include the given target.</p>
<p>This essentially applies the given item to the <code class="docutils literal notranslate"><span class="pre">.target</span></code> attribute of
the returned <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> object. This target
is then usable by event handlers and compilation routines in order to
provide services such as tokenization of a DDL string in terms of a
particular <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<p>When a <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> object is established as
an event handler for the <a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents.before_create" title="sqlalchemy.events.DDLEvents.before_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DDLEvents.before_create()</span></code></a> or
<a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents.after_create" title="sqlalchemy.events.DDLEvents.after_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DDLEvents.after_create()</span></code></a> events, and the event then
occurs for a given target such as a <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> or
<a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, that target is established with a copy of the
<a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> object using this method, which
then proceeds to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExecutableDDLElement.execute()</span></code>
method in order to invoke the actual DDL instruction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.schema.ExecutableDDLElement.against.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.against.params.target">¶</a> – a <a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a> that will be the subject
of a DDL operation.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a copy of this <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> with the
<code class="docutils literal notranslate"><span class="pre">.target</span></code> attribute assigned to the given
<a class="reference internal" href="metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a> - uses tokenization against the “target” when
processing the DDL string.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.ExecutableDDLElement.execute_if">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.ExecutableDDLElement.</span></code></a><span class="sig-name descname"><span class="pre">execute_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callable_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DDLIfCallable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if" title="Link to this definition">¶</a></dt>
<dd><p>Return a callable that will execute this
<a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutableDDLElement</span></code></a> conditionally within an event
handler.</p>
<p>Used to provide a wrapper for event listening:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="s2">&quot;before_create&quot;</span><span class="p">,</span>
    <span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;my_ddl&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s2">&quot;postgresql&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.ExecutableDDLElement.execute_if.params.dialect"></span><strong>dialect</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.dialect">¶</a> – <p>May be a string or tuple of strings.
If a string, it will be compared to the name of the
executing database dialect:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s2">&quot;postgresql&quot;</span><span class="p">)</span></pre></div>
</div>
<p>If a tuple, specifies multiple dialect names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;postgresql&quot;</span><span class="p">,</span> <span class="s2">&quot;mysql&quot;</span><span class="p">))</span></pre></div>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_"></span><strong>callable_</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.callable_">¶</a> – <p>A callable, which will be invoked with
three positional arguments as well as optional keyword
arguments:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">ddl<span class="colon">:</span></dt>
<dd class="field-odd"><p>This DDL element.</p>
</dd>
<dt class="field-even">target<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
object which is the
target of this event. May be None if the DDL is executed
explicitly.</p>
</dd>
<dt class="field-odd">bind<span class="colon">:</span></dt>
<dd class="field-odd"><p>The <a class="reference internal" href="connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> being used for DDL execution.
May be None if this construct is being created inline within
a table, in which case <code class="docutils literal notranslate"><span class="pre">compiler</span></code> will be present.</p>
</dd>
<dt class="field-even">tables<span class="colon">:</span></dt>
<dd class="field-even"><p>Optional keyword argument - a list of Table objects which are to
be created/ dropped within a MetaData.create_all() or drop_all()
method call.</p>
</dd>
<dt class="field-odd">dialect<span class="colon">:</span></dt>
<dd class="field-odd"><p>keyword argument, but always present - the
<a class="reference internal" href="internals.html#sqlalchemy.engine.Dialect" title="sqlalchemy.engine.Dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code></a> involved in the operation.</p>
</dd>
<dt class="field-even">compiler<span class="colon">:</span></dt>
<dd class="field-even"><p>keyword argument.  Will be <code class="docutils literal notranslate"><span class="pre">None</span></code> for an engine
level DDL invocation, but will refer to a <a class="reference internal" href="internals.html#sqlalchemy.sql.compiler.DDLCompiler" title="sqlalchemy.sql.compiler.DDLCompiler"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLCompiler</span></code></a>
if this DDL element is being created inline within a table.</p>
</dd>
<dt class="field-odd">state<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional keyword argument - will be the <code class="docutils literal notranslate"><span class="pre">state</span></code> argument
passed to this function.</p>
</dd>
<dt class="field-even">checkfirst<span class="colon">:</span></dt>
<dd class="field-even"><p>Keyword argument, will be True if the ‘checkfirst’ flag was
set during the call to <code class="docutils literal notranslate"><span class="pre">create()</span></code>, <code class="docutils literal notranslate"><span class="pre">create_all()</span></code>,
<code class="docutils literal notranslate"><span class="pre">drop()</span></code>, <code class="docutils literal notranslate"><span class="pre">drop_all()</span></code>.</p>
</dd>
</dl>
</div></blockquote>
<p>If the callable returns a True value, the DDL statement will be
executed.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.ExecutableDDLElement.execute_if.params.state"></span><strong>state</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.ExecutableDDLElement.execute_if.params.state">¶</a> – any value which will be passed to the callable_
as the <code class="docutils literal notranslate"><span class="pre">state</span></code> keyword argument.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">SchemaItem.ddl_if()</span></code></p>
<p><a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents" title="sqlalchemy.events.DDLEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLEvents</span></code></a></p>
<p><a class="reference internal" href="event.html"><span class="std std-ref">Events</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DDL">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DDL</span></span><a class="headerlink" href="#sqlalchemy.schema.DDL" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ExecutableDDLElement</span></code></a></p>
</div>
<p>A literal DDL statement.</p>
<p>Specifies literal SQL DDL to be executed by the database.  DDL objects
function as DDL event listeners, and can be subscribed to those events
listed in <a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents" title="sqlalchemy.events.DDLEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLEvents</span></code></a>, using either <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> objects as targets.
Basic templating support allows
a single DDL instance to handle repetitive tasks for multiple tables.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">event</span><span class="p">,</span> <span class="n">DDL</span>

<span class="n">tbl</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;users&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;uid&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">))</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span> <span class="s2">&quot;before_create&quot;</span><span class="p">,</span> <span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;DROP TRIGGER users_trigger&quot;</span><span class="p">))</span>

<span class="n">spow</span> <span class="o">=</span> <span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;ALTER TABLE </span><span class="si">%(table)s</span><span class="s2"> SET secretpowers TRUE&quot;</span><span class="p">)</span>
<span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span> <span class="s2">&quot;after_create&quot;</span><span class="p">,</span> <span class="n">spow</span><span class="o">.</span><span class="n">execute_if</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s2">&quot;somedb&quot;</span><span class="p">))</span>

<span class="n">drop_spow</span> <span class="o">=</span> <span class="n">DDL</span><span class="p">(</span><span class="s2">&quot;ALTER TABLE users SET secretpowers FALSE&quot;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">drop_spow</span><span class="p">)</span></pre></div>
</div>
<p>When operating on Table events, the following <code class="docutils literal notranslate"><span class="pre">statement</span></code>
string substitutions are available:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>%(table)s  - the Table name, with any required quoting applied
%(schema)s - the schema name, with any required quoting applied
%(fullname)s - the Table name including schema, quoted if needed</pre></div>
</div>
<p>The DDL’s “context”, if any, will be combined with the standard
substitutions noted above.  Keys present in the context will override
the standard substitutions.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DDL.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Create a DDL statement.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.DDL.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.DDL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.DDL.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.schema.DDL.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create a DDL statement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.DDL.params.statement"></span><strong>statement</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DDL.params.statement">¶</a> – <p>A string or unicode string to be executed.  Statements will be
processed with Python’s string formatting operator using
a fixed set of string substitutions, as well as additional
substitutions provided by the optional <a class="reference internal" href="#sqlalchemy.schema.DDL.params.context" title="sqlalchemy.schema.DDL"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">DDL.context</span></code></a>
parameter.</p>
<p>A literal ‘%’ in a statement must be escaped as ‘%%’.</p>
<p>SQL bind parameters are not available in DDL statements.</p>
</p></li>
<li><p><span class="target" id="sqlalchemy.schema.DDL.params.context"></span><strong>context</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DDL.params.context">¶</a> – Optional dictionary, defaults to None.  These values will be
available for use in string substitutions on the DDL statement.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="events.html#sqlalchemy.events.DDLEvents" title="sqlalchemy.events.DDLEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDLEvents</span></code></a></p>
<p><a class="reference internal" href="event.html"><span class="std std-ref">Events</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckFirst">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">CheckFirst</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckFirst" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Flag</span></code></p>
</div>
<p>Enumeration for the <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all.params.checkfirst" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.create_all.checkfirst</span></code></a>
parameter passed to methods like <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>,
<a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.drop_all" title="sqlalchemy.schema.MetaData.drop_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.drop_all()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.create" title="sqlalchemy.schema.Table.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.create()</span></code></a>, <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.drop" title="sqlalchemy.schema.Table.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.drop()</span></code></a> and
others.</p>
<p>This enumeration indicates what kinds of objects should be “checked”
with a separate query before emitting CREATE or DROP for that object.</p>
<p>Can use <code class="docutils literal notranslate"><span class="pre">CheckFirst(bool_value)</span></code> to convert from a boolean value.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1.</span></p>
</div>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.INDEXES"><span class="sig-name descname">INDEXES</span></a></p></td>
<td><p>Check for indexes</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.NONE"><span class="sig-name descname">NONE</span></a></p></td>
<td><p>No items should be checked</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.SEQUENCES"><span class="sig-name descname">SEQUENCES</span></a></p></td>
<td><p>Check for sequences</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.TABLES"><span class="sig-name descname">TABLES</span></a></p></td>
<td><p>Check for tables</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.TYPES"><span class="sig-name descname">TYPES</span></a></p></td>
<td><p>Check for custom datatypes that are created server-side</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CheckFirst.VIEWS"><span class="sig-name descname">VIEWS</span></a></p></td>
<td><p>Check for views</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckFirst.INDEXES">
<span class="property"><span class="pre">attribute</span> </span><a class="reference internal" href="#sqlalchemy.schema.CheckFirst"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckFirst.</span></code></a><span class="sig-name descname"><span class="pre">INDEXES</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckFirst.INDEXES" title="Link to this definition">¶</a></dt>
<dd><p>Check for indexes</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckFirst.NONE">
<span class="property"><span class="pre">attribute</span> </span><a class="reference internal" href="#sqlalchemy.schema.CheckFirst"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckFirst.</span></code></a><span class="sig-name descname"><span class="pre">NONE</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckFirst.NONE" title="Link to this definition">¶</a></dt>
<dd><p>No items should be checked</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckFirst.SEQUENCES">
<span class="property"><span class="pre">attribute</span> </span><a class="reference internal" href="#sqlalchemy.schema.CheckFirst"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckFirst.</span></code></a><span class="sig-name descname"><span class="pre">SEQUENCES</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">16</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckFirst.SEQUENCES" title="Link to this definition">¶</a></dt>
<dd><p>Check for sequences</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckFirst.TABLES">
<span class="property"><span class="pre">attribute</span> </span><a class="reference internal" href="#sqlalchemy.schema.CheckFirst"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckFirst.</span></code></a><span class="sig-name descname"><span class="pre">TABLES</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckFirst.TABLES" title="Link to this definition">¶</a></dt>
<dd><p>Check for tables</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckFirst.TYPES">
<span class="property"><span class="pre">attribute</span> </span><a class="reference internal" href="#sqlalchemy.schema.CheckFirst"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckFirst.</span></code></a><span class="sig-name descname"><span class="pre">TYPES</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">32</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckFirst.TYPES" title="Link to this definition">¶</a></dt>
<dd><p>Check for custom datatypes that are created server-side</p>
<p>This is currently used by PostgreSQL.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.CheckFirst.VIEWS">
<span class="property"><span class="pre">attribute</span> </span><a class="reference internal" href="#sqlalchemy.schema.CheckFirst"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CheckFirst.</span></code></a><span class="sig-name descname"><span class="pre">VIEWS</span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></span><a class="headerlink" href="#sqlalchemy.schema.CheckFirst.VIEWS" title="Link to this definition">¶</a></dt>
<dd><p>Check for views</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema._CreateDropBase">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">_CreateDropBase</span></span><a class="headerlink" href="#sqlalchemy.schema._CreateDropBase" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <a class="reference internal" href="#sqlalchemy.schema.ExecutableDDLElement" title="sqlalchemy.schema.ExecutableDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.ExecutableDDLElement</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Generic</span></code></p>
</div>
<p>Base class for DDL constructs that represent CREATE and DROP or
equivalents.</p>
<p>The common theme of _CreateDropBase is a single
<code class="docutils literal notranslate"><span class="pre">element</span></code> attribute which refers to the element
to be created or dropped.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.CreateTable">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">CreateTable</span></span><a class="headerlink" href="#sqlalchemy.schema.CreateTable" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.TableCreateDDL</span></code></p>
</div>
<p>Represent a CREATE TABLE statement.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CreateTable.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Create a <a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.CreateTable.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.CreateTable"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CreateTable.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><span class="pre">Table</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_foreign_key_constraints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">typing_Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><span class="pre">ForeignKeyConstraint</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_not_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.CreateTable.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.CreateTable.params.element"></span><strong>element</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CreateTable.params.element">¶</a> – a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> that’s the subject
of the CREATE</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CreateTable.params.on"></span><strong>on</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CreateTable.params.on">¶</a> – See the description for ‘on’ in <a class="reference internal" href="#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CreateTable.params.include_foreign_key_constraints"></span><strong>include_foreign_key_constraints</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CreateTable.params.include_foreign_key_constraints">¶</a> – optional sequence of
<a class="reference internal" href="constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> objects that will be included
inline within the CREATE construct; if omitted, all foreign key
constraints that do not specify use_alter=True are included.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CreateTable.params.if_not_exists"></span><strong>if_not_exists</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CreateTable.params.if_not_exists">¶</a> – <p>if True, an IF NOT EXISTS operator will be
applied to the construct.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.0b2.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropTable">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DropTable</span></span><a class="headerlink" href="#sqlalchemy.schema.DropTable" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.TableDropDDL</span></code></p>
</div>
<p>Represent a DROP TABLE statement.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropTable.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Create a <a class="reference internal" href="#sqlalchemy.schema.DropTable" title="sqlalchemy.schema.DropTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropTable</span></code></a> construct.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropTable.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.DropTable"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.DropTable.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><span class="pre">Table</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.DropTable.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#sqlalchemy.schema.DropTable" title="sqlalchemy.schema.DropTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropTable</span></code></a> construct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.DropTable.params.element"></span><strong>element</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropTable.params.element">¶</a> – a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> that’s the subject
of the DROP.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.DropTable.params.on"></span><strong>on</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropTable.params.on">¶</a> – See the description for ‘on’ in <a class="reference internal" href="#sqlalchemy.schema.DDL" title="sqlalchemy.schema.DDL"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDL</span></code></a>.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.DropTable.params.if_exists"></span><strong>if_exists</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropTable.params.if_exists">¶</a> – <p>if True, an IF EXISTS operator will be applied to the
construct.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.0b2.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropView">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DropView</span></span><a class="headerlink" href="#sqlalchemy.schema.DropView" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.TableDropDDL</span></code></p>
</div>
<p>‘DROP VIEW’ construct.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1: </span>the <a class="reference internal" href="#sqlalchemy.schema.DropView" title="sqlalchemy.schema.DropView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropView</span></code></a> construct became public
and was renamed from <code class="docutils literal notranslate"><span class="pre">_DropView</span></code>.</p>
</div>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropView.materialized"><span class="sig-name descname">materialized</span></a></p></td>
<td><p>Boolean flag indicating if this is a materialized view.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropView.materialized">
<span class="property"><span class="pre">attribute</span> </span><a class="reference internal" href="#sqlalchemy.schema.DropView"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.DropView.</span></code></a><span class="sig-name descname"><span class="pre">materialized</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></span><a class="headerlink" href="#sqlalchemy.schema.DropView.materialized" title="Link to this definition">¶</a></dt>
<dd><p>Boolean flag indicating if this is a materialized view.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.CreateColumn">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">CreateColumn</span></span><a class="headerlink" href="#sqlalchemy.schema.CreateColumn" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <a class="reference internal" href="#sqlalchemy.schema.BaseDDLElement" title="sqlalchemy.schema.BaseDDLElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.BaseDDLElement</span></code></a></p>
</div>
<p>Represent a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
as rendered in a CREATE TABLE statement,
via the <a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct.</p>
<p>This is provided to support custom column DDL within the generation
of CREATE TABLE statements, by using the
compiler extension documented in <a class="reference internal" href="compiler.html"><span class="std std-ref">Custom SQL Constructs and Compilation Extension</span></a>
to extend <a class="reference internal" href="#sqlalchemy.schema.CreateColumn" title="sqlalchemy.schema.CreateColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateColumn</span></code></a>.</p>
<p>Typical integration is to examine the incoming <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
object, and to redirect compilation if a particular flag or condition
is found:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">schema</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.ext.compiler</span><span class="w"> </span><span class="kn">import</span> <span class="n">compiles</span>


<span class="nd">@compiles</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">CreateColumn</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">compile</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">column</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">element</span>

    <span class="k">if</span> <span class="s2">&quot;special&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">info</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">compiler</span><span class="o">.</span><span class="n">visit_create_column</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>

    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> SPECIAL DIRECTIVE </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">compiler</span><span class="o">.</span><span class="n">type_compiler</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">type</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">default</span> <span class="o">=</span> <span class="n">compiler</span><span class="o">.</span><span class="n">get_column_default_string</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot; DEFAULT &quot;</span> <span class="o">+</span> <span class="n">default</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">column</span><span class="o">.</span><span class="n">nullable</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot; NOT NULL&quot;</span>

    <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">constraints</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">compiler</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">const</span><span class="p">)</span> <span class="k">for</span> <span class="n">const</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">constraints</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">text</span></pre></div>
</div>
<p>The above construct can be applied to a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Metadata</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">schema</span>

<span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">MetaData</span><span class="p">(),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;special&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">)),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">info</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;special&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}),</span>
<span class="p">)</span>

<span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span></pre></div>
</div>
<p>Above, the directives we’ve added to the <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.info" title="sqlalchemy.schema.Column.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Column.info</span></code></a>
collection
will be detected by our custom compilation scheme:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="n">x</span><span class="w"> </span><span class="n">SPECIAL</span><span class="w"> </span><span class="n">DIRECTIVE</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">        </span><span class="n">y</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">        </span><span class="n">z</span><span class="w"> </span><span class="n">SPECIAL</span><span class="w"> </span><span class="n">DIRECTIVE</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.schema.CreateColumn" title="sqlalchemy.schema.CreateColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateColumn</span></code></a> construct can also be used to skip certain
columns when producing a <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>.  This is accomplished by
creating a compilation rule that conditionally returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.
This is essentially how to produce the same effect as using the
<code class="docutils literal notranslate"><span class="pre">system=True</span></code> argument on <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, which marks a column
as an implicitly-present “system” column.</p>
<p>For example, suppose we wish to produce a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
which skips
rendering of the PostgreSQL <code class="docutils literal notranslate"><span class="pre">xmin</span></code> column against the PostgreSQL
backend, but on other backends does render it, in anticipation of a
triggered rule.  A conditional compilation rule could skip this name only
on PostgreSQL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.schema</span><span class="w"> </span><span class="kn">import</span> <span class="n">CreateColumn</span>


<span class="nd">@compiles</span><span class="p">(</span><span class="n">CreateColumn</span><span class="p">,</span> <span class="s2">&quot;postgresql&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">skip_xmin</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;xmin&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">compiler</span><span class="o">.</span><span class="n">visit_create_column</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>


<span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;xmin&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
<p>Above, a <a class="reference internal" href="#sqlalchemy.schema.CreateTable" title="sqlalchemy.schema.CreateTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTable</span></code></a> construct will generate a <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>
which only includes the <code class="docutils literal notranslate"><span class="pre">id</span></code> column in the string; the <code class="docutils literal notranslate"><span class="pre">xmin</span></code> column
will be omitted, but only against the PostgreSQL backend.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sqlalchemy.schema.insert_sentinel">
<span class="property"><span class="pre">function</span> </span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">insert_sentinel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_TypeEngineArgument</span><span class="p"><span class="pre">[</span></span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omit_from_statements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><span class="pre">Column</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#sqlalchemy.schema.insert_sentinel" title="Link to this definition">¶</a></dt>
<dd><p>Provides a surrogate <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that will act as a
dedicated insert <a class="reference internal" href="../glossary.html#term-sentinel"><span class="xref std std-term">sentinel</span></a> column, allowing efficient bulk
inserts with deterministic RETURNING sorting for tables that
don’t otherwise have qualifying primary key configurations.</p>
<p>Adding this column to a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object requires that a
corresponding database table actually has this column present, so if adding
it to an existing model, existing database tables would need to be migrated
(e.g. using ALTER TABLE or similar) to include this column.</p>
<p>For background on how this object is used, see the section
<a class="reference internal" href="connections.html#engine-insertmanyvalues-sentinel-columns"><span class="std std-ref">Configuring Sentinel Columns</span></a> as part of the
section <a class="reference internal" href="connections.html#engine-insertmanyvalues"><span class="std std-ref">“Insert Many Values” Behavior for INSERT statements</span></a>.</p>
<p>The <a class="reference internal" href="metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> returned will be a nullable integer column by
default and make use of a sentinel-specific default generator used only in
“insertmanyvalues” operations.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.orm_insert_sentinel" title="sqlalchemy.orm.orm_insert_sentinel"><code class="xref py py-func docutils literal notranslate"><span class="pre">orm_insert_sentinel()</span></code></a></p>
<p><a class="reference internal" href="metadata.html#sqlalchemy.schema.Column.params.insert_sentinel" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.insert_sentinel</span></code></a></p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues"><span class="std std-ref">“Insert Many Values” Behavior for INSERT statements</span></a></p>
<p><a class="reference internal" href="connections.html#engine-insertmanyvalues-sentinel-columns"><span class="std std-ref">Configuring Sentinel Columns</span></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.0.10.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.CreateSequence">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">CreateSequence</span></span><a class="headerlink" href="#sqlalchemy.schema.CreateSequence" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema._CreateBase</span></code></p>
</div>
<p>Represent a CREATE SEQUENCE statement.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropSequence">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DropSequence</span></span><a class="headerlink" href="#sqlalchemy.schema.DropSequence" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema._DropBase</span></code></p>
</div>
<p>Represent a DROP SEQUENCE statement.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.CreateIndex">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">CreateIndex</span></span><a class="headerlink" href="#sqlalchemy.schema.CreateIndex" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema._CreateBase</span></code></p>
</div>
<p>Represent a CREATE INDEX statement.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CreateIndex.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">Createindex</span></code> construct.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.CreateIndex.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.CreateIndex"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CreateIndex.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><span class="pre">Index</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_not_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.CreateIndex.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">Createindex</span></code> construct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.CreateIndex.params.element"></span><strong>element</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CreateIndex.params.element">¶</a> – a <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> that’s the subject
of the CREATE.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.CreateIndex.params.if_not_exists"></span><strong>if_not_exists</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.CreateIndex.params.if_not_exists">¶</a> – <p>if True, an IF NOT EXISTS operator will be
applied to the construct.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.0b2.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropIndex">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DropIndex</span></span><a class="headerlink" href="#sqlalchemy.schema.DropIndex" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema._DropBase</span></code></p>
</div>
<p>Represent a DROP INDEX statement.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropIndex.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Create a <a class="reference internal" href="#sqlalchemy.schema.DropIndex" title="sqlalchemy.schema.DropIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropIndex</span></code></a> construct.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropIndex.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.DropIndex"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.DropIndex.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><span class="pre">Index</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.DropIndex.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#sqlalchemy.schema.DropIndex" title="sqlalchemy.schema.DropIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropIndex</span></code></a> construct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.DropIndex.params.element"></span><strong>element</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropIndex.params.element">¶</a> – a <a class="reference internal" href="constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> that’s the subject
of the DROP.</p></li>
<li><p><span class="target" id="sqlalchemy.schema.DropIndex.params.if_exists"></span><strong>if_exists</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropIndex.params.if_exists">¶</a> – <p>if True, an IF EXISTS operator will be applied to the
construct.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.0b2.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.AddConstraint">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">AddConstraint</span></span><a class="headerlink" href="#sqlalchemy.schema.AddConstraint" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema._CreateBase</span></code></p>
</div>
<p>Represent an ALTER TABLE ADD CONSTRAINT statement.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.AddConstraint.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Construct a new <a class="reference internal" href="#sqlalchemy.schema.AddConstraint" title="sqlalchemy.schema.AddConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddConstraint</span></code></a> construct.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.AddConstraint.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.AddConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.AddConstraint.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><span class="pre">Constraint</span></a></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">isolate_from_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.AddConstraint.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.schema.AddConstraint" title="sqlalchemy.schema.AddConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddConstraint</span></code></a> construct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.AddConstraint.params.element"></span><strong>element</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.AddConstraint.params.element">¶</a> – a <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> object</p></li>
<li><p><span class="target" id="sqlalchemy.schema.AddConstraint.params.isolate_from_table"></span><strong>isolate_from_table</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.AddConstraint.params.isolate_from_table">¶</a> – <p>optional boolean.  Prevents the target
<a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> from being rendered inline in a “CONSTRAINT”
clause within a CREATE TABLE statement, in the case that the
constraint is associated with a <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> which is later
created using <a class="reference internal" href="metadata.html#sqlalchemy.schema.Table.create" title="sqlalchemy.schema.Table.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.create()</span></code></a> or <a class="reference internal" href="metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>.
This occurs by modifying the state of the <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a>
object itself such that the CREATE TABLE DDL process will skip it.
Used for the case when a separate <cite>ALTER TABLE…ADD CONSTRAINT</cite>
call will be emitted after the <cite>CREATE TABLE</cite> has already occurred.
<code class="docutils literal notranslate"><span class="pre">True</span></code> by default.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.0.39: </span>- added
<a class="reference internal" href="#sqlalchemy.schema.AddConstraint.params.isolate_from_table" title="sqlalchemy.schema.AddConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AddConstraint.isolate_from_table</span></code></a>, defaulting
to True.  Previously, the behavior of this parameter was implicitly
turned on in all cases.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropConstraint">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DropConstraint</span></span><a class="headerlink" href="#sqlalchemy.schema.DropConstraint" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema._DropBase</span></code></p>
</div>
<p>Represent an ALTER TABLE DROP CONSTRAINT statement.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropConstraint.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Construct a new <a class="reference internal" href="#sqlalchemy.schema.DropConstraint" title="sqlalchemy.schema.DropConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropConstraint</span></code></a> construct.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropConstraint.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.DropConstraint"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.DropConstraint.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><span class="pre">Constraint</span></a></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">cascade</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isolate_from_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">_NoArg</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">_NoArg.NO_ARG</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.DropConstraint.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.schema.DropConstraint" title="sqlalchemy.schema.DropConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropConstraint</span></code></a> construct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.schema.DropConstraint.params.element"></span><strong>element</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropConstraint.params.element">¶</a> – a <a class="reference internal" href="constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> object</p></li>
<li><p><span class="target" id="sqlalchemy.schema.DropConstraint.params.cascade"></span><strong>cascade</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropConstraint.params.cascade">¶</a> – optional boolean, indicates backend-specific
“CASCADE CONSTRAINT” directive should be rendered if available</p></li>
<li><p><span class="target" id="sqlalchemy.schema.DropConstraint.params.if_exists"></span><strong>if_exists</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropConstraint.params.if_exists">¶</a> – optional boolean, indicates backend-specific
“IF EXISTS” directive should be rendered if available</p></li>
<li><p><span class="target" id="sqlalchemy.schema.DropConstraint.params.isolate_from_table"></span><strong>isolate_from_table</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.schema.DropConstraint.params.isolate_from_table">¶</a> – <p>optional boolean. This is a deprecated
setting that when <code class="docutils literal notranslate"><span class="pre">True</span></code>, does the same thing that
<a class="reference internal" href="#sqlalchemy.schema.AddConstraint.params.isolate_from_table" title="sqlalchemy.schema.AddConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">AddConstraint.isolate_from_table</span></code></a> does, which is prevents
the constraint from being associated with an inline <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>
statement. It does not have any effect on the DROP process for a
table and is an artifact of older SQLAlchemy versions,
and will be removed in a future release.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.0.39: </span>- added
<a class="reference internal" href="#sqlalchemy.schema.DropConstraint.params.isolate_from_table" title="sqlalchemy.schema.DropConstraint"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">DropConstraint.isolate_from_table</span></code></a>, defaulting
to True.  Previously, the behavior of this parameter was implicitly
turned on in all cases.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.1: </span>- This parameter has been deprecated and
the default value of the flag was changed to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.CreateSchema">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">CreateSchema</span></span><a class="headerlink" href="#sqlalchemy.schema.CreateSchema" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema._CreateBase</span></code></p>
</div>
<p>Represent a CREATE SCHEMA statement.</p>
<p>The argument here is the string name of the schema.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.CreateSchema.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Create a new <a class="reference internal" href="#sqlalchemy.schema.CreateSchema" title="sqlalchemy.schema.CreateSchema"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateSchema</span></code></a> construct.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.CreateSchema.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.CreateSchema"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.CreateSchema.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_not_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.CreateSchema.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#sqlalchemy.schema.CreateSchema" title="sqlalchemy.schema.CreateSchema"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateSchema</span></code></a> construct.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropSchema">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">sqlalchemy.schema.</span></span><span class="sig-name descname"><span class="pre">DropSchema</span></span><a class="headerlink" href="#sqlalchemy.schema.DropSchema" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherits from</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema._DropBase</span></code></p>
</div>
<p>Represent a DROP SCHEMA statement.</p>
<p>The argument here is the string name of the schema.</p>
<table class="longtable docutils class-members align-default">
<thead>
<tr class="row-odd"><th class="head">Member Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.schema.DropSchema.__init__"><span class="sig-name descname">__init__</span></a>()</p></td>
<td><p>Create a new <a class="reference internal" href="#sqlalchemy.schema.DropSchema" title="sqlalchemy.schema.DropSchema"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropSchema</span></code></a> construct.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.schema.DropSchema.__init__">
<span class="property"><span class="pre">method</span> </span><a class="reference internal" href="#sqlalchemy.schema.DropSchema"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.schema.DropSchema.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cascade</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#sqlalchemy.schema.DropSchema.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#sqlalchemy.schema.DropSchema" title="sqlalchemy.schema.DropSchema"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropSchema</span></code></a> construct.</p>
</dd></dl>

</dd></dl>

</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="constraints.html" title="previous chapter">Defining Constraints and Indexes</a>
        Next:
        <a href="types.html" title="next chapter">SQL Datatype Objects</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2026, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="https://www.sphinx-doc.org">Sphinx</a> 9.1.0.

    Documentation last generated: Wed 21 Jan 2026 02:26:37 PM  EST

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      document.documentElement.dataset.content_root = '../';

    </script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


