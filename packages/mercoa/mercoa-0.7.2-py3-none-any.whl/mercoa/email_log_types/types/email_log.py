# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
import typing_extensions
from ...core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from ...core.serialization import FieldMetadata
from ...invoice_types.types.invoice_id import InvoiceId
from .email_log_attachment import EmailLogAttachment
from .email_log_id import EmailLogId
from .incoming_email_log_status import IncomingEmailLogStatus


class EmailLog(UniversalBaseModel):
    """
    Examples
    --------
    import datetime

    from mercoa.email_log_types import EmailLog, EmailLogAttachment

    EmailLog(
        id="1234",
        status="PROCESSED",
        subject="Invoice #1234",
        from_="John Doe <john.doe@example.com>",
        to="Jane Doe <jane.doe@example.com>",
        html_body="<html><body><p>Hi Jane,</p><p>Please find attached the invoice for your recent purchase.</p><p>Thanks,</p><p>John</p></body></html>",
        text_body="Hi Jane,\n\nPlease find attached the invoice for your recent purchase.\n\nThanks,\nJohn",
        created_at=datetime.datetime.fromisoformat(
            "2021-01-01 00:00:00+00:00",
        ),
        attachment=EmailLogAttachment(
            filename="invoice.pdf",
            content_type="application/pdf",
        ),
    )
    """

    id: EmailLogId
    status: IncomingEmailLogStatus = pydantic.Field()
    """
    The status of the email log. If the status is PENDING, the email has not been processed yet. If the status is PROCESSED, the email has been processed and the invoice has been created. If the status is FAILED, the email was not processed due to an error.
    """

    subject: str
    from_: typing_extensions.Annotated[str, FieldMetadata(alias="from")]
    to: str
    html_body: typing_extensions.Annotated[str, FieldMetadata(alias="htmlBody")]
    text_body: typing_extensions.Annotated[str, FieldMetadata(alias="textBody")]
    attachment: typing.Optional[EmailLogAttachment] = None
    created_at: typing_extensions.Annotated[dt.datetime, FieldMetadata(alias="createdAt")]
    invoice_id: typing_extensions.Annotated[typing.Optional[InvoiceId], FieldMetadata(alias="invoiceId")] = None

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
