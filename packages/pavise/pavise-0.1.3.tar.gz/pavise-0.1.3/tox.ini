[tox]
envlist = py{39,310,311,312}-{pandas,polars,all},lint,type
isolated_build = true

[testenv]
deps =
    pytest>=7.0.0
    pytest-cov>=4.0.0
    pandas: pandas>=1.3.0
    polars: polars>=0.15.0
    all: pandas>=1.3.0
    all: polars>=0.15.0
commands =
    pandas: pytest tests/test_pandas/ -v
    polars: pytest tests/test_polars/ -v
    all: pytest tests/ -v

[testenv:lint]
skip_install = true
allowlist_externals = uv
commands =
    uv run ruff check
    uv run ruff format --check

[testenv:type]
skip_install = true
allowlist_externals = uv
commands =
    uv run pyrefly check
