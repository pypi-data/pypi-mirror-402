"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["14222"],{23528:function(t,n,e){e.a(t,async function(t,i){try{e.d(n,{$3:function(){return y},$O:function(){return E},$j:function(){return m},ED:function(){return u},JE:function(){return k},OQ:function(){return M},PU:function(){return O},Ph:function(){return p},Uf:function(){return C},W1:function(){return v},Wr:function(){return _},Z:function(){return d},gF:function(){return S},iY:function(){return x},jU:function(){return c},nN:function(){return A},p3:function(){return f},pJ:function(){return g},r_:function(){return l},sz:function(){return h}});var r=e(31432),a=(e(74423),e(18111),e(13579),e(69085),e(26099),e(21699),e(28978)),o=e(380),s=t([o]);o=(s.then?(await s)():s)[0];var u=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({}),c=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],l=["L","gal","ft³","m³","CCF","MCF"],d=function(t){return t.sendMessagePromise({type:"recorder/info"})},f=function(t,n){return t.callWS({type:"recorder/list_statistic_ids",statistic_type:n})},_=function(t,n){return t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:n})},h=function(t,n,e,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hour",a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return t.callWS({type:"recorder/statistics_during_period",start_time:n.toISOString(),end_time:null==e?void 0:e.toISOString(),statistic_ids:i,period:r,units:a,types:o})},g=function(t,n,e,i){return t.callWS({type:"recorder/statistic_during_period",statistic_id:n,units:i,fixed_period:e.fixed_period?{start_time:e.fixed_period.start instanceof Date?e.fixed_period.start.toISOString():e.fixed_period.start,end_time:e.fixed_period.end instanceof Date?e.fixed_period.end.toISOString():e.fixed_period.end}:void 0,calendar:e.calendar?Object.assign(Object.assign({},"week"===e.calendar.period?{first_weekday:(0,o.D)(t.locale).substring(0,3)}:{}),e.calendar):void 0,rolling_window:e.rolling_window})},p=function(t){return t.callWS({type:"recorder/validate_statistics"})},v=function(t,n,e,i){return t.callWS({type:"recorder/update_statistics_metadata",statistic_id:n,unit_of_measurement:e,unit_class:i})},y=function(t,n){return t.callWS({type:"recorder/clear_statistics",statistic_ids:n})},m=function(t){var n=null;if(!t)return null;var e,i=(0,r.A)(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;null!==a.change&&void 0!==a.change&&(null===n?n=a.change:n+=a.change)}}catch(o){i.e(o)}finally{i.f()}return n},S=function(t,n){var e,i=null,a=(0,r.A)(n);try{for(a.s();!(e=a.n()).done;){var o=e.value;if(o in t){var s=m(t[o]);null!==s&&(null===i?i=s:i+=s)}}}catch(u){a.e(u)}finally{a.f()}return i},x=function(t,n){return t.some(function(t){return void 0!==t[n]&&null!==t[n]})},b=["mean","min","max"],w=["sum","state","change"],A=function(t,n){return!(!b.includes(n)||0===t.mean_type)||!(!w.includes(n)||!t.has_sum)},C=function(t,n,e,i,r){var a=new Date(e).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:n,start_time:a,adjustment:i,adjustment_unit_of_measurement:r})},E=function(t,n,e){var i=t.states[n];return i?(0,a.u)(i):(null==e?void 0:e.name)||n},k=function(t,n,e){var i,r;n&&(i=null===(r=t.states[n])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===i?null==e?void 0:e.statistics_unit_of_measurement:i},M=function(t){return t.includes(":")},O=function(t){return t.callWS({type:"recorder/update_statistics_issues"})};i()}catch(W){i(W)}})},57545:function(t,n,e){e.a(t,async function(t,i){try{e.r(n);var r,a,o,s,u,c,l=e(72153),d=e(44734),f=e(43080),_=e(69683),h=e(6454),g=(e(28706),e(72712),e(18111),e(18237),e(26099),e(16034),e(40445)),p=e(96196),v=e(77845),y=e(6415),m=e(79791),S=(e(76776),e(5127)),x=(e(67094),e(34127)),b=e(38114),w=e(54706),A=e(85979),C=e(91874),E=e(784),k=t([S,x,b,C]);[S,x,b,C]=k.then?(await k)():k;var M={maximumFractionDigits:0},O=function(t){function n(){var t;(0,d.A)(this,n);for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(t=(0,_.A)(this,n,[].concat(i))).hassSubscribeRequiredHostProps=["_config"],t}return(0,h.A)(n,t),(0,f.A)(n,[{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(t){this._config=t}},{key:"hassSubscribe",value:function(){var t,n=this;return[(0,b.tb)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe(function(t){n._data=t})]}},{key:"shouldUpdate",value:function(t){var n;return(0,E.xP)(this,t)||t.size>1||!t.has("hass")||!(null===(n=this._data)||void 0===n||!n.co2SignalEntity)&&this.hass.states[this._data.co2SignalEntity]!==t.get("hass").states[this._data.co2SignalEntity]}},{key:"render",value:function(){var t;if(!this._config||!this.hass)return p.s6;if(!this._data)return(0,p.qy)(r||(r=(0,l.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));if(!this._data.co2SignalEntity)return p.s6;if(!this.hass.states[this._data.co2SignalEntity])return(0,p.qy)(a||(a=(0,l.A)(['<hui-warning .hass="','"> '," </hui-warning>"])),this.hass,(0,A.j)(this.hass,this._data.co2SignalEntity));var n,e=(0,b.gv)(this._data),i=e.summedData,c=(e.compareSummedData,null!==(t=i.total.from_grid)&&void 0!==t?t:0);if(this._data.fossilEnergyConsumption){var d,f,_=this._data.fossilEnergyConsumption?Object.values(this._data.fossilEnergyConsumption).reduce(function(t,n){return t+n},0):0,h=null!==(d=i.total.solar)&&void 0!==d?d:0,g=null!==(f=i.total.to_grid)&&void 0!==f?f:0,v=c+Math.max(0,h-g);v&&(n=(0,m.L)(100*(1-_/v)))}return(0,p.qy)(o||(o=(0,l.A)([" <ha-card> "," </ha-card> "])),void 0!==n?(0,p.qy)(s||(s=(0,l.A)([' <ha-gauge min="0" max="100" .value="','" .formatOptions="','" .locale="','" label="%" style="','"></ha-gauge> <ha-svg-icon id="info" .path="','"></ha-svg-icon> <ha-tooltip for="info" placement="left"> ',' </ha-tooltip> <div class="name"> '," </div> "])),n,M,this.hass.locale,(0,y.W)({"--gauge-color":this._computeSeverity(n)}),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.card_indicates_energy_used"),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_consumed")):(0,p.qy)(u||(u=(0,l.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_not_calculated")))}},{key:"_computeSeverity",value:function(t){return t<10?C.severityMap.red:t<30?C.severityMap.yellow:t>75?C.severityMap.green:C.severityMap.normal}}])}((0,w.E)(p.WF));O.styles=(0,p.AH)(c||(c=(0,l.A)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}"]))),(0,g.Cg)([(0,v.MZ)({attribute:!1})],O.prototype,"hass",void 0),(0,g.Cg)([(0,v.wk)()],O.prototype,"_config",void 0),(0,g.Cg)([(0,v.wk)()],O.prototype,"_data",void 0),O=(0,g.Cg)([(0,v.EM)("hui-energy-carbon-consumed-gauge-card")],O),i()}catch(W){i(W)}})},56434:function(t,n,e){e.d(n,{e:function(){return r}});var i=e(81977);function r(t,n,e){return(0,i.P)(t,12*n,e)}}}]);
//# sourceMappingURL=14222.a36f60fb29f11a7a.js.map