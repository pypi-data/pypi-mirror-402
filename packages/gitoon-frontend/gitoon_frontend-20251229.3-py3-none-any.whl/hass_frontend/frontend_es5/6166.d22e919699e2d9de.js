"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["6166"],{57094:function(n,t,e){e.d(t,{g:function(){return r},x:function(){return o}});var i=e(7739);e(44114),e(72712),e(18111),e(18237),e(26099);function r(n){return n.reduce(function(n,t){return"conditions"in t&&t.conditions&&n.push.apply(n,(0,i.A)(r(t.conditions))),"screen"===t.condition&&t.media_query&&n.push(t.media_query),n},[])}function o(n){return n.reduce(function(n,t){return"conditions"in t&&t.conditions&&n.push.apply(n,(0,i.A)(o(t.conditions))),"time"===t.condition&&n.push(t),n},[])}},43574:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{b:function(){return d},m:function(){return f}});e(18111),e(7588),e(26099),e(23500);var r=e(71769),o=e(14487),s=e(57094),u=e(25075),a=n([u,o]);[u,o]=a.then?(await a)():a;var c=2147483647;function d(n,t,e,i){var u=(0,s.g)(n);if(0!==u.length){var a=1===n.length&&"screen"===n[0].condition&&!!n[0].media_query;u.forEach(function(s){var u=(0,r.m)(s,function(e){if(a)i(e);else{var r=(0,o.XH)(n,t);i(r)}});e(u)})}}function f(n,t,e,i){var r=(0,s.x)(n);0!==r.length&&r.forEach(function(r){var s,a=function(){var e=(0,u.S)(t,r);if(void 0!==e){var l=Math.min(e,c);s=setTimeout(function(){if(e<=c){var r=(0,o.XH)(n,t);i(r)}a()},l)}};e(function(){void 0!==s&&clearTimeout(s)}),a()})}i()}catch(l){i(l)}})},25075:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{S:function(){return v}});e(44114),e(72712),e(26099);var r=e(74487),o=e(31886),s=e(92913),u=e(35932),a=e(78733),c=e(83339),l=e(46927),d=e(82447),f=n([r,o,d]);function v(n,t){var e=t.after,i=t.before,r=t.weekdays,f=n.locale.time_zone===l.Wj.server?n.config.time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,h=new o.BB(new Date,f),v=[];if(e){var y=(0,d.MV)(e,f);y<=h&&(y=(0,s.f)(y,1)),v.push(y)}if(i){var p=(0,d.MV)(i,f);p<=h&&(p=(0,s.f)(p,1)),v.push(p)}if(r&&r.length>0&&r.length<7){var _=(0,s.f)(h,1),b=(0,u.o)(_);v.push(b)}if(0!==v.length){var m=v.reduce(function(n,t){return t<n?t:n}),g=(0,a.z)(m,1);return(0,c.b)(g,h)}}[r,o,d]=f.then?(await f)():f,i()}catch(h){i(h)}})},82447:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{MV:function(){return f},Uo:function(){return h},fn:function(){return y}});var r=e(74487),o=(e(74423),e(18111),e(81148),e(26099),e(58940),e(27495),e(90906),e(21699),e(42762),e(31886)),s=e(7562),u=e(72659),a=e(20687),c=e(46927),l=e(96029),d=n([r,o]);function y(n){if(!n||""===n.trim())return!1;var t=n.split(":");if(t.length<2||t.length>3)return!1;if(!t.every(function(n){return/^\d+$/.test(n)}))return!1;var e=parseInt(t[0],10),i=parseInt(t[1],10),r=3===t.length?parseInt(t[2],10):0;return!(isNaN(e)||isNaN(i)||isNaN(r))&&(e>=0&&e<=23&&i>=0&&i<=59&&r>=0&&r<=59)}[r,o]=d.then?(await d)():d;var f=function(n,t){var e=n.split(":"),i=parseInt(e[0],10),r=parseInt(e[1],10),s=3===e.length?parseInt(e[2],10):0,u=new o.BB(new Date,t),a=new o.BB(u.getFullYear(),u.getMonth(),u.getDate(),i,r,s,0,t);return new Date(a.getTime())},h=function(n,t){var e=t.after,i=t.before,r=t.weekdays,d=n.locale.time_zone===c.Wj.server?n.config.time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,h=new o.BB(new Date,d);if(r&&r.length>0){var v=l.sj[h.getDay()];if(!r.includes(v))return!1}if(!e&&!i)return!0;var y=e?f(e,d):void 0,p=i?f(i,d):void 0;return y&&p?(0,s.Y)(p,y)?!(0,s.Y)(h,y)||!(0,u.d)(h,p):(0,a.v)(h,{start:y,end:p}):y?!(0,s.Y)(h,y):!p||!(0,u.d)(h,p)};i()}catch(v){i(v)}})},85547:function(n,t,e){e.d(t,{Fj:function(){return r},Gu:function(){return o},H2:function(){return u},xA:function(){return c},xs:function(){return s}});e(50113),e(18111),e(20116),e(69085),e(26099),e(16034);var i=e(69093),r=function(n){return n.callWS({type:"person/list"})},o=function(n,t){return n.callWS(Object.assign({type:"person/create"},t))},s=function(n,t,e){return n.callWS(Object.assign({type:"person/update",person_id:t},e))},u=function(n,t){return n.callWS({type:"person/delete",person_id:t})},a={},c=function(n){var t;if(null!==(t=n.user)&&void 0!==t&&t.id){var e=a[n.user.id];if(e){var r=n.states[e];if(r&&r.attributes.user_id===n.user.id)return r}var o=Object.values(n.states).find(function(t){return t.attributes.user_id===n.user.id&&"person"===(0,i.t)(t)});return o&&(a[n.user.id]=o.entity_id),o}}},91263:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{M:function(){return s}});e(44114),e(18111),e(7588),e(62953);var r=e(43574),o=n([r]);r=(o.then?(await o)():o)[0];const s=n=>class extends n{connectedCallback(){super.connectedCallback(),this.setupConditionalListeners()}disconnectedCallback(){super.disconnectedCallback(),this.clearConditionalListeners()}clearConditionalListeners(){this.__listeners.forEach(n=>n()),this.__listeners=[]}addConditionalListener(n){this.__listeners.push(n)}setupConditionalListeners(n){const t=this.config||this._config,e=n||(null==t?void 0:t.visibility);if(!e||!this.hass)return;const i=n=>{this._updateVisibility?this._updateVisibility(n):this._updateElement&&t&&this._updateElement(t)};(0,r.b)(e,this.hass,n=>this.addConditionalListener(n),i),(0,r.m)(e,this.hass,n=>this.addConditionalListener(n),i)}constructor(...n){super(...n),this.__listeners=[]}};i()}catch(s){i(s)}})},14487:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{Wx:function(){return C},XH:function(){return w},db:function(){return D},lB:function(){return j}});e(74423),e(44114),e(18111),e(81148),e(22489),e(61701),e(13579),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(62953);var r=e(44537),o=e(82447),s=e(96029),u=e(78649),a=e(22675),c=e(85547),l=n([o]);function f(n,t){var e;if((0,u.n)(t)&&n.states[t])return null===(e=n.states[t])||void 0===e?void 0:e.state}function h(n,t){var e;const i=n.entity&&t.states[n.entity]?t.states[n.entity].state:a.HV;let o=null!==(e=n.state)&&void 0!==e?e:n.state_not;if(Array.isArray(o)){const n=o.map(n=>f(t,n)).filter(n=>void 0!==n);o=[...o,...n]}else if("string"==typeof o){const n=f(t,o);o=[o],n&&o.push(n)}return null!=n.state?(0,r.e)(o).includes(i):!(0,r.e)(o).includes(i)}function v(n,t){var e;const i=null===(e=n.entity?t.states[n.entity]:void 0)||void 0===e?void 0:e.state;let r=n.above,o=n.below;var s,u;"string"==typeof r&&(r=null!==(s=f(t,r))&&void 0!==s?s:r);"string"==typeof o&&(o=null!==(u=f(t,o))&&void 0!==u?u:o);const a=Number(i),c=Number(r),l=Number(o);return!isNaN(a)&&((null==n.above||isNaN(c)||c<a)&&(null==n.below||isNaN(l)||l>a))}function y(n,t){return(0,o.Uo)(t,n)}function p(n,t){var e;const i=(0,c.xA)(t);return!!i&&(null===(e=n.locations)||void 0===e?void 0:e.includes(i.state))}function _(n,t){var e;return!(!n.users||null===(e=t.user)||void 0===e||!e.id)&&n.users.includes(t.user.id)}function b(n,t){return!n.conditions||w(n.conditions,t)}function m(n,t){return!n.conditions||!w(n.conditions,t)}function g(n,t){return!n.conditions||n.conditions.some(n=>w([n],t))}function w(n,t){return n.every(n=>{if("condition"in n)switch(n.condition){case"time":return y(n,t);case"screen":return!!(e=n).media_query&&matchMedia(e.media_query).matches;case"user":return _(n,t);case"location":return p(n,t);case"numeric_state":return v(n,t);case"and":return b(n,t);case"not":return m(n,t);case"or":return g(n,t);default:return h(n,t)}var e;return h(n,t)})}function C(n){const t=new Set;for(const o of n)if("numeric_state"===o.condition)o.entity&&t.add(o.entity),"string"==typeof o.above&&(0,u.n)(o.above)&&t.add(o.above),"string"==typeof o.below&&(0,u.n)(o.below)&&t.add(o.below);else if("state"===o.condition){var e,i;o.entity&&t.add(o.entity),[...null!==(e=(0,r.e)(o.state))&&void 0!==e?e:[],...null!==(i=(0,r.e)(o.state_not))&&void 0!==i?i:[]].forEach(n=>{n&&(0,u.n)(n)&&t.add(n)})}else if("conditions"in o&&o.conditions)return new Set([...t,...C(o.conditions)]);return t}function k(n){return null!=n.entity&&(null!=n.state||null!=n.state_not)}function A(n){const t=null!=n.after&&""!==n.after,e=null!=n.before&&""!==n.before,i=t||e,r=null!=n.weekdays&&n.weekdays.length>0,u=!r||n.weekdays.every(n=>s.ZV.includes(n)),a=(!t||(0,o.fn)(n.after))&&(!e||(0,o.fn)(n.before)),c=!t||!e||n.after!==n.before;return(i||r)&&u&&a&&c}function N(n){return null!=n.users}function E(n){return null!=n.locations}function V(n){return null!=n.conditions}function M(n){return null!=n.conditions}function L(n){return null!=n.conditions}function B(n){return null!=n.entity&&(null!=n.above||null!=n.below)}function D(n){return n.every(n=>{if("condition"in n)switch(n.condition){case"screen":return null!=n.media_query;case"time":return A(n);case"user":return N(n);case"location":return E(n);case"numeric_state":return B(n);case"and":return V(n);case"not":return M(n);case"or":return L(n);default:return k(n)}return k(n)})}function j(n,t){return"conditions"in n&&n.conditions?{...n,conditions:n.conditions.map(n=>j(n,t))}:"state"===n.condition||"numeric_state"===n.condition?{entity:t,...n}:n}o=(l.then?(await l)():l)[0],i()}catch(d){i(d)}})},37693:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{E:function(){return y}});var r=e(44734),o=e(43080),s=e(69683),u=e(6454),a=e(25460),c=(e(49255),e(16280),e(28706),e(2008),e(18111),e(22489),e(26099),e(40445)),l=e(96196),d=e(77845),f=e(91263),h=e(14487),v=n([f,h]);[f,h]=v.then?(await v)():v;var y=function(n){function t(){var n;(0,r.A)(this,t);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=(0,s.A)(this,t,[].concat(i))).preview=!1,n}return(0,u.A)(t,n),(0,o.A)(t,[{key:"createRenderRoot",value:function(){return this}},{key:"validateConfig",value:function(n){if(!n.conditions)throw new Error("No conditions configured");if(!Array.isArray(n.conditions))throw new Error("Conditions need to be an array");if(!(0,h.db)(n.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=n}},{key:"disconnectedCallback",value:function(){(0,a.A)(t,"disconnectedCallback",this,3)([])}},{key:"connectedCallback",value:function(){(0,a.A)(t,"connectedCallback",this,3)([]),this._updateVisibility()}},{key:"setupConditionalListeners",value:function(){if(this._config&&this.hass){var n=this._config.conditions.filter(function(n){return"condition"in n});(0,a.A)(t,"setupConditionalListeners",this,3)([n])}}},{key:"update",value:function(n){(0,a.A)(t,"update",this,3)([n]),(n.has("_element")||n.has("_config")||n.has("hass")||n.has("preview"))&&(this.clearConditionalListeners(),this.setupConditionalListeners(),this._updateVisibility())}},{key:"_updateVisibility",value:function(n){if(this._element&&this.hass&&this._config){this._element.preview=this.preview;var t=null!=n?n:(0,h.XH)(this._config.conditions,this.hass);this.setVisibility(t)}}},{key:"setVisibility",value:function(n){if(this._element&&this.hass){var t=this.preview||n;this.hidden!==!t&&(this.toggleAttribute("hidden",!t),this.style.setProperty("display",t?"":"none")),t?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}}}])}((0,f.M)(l.mN));(0,c.Cg)([(0,d.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,c.Cg)([(0,d.MZ)({type:Boolean})],y.prototype,"preview",void 0),(0,c.Cg)([(0,d.wk)()],y.prototype,"_config",void 0),y=(0,c.Cg)([(0,d.EM)("hui-conditional-base")],y),i()}catch(p){i(p)}})},80725:function(n,t,e){e.a(n,async function(n,i){try{e.r(t);var r=e(44734),o=e(43080),s=e(69683),u=e(25460),a=e(6454),c=(e(16280),e(69085),e(40445)),l=e(77845),d=e(37693),f=e(94225),h=e(1087),v=n([d,f]);[d,f]=v.then?(await v)():v;var y=function(n){function t(){return(0,r.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,n),(0,o.A)(t,[{key:"setConfig",value:function(n){if(this.validateConfig(n),!n.row)throw new Error("No row configured");this._element=(0,f.T)(n.state_color?Object.assign({state_color:!0},n.row):n.row)}},{key:"setVisibility",value:function(n){var e=this.preview||n,i=this.hidden;(0,u.A)(t,"setVisibility",this,3)([n]),i!==this.hidden&&(0,h.r)(this,"row-visibility-changed",{row:this,value:e})}}])}(d.E);y=(0,c.Cg)([(0,l.EM)("hui-conditional-row")],y),i()}catch(p){i(p)}})},92913:function(n,t,e){e.d(t,{f:function(){return o}});var i=e(51039),r=e(83504);function o(n,t,e){var o=(0,r.a)(n,null==e?void 0:e.in);return isNaN(t)?(0,i.w)((null==e?void 0:e.in)||n,NaN):t?(o.setDate(o.getDate()+t),o):o}},78733:function(n,t,e){e.d(t,{z:function(){return o}});var i=e(9160),r=e(83504);function o(n,t,e){var o=(0,r.a)(n,null==e?void 0:e.in);return o.setTime(o.getTime()+t*i.Cg),o}},83339:function(n,t,e){e.d(t,{b:function(){return r}});var i=e(83504);function r(n,t){return+(0,i.a)(n)-+(0,i.a)(t)}},72659:function(n,t,e){e.d(t,{d:function(){return r}});var i=e(83504);function r(n,t){return+(0,i.a)(n)>+(0,i.a)(t)}},7562:function(n,t,e){e.d(t,{Y:function(){return r}});var i=e(83504);function r(n,t){return+(0,i.a)(n)<+(0,i.a)(t)}},20687:function(n,t,e){e.d(t,{v:function(){return o}});var i=e(78261),r=(e(26910),e(83504));function o(n,t,e){var o=+(0,r.a)(n,null==e?void 0:e.in),s=[+(0,r.a)(t.start,null==e?void 0:e.in),+(0,r.a)(t.end,null==e?void 0:e.in)].sort(function(n,t){return n-t}),u=(0,i.A)(s,2),a=u[0],c=u[1];return o>=a&&o<=c}}}]);
//# sourceMappingURL=6166.d22e919699e2d9de.js.map