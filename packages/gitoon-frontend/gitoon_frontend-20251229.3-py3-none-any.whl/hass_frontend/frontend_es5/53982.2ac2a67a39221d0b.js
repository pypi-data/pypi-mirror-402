/*! For license information please see 53982.2ac2a67a39221d0b.js.LICENSE.txt */
"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["53982"],{29781:function(e,t,a){a.d(t,{$:function(){return x}});var s,i,r,n=a(44734),o=a(43080),c=a(69683),l=a(6454),h=a(25460),d=(a(69085),a(40445)),p=a(96592),u=a(77845),g=a(72153),f=a(12451),_=a(12130),v=a(84730),m=a(96196),y=a(94333),b=_.QQ?{passive:!0}:void 0,w=function(e){function t(){var e;return(0,n.A)(this,t),(e=(0,c.A)(this,t,arguments)).centerTitle=!1,e.handleTargetScroll=function(){e.mdcFoundation.handleTargetScroll()},e.handleNavigationClick=function(){e.mdcFoundation.handleNavigationClick()},e}return(0,l.A)(t,e),(0,o.A)(t,[{key:"scrollTarget",get:function(){return this._scrollTarget||window},set:function(e){this.unregisterScrollListener();var t=this.scrollTarget;this._scrollTarget=e,this.updateRootPosition(),this.requestUpdate("scrollTarget",t),this.registerScrollListener()}},{key:"updateRootPosition",value:function(){if(this.mdcRoot){var e=this.scrollTarget===window;this.mdcRoot.style.position=e?"":"absolute"}}},{key:"render",value:function(){var e=(0,m.qy)(s||(s=(0,g.A)(['<span class="mdc-top-app-bar__title"><slot name="title"></slot></span>'])));return this.centerTitle&&(e=(0,m.qy)(i||(i=(0,g.A)(['<section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-center">',"</section>"])),e)),(0,m.qy)(r||(r=(0,g.A)([' <header class="mdc-top-app-bar ','"> <div class="mdc-top-app-bar__row"> <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start" id="navigation"> <slot name="navigationIcon" @click="','"></slot> '," </section> ",' <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" id="actions" role="toolbar"> <slot name="actionItems"></slot> </section> </div> </header> <div class="','"> <slot></slot> </div> '])),(0,y.H)(this.barClasses()),this.handleNavigationClick,this.centerTitle?null:e,this.centerTitle?e:null,(0,y.H)(this.contentClasses()))}},{key:"createAdapter",value:function(){var e=this;return Object.assign(Object.assign({},(0,f.i)(this.mdcRoot)),{setStyle:function(t,a){return e.mdcRoot.style.setProperty(t,a)},getTopAppBarHeight:function(){return e.mdcRoot.clientHeight},notifyNavigationIconClicked:function(){e.dispatchEvent(new Event(v.P$.NAVIGATION_EVENT,{bubbles:!0,cancelable:!0}))},getViewportScrollY:function(){return e.scrollTarget instanceof Window?e.scrollTarget.pageYOffset:e.scrollTarget.scrollTop},getTotalActionItems:function(){return e._actionItemsSlot.assignedNodes({flatten:!0}).length}})}},{key:"registerListeners",value:function(){this.registerScrollListener()}},{key:"unregisterListeners",value:function(){this.unregisterScrollListener()}},{key:"registerScrollListener",value:function(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,b)}},{key:"unregisterScrollListener",value:function(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}},{key:"firstUpdated",value:function(){(0,h.A)(t,"firstUpdated",this,3)([]),this.updateRootPosition(),this.registerListeners()}},{key:"disconnectedCallback",value:function(){(0,h.A)(t,"disconnectedCallback",this,3)([]),this.unregisterListeners()}}])}(f.O);(0,d.Cg)([(0,u.P)(".mdc-top-app-bar")],w.prototype,"mdcRoot",void 0),(0,d.Cg)([(0,u.P)('slot[name="actionItems"]')],w.prototype,"_actionItemsSlot",void 0),(0,d.Cg)([(0,u.MZ)({type:Boolean})],w.prototype,"centerTitle",void 0),(0,d.Cg)([(0,u.MZ)({type:Object})],w.prototype,"scrollTarget",null);var k=function(e){function t(){var e;return(0,n.A)(this,t),(e=(0,c.A)(this,t,arguments)).mdcFoundationClass=p.A,e.prominent=!1,e.dense=!1,e.handleResize=function(){e.mdcFoundation.handleWindowResize()},e}return(0,l.A)(t,e),(0,o.A)(t,[{key:"barClasses",value:function(){return{"mdc-top-app-bar--dense":this.dense,"mdc-top-app-bar--prominent":this.prominent,"center-title":this.centerTitle}}},{key:"contentClasses",value:function(){return{"mdc-top-app-bar--fixed-adjust":!this.dense&&!this.prominent,"mdc-top-app-bar--dense-fixed-adjust":this.dense&&!this.prominent,"mdc-top-app-bar--prominent-fixed-adjust":!this.dense&&this.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":this.dense&&this.prominent}}},{key:"registerListeners",value:function(){(0,h.A)(t,"registerListeners",this,3)([]),window.addEventListener("resize",this.handleResize,b)}},{key:"unregisterListeners",value:function(){(0,h.A)(t,"unregisterListeners",this,3)([]),window.removeEventListener("resize",this.handleResize)}}])}(w);(0,d.Cg)([(0,u.MZ)({type:Boolean,reflect:!0})],k.prototype,"prominent",void 0),(0,d.Cg)([(0,u.MZ)({type:Boolean,reflect:!0})],k.prototype,"dense",void 0);var C=a(23665),x=function(e){function t(){var e;return(0,n.A)(this,t),(e=(0,c.A)(this,t,arguments)).mdcFoundationClass=C.A,e}return(0,l.A)(t,e),(0,o.A)(t,[{key:"barClasses",value:function(){return Object.assign(Object.assign({},(0,h.A)(t,"barClasses",this,3)([])),{"mdc-top-app-bar--fixed":!0})}},{key:"registerListeners",value:function(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,b)}},{key:"unregisterListeners",value:function(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}}])}(k)},27330:function(e,t,a){var s,i=a(72153),r=a(43080),n=a(44734),o=a(69683),c=a(6454),l=(a(28706),a(40445)),h=a(29781),d=a(71467),p=a(96196),u=a(77845),g=function(e){function t(){var e;(0,n.A)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=(0,o.A)(this,t,[].concat(s))).narrow=!1,e}return(0,c.A)(t,e),(0,r.A)(t)}(h.$);g.styles=[d.R,(0,p.AH)(s||(s=(0,i.A)(["header{padding-top:var(--safe-area-inset-top)}.mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:calc(var(--header-height,0px) + var(--safe-area-inset-top,0px));padding-bottom:var(--safe-area-inset-bottom);padding-right:var(--safe-area-inset-right)}:host([narrow]) .mdc-top-app-bar--fixed-adjust{padding-left:var(--safe-area-inset-left)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary));padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .mdc-top-app-bar{padding-left:var(--safe-area-inset-left)}.mdc-top-app-bar__title{font-size:var(--ha-font-size-xl);padding-inline-start:24px;padding-inline-end:initial}"])))],(0,l.Cg)([(0,u.MZ)({type:Boolean,reflect:!0})],g.prototype,"narrow",void 0),g=(0,l.Cg)([(0,u.EM)("ha-top-app-bar-fixed")],g)},4203:function(e,t,a){a.a(e,async function(e,s){try{a.r(t),a.d(t,{DEFAULT_ENERGY_COLLECTION_KEY:function(){return x}});a(74423),a(44114),a(26910),a(13609),a(18111),a(22489),a(20116),a(7588),a(61701),a(13579),a(3362),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(62953),a(3296),a(27208),a(48408),a(14603),a(47566),a(98721);var i=a(40445),r=a(96196),n=a(77845),o=a(94333),c=a(91926),l=(a(38962),a(90248),a(2054),a(27330),a(38114)),h=a(91984),d=a(14503),p=a(30039),u=a(73887),g=a(29994),f=a(75400),_=(a(87778),e([u,g,f,l]));[u,g,f,l]=_.then?(await _)():_;let v,m,y,b,w,k=e=>e;const C="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",x="energy_dashboard",A={energy_sources:[],device_consumption:[],device_consumption_water:[]},D={path:"overview",strategy:{type:"energy-overview",collection_key:x,show_period_selector:!0}},E={path:"electricity",strategy:{type:"energy",collection_key:x,show_period_selector:!0}},T={path:"water",strategy:{type:"water",collection_key:x,show_period_selector:!0}},O={path:"gas",strategy:{type:"gas",collection_key:x,show_period_selector:!0}},z={path:"now",strategy:{type:"power",collection_key:"energy_dashboard_now"}},L={type:"panel",path:"setup",cards:[{type:"custom:energy-setup-wizard-card"}]};class S extends r.WF{get _extraActionItems(){return[{icon:C,labelKey:"ui.panel.energy.download_data",action:this._dumpCSV}]}willUpdate(e){if(super.willUpdate(e),!this.hasUpdated)return this.hass.loadFragmentTranslation("lovelace"),void this._loadConfig();if(!e.has("hass"))return;const t=e.get("hass");t&&t.localize!==this.hass.localize&&this._setLovelace()}async _loadConfig(){var e;try{this._error=void 0;const e=await this._fetchEnergyPrefs();this._prefs=e||A}catch(s){console.error("Failed to load prefs:",s),this._prefs=A,this._error=s.message||"Unknown error"}await this._setLovelace();const t=((null===(e=this._lovelace.config)||void 0===e?void 0:e.views)||[]).map(e=>e.path),a=this.route.path.split("/")[1];a&&t.includes(a)?this.route={...this.route}:(0,c.o)(`${this.route.prefix}/${t[0]}`,{replace:!0})}async _setLovelace(){const e=await this._generateLovelaceConfig();this._lovelace={config:e,rawConfig:e,editMode:!1,urlPath:"energy",mode:"generated",locale:this.hass.locale,enableFullEditMode:()=>{},saveConfig:async()=>{},deleteConfig:async()=>{},setEditMode:()=>this._navigateConfig(),showToast:()=>{}}}render(){var e,t;if(this._error)return(0,r.qy)(v||(v=k` <div class="centered"> <ha-alert alert-type="error"> An error occurred loading energy preferences: ${0} </ha-alert> </div> `),this._error);if(!this._prefs)return(0,r.qy)(m||(m=k` <div class="centered"> <ha-spinner size="large"></ha-spinner> </div> `));if(!this._lovelace)return r.s6;const a=(null===(e=this.route)||void 0===e||null===(e=e.path)||void 0===e?void 0:e.split("/")[1])||"",s=this._lovelace.config.views.find(e=>e.path===a),i=s&&(0,h.R)(s)&&(null===(t=s.strategy)||void 0===t?void 0:t.show_period_selector);return(0,r.qy)(y||(y=k` <hui-root .hass="${0}" .narrow="${0}" .lovelace="${0}" .route="${0}" .panel="${0}" .extraActionItems="${0}" @reload-energy-panel="${0}" class="${0}"> </hui-root> ${0} `),this.hass,this.narrow,this._lovelace,this.route,this.panel,this._extraActionItems,this._reloadConfig,(0,o.H)({"has-period-selector":i}),i?(0,r.qy)(b||(b=k` <ha-card class="period-selector"> <hui-energy-period-selector .hass="${0}" .collectionKey="${0}" vertical-opening-direction="up"></hui-energy-period-selector> </ha-card> `),this.hass,x):r.s6)}async _generateLovelaceConfig(){var e;if(!this._prefs||0===this._prefs.device_consumption.length&&0===this._prefs.energy_sources.length)return await Promise.all([a.e("71380"),a.e("86236")]).then(a.bind(a,97431)),{views:[L]};const t=this._prefs.energy_sources.some(e=>["grid","solar","battery"].includes(e.type)),s=this._prefs.energy_sources.some(e=>{var t;return"solar"===e.type&&e.stat_rate||"battery"===e.type&&e.stat_rate||"grid"===e.type&&(null===(t=e.power)||void 0===t?void 0:t.length)})||this._prefs.device_consumption.some(e=>e.stat_rate),i=this._prefs.energy_sources.some(e=>"water"===e.type)||(null===(e=this._prefs.device_consumption_water)||void 0===e?void 0:e.length)>0,r=this._prefs.energy_sources.some(e=>"gas"===e.type),n=this._prefs.device_consumption.length>0,o=[];return(t||n)&&o.push(E),r&&o.push(O),i&&o.push(T),s&&o.push(z),o.length>1&&o.unshift(D),{views:o.map(e=>({...e,title:e.title||this.hass.localize(`ui.panel.energy.title.${e.path}`)}))}}_navigateConfig(e){null==e||e.stopPropagation(),(0,c.o)("/config/energy?historyBack=1")}_reloadConfig(){this._loadConfig()}static get styles(){return[d.RF,(0,r.AH)(w||(w=k`:host{--ha-view-sections-column-max-width:100%;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none}.centered{width:100%;height:100%;display:flex;align-items:center;justify-content:center}hui-root.has-period-selector{--view-container-padding-bottom:var(--ha-space-18)}.period-selector{position:fixed;z-index:4;bottom:max(var(--ha-space-4),var(--safe-area-inset-bottom,0px));left:max(var(--mdc-drawer-width,0px),var(--safe-area-inset-left,0px));right:var(--safe-area-inset-right,0);inset-inline-start:max(var(--mdc-drawer-width,0px),var(--safe-area-inset-left,0px));inset-inline-end:var(--safe-area-inset-right,0);margin:0 auto;max-width:calc(min(450px,100% - var(--ha-space-4)));box-sizing:border-box;padding-left:var(--ha-space-2);padding-right:0;padding-inline-start:var(--ha-space-4);padding-inline-end:0;--ha-card-box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12);--ha-card-border-color:var(--divider-color);--ha-card-border-width:var(--ha-card-border-width, 1px)}@media all and (max-width:450px),all and (max-height:500px){hui-root.has-period-selector{--view-container-padding-bottom:var(--ha-space-14)}.period-selector{bottom:max(var(--ha-space-2),var(--safe-area-inset-bottom,0px))}}`))]}constructor(...e){super(...e),this.narrow=!1,this._fetchEnergyPrefs=async()=>{const e=(0,l.tb)(this.hass,{key:x});try{await e.refresh()}catch(t){if("not_found"===t.code)return;throw t}return e.prefs},this._dumpCSV=async()=>{const e=(0,l.tb)(this.hass,{key:"energy_dashboard"});if(!e.prefs||!e.state.stats)return;const t=e.state.gasUnit,a="kWh",s=e.prefs.energy_sources,i=e.prefs.device_consumption,r=e.prefs.device_consumption_water,n=e.state.stats,o=new Set;Object.values(n).forEach(e=>{e.forEach(e=>{o.add(e.start)})});const c=Array.from(o).sort(),h="entity_id,type,unit,"+c.map(e=>new Date(e).toISOString()).join(",")+"\n",d=[];d[0]=h;const u=function(e,t,a,s){let i=0;const r=[];r.push(e),r.push(t),r.push(a.normalize("NFKD")),c.forEach(e=>{var t;i<s.length&&s[i].start===e?(r.push((null!==(t=s[i].change)&&void 0!==t?t:"").toString()),i++):r.push("")}),d.push(r.join(",")+"\n")},g=function(e,t,a){n[e]&&u(e,t,a,n[e])},f=this.hass.config.currency,_=function(e,t,a,s,i){t.length&&(t.forEach(t=>g(t,e,a)),s&&i&&i.forEach(e=>g(e,s,f)))},v=[],m=[],y=[],b=[];s.filter(e=>"grid"===e.type).forEach(t=>{t.flow_from.forEach(t=>{const a=t.stat_energy_from;v.push(a);const s=t.stat_cost||e.state.info.cost_sensors[a];s&&y.push(s)}),t.flow_to.forEach(t=>{const a=t.stat_energy_to;m.push(a);const s=t.stat_compensation||e.state.info.cost_sensors[a];s&&b.push(s)})}),_("grid_consumption",v,a,"grid_consumption_cost",y),_("grid_return",m,a,"grid_return_compensation",b);const w=[],k=[];s.filter(e=>"battery"===e.type).forEach(e=>{w.push(e.stat_energy_to),k.push(e.stat_energy_from)}),_("battery_in",w,a),_("battery_out",k,a);const C=[];s.filter(e=>"solar"===e.type).forEach(e=>{C.push(e.stat_energy_from)}),_("solar_production",C,a);const x=[],A=[];s.filter(e=>"gas"===e.type).forEach(t=>{const a=t.stat_energy_from;x.push(a);const s=t.stat_cost||e.state.info.cost_sensors[a];s&&A.push(s)}),_("gas_consumption",x,t,"gas_consumption_cost",A);const D=[],E=[];s.filter(e=>"water"===e.type).forEach(t=>{const a=t.stat_energy_from;D.push(a);const s=t.stat_cost||e.state.info.cost_sensors[a];s&&E.push(s)}),_("water_consumption",D,e.state.waterUnit,"water_consumption_cost",E);const T=[];if(i.forEach(e=>{T.push(e.stat_consumption)}),_("device_consumption",T,a),r){const t=[];r.forEach(e=>{t.push(e.stat_consumption)}),_("device_consumption_water",t,e.state.waterUnit)}const{summedData:O,compareSummedData:z}=(0,l.gv)(e.state),{consumption:L,compareConsumption:S}=(0,l.DR)(O,void 0),R=function(e,t,a){const s=[];Object.entries(a).forEach(([e,t])=>{s.push({start:Number(e),end:NaN,change:t})}),u("",e,t,s)},M=!!C.length,P=!!w.length,N=!!m.length,j=!!v.length;j&&(R("calculated_consumed_grid",a,L.used_grid),P&&R("calculated_grid_to_battery",a,L.grid_to_battery)),N&&P&&R("calculated_battery_to_grid",a,L.battery_to_grid),P&&R("calculated_consumed_battery",a,L.used_battery),M&&(R("calculated_consumed_solar",a,L.used_solar),P&&R("calculated_solar_to_battery",a,L.solar_to_battery),N&&R("calculated_solar_to_grid",a,L.solar_to_grid)),(j?1:0)+(M?1:0)+(P?1:0)>1&&R("calculated_total_consumption",a,L.used_total);const U=new Blob(d,{type:"text/csv"}),$=window.URL.createObjectURL(U);(0,p.R)($,"energy.csv")}}}(0,i.Cg)([(0,n.MZ)({attribute:!1})],S.prototype,"hass",void 0),(0,i.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],S.prototype,"narrow",void 0),(0,i.Cg)([(0,n.MZ)({attribute:!1})],S.prototype,"panel",void 0),(0,i.Cg)([(0,n.wk)()],S.prototype,"_lovelace",void 0),(0,i.Cg)([(0,n.MZ)({attribute:!1})],S.prototype,"route",void 0),(0,i.Cg)([(0,n.wk)()],S.prototype,"_prefs",void 0),(0,i.Cg)([(0,n.wk)()],S.prototype,"_error",void 0),S=(0,i.Cg)([(0,n.EM)("ha-panel-energy")],S),s()}catch(v){s(v)}})},73887:function(e,t,a){a.a(e,async function(e,t){try{var s,i,r,n,o=a(78261),c=a(72153),l=a(61397),h=a(50264),d=a(44734),p=a(43080),u=a(69683),g=a(6454),f=a(25460),_=a(69235),v=(a(28706),a(26099),a(40445)),m=a(6946),y=a(78016),b=a(31810),w=a(49134),k=a(35932),C=a(73983),x=a(52640),A=a(69137),D=a(55144),E=a(40600),T=a(96196),O=a(77845),z=a(22786),L=a(94333),S=a(91069),R=a(380),M=a(72487),P=a(9899),N=(a(13416),a(18350)),j=(a(58349),a(15397)),U=(a(3059),a(45100),a(38114)),$=a(54706),q=a(46223),I=e([_,N,j,M,R,q,S,U]);[_,N,j,M,R,q,S,U]=I.then?(await I)():I;var Z=["today","yesterday","this_week","this_month","this_quarter","this_year","now-7d","now-30d","now-12m"],F=function(e){function t(){var e;(0,d.A)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=(0,u.A)(this,t,[].concat(s))).allowCompare=!0,e._datepickerOpen=!1,e._ranges={},e._compare=!1,e._simpleRange=(0,z.A)(function(e,t,a,s){if(0===(0,m.c)(t,e))return"day";if((0,S.xo)(e,y.e,a,s)&&(0,S.xo)(t,b.c,a,s)){if(0===(0,S.EO)(t,e,w.W,a,s))return"month";if(2===(0,S.EO)(t,e,w.W,a,s)&&e.getMonth()%3==0)return"quarter"}return(0,S.xo)(e,y.e,a,s)&&(0,S.xo)(t,b.c,a,s)&&11===(0,S.EO)(t,e,w.W,a,s)?"year":"other"}),e}return(0,g.A)(t,e),(0,p.A)(t,[{key:"hassSubscribe",value:function(){var e=this;return[(0,U.tb)(this.hass,{key:this.collectionKey}).subscribe(function(t){return e._updateDates(t)})]}},{key:"_measure",value:function(){this.narrow=this.offsetWidth<450}},{key:"_attachObserver",value:(a=(0,h.A)((0,l.A)().m(function e(){var t=this;return(0,l.A)().w(function(e){for(;;)switch(e.n){case 0:this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,P.s)(function(){return t._measure()},250,!1))),this._resizeObserver.observe(this);case 1:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"firstUpdated",value:function(){this._attachObserver()}},{key:"connectedCallback",value:function(){var e=this;(0,f.A)(t,"connectedCallback",this,3)([]),this.updateComplete.then(function(){return e._attachObserver()})}},{key:"disconnectedCallback",value:function(){(0,f.A)(t,"disconnectedCallback",this,3)([]),this._resizeObserver&&this._resizeObserver.disconnect()}},{key:"willUpdate",value:function(e){var a,s,i=this;(0,f.A)(t,"willUpdate",this,3)([e]),this.hasUpdated||this._measure(),(!this.hasUpdated||e.has("hass")&&(null===(a=this.hass)||void 0===a?void 0:a.localize)!==(null===(s=e.get("hass"))||void 0===s?void 0:s.localize))&&(this._ranges={},Z.forEach(function(e){i._ranges[i.hass.localize("ui.components.date-range-picker.ranges.".concat(e))]=(0,q.b)(i.hass,e)}))}},{key:"render",value:function(){if(!this.hass||!this._startDate)return T.s6;var e=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config);return(0,T.qy)(s||(s=(0,c.A)([' <div class="','"> <div class="backdrop"></div> <div class="label"> ',' </div> <div class="time-handle"> <ha-icon-button-prev .label="','" @click="','"></ha-icon-button-prev> <ha-icon-button-next .label="','" @click="','"></ha-icon-button-next> <ha-date-range-picker .hass="','" .startDate="','" .endDate="','" .ranges="','" @value-changed="','" @preset-selected="','" @toggle="','" minimal header-position .verticalOpeningDirection="','"></ha-date-range-picker> </div> ',' <ha-button-menu> <ha-icon-button slot="trigger" .label="','" .path="','"></ha-icon-button> ',' <slot name="overflow-menu"></slot> </ha-button-menu> </div> '])),(0,L.H)({row:!0,"datepicker-open":this._datepickerOpen}),"day"===e?this.narrow?(0,M.kz)(this._startDate,this.hass.locale,this.hass.config):(0,M.Yq)(this._startDate,this.hass.locale,this.hass.config):"month"===e?(0,M.fr)(this._startDate,this.hass.locale,this.hass.config):"year"===e?(0,M.Pm)(this._startDate,this.hass.locale,this.hass.config):"".concat((0,M.sl)(this._startDate,this.hass.locale,this.hass.config)," â€“ ").concat((0,M.sl)(this._endDate||new Date,this.hass.locale,this.hass.config)),this.hass.localize("ui.panel.lovelace.components.energy_period_selector.previous"),this._pickPrevious,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.next"),this._pickNext,this.hass,this._startDate,this._endDate||new Date,this._ranges,this._dateRangeChanged,this._presetSelected,this._handleDatepickerToggle,this.verticalOpeningDirection,this.narrow?T.s6:(0,T.qy)(i||(i=(0,c.A)(['<ha-button appearance="filled" size="small" @click="','"> '," </ha-button>"])),this._pickNow,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.now")),this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this.allowCompare?(0,T.qy)(r||(r=(0,c.A)(['<ha-check-list-item left @request-selected="','" .selected="','"> '," </ha-check-list-item>"])),this._toggleCompare,this._compare,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare")):T.s6)}},{key:"_updateCollectionPeriod",value:function(){var e=(0,U.tb)(this.hass,{key:this.collectionKey});e.setPeriod(this._startDate,this._endDate),e.refresh()}},{key:"_dateRangeChanged",value:function(e){this._startDate=(0,S.ol)(e.detail.value.startDate,k.o,this.hass.locale,this.hass.config),this._endDate=(0,S.ol)(e.detail.value.endDate,C.D,this.hass.locale,this.hass.config),this._updateCollectionPeriod()}},{key:"_presetSelected",value:function(e){localStorage.setItem("energy-default-period-_".concat(this.collectionKey||"energy"),Z[e.detail.index])}},{key:"_pickNow",value:function(){if(this._startDate){var e=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config),t=new Date;if("month"===e){var a=(0,q.b)(this.hass,"this_month"),s=(0,o.A)(a,2);this._startDate=s[0],this._endDate=s[1]}else if("quarter"===e){var i=(0,q.b)(this.hass,"this_quarter"),r=(0,o.A)(i,2);this._startDate=r[0],this._endDate=r[1]}else if("year"===e){var n=(0,q.b)(this.hass,"this_year"),c=(0,o.A)(n,2);this._startDate=c[0],this._endDate=c[1]}else{var l=(0,R.P)(this.hass.locale),h=(0,S.ol)(this._endDate,x.k,this.hass.locale,this.hass.config,{weekStartsOn:l}),d=(0,S.ol)(this._endDate,A.$,this.hass.locale,this.hass.config,{weekStartsOn:l});if(this._startDate.getTime()===h.getTime()&&this._endDate.getTime()===d.getTime()){var p=(0,q.b)(this.hass,"this_week"),u=(0,o.A)(p,2);this._startDate=u[0],this._endDate=u[1]}else{var g=(0,S.EO)(this._endDate,this._startDate,m.c,this.hass.locale,this.hass.config);this._startDate=(0,S.ol)((0,S.ol)(t,D.e,this.hass.locale,this.hass.config,g),k.o,this.hass.locale,this.hass.config,{weekStartsOn:l}),this._endDate=(0,S.ol)(t,C.D,this.hass.locale,this.hass.config,{weekStartsOn:l})}}this._updateCollectionPeriod()}}},{key:"_pickPrevious",value:function(){this._shift(!1)}},{key:"_pickNext",value:function(){this._shift(!0)}},{key:"_shift",value:function(e){if(this._startDate){var t=(0,S.eE)(this._startDate,this._endDate,e,this.hass.locale,this.hass.config),a=t.start,s=t.end;this._startDate=a,this._endDate=s,this._updateCollectionPeriod()}}},{key:"_updateDates",value:function(e){this._compare=void 0!==e.startCompare,this._startDate=e.start,this._endDate=e.end||(0,E.o)()}},{key:"_handleDatepickerToggle",value:function(e){this._datepickerOpen=e.detail.open}},{key:"_toggleCompare",value:function(e){if("interaction"===e.detail.source){this._compare=e.detail.selected;var t=(0,U.tb)(this.hass,{key:this.collectionKey});t.setCompare(this._compare?U.lh.PREVIOUS:U.lh.NONE),t.refresh()}}}]);var a}((0,$.E)(T.WF));F.styles=(0,T.AH)(n||(n=(0,c.A)([".row{display:flex;align-items:center}:host .time-handle{display:flex;justify-content:flex-end;align-items:center}:host([narrow]) .time-handle{margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}.label{display:flex;align-items:center;justify-content:flex-end;font-size:var(--ha-font-size-xl);margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}:host([narrow]) .label{margin-left:unset;margin-inline-start:unset;margin-inline-end:initial}ha-button{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;flex-shrink:0;--ha-button-theme-color:currentColor}.backdrop{position:fixed;top:0;left:0;right:0;bottom:0;z-index:var(--dialog-z-index,8);-webkit-backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter));backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter));pointer-events:none;opacity:0;transition:opacity var(--ha-animation-base-duration) ease-in-out}.datepicker-open .backdrop{opacity:1;pointer-events:auto}"]))),(0,v.Cg)([(0,O.MZ)({attribute:!1})],F.prototype,"hass",void 0),(0,v.Cg)([(0,O.MZ)({attribute:"collection-key"})],F.prototype,"collectionKey",void 0),(0,v.Cg)([(0,O.MZ)({type:Boolean,reflect:!0})],F.prototype,"narrow",void 0),(0,v.Cg)([(0,O.MZ)({type:Boolean,attribute:"allow-compare"})],F.prototype,"allowCompare",void 0),(0,v.Cg)([(0,O.MZ)({attribute:"vertical-opening-direction"})],F.prototype,"verticalOpeningDirection",void 0),(0,v.Cg)([(0,O.wk)()],F.prototype,"_datepickerOpen",void 0),(0,v.Cg)([(0,O.wk)()],F.prototype,"_startDate",void 0),(0,v.Cg)([(0,O.wk)()],F.prototype,"_endDate",void 0),(0,v.Cg)([(0,O.wk)()],F.prototype,"_ranges",void 0),(0,v.Cg)([(0,O.wk)()],F.prototype,"_compare",void 0),F=(0,v.Cg)([(0,O.EM)("hui-energy-period-selector")],F),t()}catch(H){t(H)}})},30039:function(e,t,a){a.d(t,{R:function(){return i},h:function(){return r}});var s=a(22348),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=document.createElement("a");a.target="_blank",a.href=e,a.download=t,a.style.display="none",document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),document.body.removeChild(a)},r=function(e){var t;return!(0,s.V)(e)||!(null===(t=e.auth.external)||void 0===t||!t.config.downloadFileSupported)}},22348:function(e,t,a){a.d(t,{V:function(){return i}});var s=a(37177),i=function(e){return!!e.auth.external&&s.n}},37177:function(e,t,a){a.d(t,{n:function(){return s}});a(27495),a(90906);var s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},50778:function(e,t,a){var s=a(46518),i=a(77240);s({target:"String",proto:!0,forced:a(23061)("link")},{link:function(e){return i(this,"a","href",e)}})},56434:function(e,t,a){a.d(t,{e:function(){return i}});var s=a(81977);function i(e,t,a){return(0,s.P)(e,12*t,a)}},40600:function(e,t,a){a.d(t,{o:function(){return i}});var s=a(73983);function i(e){return(0,s.D)(Date.now(),e)}}}]);
//# sourceMappingURL=53982.2ac2a67a39221d0b.js.map