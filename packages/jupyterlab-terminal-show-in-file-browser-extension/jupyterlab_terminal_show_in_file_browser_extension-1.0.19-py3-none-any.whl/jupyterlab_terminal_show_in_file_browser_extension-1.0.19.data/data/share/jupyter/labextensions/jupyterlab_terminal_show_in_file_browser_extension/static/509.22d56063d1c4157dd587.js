"use strict";(self.webpackChunkjupyterlab_terminal_show_in_file_browser_extension=self.webpackChunkjupyterlab_terminal_show_in_file_browser_extension||[]).push([[509],{509:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(581),o=r(167),i=r(14),a=r(830),s=r(469);const l={id:"jupyterlab_terminal_show_in_file_browser_extension:plugin",description:"JupyterLab extension to add context menu item to the terminal tab to navigate file browser to the pwd path of the terminal",autoStart:!0,requires:[n.IDefaultFileBrowser,o.ITerminalTracker],activate:(e,t,r)=>{console.log("JupyterLab extension jupyterlab_terminal_show_in_file_browser_extension is activated!");const{commands:n}=e,o=s.PageConfig.getOption("serverRoot");n.addCommand("terminal:show-in-file-browser",{label:"Show in File Browser",caption:"Navigate file browser to terminal current directory",isEnabled:()=>null!==r.currentWidget,execute:async()=>{const e=r.currentWidget;if(!e)return void await(0,i.showErrorMessage)("No Terminal","No active terminal found.");const n=e.content.session;if(!n||!n.model)return void await(0,i.showErrorMessage)("Terminal Error","Could not access terminal session.");const l=n.model.name,c=await async function(e){const t=a.ServerConnection.makeSettings(),r=s.URLExt.join(t.baseUrl,"api","terminal-cwd",e);try{const e=await a.ServerConnection.makeRequest(r,{},t);if(!e.ok){const t=await e.json();return console.warn(`Failed to get terminal cwd: ${t.error}`),null}return(await e.json()).cwd}catch(e){return console.error("Error fetching terminal cwd:",e),null}}(l);if(!c)return void await(0,i.showErrorMessage)("CWD Not Available","Could not determine terminal current directory. This may happen if the terminal process is not accessible.");const u=function(e,t){const r=e.replace(/\/+$/,"");let n=function(e,t){if(!e.startsWith("~"))return e;const r=t.match(/^(\/(?:home|Users)\/[^/]+)/);if(!r)return e;const n=r[1];return"~"===e?n:e.startsWith("~/")?n+e.slice(1):e}(t,e).replace(/\/+$/,"");if(r===n)return"";const o=n+"/";return r.startsWith(o)?r.slice(o.length):null}(c,o),w=null===u?"":u;try{const e=""===w?"/":"/"+w;await t.model.cd(e)}catch(e){console.error("Failed to navigate file browser:",e),await(0,i.showErrorMessage)("Navigation Error",`Failed to navigate to: ${w||"(root)"}\nError: ${e}`)}}})}}}}]);