Metadata-Version: 2.4
Name: kipu-python
Version: 0.0.2
Summary: A comprehensive Python library for the Kipu Healthcare API with HMAC SHA1 authentication and recursive JSON flattening
Home-page: https://github.com/Rahulkumar010/kipu-python
Author: Rahul
Author-email: Rahul <rahul01110100@gmail.com>
Maintainer-email: Rahul <rahul01110100@gmail.com>
License: MIT
Project-URL: Homepage, https://github.com/Rahulkumar010/kipu-python
Project-URL: Documentation, https://kipu-python.readthedocs.io/
Project-URL: Repository, https://github.com/Rahulkumar010/kipu-python.git
Project-URL: Issues, https://github.com/Rahulkumar010/kipu-python/issues
Keywords: kipu,healthcare,api,library,medical,ehr,electronic-health-records,hmac,authentication,async,pandas,recursive-json-flattening
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Healthcare Industry
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Scientific/Engineering :: Medical Science Apps.
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: aiohttp>=3.8.0
Requires-Dist: pandas>=1.3.0
Requires-Dist: numpy>=1.20.0
Requires-Dist: tqdm>=4.60.0
Requires-Dist: pytest>=6.0
Requires-Dist: pytest-cov>=5.0.0
Requires-Dist: pytest-asyncio>=0.18.0
Requires-Dist: black>=22.0.0
Requires-Dist: isort>=5.10.0
Requires-Dist: flake8>=4.0.0
Requires-Dist: mypy>=0.950
Requires-Dist: twine>=6.1.0
Requires-Dist: safety>=3.6.2
Requires-Dist: myst-parser>=3.0.1
Requires-Dist: sphinx>=4.0.0
Requires-Dist: sphinx-rtd-theme>=1.0.0
Requires-Dist: sphinx-autodoc-typehints>=1.12.0
Requires-Dist: linkify-it-py>=2.0.3
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov; extra == "dev"
Requires-Dist: pytest-asyncio>=0.18.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: isort>=5.10.0; extra == "dev"
Requires-Dist: flake8>=4.0.0; extra == "dev"
Requires-Dist: mypy>=0.950; extra == "dev"
Requires-Dist: m2r2; extra == "dev"
Requires-Dist: pre-commit>=2.15.0; extra == "dev"
Provides-Extra: docs
Requires-Dist: sphinx>=4.0.0; extra == "docs"
Requires-Dist: sphinx-rtd-theme>=1.0.0; extra == "docs"
Requires-Dist: sphinx-autodoc-typehints>=1.12.0; extra == "docs"
Requires-Dist: myst-parser; extra == "docs"
Requires-Dist: linkify-it-py; extra == "docs"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# Kipu API Python library

[![PyPI version](https://badge.fury.io/py/kipu-python.svg)](https://badge.fury.io/py/kipu-python)
[![Python Support](https://img.shields.io/pypi/pyversions/kipu-python.svg)](https://pypi.org/project/kipu-python/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

The Kipu Python library provides convenient access to the Kipu API from any Python 3.8+
application. The library includes HMAC SHA1/SHA256 authentication, recursive JSON flattening capabilities and type definitions for most of the request params and response fields,
and offers asynchronous clients powered by [asyncio].

It is generated from our [KipuAPI V3 specification](https://api.kipuapi.com/api-docs/index.html)

## ğŸš€ Features

- âœ… **Complete API Coverage**: All 80+ Kipu API V3 endpoints implemented
- ğŸ” **Secure Authentication**: HMAC SHA1/SHA256 signature generation
- ğŸ“Š **Automatic Flattening**: Converts nested JSON responses to pandas DataFrames
- âš¡ **Async Support**: Built with asyncio for high performance
- ğŸ›¡ï¸ **Error Handling**: Comprehensive exception hierarchy
- ğŸ“ **Type Hints**: Full typing support for better development experience
- ğŸ”„ **Flexible Response Format**: Choose between raw JSON or flattened DataFrames

## ğŸ“¦ Installation

```bash
pip install kipu-python
```

## ğŸ”§ Quick Start

```python
import asyncio
from kipu import KipuClient

async def main():
    async with KipuClient(
        access_id="your_access_id",
        secret_key="your_secret_key", 
        app_id="your_app_id",
        version=3
    ) as client:
        
        # Get patient census as flattened DataFrame
        census_df = await client.get_patients_census()
        print(f"Found {len(census_df)} patients")
        
        # Get specific patient as raw JSON
        patient_data = await client.get_patient("patient_id", flatten=False)
        print(f"Patient: {patient_data['first_name']} {patient_data['last_name']}")

asyncio.run(main())
```

## ğŸ”‘ Authentication

The library handles HMAC SHA1 signature generation automatically. You need three credentials from Kipu:

- `access_id`: Your API access identifier
- `secret_key`: Your secret key for signature generation
- `app_id`: Your application ID (also called recipient_id)
- `version`: API version (3 for SHA1, 4 for SHA256)

### API Version Support

The library supports both Kipu API v3 and v4:

- **V3**: Uses HMAC-SHA1 authentication (default, most stable)
- **V4**: Uses HMAC-SHA256 authentication (newer, more secure)

```python
# Use V3 (SHA1)
client_v3 = KipuClient(access_id, secret_key, app_id, version=3)

# Use V4 (SHA256 - recommended for new integrations)
client_v4 = KipuClient(access_id, secret_key, app_id, version=4)
```

## ğŸ“š API Coverage

### Patient Management
```python
# Get patient census
census_df = await client.get_patients_census(params={
    "phi_level": "high",
    "page": 1,
    "per": 50
})

# Get specific patient
patient = await client.get_patient("patient_id")

# Create new patient
patient_data = {
    "document": {
        "recipient_id": app_id,
        "data": {
            "first_name": "John",
            "last_name": "Doe",
            "dob": "1990-01-01"
        }
    }
}
new_patient = await client.create_patient(patient_data)
```

### Medical Records
```python
# Get vital signs
vital_signs_df = await client.get_vital_signs()
patient_vitals = await client.get_patient_vital_signs("patient_id")

# Get allergies
allergies_df = await client.get_allergies()
patient_allergies = await client.get_patient_allergies("patient_id")

# Create vital signs
vital_data = {
    "document": {
        "recipient_id": app_id,
        "data": {
            "systolic_blood_pressure": 120,
            "diastolic_blood_pressure": 80,
            "heart_rate": 72
        }
    }
}
await client.create_patient_vital_signs("patient_id", vital_data)
```

### Appointments
```python
# Get appointments
appointments_df = await client.get_scheduler_appointments(params={
    "start_date": "2024-01-01",
    "end_date": "2024-12-31"
})

# Get patient appointments
patient_appointments = await client.get_patient_appointments("patient_id")
```

### Administrative
```python
# Get locations, users, providers
locations_df = await client.get_locations()
users_df = await client.get_users()
providers_df = await client.get_providers()
```

## ğŸ”„ Response Processing

### Automatic Flattening (Default)
```python
# Returns a flattened pandas DataFrame
census_df = await client.get_patients_census()
print(type(census_df))  # <class 'pandas.core.frame.DataFrame'>
```

### Raw JSON Response
```python
# Returns raw JSON
census_data = await client.get_patients_census(flatten=False)
print(type(census_data))  # <class 'dict'> or <class 'list'>
```

### Global Flattening Control
```python
# Disable auto-flattening globally
async with KipuClient(
    access_id, secret_key, app_id, version,
    auto_flatten=False
) as client:
    raw_data = await client.get_patients_census()  # Raw JSON
    flat_data = await client.get_patients_census(flatten=True)  # DataFrame
```

## ğŸ›¡ï¸ Error Handling

```python
from kipu.exceptions import (
    KipuAPIError,
    KipuAuthenticationError,
    KipuValidationError,
    KipuNotFoundError,
    KipuServerError
)

try:
    patient = await client.get_patient("invalid_id")
except KipuNotFoundError as e:
    print(f"Patient not found: {e.message}")
except KipuAuthenticationError as e:
    print(f"Authentication failed: {e.message}")
except KipuAPIError as e:
    print(f"API error: {e.message} (Status: {e.status_code})")
```

## ğŸ“ File Uploads

```python
# Patient with attachment
patient_data = {
    "document[recipient_id]": app_id,
    "document[data][first_name]": "John",
    "document[data][last_name]": "Doe"
}

files = {
    "document[attachments_attributes][0][attachment]": {
        "content": file_bytes,
        "filename": "patient_id.jpg",
        "content_type": "image/jpeg"
    }
}

await client.create_patient(patient_data, files=files)
```

## ğŸ“‹ Available Endpoints

### Core Categories
- **Patients**: Census, individual records, admissions, latest updates
- **Medical Records**: Vital signs, allergies, assessments, glucose logs
- **Evaluations**: Patient evaluations, evaluation templates
- **Appointments**: Scheduling, types, statuses, resources
- **Users & Providers**: User management, provider records, roles
- **Administrative**: Locations, care levels, flags, settings
- **Insurance**: Insurance records, verification
- **Groups**: Group sessions, patient groups

### Complete Method List
```python
# Patient endpoints
client.get_patients_census()
client.get_patient(patient_id)
client.create_patient(data)
client.update_patient(patient_id, data)
client.get_patients_admissions()
client.get_patients_latest()

# Medical records
client.get_vital_signs()
client.get_patient_vital_signs(patient_id)
client.create_patient_vital_signs(patient_id, data)
client.get_allergies()
client.get_patient_allergies(patient_id)
client.get_cows()
client.get_ciwa_ars()
client.get_glucose_logs()

# And 70+ more endpoints...
```

## ğŸ§ª Development & Testing

### Quick Setup
```bash
# Clone and install
git clone [https://github.com/Rahulkumar010/kipu-python.git](https://github.com/Rahulkumar010/kipu-python.git)
cd kipu-python

# Traditional
pip install -e ".[dev]"

# Fast with UV (10x faster!)
pip install uv && uv pip install -e ".[dev]"

make test         # Run tests
make format       # Format code
make lint         # Check quality
make version      # Show version
make bump-patch   # Bump version
```

## ğŸ“„ Requirements

- **Python**: 3.8+
- **Dependencies**:
  - `aiohttp>=3.8.0` - Async HTTP client
  - `pandas>=1.3.0` - Data manipulation
  - `numpy>=1.20.0` - Numerical computing
  - `tqdm>=4.60.0` - Progress bars

## ğŸ¤ Contributing

Welcome contributions! Here's the quick process:

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Make your changes and add tests
4. Run quality checks: `make lint` and `make test`
5. Commit your changes (`git commit -m 'Add amazing feature'`)
6. Push to the branch (`git push origin feature/amazing-feature`)
7. Open a Pull Request

**For detailed guidelines**, see [CONTRIBUTING.md](CONTRIBUTING.md)

**For faster development**, use UV: See [UV_GUIDE.md](UV_GUIDE.md)

## ğŸ“ƒ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ†˜ Support

- **Documentation**: [Read the Docs](https://kipu-python.readthedocs.io/)
- **Issues**: [GitHub Issues](https://github.com/Rahulkumar010/kipu-python/issues)
- **Email**: rahul01110100@gmail.com

## ğŸ¥ Healthcare Compliance

This library is designed for healthcare applications. Ensure your implementation complies with:
- HIPAA (Health Insurance Portability and Accountability Act)
- Local healthcare data protection regulations
- Kipu's terms of service and security requirements

---

**Built with â¤ï¸ for the opensource community**
