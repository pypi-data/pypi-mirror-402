#!/usr/bin/env bash
#MISE description="Publish package to PyPI"
#USAGE flag "-t --test" help="Publish to Test PyPI instead of PyPI"

set -euo pipefail

test_pypi="${usage_test:-false}"

echo "ðŸ“¦ Publishing package..."

# Publish command
if [ "$test_pypi" = "true" ]; then
    echo "ðŸ§ª Publishing to Test PyPI..."
    uv publish --repository testpypi
    echo "âœ… Package published to Test PyPI successfully!"
    echo "ðŸ”— Check your package at: https://test.pypi.org/project/pydantic-settings-manager/"
else
    echo "ðŸš€ Publishing to PyPI..."
    uv publish
    echo "âœ… Package published to PyPI successfully!"
    echo "ðŸ”— Check your package at: https://pypi.org/project/pydantic-settings-manager/"
fi
