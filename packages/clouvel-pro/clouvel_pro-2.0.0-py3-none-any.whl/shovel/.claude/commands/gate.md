# /gate - Gate ê²€ì¦ (Shovel í•µì‹¬)

> **"Gate PASSë§Œì´ ì§„ì‹¤ì´ë‹¤"**
>
> 1. lint â†’ test â†’ build â†’ audit **ìˆœì„œ ê³ ì •**
> 2. í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ = **0ì  ì²˜ë¦¬, ì¦‰ì‹œ ì¤‘ë‹¨**
> 3. í†µê³¼ ì‹œ **EVIDENCE.md ìë™ ìƒì„±**
> 4. "ëë‹¤" ê¸ˆì§€, **Gate PASSë§Œì´ ì™„ë£Œ**

---

## ì‚¬ìš©ë²•

```bash
# ì „ì²´ Gate ì‹¤í–‰
/gate

# ìŠ¤í¬ë¦½íŠ¸ ì§ì ‘ ì‹¤í–‰
pnpm gate
# ë˜ëŠ”
bash scripts/gate.sh

# ê°œë³„ ë‹¨ê³„ë§Œ (ë””ë²„ê¹…ìš©)
/gate lint
/gate test
/gate build
/gate audit
```

---

## Gate ë‹¨ê³„

### ìˆœì„œ (ê³ ì •, ë³€ê²½ ë¶ˆê°€)

```
1. Lint (ì½”ë“œ ìŠ¤íƒ€ì¼)
   â†“ ì‹¤íŒ¨ ì‹œ ì¤‘ë‹¨
2. Test (í…ŒìŠ¤íŠ¸)
   â†“ ì‹¤íŒ¨ ì‹œ ì¤‘ë‹¨
3. Build (ë¹Œë“œ)
   â†“ ì‹¤íŒ¨ ì‹œ ì¤‘ë‹¨
4. Audit (ë³´ì•ˆ ì·¨ì•½ì )
   â†“ Criticalë§Œ ì¤‘ë‹¨
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… GATE PASS â†’ EVIDENCE.md ìƒì„±
```

---

## Step 1: Lint

### ì‹¤í–‰

```bash
pnpm lint
# ë˜ëŠ”
pnpm eslint . --ext .ts,.tsx
```

### ì„±ê³µ ì‹œ

```markdown
## âœ… Step 1/4: Lint PASS

| í•­ëª© | ê°’ |
|------|-----|
| íŒŒì¼ ìˆ˜ | {N} |
| ì—ëŸ¬ | 0 |
| ê²½ê³  | {N} |
| ì‹œê°„ | {X}s |

â†’ Step 2ë¡œ ì§„í–‰
```

### ì‹¤íŒ¨ ì‹œ

```markdown
## âŒ Step 1/4: Lint FAIL

### Gate ì¤‘ë‹¨ë¨

```
src/{path}/{file}.ts:23:5
  error  'result' is defined but never used  @typescript-eslint/no-unused-vars
```

### ìˆ˜ì • ë°©ë²•

**ìë™ ìˆ˜ì • ê°€ëŠ¥:**
```bash
pnpm lint --fix
```

**ìˆ˜ë™ ìˆ˜ì • í•„ìš”:**
1. {íŒŒì¼}:{ë¼ì¸} - {ì„¤ëª…}

### ìˆ˜ì • í›„ ì¬ì‹¤í–‰
```bash
pnpm gate
```

âš ï¸ **Gate 0ì  ì²˜ë¦¬. ì´í›„ ë‹¨ê³„ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ.**
```

---

## Step 2: Test

### ì‹¤í–‰

```bash
pnpm test
# ë˜ëŠ”
pnpm vitest run
```

### ì„±ê³µ ì‹œ

```markdown
## âœ… Step 2/4: Test PASS

| í•­ëª© | ê°’ |
|------|-----|
| Test Files | {N} passed |
| Tests | {M} passed |
| ì»¤ë²„ë¦¬ì§€ | {X}% |
| ì‹œê°„ | {X}s |

â†’ Step 3ë¡œ ì§„í–‰
```

### ì‹¤íŒ¨ ì‹œ

```markdown
## âŒ Step 2/4: Test FAIL

### Gate ì¤‘ë‹¨ë¨

```
FAIL  src/auth/login.test.ts
  âœ• should return 200 on valid credentials (15ms)
    Expected: 200
    Received: 401
```

### 5 Whys ë¶„ì„

**Why 1**: í…ŒìŠ¤íŠ¸ê°€ ì™œ ì‹¤íŒ¨?
â†’ 401 ì‘ë‹µ ë°˜í™˜

**Why 2**: ì™œ 401?
â†’ í† í° ê²€ì¦ ì‹¤íŒ¨

**Why 3**: ì™œ ê²€ì¦ ì‹¤íŒ¨?
â†’ JWT_SECRET ë¯¸ì„¤ì •

**Why 4**: ì™œ ë¯¸ì„¤ì •?
â†’ .env.test ëˆ„ë½

**Why 5 (ê·¼ë³¸ ì›ì¸)**: 
â†’ .env.exampleì— ë¬¸ì„œí™” ì•ˆ ë¨

### ìˆ˜ì • ë°©ë²•
1. `.env.example`ì— JWT_SECRET ì¶”ê°€
2. `.env.test` ìƒì„±
3. í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰

### ìˆ˜ì • í›„ ì¬ì‹¤í–‰
```bash
pnpm gate
```

âš ï¸ **Gate 0ì  ì²˜ë¦¬. ì´í›„ ë‹¨ê³„ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ.**
```

### í…ŒìŠ¤íŠ¸ ì—†ìŒ

```markdown
## âŒ Step 2/4: Test FAIL

### Gate ì¤‘ë‹¨ë¨

**ì‚¬ìœ **: í…ŒìŠ¤íŠ¸ íŒŒì¼ ì—†ìŒ

Shovel ì‹œìŠ¤í…œì€ **ìµœì†Œ 8ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤.

### í•„ìš”í•œ í…ŒìŠ¤íŠ¸
- *.test.ts ë˜ëŠ” *.spec.ts íŒŒì¼
- ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤ ëª¨ë‘ í¬í•¨
- inject í…ŒìŠ¤íŠ¸ ê¶Œì¥

### í…ŒìŠ¤íŠ¸ ìƒì„± í›„ ì¬ì‹¤í–‰
```bash
pnpm gate
```

âš ï¸ **í…ŒìŠ¤íŠ¸ ì—†ìŒ = ì¶œì‹œ ë¶ˆê°€**
```

---

## Step 3: Build

### ì‹¤í–‰

```bash
pnpm build
# ë˜ëŠ”
pnpm tsc && pnpm vite build
```

### ì„±ê³µ ì‹œ

```markdown
## âœ… Step 3/4: Build PASS

| í•­ëª© | ê°’ |
|------|-----|
| ë¹Œë“œ ì‹œê°„ | {X}s |
| ì¶œë ¥ í¬ê¸° | {X}KB |
| ë²ˆë“¤ ìˆ˜ | {N} |

â†’ Step 4ë¡œ ì§„í–‰
```

### ì‹¤íŒ¨ ì‹œ

```markdown
## âŒ Step 3/4: Build FAIL

### Gate ì¤‘ë‹¨ë¨

```
error TS2307: Cannot find module '@/core/errors'
```

### ì›ì¸ ë¶„ì„
- ê²½ë¡œ ë³„ì¹­ ì„¤ì • ëˆ„ë½
- tsconfig.json paths í™•ì¸ í•„ìš”

### ìˆ˜ì • ë°©ë²•
```json
// tsconfig.json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  }
}
```

### ìˆ˜ì • í›„ ì¬ì‹¤í–‰
```bash
pnpm gate
```

âš ï¸ **Gate 0ì  ì²˜ë¦¬. ì´í›„ ë‹¨ê³„ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ.**
```

---

## Step 4: Audit

### ì‹¤í–‰

```bash
pnpm audit
# ë˜ëŠ”
npm audit
```

### ì„±ê³µ ì‹œ

```markdown
## âœ… Step 4/4: Audit PASS

| í•­ëª© | ê°’ |
|------|-----|
| ì·¨ì•½ì  | 0 |
| Critical | 0 |
| High | 0 |

â†’ **GATE PASS!**
```

### ê²½ê³  (ë¹„ì°¨ë‹¨)

```markdown
## âš ï¸ Step 4/4: Audit WARN

| ì‹¬ê°ë„ | ê°œìˆ˜ |
|--------|------|
| Critical | 0 |
| High | 2 |
| Moderate | 5 |

**High ì·¨ì•½ì ì€ ê²½ê³ ì§€ë§Œ Gate í†µê³¼ë©ë‹ˆë‹¤.**
ì¶”í›„ ìˆ˜ì • ê¶Œì¥.

â†’ **GATE PASS (ê²½ê³  ìˆìŒ)**
```

### ì‹¤íŒ¨ ì‹œ (Critical)

```markdown
## âŒ Step 4/4: Audit FAIL

### Gate ì¤‘ë‹¨ë¨

**Critical ì·¨ì•½ì  ë°œê²¬**

```
lodash  <4.17.21
Severity: critical
Prototype Pollution
```

### ìˆ˜ì • ë°©ë²•
```bash
pnpm update lodash
# ë˜ëŠ”
pnpm audit fix
```

### ìˆ˜ì • í›„ ì¬ì‹¤í–‰
```bash
pnpm gate
```

âš ï¸ **Critical ì·¨ì•½ì ì€ ë°°í¬ ë¶ˆê°€.**
```

---

## GATE PASS: EVIDENCE.md ìƒì„±

ëª¨ë“  ë‹¨ê³„ í†µê³¼ ì‹œ ìë™ ìƒì„±:

```markdown
# Gate Evidence Report

> **Generated**: 2026-01-09T14:30:00Z
> **Status**: âœ… PASS

---

## ğŸ“‹ Summary

| Step | Result | Details |
|------|--------|---------|
| Lint | âœ… PASS | 0 errors, 3 warnings |
| Test | âœ… PASS | 12/12 passed, 85% coverage |
| Build | âœ… PASS | 2.3s, 450KB |
| Audit | âœ… PASS | 0 vulnerabilities |

---

## ğŸ” Environment

| Property | Value |
|----------|-------|
| Timestamp | 2026-01-09T14:30:00Z |
| Git Commit | `abc1234` |
| Git Branch | `feature/login` |
| Node Version | v20.10.0 |
| pnpm Version | 8.15.0 |

---

## âœ… Gate Result

```
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•
â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•      â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘
â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
 â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•â•â•â•â•â•    â•šâ•â•     â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•
```

**ì´ í”„ë¡œì íŠ¸ëŠ” Gateë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤. ë°°í¬/ë‚©í’ˆ ì¤€ë¹„ ì™„ë£Œ.**

---

*Generated by Shovel Gate System v2*
```

---

## ìµœì¢… ì¶œë ¥

### GATE PASS

```markdown
## âœ… GATE PASS

### Evidence
- ì‹œê°: 2026-01-09T14:30:00Z
- Commit: `abc1234`
- Branch: `feature/login`

### ê²°ê³¼
| ë‹¨ê³„ | ìƒíƒœ | ìƒì„¸ |
|------|------|------|
| Lint | âœ… | 0 errors |
| Test | âœ… | 12/12 passed |
| Build | âœ… | 2.3s |
| Audit | âœ… | 0 critical |

### ìƒì„±ëœ íŒŒì¼
- `EVIDENCE.md` âœ…

### ë‹¤ìŒ ë‹¨ê³„
1. `/review` - ì½”ë“œ ë¦¬ë·°
2. ì»¤ë°‹: `git commit -m "feat: ..."`
3. PR ìƒì„±

**Gate PASS = ì™„ë£Œ. ì»¤ë°‹ ê°€ëŠ¥.**
```

### GATE FAIL

```markdown
## âŒ GATE FAIL

### ì‹¤íŒ¨ ë‹¨ê³„
**{ë‹¨ê³„ëª…}** ({N}/4 ë‹¨ê³„ì—ì„œ ì¤‘ë‹¨)

### ì—ëŸ¬ ìš”ì•½
{ì—ëŸ¬ ë‚´ìš©}

### ìˆ˜ì • ë°©ì•ˆ
1. {ìˆ˜ì • ë°©ë²•}

### ì¬ì‹¤í–‰
```bash
pnpm gate
```

**Gate 0ì  ì²˜ë¦¬. ì»¤ë°‹ ë¶ˆê°€.**
```

---

## Flaky í…ŒìŠ¤íŠ¸ ê°ì§€

í…ŒìŠ¤íŠ¸ê°€ ëœë¤í•˜ê²Œ ì„±ê³µ/ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°:

```markdown
## âš ï¸ Flaky Test ê°ì§€

- 1ì°¨ ì‹¤í–‰: PASS
- 2ì°¨ ì‹¤í–‰: FAIL
- 3ì°¨ ì‹¤í–‰: PASS

**ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ ë²„ê·¸ì…ë‹ˆë‹¤.**

ê²°ì •ë¡  ìœ„ë°˜: ë™ì¼ ì…ë ¥ â†’ ë™ì¼ ì¶œë ¥ ì›ì¹™ ìœ„ë°°

### ì›ì¸ ê°€ëŠ¥ì„±
1. ì‹œê°„ ì˜ì¡´ ë¡œì§ (Date.now())
2. ëœë¤ ê°’ (Math.random())
3. ì™¸ë¶€ API ì˜ì¡´
4. í…ŒìŠ¤íŠ¸ ìˆœì„œ ì˜ì¡´

### í•´ê²° í•„ìˆ˜ í›„ Gate ì¬ì‹¤í–‰

âš ï¸ **Flaky = ë²„ê·¸. ì¬í˜„ ë¶ˆê°€ëŠ¥ = ì¶œì‹œ ë¶ˆê°€.**
```
