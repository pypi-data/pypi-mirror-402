# Ruff configuration file
# This file contains all Ruff linting and formatting rules
# See https://docs.astral.sh/ruff/configuration/ for more information

# Line length matches project style
line-length = 120
target-version = "py313"

[lint]
# Enable rule sets: E (pycodestyle errors), F (Pyflakes), I (isort), W (pycodestyle warnings)
# Also enable modern rule sets for better code quality
select = [
    "E",   # pycodestyle errors
    "F",   # Pyflakes
    "I",   # isort
    "W",   # pycodestyle warnings
    "UP",  # pyupgrade - modernize Python syntax
    "B",   # flake8-bugbear - common bugs and design problems
    "C4",  # flake8-comprehensions - better comprehensions
    "SIM", # flake8-simplify - simplify code
    "ARG", # flake8-unused-arguments
    "PLR", # pylint refactor
    "PLE", # pylint error
    "PLW", # pylint warning
]

# Ignore rules that are too strict or not applicable
ignore = [
    "E501",      # Line too long (handled by formatter)
    "E402",      # Module level import not at top of file (sometimes needed)
    "F841",      # Unused variable (too strict for tests and development)
    "F541",      # f-string-missing-placeholders (sometimes intentional for clarity)
    "ARG001",    # Unused function argument (too strict)
    "ARG002",    # Unused method argument (too strict)
    "ARG004",    # Unused static method argument (too strict)
    "ARG005",    # Unused lambda argument (too strict)
    "PLR0913",   # Too many arguments (allow up to 7)
    "PLR0912",   # Too many branches/locals (allow reasonable limits)
    "PLR0915",   # Too many statements (allow reasonable limits)
    "PLR2004",   # Magic value used in comparison (too strict)
    "PLR0911",   # Magic value used in comparison (too strict)
    "PLR1714",   # Repeated equality comparison (sometimes clearer)
    "PLR5501",   # Collapsible else-if (style preference)
    "PLW0602",   # Using global statement (sometimes needed)
    "PLW0603",   # Using global statement (sometimes needed)
    "PLW2901",   # Redefined loop name (sometimes intentional)
    "PLW1641",   # eq-without-hash (not always needed)
    "D100",      # Missing module docstring (not required)
    "D101",      # Missing class docstring (not required)
    "D102",      # Missing public method docstring (not required)
    "D103",      # Missing function docstring (not required)
    "D104",      # Missing public package docstring (not required)
    "SIM102",    # Collapsible if (style preference)
    "SIM103",    # Needless bool (sometimes clearer)
    "SIM105",    # Suppressible exception (sometimes intentional)
    "SIM108",    # Use ternary operator (style preference)
    "UP007",     # Use X | Y for type annotations (Python 3.13+ already uses this)
    "UP041",     # timeout-error-alias (backward compatibility)
    "UP043",     # unnecessary-default-type-args (backward compatibility)
    "UP046",     # non-pep695-generic-class (backward compatibility)
    "B007",      # Unused loop control variable (sometimes needed)
    "B904",      # raise-without-from-inside-except (sometimes intentional)
    "B905",      # zip-without-explicit-strict (not always needed)
    "C420",      # Unnecessary dict comprehension (sometimes clearer)
    "ARG003",    # Unused class method argument (too strict)
    "F821",      # Undefined name (false positives with dynamic imports)
    "I001",      # Undefined name (false positives with dynamic imports)
    "UP045",     # non-pep604-annotation-optional (backward compatibility)
]

[lint.per-file-ignores]
# Ignore specific rules for test files
"tests/**/*.py" = [
    "ARG001",    # Unused function argument in tests
    "ARG002",    # Unused method argument in tests
    "F841",      # Unused variable in tests
    "PLR2004",   # Magic value used in comparison in tests
]

[lint.pylint]
# Configure pylint-specific settings
max-args = 7
max-locals = 15
max-branches = 10
max-statements = 30
max-returns = 3
max-public-methods = 20
max-nested-blocks = 5

[format]
# Use double quotes for strings
quote-style = "double"
# Use spaces for indentation
indent-style = "space"
# Respect magic trailing comma
skip-magic-trailing-comma = false
# Line ending style
line-ending = "auto"

