[project]
name = "pyflowery"
description = "A Python API wrapper for the Flowery API"
readme = "README.md"
requires-python = "<4.0,>=3.11"
dependencies = ["aiohttp~=3.13", "lxml~=6.0", "pydantic>=2.11.10"]
classifiers = [
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Intended Audience :: Developers",
    "Operating System :: OS Independent",
    "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
]
dynamic = ["version", "urls"]

[project.optional-dependencies]
cli = ["typer~=0.21.1"]
speedups = ["aiohttp[speedups]~=3.13", "orjson~=3.11"]

[dependency-groups]
dev = [
    { include-group = "lint" },
    { include-group = "tests" },
    { include-group = "docs" },
    { include-group = "repl" },
]
lint = [
    "ruff~=0.14.13",
    "basedpyright~=1.37.1",
    { include-group = "type-stubs" },
]
tests = ["pytest~=9.0.2", "pytest-cov~=7.0.0"]
docs = [
    "zensical~=0.0.16",
    "mkdocstrings-python~=2.0.1",
    { include-group = "type-stubs" },
]
repl = ["ipython~=9.9.0", "rich~=14.2.0"]
type-stubs = ["lxml-stubs>=0.5.1"]


[tool.ruff]
line-length = 130

[tool.hatch.version]
source = "vcs"

[tool.hatch.build.hooks.vcs]
version-file = "pyflowery/version.py"
template = """
# This file is automatically generated on build, do not edit!
# Do not commit this file to source control!

__all__ = [
    "__version__",
    "__version_tuple__",
    "version",
    "version_tuple"
]

version: str
__version__: str
__version_tuple__: tuple[int | str, ...]
version_tuple: tuple[int | str, ...]

__version__ = version = {version!r}
__version_tuple__ = version_tuple = {version_tuple!r}

"""

[tool.hatch.metadata.hooks.vcs.urls]
Homepage = "https://c.csw.im/cswimr/PyFlowery"
Documentation = "https://pyflowery.csw.im"
Issues = "https://c.csw.im/cswimr/PyFlowery/issues"
source_archive = "https://c.csw.im/cswimr/PyFlowery/archive/{commit_hash}.tar.gz"

[build-system]
requires = ["hatchling", "hatch-vcs"]
build-backend = "hatchling.build"
