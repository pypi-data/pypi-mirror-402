import{$ as a,$a as P,Aa as i,Ac as z,Ad as J,Ba as s,Bd as Q,Ca as T,Cd as W,Dd as X,Gb as F,Gd as Y,Hd as Z,I as y,Id as ee,Ja as S,Jd as te,K as _,Kd as ne,L as g,La as u,Ma as d,Md as L,Nb as E,Ob as w,Od as ie,Pd as se,Q as I,Qd as oe,Rd as re,Tb as B,U as v,Vb as q,_a as r,ab as R,dd as $,gd as H,ia as C,jb as V,lb as A,pb as f,ra as O,rb as M,sb as b,ta as l,ua as c,xa as N,xd as U,ya as k,yc as j,yd as K,za as p,zd as G}from"./chunk-CRN6KGBZ.js";function ae(e){return new Date(ce(e))}function ce(e){return Number(e.seconds)*1e3+Math.round(e.nanos/1e6)}function fe(e,n){if(e&1&&(i(0,"span",4),r(1),s()),e&2){let t=d();a(),P(t.session().description)}}function _e(e,n){e&1&&(r(0),V(1,"date")),e&2&&R(" ",A(1,1,n,"medium")," ")}function ge(e,n){e&1&&r(0," Unknown ")}var h=class e{session=b.required();selected=M();truncatedId=f(()=>{let n=this.session().id;return n.length>8?`${n.slice(0,8)}...`:n});createdAt=f(()=>{let n=this.session();return n.createdAt?ae(n.createdAt):null});onSelect(){this.selected.emit(this.session().id)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=C({type:e,selectors:[["app-session-card"]],inputs:{session:[1,"session"]},outputs:{selected:"selected"},decls:21,vars:5,consts:[["tabindex","0",1,"cursor-pointer","rounded-lg","mb-2","transition-colors","duration-200","hover:bg-surface-variant/30","focus:outline-2","focus:outline-primary","focus:outline-offset-2",3,"click","keydown.enter"],["matListItemIcon",""],["matListItemTitle","",1,"flex","items-center","gap-3"],["data-testid","session-id",1,"font-mono","font-medium","text-primary",3,"title"],["data-testid","session-description",1,"text-on-surface-variant","font-normal"],[1,"session-meta"],[1,"meta-icon"],["data-testid","session-created"],[1,"separator"],[1,"status-icon"],["data-testid","session-status"],["matListItemMeta",""]],template:function(t,o){if(t&1&&(i(0,"mat-list-item",0),u("click",function(){return o.onSelect()})("keydown.enter",function(){return o.onSelect()}),i(1,"mat-icon",1),r(2,"folder_open"),s(),i(3,"div",2)(4,"span",3),r(5),s(),l(6,fe,2,1,"span",4),s(),i(7,"div",5)(8,"mat-icon",6),r(9,"schedule"),s(),i(10,"span",7),l(11,_e,2,4)(12,ge,1,0),s(),i(13,"span",8),r(14,"\xB7"),s(),i(15,"mat-icon",9),r(16,"circle"),s(),i(17,"span",10),r(18,"Active"),s()(),i(19,"mat-icon",11),r(20,"chevron_right"),s()()),t&2){let m;O("data-testid","session-card-"+o.session().id),a(4),p("title",o.session().id),a(),P(o.truncatedId()),a(),c(o.session().description?6:-1),a(5),c((m=o.createdAt())?11:12,m)}},dependencies:[w,E,L,ne,ee,Y,Z,F],styles:["[_nghost-%COMP%]{display:block}mat-list-item[_ngcontent-%COMP%]{height:auto!important;min-height:72px}.session-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.75rem;color:var(--sys-on-surface-variant);margin-top:4px}.meta-icon[_ngcontent-%COMP%]{font-size:14px!important;width:14px!important;height:14px!important;line-height:1!important}.separator[_ngcontent-%COMP%]{margin:0 .75rem}.status-icon[_ngcontent-%COMP%]{font-size:8px!important;width:8px!important;height:8px!important;line-height:1!important;color:var(--color-success)}mat-list-item[_ngcontent-%COMP%]:focus{outline:2px solid var(--sys-primary);outline-offset:2px}"],changeDetection:0})};var Ce=(e,n)=>n.id;function Se(e,n){if(e&1){let t=S();i(0,"app-session-card",2),u("selected",function(m){_(t);let D=d();return g(D.sessionSelected.emit(m))}),s()}if(e&2){let t=n.$implicit;p("session",t)}}var x=class e{sessions=b.required();sessionSelected=M();static \u0275fac=function(t){return new(t||e)};static \u0275cmp=C({type:e,selectors:[["app-session-card-list"]],inputs:{sessions:[1,"sessions"]},outputs:{sessionSelected:"sessionSelected"},decls:3,vars:0,consts:[[1,"p-0"],[3,"session"],[3,"selected","session"]],template:function(t,o){t&1&&(i(0,"mat-list",0),N(1,Se,1,1,"app-session-card",1,Ce),s()),t&2&&(a(),k(o.sessions()))},dependencies:[L,te,h],encapsulation:2,changeDetection:0})};function he(e,n){if(e&1){let t=S();i(0,"app-error-banner",11),u("dismissed",function(){_(t);let m=d();return g(m.dismissRouteError())}),s()}if(e&2){let t=d();p("message",t.routeError())}}function xe(e,n){e&1&&T(0,"app-loading-state",5)}function ye(e,n){if(e&1){let t=S();i(0,"app-error-state",12),u("retry",function(){_(t);let m=d();return g(m.loadSessions())}),s()}if(e&2){let t=d();p("message",t.error())}}function ve(e,n){e&1&&T(0,"app-empty-state",7)}function Me(e,n){if(e&1){let t=S();i(0,"app-session-card-list",13),u("sessionSelected",function(m){_(t);let D=d();return g(D.navigateToSession(m))}),s()}if(e&2){let t=d();p("sessions",t.sessions())}}var le=class e{facade=y(H);router=y(q);route=y(B);destroyRef=y(I);sessions=v([]);isLoading=v(!1);_routeError=v(null);routeError=this._routeError.asReadonly();hasRouteError=f(()=>this._routeError()!==null);error=this.facade.error;hasError=this.facade.hasError;hasSessions=f(()=>this.sessions().length>0);showEmptyState=f(()=>!this.isLoading()&&!this.hasError()&&!this.hasSessions());ngOnInit(){this.loadSessions(),this.subscribeToRouteErrors()}subscribeToRouteErrors(){this.route.queryParams.pipe($(this.destroyRef)).subscribe(n=>{let t=n.error;this._routeError.set(t??null)})}dismissRouteError(){this._routeError.set(null),this.router.navigate([],{relativeTo:this.route,queryParams:{error:null},queryParamsHandling:"merge"})}async loadSessions(){this.isLoading.set(!0);try{let n=await this.facade.listSessions();this.sessions.set(n)}catch{this.sessions.set([])}finally{this.isLoading.set(!1)}}navigateToSession(n){this.router.navigate(["/session",n])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=C({type:e,selectors:[["app-session-list"]],decls:20,vars:6,consts:[[1,"flex","flex-col","items-center","p-6","min-h-screen","bg-surface"],["data-testid","route-error-banner",1,"w-full","max-w-3xl","mb-4",3,"message"],[1,"w-full","max-w-3xl"],[1,"flex","items-center","gap-2"],[1,"text-primary"],["message","Loading sessions..."],[3,"message"],["message","No sessions available","hint","Sessions will appear here when created by an ADK agent."],[3,"sessions"],[1,"flex","justify-end","px-4","py-2"],["mat-button","",3,"click","disabled"],["data-testid","route-error-banner",1,"w-full","max-w-3xl","mb-4",3,"dismissed","message"],[3,"retry","message"],[3,"sessionSelected","sessions"]],template:function(t,o){t&1&&(i(0,"div",0),l(1,he,1,1,"app-error-banner",1),i(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title",3)(5,"mat-icon",4),r(6,"list"),s(),r(7," Available Sessions "),s(),i(8,"mat-card-subtitle"),r(9," Browse and select a simulation session "),s()(),i(10,"mat-card-content"),l(11,xe,1,0,"app-loading-state",5),l(12,ye,1,1,"app-error-state",6),l(13,ve,1,0,"app-empty-state",7),l(14,Me,1,1,"app-session-card-list",8),s(),i(15,"mat-card-actions",9)(16,"button",10),u("click",function(){return o.loadSessions()}),i(17,"mat-icon"),r(18,"refresh"),s(),r(19," Refresh "),s()()()()),t&2&&(a(),c(o.hasRouteError()?1:-1),a(10),c(o.isLoading()?11:-1),a(),c(o.hasError()&&!o.isLoading()?12:-1),a(),c(o.showEmptyState()?13:-1),a(),c(o.hasSessions()&&!o.isLoading()?14:-1),a(2),p("disabled",o.isLoading()))},dependencies:[ie,se,oe,re,z,j,X,U,Q,G,W,J,K,w,E,x],styles:[".session-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px;min-height:calc(100vh - 64px);background-color:var(--sys-surface)}.route-error-banner[_ngcontent-%COMP%]{width:100%;max-width:800px;margin-bottom:16px}.session-list-card[_ngcontent-%COMP%]{width:100%;max-width:800px}.session-list-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.session-list-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--sys-primary)}.session-list[_ngcontent-%COMP%]{padding:0}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:8px 16px}"],changeDetection:0})};export{le as a};
