import{j as e,B as n,K as p,H as j,b,a as f,d as y,R as k,V as S}from"./chakra.js";import{r as R}from"./react-core.js";import{u as I,M}from"./MigrateButton.js";import{P as V}from"./ProgressSummary.js";import{P as A,D as v}from"./PageLoading.js";import{e as x,a as B,b as E,o as H}from"./index.js";import{c as P}from"./table.js";import"./http.js";import"./icons.js";import"./router.js";const l=P();function w(a,r,s){return[l.accessor("key",{header:"Key",meta:{minWidth:"150px"}}),l.accessor("val",{header:"Value",meta:{minWidth:"200px"}}),l.display({id:"migrate",header:"Migrate",meta:{align:"right",width:"120px"},enableSorting:!1,cell:i=>{const{original:t}=i.row;return e.jsx(M,{route:B(a+x.VARIABLES_ROUTE),headers:E(r),existsInRemote:t.exists,sendData:H(t,"exists"),onStatusChange:o=>s(t.key,o),itemName:`variable "${t.key}"`})}})]}function _(){const{loading:a,error:r,data:s,isMigratingAll:i,totalItems:t,migratedItems:o,fetchData:h,handleItemStatusChange:m,handleMigrateAll:u,targetUrl:c,token:d}=I({route:x.VARIABLES_ROUTE,idField:"key",itemName:"variable"}),g=R.useMemo(()=>w(c,d,m),[c,d,m]);return e.jsxs(n,{children:[e.jsxs(p,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},mb:3,children:[e.jsxs(n,{children:[e.jsx(j,{size:"md",mb:.5,children:"Variables"}),e.jsx(b,{fontSize:"xs",color:"gray.600",children:"Variables store arbitrary content as key-value pairs."})]}),e.jsx(f,{children:e.jsx(y,{size:"sm",leftIcon:e.jsx(k,{}),onClick:h,variant:"outline",isLoading:a,children:"Refresh"})})]}),e.jsxs(S,{spacing:3,align:"stretch",w:"100%",children:[!a&&!r&&e.jsx(V,{totalItems:t,migratedItems:o,onMigrateAll:u,isMigratingAll:i}),e.jsx(n,{children:a||r?e.jsx(A,{loading:a,error:r}):e.jsx(v,{data:s,columns:g,searchPlaceholder:"Search by key, value..."})})]})]})}export{_ as default};
