import{j as e,B as c,K as f,H as j,b,a as S,d as C,R as y,V as H}from"./chakra.js";import{r as I}from"./react-core.js";import{u as W,M as w}from"./MigrateButton.js";import{H as M}from"./HiddenValue.js";import{P as N}from"./ProgressSummary.js";import{P,D}from"./PageLoading.js";import{e as x,a as E,b as R,o as T}from"./index.js";import{c as _}from"./table.js";import"./http.js";import"./icons.js";import"./router.js";const t=_();function h(a){return e.jsx(M,{value:a.getValue()})}function O(a,r,n){return[t.accessor("conn_id",{header:"Connection ID",meta:{minWidth:"150px"}}),t.accessor("conn_type",{header:"Type",meta:{minWidth:"100px"}}),t.accessor("host",{header:"Host",meta:{minWidth:"150px"}}),t.accessor("port",{header:"Port",meta:{minWidth:"80px"}}),t.accessor("schema",{header:"Schema",meta:{minWidth:"100px"}}),t.accessor("login",{header:"Login",meta:{minWidth:"120px"}}),t.accessor("password",{header:"Password",cell:h,meta:{minWidth:"100px"},enableSorting:!1}),t.accessor("extra",{header:"Extra",cell:h,meta:{minWidth:"100px"},enableSorting:!1}),t.display({id:"migrate",header:"Migrate",meta:{align:"right",width:"120px"},enableSorting:!1,cell:o=>{const{original:s}=o.row;return e.jsx(w,{route:E(a+x.CONNECTIONS_ROUTE),headers:R(r),existsInRemote:s.exists,sendData:T(s,"exists"),onStatusChange:i=>n(s.conn_id,i),itemName:`connection "${s.conn_id}"`})}})]}function q(){const{loading:a,error:r,data:n,isMigratingAll:o,totalItems:s,migratedItems:i,fetchData:p,handleItemStatusChange:l,handleMigrateAll:g,targetUrl:m,token:d}=W({route:x.CONNECTIONS_ROUTE,idField:"conn_id",itemName:"connection"}),u=I.useMemo(()=>O(m,d,l),[m,d,l]);return e.jsxs(c,{children:[e.jsxs(f,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},mb:3,children:[e.jsxs(c,{children:[e.jsx(j,{size:"md",mb:.5,children:"Connections"}),e.jsx(b,{fontSize:"xs",color:"gray.600",children:"Airflow Connection objects store credentials for external services."})]}),e.jsx(S,{children:e.jsx(C,{size:"sm",leftIcon:e.jsx(y,{}),onClick:p,variant:"outline",isLoading:a,children:"Refresh"})})]}),e.jsxs(H,{spacing:3,align:"stretch",w:"100%",children:[!a&&!r&&e.jsx(N,{totalItems:s,migratedItems:i,onMigrateAll:g,isMigratingAll:o}),e.jsx(c,{children:a||r?e.jsx(P,{loading:a,error:r}):e.jsx(D,{data:n,columns:u,searchPlaceholder:"Search by ID, type, host..."})})]})]})}export{q as default};
