import{j as e,B as m,K as u,H as f,b as j,a as b,d as P,R as S,V as y}from"./chakra.js";import{r as M}from"./react-core.js";import{u as R,M as k}from"./MigrateButton.js";import{P as D}from"./ProgressSummary.js";import{P as H,D as I}from"./PageLoading.js";import{e as h,a as O,b as w,o as C}from"./index.js";import{c as B}from"./table.js";import"./http.js";import"./icons.js";import"./router.js";const r=B();function E(t,s,o){return[r.accessor("name",{header:"Name",meta:{minWidth:"150px"}}),r.accessor("slots",{header:"Slots",meta:{minWidth:"80px"}}),r.accessor("description",{header:"Description",meta:{minWidth:"200px"}}),r.display({id:"migrate",header:"Migrate",meta:{align:"right",width:"120px"},enableSorting:!1,cell:i=>{const{original:a}=i.row;return e.jsx(k,{route:O(t+h.POOL_ROUTE),headers:w(s),existsInRemote:a.exists,sendData:C(a,"exists"),onStatusChange:n=>o(a.name,n),itemName:`pool "${a.name}"`})}})]}function v(){const{loading:t,error:s,data:o,isMigratingAll:i,totalItems:a,migratedItems:n,fetchData:p,handleItemStatusChange:l,handleMigrateAll:x,targetUrl:c,token:d}=R({route:h.POOL_ROUTE,idField:"name",itemName:"pool"}),g=M.useMemo(()=>E(c,d,l),[c,d,l]);return e.jsxs(m,{children:[e.jsxs(u,{direction:{base:"column",md:"row"},justify:"space-between",align:{base:"flex-start",md:"center"},mb:3,children:[e.jsxs(m,{children:[e.jsx(f,{size:"md",mb:.5,children:"Pools"}),e.jsx(j,{fontSize:"xs",color:"gray.600",children:"Pools limit the number of concurrent tasks of a certain type."})]}),e.jsx(b,{children:e.jsx(P,{size:"sm",leftIcon:e.jsx(S,{}),onClick:p,variant:"outline",isLoading:t,children:"Refresh"})})]}),e.jsxs(y,{spacing:3,align:"stretch",w:"100%",children:[!t&&!s&&e.jsx(D,{totalItems:a,migratedItems:n,onMigrateAll:x,isMigratingAll:i}),e.jsx(m,{children:t||s?e.jsx(H,{loading:t,error:s}):e.jsx(I,{data:o,columns:g,searchPlaceholder:"Search by name, slots, description..."})})]})]})}export{v as default};
