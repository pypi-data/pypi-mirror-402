{"version":3,"file":"js/477.145bb174.js","mappings":"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","sources":["webpack://sortinghat-ui/./src/views/ChangePassword.vue","webpack://sortinghat-ui/./src/views/ChangePassword.vue?9dd6"],"sourcesContent":["<template lang=\"html\">\n  <v-main>\n    <v-card class=\"mx-auto mt-6 section\" max-width=\"500\" elevation=\"0\" outlined>\n      <v-card-title class=\"header\">Password change</v-card-title>\n      <v-card-text class=\"pa-8\">\n        <p v-if=\"showForm\" class=\"mb-8\">\n          Please enter your old password, for security's sake, and then enter\n          your new password twice so we can verify you typed it in correctly.\n        </p>\n        <v-form v-if=\"showForm\" ref=\"form_change_password\">\n          <v-text-field\n            v-model=\"old_password\"\n            label=\"Old password\"\n            name=\"old_password\"\n            type=\"password\"\n            error-count=\"5\"\n            class=\"mb-4\"\n            :error-messages=\"\n              errors.old_password\n                ? errors.old_password.map((error) => error.message)\n                : []\n            \"\n            outlined\n            dense\n          />\n          <v-text-field\n            v-model=\"new_password1\"\n            label=\"New password\"\n            name=\"new_password1\"\n            type=\"password\"\n            error-count=\"5\"\n            class=\"mb-4\"\n            :error-messages=\"\n              errors.new_password1\n                ? errors.new_password1.map((error) => error.message)\n                : []\n            \"\n            outlined\n            dense\n          />\n          <v-text-field\n            v-model=\"new_password2\"\n            label=\"New password confirmation\"\n            name=\"new_password2\"\n            type=\"password\"\n            error-count=\"5\"\n            class=\"mb-4\"\n            :error-messages=\"\n              errors.new_password2\n                ? errors.new_password2.map((error) => error.message)\n                : []\n            \"\n            outlined\n            dense\n          />\n          <v-btn\n            :disabled=\"!old_password || !new_password1 || !new_password2\"\n            color=\"primary\"\n            variant=\"flat\"\n            size=\"default\"\n            @click.prevent=\"onSubmit\"\n          >\n            Save\n          </v-btn>\n        </v-form>\n        <v-alert v-else outlined type=\"success\" text>\n          Password changed successfully\n        </v-alert>\n      </v-card-text>\n    </v-card>\n  </v-main>\n</template>\n\n<script>\nimport Cookies from \"js-cookie\";\n\nexport default {\n  name: \"ChangePassword\",\n  data: () => ({\n    old_password: \"\",\n    new_password1: \"\",\n    new_password2: \"\",\n    errors: {},\n    showForm: true,\n  }),\n  computed: {\n    url() {\n      const pathname = \"/password_change/\";\n      let origin = process.env.BASE_URL.replace(/\\/$/, \"\");\n\n      if (process.env.VUE_APP_API_URL) {\n        origin = new URL(process.env.VUE_APP_API_URL).origin.replace(/\\/$/, \"\");\n      }\n\n      return `${origin}${pathname}`;\n    },\n    headers() {\n      const csrftoken = Cookies.get(\"csrftoken\");\n      const headers = {\n        \"X-CSRFToken\": csrftoken,\n      };\n\n      return headers;\n    },\n  },\n  methods: {\n    onSubmit() {\n      const HTMLForm = this.$refs.form_change_password.$el;\n      const body = new FormData(HTMLForm);\n\n      this.errors = {};\n\n      fetch(this.url, {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: this.headers,\n        body: body,\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          if (data.errors) {\n            this.errors = data.errors;\n            this.$logger.error(\"Error changing password\", data);\n          } else {\n            this.showForm = false;\n            this.$logger.info(`Changed password for user ${data.updated}`);\n          }\n        });\n    },\n  },\n};\n</script>\n","import { render } from \"./ChangePassword.vue?vue&type=template&id=0b632147&lang=html\"\nimport script from \"./ChangePassword.vue?vue&type=script&lang=js\"\nexport * from \"./ChangePassword.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createBlock","_component_v_main","_createVNode","_component_v_card","elevation","outlined","_component_v_card_title","_cache","_component_v_card_text","_ctx","showForm","_createElementBlock","_hoisted_1","_component_v_form","ref","_component_v_text_field","old_password","$event","label","name","type","errors","map","error","message","dense","new_password1","new_password2","_component_v_btn","disabled","color","variant","size","onClick","_withModifiers","$options","onSubmit","_component_v_alert","text","data","computed","url","pathname","origin","process","replace","VUE_APP_API_URL","URL","concat","headers","csrftoken","Cookies","methods","_this","HTMLForm","this","$refs","form_change_password","$el","body","FormData","fetch","method","credentials","then","response","json","$logger","info","updated","__exports__","render"],"sourceRoot":""}