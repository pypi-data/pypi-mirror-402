var z=Object.defineProperty;var l=(h,d)=>z(h,"name",{value:d,configurable:!0});import{s as D,u as P}from"./vendor-vue-Cz2Pyvdp.js";import{q as E,s as x}from"./vendor-primevue-6nO4LMK3.js";import{e as O,f as G,N as H,dr as J,_ as C,dp as K,bk as M}from"./index-Btwre5kD.js";import{u as Q}from"./serverConfigStore-BupvrirU.js";import{bx as W,w as b,dc as X,j as m,d as t,k as a,c as u,F as y,y as _,by as o,q as S,e as r,u as n,z as p,A as V}from"./vendor-other-PcOcwbNM.js";import"./vendor-xterm-CWYFmgbN.js";import"./vendor-three-Bbe9LX3q.js";import"./vendor-tiptap-BsEBJZ_K.js";const Y={class:"flex flex-col gap-2"},Z={class:"flex justify-end gap-2"},ee={class:"flex items-center justify-between"},de=W({__name:"ServerConfigPanel",setup(h){const d=O(),k=Q(),$=G(),{serverConfigsByCategory:A,serverConfigValues:T,launchArgs:B,commandLineArgs:v,modifiedConfigs:g}=D(k);let w=!1;const I=l(()=>{k.revertChanges()},"revertChanges"),N=l(async()=>{w=!0,await M().restartApp()},"restartApp");b(B,async e=>{await d.set("Comfy.Server.LaunchArgs",e)}),b(T,async e=>{await d.set("Comfy.Server.ServerConfigValues",e)});const{copyToClipboard:j}=H(),q=l(async()=>{await j(v.value)},"copyCommandLineArgs"),{t:f}=P();X(()=>{w||g.value.length!==0&&$.add({severity:"warn",summary:f("serverConfig.restartRequiredToastSummary"),detail:f("serverConfig.restartRequiredToastDetail"),life:1e4})});const L=l(e=>({...e,name:f(`serverConfigItems.${e.id}.name`,e.name),tooltip:e.tooltip?f(`serverConfigItems.${e.id}.tooltip`,e.tooltip):void 0}),"translateItem");return(e,c)=>(t(),m(K,{value:"Server-Config",class:"server-config-panel"},{header:a(()=>[r("div",Y,[o(g).length>0?(t(),m(o(x),{key:0,severity:"info","pt:text":"w-full"},{default:a(()=>[r("p",null,n(e.$t("serverConfig.modifiedConfigs")),1),r("ul",null,[(t(!0),u(y,null,_(o(g),s=>(t(),u("li",{key:s.id},n(s.name)+": "+n(s.initialValue)+" â†’ "+n(s.value),1))),128))]),r("div",Z,[p(C,{variant:"secondary",onClick:I},{default:a(()=>[V(n(e.$t("serverConfig.revertChanges")),1)]),_:1}),p(C,{variant:"destructive",onClick:N},{default:a(()=>[V(n(e.$t("serverConfig.restart")),1)]),_:1})])]),_:1})):S("",!0),o(v)?(t(),m(o(x),{key:1,severity:"secondary","pt:text":"w-full"},{icon:a(()=>c[0]||(c[0]=[r("i",{class:"icon-[lucide--terminal] text-xl font-bold"},null,-1)])),default:a(()=>[r("div",ee,[r("p",null,n(o(v)),1),p(C,{size:"icon",variant:"muted-textonly",onClick:q},{default:a(()=>c[1]||(c[1]=[r("i",{class:"pi pi-clipboard"},null,-1)])),_:1})])]),_:1})):S("",!0)])]),default:a(()=>[(t(!0),u(y,null,_(Object.entries(o(A)),([s,F],R)=>(t(),u("div",{key:s},[R>0?(t(),m(o(E),{key:0})):S("",!0),r("h3",null,n(e.$t(`serverConfigCategories.${s}`,s)),1),(t(!0),u(y,null,_(F,i=>(t(),u("div",{key:i.name,class:"mb-4"},[p(J,{id:i.id,"form-value":i.value,"onUpdate:formValue":l(U=>i.value=U,"onUpdate:formValue"),item:L(i),"label-class":{"text-highlight":i.initialValue!==i.value}},null,8,["id","form-value","onUpdate:formValue","item","label-class"])]))),128))]))),128))]),_:1}))}});export{de as default};
//# sourceMappingURL=ServerConfigPanel-CBDOkkf5.js.map
