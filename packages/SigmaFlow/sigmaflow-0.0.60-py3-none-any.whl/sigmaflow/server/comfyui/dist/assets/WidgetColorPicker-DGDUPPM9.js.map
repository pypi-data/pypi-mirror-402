{"version":3,"file":"WidgetColorPicker-DGDUPPM9.js","sources":["../../../../../../../ComfyUI_frontend/src/renderer/extensions/vueNodes/widgets/components/WidgetColorPicker.vue"],"sourcesContent":["<!-- Needs custom color picker for alpha support -->\n<template>\n  <WidgetLayoutField :widget=\"widget\">\n    <label\n      :class=\"\n        cn(WidgetInputBaseClass, 'flex items-center gap-2 w-full px-4 py-2')\n      \"\n    >\n      <ColorPicker\n        v-model=\"localValue\"\n        v-bind=\"filteredProps\"\n        class=\"h-4 w-8 overflow-hidden !rounded-full border-none\"\n        :aria-label=\"widget.name\"\n        :pt=\"{\n          preview: '!w-full !h-full !border-none'\n        }\"\n        @update:model-value=\"onPickerUpdate\"\n      />\n      <span\n        class=\"text-xs truncate min-w-[4ch]\"\n        data-testid=\"widget-color-text\"\n        >{{ toHexFromFormat(localValue, format) }}</span\n      >\n    </label>\n  </WidgetLayoutField>\n</template>\n\n<script setup lang=\"ts\">\nimport ColorPicker from 'primevue/colorpicker'\nimport { computed, ref, watch } from 'vue'\n\nimport type { SimplifiedWidget } from '@/types/simplifiedWidget'\nimport { isColorFormat, toHexFromFormat } from '@/utils/colorUtil'\nimport type { ColorFormat, HSB } from '@/utils/colorUtil'\nimport { cn } from '@/utils/tailwindUtil'\nimport {\n  PANEL_EXCLUDED_PROPS,\n  filterWidgetProps\n} from '@/utils/widgetPropFilter'\n\nimport { WidgetInputBaseClass } from './layout'\nimport WidgetLayoutField from './layout/WidgetLayoutField.vue'\n\ntype WidgetOptions = { format?: ColorFormat } & Record<string, unknown>\n\nconst props = defineProps<{\n  widget: SimplifiedWidget<string, WidgetOptions>\n  modelValue: string\n}>()\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: string]\n}>()\n\nconst format = computed<ColorFormat>(() => {\n  const optionFormat = props.widget.options?.format\n  return isColorFormat(optionFormat) ? optionFormat : 'hex'\n})\n\ntype PickerValue = string | HSB\nconst localValue = ref<PickerValue>(\n  toHexFromFormat(\n    props.modelValue || '#000000',\n    isColorFormat(props.widget.options?.format)\n      ? props.widget.options.format\n      : 'hex'\n  )\n)\n\nwatch(\n  () => props.modelValue,\n  (newVal) => {\n    localValue.value = toHexFromFormat(newVal || '#000000', format.value)\n  }\n)\n\nfunction onPickerUpdate(val: unknown) {\n  localValue.value = val as PickerValue\n  emit('update:modelValue', toHexFromFormat(val, format.value))\n}\n\n// ColorPicker specific excluded props include panel/overlay classes\nconst COLOR_PICKER_EXCLUDED_PROPS = [...PANEL_EXCLUDED_PROPS] as const\n\nconst filteredProps = computed(() =>\n  filterWidgetProps(props.widget.options, COLOR_PICKER_EXCLUDED_PROPS)\n)\n</script>\n"],"names":["props","__props","emit","__emit","format","computed","optionFormat","isColorFormat","localValue","ref","toHexFromFormat","watch","newVal","onPickerUpdate","val","__name","COLOR_PICKER_EXCLUDED_PROPS","PANEL_EXCLUDED_PROPS","filteredProps","filterWidgetProps"],"mappings":"k0BA6CA,MAAMA,EAAQC,EAKRC,EAAOC,EAIPC,EAASC,EAAsB,IAAM,CACzC,MAAMC,EAAeN,EAAM,OAAO,SAAS,OAC3C,OAAOO,EAAcD,CAAY,EAAIA,EAAe,KACtD,CAAC,EAGKE,EAAaC,EACjBC,EACEV,EAAM,YAAc,UACpBO,EAAcP,EAAM,OAAO,SAAS,MAAM,EACtCA,EAAM,OAAO,QAAQ,OACrB,KAAA,CACN,EAGFW,EACE,IAAMX,EAAM,WACXY,GAAW,CACVJ,EAAW,MAAQE,EAAgBE,GAAU,UAAWR,EAAO,KAAK,CACtE,CAAA,EAGF,SAASS,EAAeC,EAAc,CACpCN,EAAW,MAAQM,EACnBZ,EAAK,oBAAqBQ,EAAgBI,EAAKV,EAAO,KAAK,CAAC,CAC9D,CAHSW,EAAAF,EAAA,kBAMT,MAAMG,EAA8B,CAAC,GAAGC,CAAoB,EAEtDC,EAAgBb,EAAS,IAC7Bc,EAAkBnB,EAAM,OAAO,QAASgB,CAA2B,CAAA"}