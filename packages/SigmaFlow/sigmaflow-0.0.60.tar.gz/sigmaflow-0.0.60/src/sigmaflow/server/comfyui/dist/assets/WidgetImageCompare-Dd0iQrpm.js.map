{"version":3,"file":"WidgetImageCompare-Dd0iQrpm.js","sources":["../../../../../../../ComfyUI_frontend/src/renderer/extensions/vueNodes/widgets/components/WidgetImageCompare.vue"],"sourcesContent":["<template>\n  <div ref=\"containerRef\" class=\"relative size-full min-h-32 overflow-hidden\">\n    <div v-if=\"beforeImage || afterImage\">\n      <img\n        v-if=\"afterImage\"\n        :src=\"afterImage\"\n        :alt=\"afterAlt\"\n        draggable=\"false\"\n        class=\"size-full object-contain\"\n      />\n\n      <img\n        v-if=\"beforeImage\"\n        :src=\"beforeImage\"\n        :alt=\"beforeAlt\"\n        draggable=\"false\"\n        class=\"absolute inset-0 size-full object-contain\"\n        :style=\"{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }\"\n      />\n\n      <div\n        class=\"pointer-events-none absolute inset-y-0 z-10 w-0.5 bg-white shadow-md\"\n        :style=\"{ left: `${sliderPosition}%` }\"\n        role=\"presentation\"\n      />\n    </div>\n\n    <div v-else class=\"flex size-full items-center justify-center\">\n      {{ $t('imageCompare.noImages') }}\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useMouseInElement } from '@vueuse/core'\nimport { computed, ref, watch } from 'vue'\n\nimport type { SimplifiedWidget } from '@/types/simplifiedWidget'\n\nexport interface ImageCompareValue {\n  before: string\n  after: string\n  beforeAlt?: string\n  afterAlt?: string\n  initialPosition?: number\n}\n\n// Image compare widgets typically don't have v-model, they display comparison\nconst props = defineProps<{\n  widget: SimplifiedWidget<ImageCompareValue | string>\n}>()\n\nconst containerRef = ref<HTMLElement | null>(null)\nconst sliderPosition = ref(50)\n\nconst { elementX, elementWidth, isOutside } = useMouseInElement(containerRef)\n\nwatch([elementX, elementWidth, isOutside], ([x, width, outside]) => {\n  if (!outside && width > 0) {\n    sliderPosition.value = Math.max(0, Math.min(100, (x / width) * 100))\n  }\n})\n\nconst beforeImage = computed(() => {\n  const value = props.widget.value\n  return typeof value === 'string' ? value : value?.before || ''\n})\n\nconst afterImage = computed(() => {\n  const value = props.widget.value\n  return typeof value === 'string' ? '' : value?.after || ''\n})\n\nconst beforeAlt = computed(() => {\n  const value = props.widget.value\n  return typeof value === 'object' && value?.beforeAlt\n    ? value.beforeAlt\n    : 'Before image'\n})\n\nconst afterAlt = computed(() => {\n  const value = props.widget.value\n  return typeof value === 'object' && value?.afterAlt\n    ? value.afterAlt\n    : 'After image'\n})\n</script>\n"],"names":["props","__props","containerRef","ref","sliderPosition","elementX","elementWidth","isOutside","useMouseInElement","watch","x","width","outside","beforeImage","computed","value","afterImage","beforeAlt","afterAlt"],"mappings":"gSAgDA,MAAMA,EAAQC,EAIRC,EAAeC,EAAwB,IAAI,EAC3CC,EAAiBD,EAAI,EAAE,EAEvB,CAAE,SAAAE,EAAU,aAAAC,EAAc,UAAAC,CAAA,EAAcC,EAAkBN,CAAY,EAE5EO,EAAM,CAACJ,EAAUC,EAAcC,CAAS,EAAG,CAAC,CAACG,EAAGC,EAAOC,CAAO,IAAM,CAC9D,CAACA,GAAWD,EAAQ,IACtBP,EAAe,MAAQ,KAAK,IAAI,EAAG,KAAK,IAAI,IAAMM,EAAIC,EAAS,GAAG,CAAC,EAEvE,CAAC,EAED,MAAME,EAAcC,EAAS,IAAM,CACjC,MAAMC,EAAQf,EAAM,OAAO,MAC3B,OAAO,OAAOe,GAAU,SAAWA,EAAQA,GAAO,QAAU,EAC9D,CAAC,EAEKC,EAAaF,EAAS,IAAM,CAChC,MAAMC,EAAQf,EAAM,OAAO,MAC3B,OAAO,OAAOe,GAAU,SAAW,GAAKA,GAAO,OAAS,EAC1D,CAAC,EAEKE,EAAYH,EAAS,IAAM,CAC/B,MAAMC,EAAQf,EAAM,OAAO,MAC3B,OAAO,OAAOe,GAAU,UAAYA,GAAO,UACvCA,EAAM,UACN,cACN,CAAC,EAEKG,EAAWJ,EAAS,IAAM,CAC9B,MAAMC,EAAQf,EAAM,OAAO,MAC3B,OAAO,OAAOe,GAAU,UAAYA,GAAO,SACvCA,EAAM,SACN,aACN,CAAC"}