---
description: Delete semantic search indexes to free disk space
allowed-tools: mcp__stravinsky__delete_index, mcp__stravinsky__semantic_stats
---

# Delete Semantic Search Indexes

Remove semantic search indexes to free disk space. Supports deleting specific project/provider combinations or all indexes globally.

## What This Does

Deletes ChromaDB vector databases stored at `~/.stravinsky/vectordb/`. Indexes can be regenerated by running `/str:index` again.

## Interactive Usage

**IMPORTANT**: When invoked without arguments, this command MUST present the user with these two options:

**Option 1: Clear this repo's indexes only**
```
Would you like to:
1. Clear indexes for THIS project only (safe)
2. Clear indexes for ALL projects (⚠️ irreversible)

Enter your choice (1 or 2):
```

### Implementation:
```python
# First, ask the user to choose
# DO NOT proceed until user responds

# If user chooses Option 1:
delete_index(project_path=".")

# If user chooses Option 2:
delete_index(delete_all=True)
```

Before deleting, show what will be deleted using `semantic_stats()` to help the user make an informed decision.

## Manual Usage Modes

For direct invocation without prompting:

### 1. Delete Specific Provider for Project

```python
delete_index(project_path=".", provider="ollama")
```

Deletes only the Ollama index for the current project.

### 2. Delete All Providers for Project

```python
delete_index(project_path=".")
```

Deletes indexes for all providers (ollama, mxbai, gemini, openai, huggingface) for the current project.

### 3. Delete ALL Indexes (Global Clean)

```python
delete_index(delete_all=True)
```

⚠️ **WARNING**: Deletes indexes for ALL projects and ALL providers. This is irreversible.

## Output Example

```
✅ Deleted 2 index(es):
  - /Users/you/.stravinsky/vectordb/abc123_ollama
  - /Users/you/.stravinsky/vectordb/abc123_mxbai
```

## Use Cases

- **Free disk space**: Large codebases can create 100MB+ indexes
- **Provider switching**: Clean up old provider indexes when changing embedding models
- **Fresh start**: Delete and reindex to fix corrupted indexes
- **Project cleanup**: Remove indexes for archived projects

## Check Index Size

Use `semantic_stats()` to see index details before deleting:

```python
semantic_stats(project_path=".", provider="ollama")
```

## Notes

- Deletion is permanent - no undo
- Indexes can be regenerated with `/str:index`
- Use `delete_all=True` carefully - affects all projects
- Stops any running file watchers automatically
