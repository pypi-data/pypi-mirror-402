{"version":3,"file":"8979.05aa1c6b6267d8ff.js","sources":["webpack://insteon-frontend/./homeassistant-frontend/src/common/language/format_language.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-assist-pipeline-picker.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-help-tooltip.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-list-item.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-ui-action.ts","webpack://insteon-frontend/./homeassistant-frontend/src/data/assist_pipeline.ts","webpack://insteon-frontend/./homeassistant-frontend/src/panels/lovelace/components/hui-action-editor.ts"],"sourcesContent":["import memoizeOne from \"memoize-one\";\nimport type { FrontendLocaleData } from \"../../data/translation\";\n\nexport const formatLanguageCode = (\n  languageCode: string,\n  locale: FrontendLocaleData\n) => {\n  try {\n    return formatLanguageCodeMem(locale)?.of(languageCode) ?? languageCode;\n  } catch {\n    return languageCode;\n  }\n};\n\nconst formatLanguageCodeMem = memoizeOne(\n  (locale: FrontendLocaleData) =>\n    new Intl.DisplayNames(locale.language, {\n      type: \"language\",\n      fallback: \"code\",\n    })\n);\n","import type { PropertyValueMap } from \"lit\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\nimport { formatLanguageCode } from \"../common/language/format_language\";\nimport type { AssistPipeline } from \"../data/assist_pipeline\";\nimport { listAssistPipelines } from \"../data/assist_pipeline\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-list-item\";\nimport \"./ha-select\";\nimport type { HaSelect } from \"./ha-select\";\n\nconst PREFERRED = \"preferred\";\nconst LAST_USED = \"last_used\";\n\n@customElement(\"ha-assist-pipeline-picker\")\nexport class HaAssistPipelinePicker extends LitElement {\n  @property() public value?: string;\n\n  @property() public label?: string;\n\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ attribute: false }) public includeLastUsed = false;\n\n  @state() _pipelines?: AssistPipeline[];\n\n  @state() _preferredPipeline: string | null = null;\n\n  private get _default() {\n    return this.includeLastUsed ? LAST_USED : PREFERRED;\n  }\n\n  protected render() {\n    if (!this._pipelines) {\n      return nothing;\n    }\n    const value = this.value ?? this._default;\n    return html`\n      <ha-select\n        .label=${this.label ||\n        this.hass!.localize(\"ui.components.pipeline-picker.pipeline\")}\n        .value=${value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        @selected=${this._changed}\n        @closed=${stopPropagation}\n        fixedMenuPosition\n        naturalMenuWidth\n      >\n        ${this.includeLastUsed\n          ? html`\n              <ha-list-item .value=${LAST_USED}>\n                ${this.hass!.localize(\n                  \"ui.components.pipeline-picker.last_used\"\n                )}\n              </ha-list-item>\n            `\n          : null}\n        <ha-list-item .value=${PREFERRED}>\n          ${this.hass!.localize(\"ui.components.pipeline-picker.preferred\", {\n            preferred: this._pipelines.find(\n              (pipeline) => pipeline.id === this._preferredPipeline\n            )?.name,\n          })}\n        </ha-list-item>\n        ${this._pipelines.map(\n          (pipeline) =>\n            html`<ha-list-item .value=${pipeline.id}>\n              ${pipeline.name}\n              (${formatLanguageCode(pipeline.language, this.hass.locale)})\n            </ha-list-item>`\n        )}\n      </ha-select>\n    `;\n  }\n\n  protected firstUpdated(\n    changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    super.firstUpdated(changedProperties);\n    listAssistPipelines(this.hass).then((pipelines) => {\n      this._pipelines = pipelines.pipelines;\n      this._preferredPipeline = pipelines.preferred_pipeline;\n    });\n  }\n\n  static styles = css`\n    ha-select {\n      width: 100%;\n    }\n  `;\n\n  private _changed(ev): void {\n    const target = ev.target as HaSelect;\n    if (\n      !this.hass ||\n      target.value === \"\" ||\n      target.value === this.value ||\n      (this.value === undefined && target.value === this._default)\n    ) {\n      return;\n    }\n    this.value = target.value === this._default ? undefined : target.value;\n    fireEvent(this, \"value-changed\", { value: this.value });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-assist-pipeline-picker\": HaAssistPipelinePicker;\n  }\n}\n","import { mdiHelpCircle } from \"@mdi/js\";\nimport type { TemplateResult } from \"lit\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport \"./ha-svg-icon\";\nimport \"./ha-tooltip\";\n\n@customElement(\"ha-help-tooltip\")\nexport class HaHelpTooltip extends LitElement {\n  @property() public label!: string;\n\n  @property() public position:\n    | \"top\"\n    | \"bottom\"\n    | \"left\"\n    | \"right\"\n    | \"top-start\"\n    | \"top-end\"\n    | \"right-start\"\n    | \"right-end\"\n    | \"bottom-start\"\n    | \"bottom-end\"\n    | \"left-start\"\n    | \"left-end\" = \"top\";\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-svg-icon id=\"svg-icon\" .path=${mdiHelpCircle}></ha-svg-icon>\n      <ha-tooltip for=\"svg-icon\" .placement=${this.position}>\n        ${this.label}\n      </ha-tooltip>\n    `;\n  }\n\n  static styles = css`\n    ha-svg-icon {\n      --mdc-icon-size: var(--ha-help-tooltip-size, 14px);\n      color: var(--ha-help-tooltip-color, var(--disabled-text-color));\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-help-tooltip\": HaHelpTooltip;\n  }\n}\n","import { ListItemBase } from \"@material/mwc-list/mwc-list-item-base\";\nimport { styles } from \"@material/mwc-list/mwc-list-item.css\";\nimport type { CSSResultGroup } from \"lit\";\nimport { css } from \"lit\";\nimport { customElement } from \"lit/decorators\";\n\n@customElement(\"ha-list-item\")\nexport class HaListItem extends ListItemBase {\n  protected renderRipple() {\n    if (this.noninteractive) {\n      return \"\";\n    }\n    return super.renderRipple();\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      styles,\n      css`\n        :host {\n          padding-left: var(\n            --mdc-list-side-padding-left,\n            var(--mdc-list-side-padding, 20px)\n          );\n          padding-inline-start: var(\n            --mdc-list-side-padding-left,\n            var(--mdc-list-side-padding, 20px)\n          );\n          padding-right: var(\n            --mdc-list-side-padding-right,\n            var(--mdc-list-side-padding, 20px)\n          );\n          padding-inline-end: var(\n            --mdc-list-side-padding-right,\n            var(--mdc-list-side-padding, 20px)\n          );\n        }\n        :host([graphic=\"avatar\"]:not([twoLine])),\n        :host([graphic=\"icon\"]:not([twoLine])) {\n          height: 48px;\n        }\n        span.material-icons:first-of-type {\n          margin-inline-start: 0px !important;\n          margin-inline-end: var(\n            --mdc-list-item-graphic-margin,\n            16px\n          ) !important;\n          direction: var(--direction) !important;\n        }\n        span.material-icons:last-of-type {\n          margin-inline-start: auto !important;\n          margin-inline-end: 0px !important;\n          direction: var(--direction) !important;\n        }\n        .mdc-deprecated-list-item__meta {\n          display: var(--mdc-list-item-meta-display);\n          align-items: center;\n          flex-shrink: 0;\n        }\n        :host([graphic=\"icon\"]:not([twoline]))\n          .mdc-deprecated-list-item__graphic {\n          margin-inline-end: var(\n            --mdc-list-item-graphic-margin,\n            20px\n          ) !important;\n        }\n        :host([multiline-secondary]) {\n          height: auto;\n        }\n        :host([multiline-secondary]) .mdc-deprecated-list-item__text {\n          padding: 8px 0;\n        }\n        :host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text {\n          text-overflow: initial;\n          white-space: normal;\n          overflow: auto;\n          display: inline-block;\n          margin-top: 10px;\n        }\n        :host([multiline-secondary]) .mdc-deprecated-list-item__primary-text {\n          margin-top: 10px;\n        }\n        :host([multiline-secondary])\n          .mdc-deprecated-list-item__secondary-text::before {\n          display: none;\n        }\n        :host([multiline-secondary])\n          .mdc-deprecated-list-item__primary-text::before {\n          display: none;\n        }\n        :host([disabled]) {\n          color: var(--disabled-text-color);\n        }\n        :host([noninteractive]) {\n          pointer-events: unset;\n        }\n      `,\n      // safari workaround - must be explicit\n      document.dir === \"rtl\"\n        ? css`\n            span.material-icons:first-of-type,\n            span.material-icons:last-of-type {\n              direction: rtl !important;\n              --direction: rtl;\n            }\n          `\n        : css``,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-list-item\": HaListItem;\n  }\n}\n","import { html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { ActionConfig } from \"../../data/lovelace/config/action\";\nimport type { UiActionSelector } from \"../../data/selector\";\nimport \"../../panels/lovelace/components/hui-action-editor\";\nimport type { HomeAssistant } from \"../../types\";\n\n@customElement(\"ha-selector-ui_action\")\nexport class HaSelectorUiAction extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: UiActionSelector;\n\n  @property({ attribute: false }) public value?: ActionConfig;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  protected render() {\n    return html`\n      <hui-action-editor\n        .label=${this.label}\n        .hass=${this.hass}\n        .config=${this.value}\n        .actions=${this.selector.ui_action?.actions}\n        .defaultAction=${this.selector.ui_action?.default_action}\n        .tooltipText=${this.helper}\n        @value-changed=${this._valueChanged}\n      ></hui-action-editor>\n    `;\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    ev.stopPropagation();\n    fireEvent(this, \"value-changed\", { value: ev.detail.value });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-ui_action\": HaSelectorUiAction;\n  }\n}\n","import type { HomeAssistant } from \"../types\";\nimport type { ConversationResult } from \"./conversation\";\nimport type { SpeechMetadata } from \"./stt\";\n\nexport interface AssistPipeline {\n  id: string;\n  name: string;\n  language: string;\n  conversation_engine: string;\n  conversation_language: string | null;\n  prefer_local_intents?: boolean;\n  stt_engine: string | null;\n  stt_language: string | null;\n  tts_engine: string | null;\n  tts_language: string | null;\n  tts_voice: string | null;\n  wake_word_entity: string | null;\n  wake_word_id: string | null;\n}\n\nexport interface AssistDevice {\n  device_id: string;\n  pipeline_entity: string;\n}\n\nexport interface AssistPipelineMutableParams {\n  name: string;\n  language: string;\n  conversation_engine: string;\n  conversation_language: string | null;\n  prefer_local_intents?: boolean;\n  stt_engine: string | null;\n  stt_language: string | null;\n  tts_engine: string | null;\n  tts_language: string | null;\n  tts_voice: string | null;\n  wake_word_entity: string | null;\n  wake_word_id: string | null;\n}\n\nexport interface AssistRunListing {\n  pipeline_run_id: string;\n  timestamp: string;\n}\n\ninterface PipelineEventBase {\n  timestamp: string;\n}\n\ninterface PipelineRunStartEvent extends PipelineEventBase {\n  type: \"run-start\";\n  data: {\n    pipeline: string;\n    language: string;\n    conversation_id: string;\n    runner_data: {\n      stt_binary_handler_id: number | null;\n      timeout: number;\n    };\n    tts_output?: {\n      token: string;\n      url: string;\n      mime_type: string;\n    };\n  };\n}\ninterface PipelineRunEndEvent extends PipelineEventBase {\n  type: \"run-end\";\n  data: Record<string, never>;\n}\n\ninterface PipelineErrorEvent extends PipelineEventBase {\n  type: \"error\";\n  data: {\n    code: string;\n    message: string;\n  };\n}\n\ninterface PipelineWakeWordStartEvent extends PipelineEventBase {\n  type: \"wake_word-start\";\n  data: {\n    engine: string;\n    metadata: SpeechMetadata;\n  };\n}\n\ninterface PipelineWakeWordEndEvent extends PipelineEventBase {\n  type: \"wake_word-end\";\n  data: { wake_word_output: { ww_id: string; timestamp: number } };\n}\n\ninterface PipelineSTTStartEvent extends PipelineEventBase {\n  type: \"stt-start\";\n  data: {\n    engine: string;\n    metadata: SpeechMetadata;\n  };\n}\ninterface PipelineSTTEndEvent extends PipelineEventBase {\n  type: \"stt-end\";\n  data: {\n    stt_output: { text: string };\n  };\n}\n\ninterface PipelineIntentStartEvent extends PipelineEventBase {\n  type: \"intent-start\";\n  data: {\n    engine: string;\n    language: string;\n    prefer_local_intents: boolean;\n    intent_input: string;\n  };\n}\n\nexport interface ConversationChatLogAssistantDelta {\n  role: \"assistant\";\n  content: string;\n  tool_calls: {\n    id: string;\n    tool_name: string;\n    tool_args: Record<string, unknown>;\n  }[];\n}\n\nexport interface ConversationChatLogToolResultDelta {\n  role: \"tool_result\";\n  agent_id: string;\n  tool_call_id: string;\n  tool_name: string;\n  tool_result: unknown;\n}\ninterface PipelineIntentProgressEvent extends PipelineEventBase {\n  type: \"intent-progress\";\n  data: {\n    tts_start_streaming?: boolean;\n    chat_log_delta?:\n      | Partial<ConversationChatLogAssistantDelta>\n      // These always come in 1 chunk\n      | ConversationChatLogToolResultDelta;\n  };\n}\n\ninterface PipelineIntentEndEvent extends PipelineEventBase {\n  type: \"intent-end\";\n  data: {\n    processed_locally: boolean;\n    intent_output: ConversationResult;\n  };\n}\n\ninterface PipelineTTSStartEvent extends PipelineEventBase {\n  type: \"tts-start\";\n  data: {\n    engine: string;\n    language: string;\n    voice: string;\n    tts_input: string;\n  };\n}\ninterface PipelineTTSEndEvent extends PipelineEventBase {\n  type: \"tts-end\";\n  data: {\n    tts_output: {\n      media_id: string;\n      token: string;\n      url: string;\n      mime_type: string;\n    };\n  };\n}\n\nexport type PipelineRunEvent =\n  | PipelineRunStartEvent\n  | PipelineRunEndEvent\n  | PipelineErrorEvent\n  | PipelineWakeWordStartEvent\n  | PipelineWakeWordEndEvent\n  | PipelineSTTStartEvent\n  | PipelineSTTEndEvent\n  | PipelineIntentStartEvent\n  | PipelineIntentProgressEvent\n  | PipelineIntentEndEvent\n  | PipelineTTSStartEvent\n  | PipelineTTSEndEvent;\n\nexport type PipelineRunOptions = (\n  | {\n      start_stage: \"intent\" | \"tts\";\n      input: { text: string };\n    }\n  | {\n      start_stage: \"stt\";\n      input: { sample_rate: number };\n    }\n  | {\n      start_stage: \"wake_word\";\n      input: {\n        sample_rate: number;\n        timeout?: number;\n        audio_seconds_to_buffer?: number;\n      };\n    }\n) & {\n  end_stage: \"stt\" | \"intent\" | \"tts\";\n  pipeline?: string;\n  conversation_id?: string | null;\n};\n\nexport interface PipelineRun {\n  init_options?: PipelineRunOptions;\n  events: PipelineRunEvent[];\n  stage: \"ready\" | \"wake_word\" | \"stt\" | \"intent\" | \"tts\" | \"done\" | \"error\";\n  run: PipelineRunStartEvent[\"data\"];\n  error?: PipelineErrorEvent[\"data\"];\n  started: Date;\n  finished?: Date;\n  wake_word?: PipelineWakeWordStartEvent[\"data\"] &\n    Partial<PipelineWakeWordEndEvent[\"data\"]> & { done: boolean };\n  stt?: PipelineSTTStartEvent[\"data\"] &\n    Partial<PipelineSTTEndEvent[\"data\"]> & { done: boolean };\n  intent?: PipelineIntentStartEvent[\"data\"] &\n    Partial<PipelineIntentEndEvent[\"data\"]> & { done: boolean };\n  tts?: PipelineTTSStartEvent[\"data\"] &\n    Partial<PipelineTTSEndEvent[\"data\"]> & { done: boolean };\n}\n\nexport const processEvent = (\n  run: PipelineRun | undefined,\n  event: PipelineRunEvent,\n  options?: PipelineRunOptions\n): PipelineRun | undefined => {\n  if (event.type === \"run-start\") {\n    run = {\n      init_options: options,\n      stage: \"ready\",\n      run: event.data,\n      events: [event],\n      started: new Date(event.timestamp),\n    };\n    return run;\n  }\n\n  if (!run) {\n    // eslint-disable-next-line no-console\n    console.warn(\"Received unexpected event before receiving session\", event);\n    return undefined;\n  }\n\n  if (event.type === \"wake_word-start\") {\n    run = {\n      ...run,\n      stage: \"wake_word\",\n      wake_word: { ...event.data, done: false },\n    };\n  } else if (event.type === \"wake_word-end\") {\n    run = {\n      ...run,\n      wake_word: { ...run.wake_word!, ...event.data, done: true },\n    };\n  } else if (event.type === \"stt-start\") {\n    run = {\n      ...run,\n      stage: \"stt\",\n      stt: { ...event.data, done: false },\n    };\n  } else if (event.type === \"stt-end\") {\n    run = {\n      ...run,\n      stt: { ...run.stt!, ...event.data, done: true },\n    };\n  } else if (event.type === \"intent-start\") {\n    run = {\n      ...run,\n      stage: \"intent\",\n      intent: { ...event.data, done: false },\n    };\n  } else if (event.type === \"intent-end\") {\n    run = {\n      ...run,\n      intent: { ...run.intent!, ...event.data, done: true },\n    };\n  } else if (event.type === \"tts-start\") {\n    run = {\n      ...run,\n      stage: \"tts\",\n      tts: { ...event.data, done: false },\n    };\n  } else if (event.type === \"tts-end\") {\n    run = {\n      ...run,\n      tts: { ...run.tts!, ...event.data, done: true },\n    };\n  } else if (event.type === \"run-end\") {\n    run = { ...run, finished: new Date(event.timestamp), stage: \"done\" };\n  } else if (event.type === \"error\") {\n    run = {\n      ...run,\n      finished: new Date(event.timestamp),\n      stage: \"error\",\n      error: event.data,\n    };\n  } else {\n    run = { ...run };\n  }\n\n  run.events = [...run.events, event];\n\n  return run;\n};\n\nexport const runDebugAssistPipeline = (\n  hass: HomeAssistant,\n  callback: (run: PipelineRun) => void,\n  options: PipelineRunOptions\n) => {\n  let run: PipelineRun | undefined;\n\n  const unsubProm = runAssistPipeline(\n    hass,\n    (updateEvent) => {\n      run = processEvent(run, updateEvent, options);\n\n      if (updateEvent.type === \"run-end\" || updateEvent.type === \"error\") {\n        unsubProm.then((unsub) => unsub());\n      }\n\n      if (run) {\n        callback(run);\n      }\n    },\n    options\n  );\n\n  return unsubProm;\n};\n\nexport const runAssistPipeline = (\n  hass: HomeAssistant,\n  callback: (event: PipelineRunEvent) => void,\n  options: PipelineRunOptions\n) =>\n  hass.connection.subscribeMessage<PipelineRunEvent>(callback, {\n    ...options,\n    type: \"assist_pipeline/run\",\n  });\n\nexport const listAssistPipelineRuns = (\n  hass: HomeAssistant,\n  pipeline_id: string\n) =>\n  hass.callWS<{\n    pipeline_runs: AssistRunListing[];\n  }>({\n    type: \"assist_pipeline/pipeline_debug/list\",\n    pipeline_id,\n  });\n\nexport const getAssistPipelineRun = (\n  hass: HomeAssistant,\n  pipeline_id: string,\n  pipeline_run_id: string\n) =>\n  hass.callWS<{\n    events: PipelineRunEvent[];\n  }>({\n    type: \"assist_pipeline/pipeline_debug/get\",\n    pipeline_id,\n    pipeline_run_id,\n  });\n\nexport const listAssistPipelines = (hass: HomeAssistant) =>\n  hass.callWS<{\n    pipelines: AssistPipeline[];\n    preferred_pipeline: string | null;\n  }>({\n    type: \"assist_pipeline/pipeline/list\",\n  });\n\nexport const getAssistPipeline = (hass: HomeAssistant, pipeline_id?: string) =>\n  hass.callWS<AssistPipeline>({\n    type: \"assist_pipeline/pipeline/get\",\n    pipeline_id,\n  });\n\nexport const createAssistPipeline = (\n  hass: HomeAssistant,\n  pipeline: AssistPipelineMutableParams\n) =>\n  hass.callWS<AssistPipeline>({\n    type: \"assist_pipeline/pipeline/create\",\n    ...pipeline,\n  });\n\nexport const updateAssistPipeline = (\n  hass: HomeAssistant,\n  pipeline_id: string,\n  pipeline: AssistPipelineMutableParams\n) =>\n  hass.callWS<AssistPipeline>({\n    type: \"assist_pipeline/pipeline/update\",\n    pipeline_id,\n    ...pipeline,\n  });\n\nexport const setAssistPipelinePreferred = (\n  hass: HomeAssistant,\n  pipeline_id: string\n) =>\n  hass.callWS({\n    type: \"assist_pipeline/pipeline/set_preferred\",\n    pipeline_id,\n  });\n\nexport const deleteAssistPipeline = (hass: HomeAssistant, pipelineId: string) =>\n  hass.callWS<undefined>({\n    type: \"assist_pipeline/pipeline/delete\",\n    pipeline_id: pipelineId,\n  });\n\nexport const fetchAssistPipelineLanguages = (hass: HomeAssistant) =>\n  hass.callWS<{ languages: string[] }>({\n    type: \"assist_pipeline/language/list\",\n  });\n\nexport const listAssistDevices = (hass: HomeAssistant) =>\n  hass.callWS<AssistDevice[]>({\n    type: \"assist_pipeline/device/list\",\n  });\n","import type { PropertyValues } from \"lit\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { stopPropagation } from \"../../../common/dom/stop_propagation\";\nimport \"../../../components/ha-assist-pipeline-picker\";\nimport type {\n  HaFormSchema,\n  SchemaUnion,\n} from \"../../../components/ha-form/types\";\nimport \"../../../components/ha-help-tooltip\";\nimport \"../../../components/ha-list-item\";\nimport \"../../../components/ha-navigation-picker\";\nimport type { HaSelect } from \"../../../components/ha-select\";\nimport \"../../../components/ha-service-control\";\nimport type {\n  ActionConfig,\n  CallServiceActionConfig,\n  NavigateActionConfig,\n  UrlActionConfig,\n} from \"../../../data/lovelace/config/action\";\nimport type { ServiceAction } from \"../../../data/script\";\nimport type { HomeAssistant } from \"../../../types\";\nimport type { EditorTarget } from \"../editor/types\";\n\nexport type UiAction = Exclude<ActionConfig[\"action\"], \"fire-dom-event\">;\n\nconst DEFAULT_ACTIONS: UiAction[] = [\n  \"more-info\",\n  \"toggle\",\n  \"navigate\",\n  \"url\",\n  \"perform-action\",\n  \"assist\",\n  \"none\",\n];\n\nconst NAVIGATE_SCHEMA = [\n  {\n    name: \"navigation_path\",\n    selector: {\n      navigation: {},\n    },\n  },\n] as const satisfies readonly HaFormSchema[];\n\nconst ASSIST_SCHEMA = [\n  {\n    type: \"grid\",\n    name: \"\",\n    schema: [\n      {\n        name: \"pipeline_id\",\n        selector: {\n          assist_pipeline: {\n            include_last_used: true,\n          },\n        },\n      },\n      {\n        name: \"start_listening\",\n        selector: {\n          boolean: {},\n        },\n      },\n    ],\n  },\n] as const satisfies readonly HaFormSchema[];\n\n@customElement(\"hui-action-editor\")\nexport class HuiActionEditor extends LitElement {\n  @property({ attribute: false }) public config?: ActionConfig;\n\n  @property({ attribute: false }) public label?: string;\n\n  @property({ attribute: false }) public actions?: UiAction[];\n\n  @property({ attribute: false }) public defaultAction?: UiAction;\n\n  @property({ attribute: false }) public tooltipText?: string;\n\n  @property({ attribute: false }) public hass?: HomeAssistant;\n\n  @query(\"ha-select\") private _select!: HaSelect;\n\n  get _navigation_path(): string {\n    const config = this.config as NavigateActionConfig | undefined;\n    return config?.navigation_path || \"\";\n  }\n\n  get _url_path(): string {\n    const config = this.config as UrlActionConfig | undefined;\n    return config?.url_path || \"\";\n  }\n\n  get _service(): string {\n    const config = this.config as CallServiceActionConfig;\n    return config?.perform_action || config?.service || \"\";\n  }\n\n  private _serviceAction = memoizeOne(\n    (config: CallServiceActionConfig): ServiceAction => ({\n      action: this._service,\n      ...(config.data || config.service_data\n        ? { data: config.data ?? config.service_data }\n        : null),\n      target: config.target,\n    })\n  );\n\n  protected updated(changedProperties: PropertyValues<typeof this>) {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"defaultAction\")) {\n      if (changedProperties.get(\"defaultAction\") !== this.defaultAction) {\n        this._select.layoutOptions();\n      }\n    }\n  }\n\n  protected render() {\n    if (!this.hass) {\n      return nothing;\n    }\n\n    const actions = this.actions ?? DEFAULT_ACTIONS;\n\n    let action = this.config?.action || \"default\";\n\n    if (action === \"call-service\") {\n      action = \"perform-action\";\n    }\n\n    return html`\n      <div class=\"dropdown\">\n        <ha-select\n          .label=${this.label}\n          .configValue=${\"action\"}\n          @selected=${this._actionPicked}\n          .value=${action}\n          @closed=${stopPropagation}\n          fixedMenuPosition\n          naturalMenuWidth\n        >\n          <ha-list-item value=\"default\">\n            ${this.hass!.localize(\n              \"ui.panel.lovelace.editor.action-editor.actions.default_action\"\n            )}\n            ${this.defaultAction\n              ? ` (${this.hass!.localize(\n                  `ui.panel.lovelace.editor.action-editor.actions.${this.defaultAction}`\n                ).toLowerCase()})`\n              : nothing}\n          </ha-list-item>\n          ${actions.map(\n            (actn) => html`\n              <ha-list-item .value=${actn}>\n                ${this.hass!.localize(\n                  `ui.panel.lovelace.editor.action-editor.actions.${actn}`\n                )}\n              </ha-list-item>\n            `\n          )}\n        </ha-select>\n        ${this.tooltipText\n          ? html`\n              <ha-help-tooltip .label=${this.tooltipText}></ha-help-tooltip>\n            `\n          : nothing}\n      </div>\n      ${this.config?.action === \"navigate\"\n        ? html`\n            <ha-form\n              .hass=${this.hass}\n              .schema=${NAVIGATE_SCHEMA}\n              .data=${this.config}\n              .computeLabel=${this._computeFormLabel}\n              @value-changed=${this._formValueChanged}\n            >\n            </ha-form>\n          `\n        : nothing}\n      ${this.config?.action === \"url\"\n        ? html`\n            <ha-textfield\n              .label=${this.hass!.localize(\n                \"ui.panel.lovelace.editor.action-editor.url_path\"\n              )}\n              .value=${this._url_path}\n              .configValue=${\"url_path\"}\n              @input=${this._valueChanged}\n            ></ha-textfield>\n          `\n        : nothing}\n      ${this.config?.action === \"call-service\" ||\n      this.config?.action === \"perform-action\"\n        ? html`\n            <ha-service-control\n              .hass=${this.hass}\n              .value=${this._serviceAction(this.config)}\n              .showAdvanced=${this.hass.userData?.showAdvanced}\n              narrow\n              @value-changed=${this._serviceValueChanged}\n            ></ha-service-control>\n          `\n        : nothing}\n      ${this.config?.action === \"assist\"\n        ? html`\n            <ha-form\n              .hass=${this.hass}\n              .schema=${ASSIST_SCHEMA}\n              .data=${this.config}\n              .computeLabel=${this._computeFormLabel}\n              @value-changed=${this._formValueChanged}\n            >\n            </ha-form>\n          `\n        : nothing}\n    `;\n  }\n\n  private _actionPicked(ev): void {\n    ev.stopPropagation();\n    if (!this.hass) {\n      return;\n    }\n    let action = this.config?.action;\n\n    if (action === \"call-service\") {\n      action = \"perform-action\";\n    }\n\n    const value = ev.target.value;\n\n    if (action === value) {\n      return;\n    }\n    if (value === \"default\") {\n      fireEvent(this, \"value-changed\", { value: undefined });\n      return;\n    }\n\n    let data;\n    switch (value) {\n      case \"url\": {\n        data = { url_path: this._url_path };\n        break;\n      }\n      case \"perform-action\": {\n        data = { perform_action: this._service };\n        break;\n      }\n      case \"navigate\": {\n        data = { navigation_path: this._navigation_path };\n        break;\n      }\n    }\n\n    fireEvent(this, \"value-changed\", {\n      value: { action: value, ...data },\n    });\n  }\n\n  private _valueChanged(ev): void {\n    ev.stopPropagation();\n    if (!this.hass) {\n      return;\n    }\n    const target = ev.target! as EditorTarget;\n    const value = ev.target.value ?? ev.target.checked;\n    if (this[`_${target.configValue}`] === value) {\n      return;\n    }\n    if (target.configValue) {\n      fireEvent(this, \"value-changed\", {\n        value: { ...this.config!, [target.configValue!]: value },\n      });\n    }\n  }\n\n  private _formValueChanged(ev): void {\n    ev.stopPropagation();\n    const value = ev.detail.value;\n\n    fireEvent(this, \"value-changed\", {\n      value: value,\n    });\n  }\n\n  private _computeFormLabel(schema: SchemaUnion<typeof ASSIST_SCHEMA>) {\n    return this.hass?.localize(\n      `ui.panel.lovelace.editor.action-editor.${schema.name}`\n    );\n  }\n\n  private _serviceValueChanged(ev: CustomEvent) {\n    ev.stopPropagation();\n    const value = {\n      ...this.config!,\n      action: \"perform-action\",\n      perform_action: ev.detail.value.action || \"\",\n      data: ev.detail.value.data,\n      target: ev.detail.value.target || {},\n    };\n    if (!ev.detail.value.data) {\n      delete value.data;\n    }\n    // \"service_data\" is allowed for backwards compatibility but replaced with \"data\" on write\n    if (\"service_data\" in value) {\n      delete value.service_data;\n    }\n    if (\"service\" in value) {\n      delete value.service;\n    }\n\n    fireEvent(this, \"value-changed\", { value });\n  }\n\n  static styles = css`\n    .dropdown {\n      position: relative;\n    }\n    ha-help-tooltip {\n      position: absolute;\n      right: 40px;\n      top: 16px;\n      inset-inline-start: initial;\n      inset-inline-end: 40px;\n      direction: var(--direction);\n    }\n    ha-select,\n    ha-textfield {\n      width: 100%;\n    }\n    ha-service-control,\n    ha-navigation-picker,\n    ha-form {\n      display: block;\n    }\n    ha-textfield,\n    ha-service-control,\n    ha-navigation-picker,\n    ha-form {\n      margin-top: 8px;\n    }\n    ha-service-control {\n      --service-control-padding: 0;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-action-editor\": HuiActionEditor;\n  }\n}\n"],"names":["formatLanguageCode","languageCode","locale","formatLanguageCodeMem","of","memoizeOne","Intl","DisplayNames","language","type","fallback","PREFERRED","LAST_USED","HaAssistPipelinePicker","LitElement","_default","this","includeLastUsed","render","_pipelines","nothing","value","html","label","hass","localize","required","disabled","_changed","stopPropagation","preferred","find","pipeline","id","_preferredPipeline","name","map","firstUpdated","changedProperties","super","listAssistPipelines","then","pipelines","preferred_pipeline","ev","target","undefined","fireEvent","args","styles","css","attribute","Boolean","reflect","HaHelpTooltip","mdiHelpCircle","position","HaListItem","ListItemBase","renderRipple","noninteractive","document","dir","HaSelectorUiAction","selector","ui_action","actions","default_action","helper","_valueChanged","detail","processEvent","run","event","options","init_options","stage","data","events","started","Date","timestamp","wake_word","done","stt","intent","tts","finished","error","console","warn","runAssistPipeline","callback","connection","subscribeMessage","callWS","getAssistPipeline","pipeline_id","createAssistPipeline","updateAssistPipeline","fetchAssistPipelineLanguages","DEFAULT_ACTIONS","NAVIGATE_SCHEMA","navigation","ASSIST_SCHEMA","schema","assist_pipeline","include_last_used","boolean","HuiActionEditor","_navigation_path","config","navigation_path","_url_path","url_path","_service","perform_action","service","updated","has","get","defaultAction","_select","layoutOptions","action","_actionPicked","toLowerCase","actn","tooltipText","_computeFormLabel","_formValueChanged","_serviceAction","userData","showAdvanced","_serviceValueChanged","checked","configValue","service_data"],"mappings":"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"}