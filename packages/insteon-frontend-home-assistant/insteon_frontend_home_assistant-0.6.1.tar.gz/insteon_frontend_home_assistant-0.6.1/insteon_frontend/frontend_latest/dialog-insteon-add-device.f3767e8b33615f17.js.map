{"version":3,"file":"dialog-insteon-add-device.f3767e8b33615f17.js","sources":["webpack://insteon-frontend/./homeassistant-frontend/src/common/dom/stop_propagation.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-button.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-tooltip.ts","webpack://insteon-frontend/./homeassistant-frontend/src/util/toast.ts","webpack://insteon-frontend/./src/data/device.ts","webpack://insteon-frontend/./src/device/dialog-insteon-add-device.ts","webpack://insteon-frontend/./src/tools/address-utils.ts"],"sourcesContent":["export const stopPropagation = (ev) => ev.stopPropagation();\n","import Button from \"@home-assistant/webawesome/dist/components/button/button\";\nimport { css, type CSSResultGroup } from \"lit\";\nimport { customElement } from \"lit/decorators\";\n\nexport type Appearance = \"accent\" | \"filled\" | \"outlined\" | \"plain\";\n\n/**\n * Home Assistant button component\n *\n * @element ha-button\n * @extends {Button}\n *\n * @summary\n * A stylable button component supporting Home Assistant theming, variants, and appearances based on webawesome button.\n *\n * @slot - Label of the button\n * @slot start - The prefix container (usually for icons).\n * @slot end - The suffix container (usually for icons).\n *\n * @csspart base - The component's base wrapper.\n * @csspart start - The container that wraps the prefix.\n * @csspart label - The button's label.\n * @csspart end - The container that wraps the suffix.\n * @csspart caret - The button's caret icon, an `<sl-icon>` element.\n * @csspart spinner - The spinner that shows when the button is in the loading state.\n *\n * @cssprop --ha-button-height - The height of the button.\n * @cssprop --ha-button-border-radius - The border radius of the button. defaults to `var(--ha-border-radius-pill)`.\n *\n * @attr {(\"small\"|\"medium\")} size - Sets the button size.\n * @attr {(\"brand\"|\"neutral\"|\"danger\"|\"warning\"|\"success\")} variant - Sets the button color variant. \"primary\" is default.\n * @attr {(\"accent\"|\"filled\"|\"plain\")} appearance - Sets the button appearance.\n * @attr {boolean} loading - shows a loading indicator instead of the buttons label and disable buttons click.\n * @attr {boolean} disabled - Disables the button and prevents user interaction.\n */\n@customElement(\"ha-button\")\nexport class HaButton extends Button {\n  variant: \"brand\" | \"neutral\" | \"success\" | \"warning\" | \"danger\" = \"brand\";\n\n  static get styles(): CSSResultGroup {\n    return [\n      Button.styles,\n      css`\n        :host {\n          --wa-form-control-padding-inline: 16px;\n          --wa-font-weight-action: var(--ha-font-weight-medium);\n          --wa-form-control-border-radius: var(\n            --ha-button-border-radius,\n            var(--ha-border-radius-pill)\n          );\n\n          --wa-form-control-height: var(\n            --ha-button-height,\n            var(--button-height, 40px)\n          );\n        }\n        .button {\n          font-size: var(--ha-font-size-m);\n          line-height: 1;\n\n          transition: background-color 0.15s ease-in-out;\n          text-wrap: wrap;\n        }\n\n        :host([size=\"small\"]) .button {\n          --wa-form-control-height: var(\n            --ha-button-height,\n            var(--button-height, 32px)\n          );\n          font-size: var(--wa-font-size-s, var(--ha-font-size-m));\n          --wa-form-control-padding-inline: 12px;\n        }\n\n        :host([variant=\"brand\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-primary-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-primary-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-primary-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-primary-loud-hover\n          );\n        }\n\n        :host([variant=\"neutral\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-neutral-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-neutral-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-neutral-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-neutral-loud-hover\n          );\n        }\n\n        :host([variant=\"success\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-success-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-success-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-success-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-success-loud-hover\n          );\n        }\n\n        :host([variant=\"warning\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-warning-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-warning-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-warning-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-warning-loud-hover\n          );\n        }\n\n        :host([variant=\"danger\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-danger-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-danger-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-danger-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-danger-loud-hover\n          );\n        }\n\n        :host([appearance~=\"plain\"]) .button {\n          color: var(--wa-color-on-normal);\n          background-color: transparent;\n        }\n        :host([appearance~=\"plain\"]) .button.disabled {\n          background-color: transparent;\n          color: var(--ha-color-on-disabled-quiet);\n        }\n\n        :host([appearance~=\"outlined\"]) .button.disabled {\n          background-color: transparent;\n          color: var(--ha-color-on-disabled-quiet);\n        }\n\n        @media (hover: hover) {\n          :host([appearance~=\"filled\"])\n            .button:not(.disabled):not(.loading):hover {\n            background-color: var(--button-color-fill-normal-hover);\n          }\n          :host([appearance~=\"accent\"])\n            .button:not(.disabled):not(.loading):hover {\n            background-color: var(--button-color-fill-loud-hover);\n          }\n          :host([appearance~=\"plain\"])\n            .button:not(.disabled):not(.loading):hover {\n            color: var(--wa-color-on-normal);\n          }\n        }\n        :host([appearance~=\"filled\"]) .button {\n          color: var(--wa-color-on-normal);\n          background-color: var(--wa-color-fill-normal);\n          border-color: transparent;\n        }\n        :host([appearance~=\"filled\"])\n          .button:not(.disabled):not(.loading):active {\n          background-color: var(--button-color-fill-normal-active);\n        }\n        :host([appearance~=\"filled\"]) .button.disabled {\n          background-color: var(--ha-color-fill-disabled-normal-resting);\n          color: var(--ha-color-on-disabled-normal);\n        }\n\n        :host([appearance~=\"accent\"]) .button {\n          background-color: var(\n            --wa-color-fill-loud,\n            var(--wa-color-neutral-fill-loud)\n          );\n        }\n        :host([appearance~=\"accent\"])\n          .button:not(.disabled):not(.loading):active {\n          background-color: var(--button-color-fill-loud-active);\n        }\n        :host([appearance~=\"accent\"]) .button.disabled {\n          background-color: var(--ha-color-fill-disabled-loud-resting);\n          color: var(--ha-color-on-disabled-loud);\n        }\n\n        :host([loading]) {\n          pointer-events: none;\n        }\n\n        .button.disabled {\n          opacity: 1;\n        }\n\n        slot[name=\"start\"]::slotted(*) {\n          margin-inline-end: 4px;\n        }\n        slot[name=\"end\"]::slotted(*) {\n          margin-inline-start: 4px;\n        }\n\n        .button.has-start {\n          padding-inline-start: 8px;\n        }\n        .button.has-end {\n          padding-inline-end: 8px;\n        }\n\n        .label {\n          overflow: hidden;\n          text-overflow: ellipsis;\n          padding: var(--ha-space-1) 0;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-button\": HaButton;\n  }\n}\n","import Tooltip from \"@home-assistant/webawesome/dist/components/tooltip/tooltip\";\nimport { css } from \"lit\";\nimport type { CSSResultGroup } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-tooltip\")\nexport class HaTooltip extends Tooltip {\n  /** The amount of time to wait before showing the tooltip when the user mouses in. */\n  @property({ attribute: \"show-delay\", type: Number }) showDelay = 150;\n\n  /** The amount of time to wait before hiding the tooltip when the user mouses out.. */\n  @property({ attribute: \"hide-delay\", type: Number }) hideDelay = 150;\n\n  static get styles(): CSSResultGroup {\n    return [\n      Tooltip.styles,\n      css`\n        :host {\n          --wa-tooltip-background-color: var(--secondary-background-color);\n          --wa-tooltip-content-color: var(--primary-text-color);\n          --wa-tooltip-font-family: var(\n            --ha-tooltip-font-family,\n            var(--ha-font-family-body)\n          );\n          --wa-tooltip-font-size: var(\n            --ha-tooltip-font-size,\n            var(--ha-font-size-s)\n          );\n          --wa-tooltip-font-weight: var(\n            --ha-tooltip-font-weight,\n            var(--ha-font-weight-normal)\n          );\n          --wa-tooltip-line-height: var(\n            --ha-tooltip-line-height,\n            var(--ha-line-height-condensed)\n          );\n          --wa-tooltip-padding: 8px;\n          --wa-tooltip-border-radius: var(\n            --ha-tooltip-border-radius,\n            var(--ha-border-radius-sm)\n          );\n          --wa-tooltip-arrow-size: var(--ha-tooltip-arrow-size, 8px);\n          --wa-z-index-tooltip: var(--ha-tooltip-z-index, 1000);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-tooltip\": HaTooltip;\n  }\n}\n","import { fireEvent } from \"../common/dom/fire_event\";\nimport type { ShowToastParams } from \"../managers/notification-manager\";\n\nexport const showToast = (el: HTMLElement, params: ShowToastParams) =>\n  fireEvent(el, \"hass-notification\", params);\n","import type { HomeAssistant } from \"@ha/types\";\nimport type { HaFormSchema } from \"@ha/components/ha-form/types\";\nimport type { Insteon, InsteonDevice, InsteonX10Device } from \"./insteon\";\nimport type { ConfigUpdateStatus } from \"./config\";\n\nexport type InsteonProperty =\n  | PropertyNumber\n  | PropertyBoolean\n  | PropertySelect\n  | PropertyMultiSelect\n  | PropertyRadioButtons;\n\nexport interface PropertyBase {\n  name: string;\n  modified: boolean;\n}\n\nexport interface PropertyNumber extends PropertyBase {\n  value: number;\n}\n\nexport interface PropertyBoolean extends PropertyBase {\n  value: boolean;\n}\n\nexport interface PropertySelect extends PropertyBase {\n  value: [string] | [number];\n}\n\nexport interface PropertyMultiSelect extends PropertyBase {\n  value: [string] | [number];\n}\n\nexport interface PropertyRadioButtons extends PropertyBase {\n  name: \"radio_button_groups\";\n  value: [[number]] | [];\n}\n\nexport interface PropertiesInfo {\n  properties: InsteonProperty[];\n  schema: { [key: string]: HaFormSchema }; // HaFormSchema };\n}\n\nexport interface ALDBRecord {\n  mem_addr: number;\n  in_use: boolean;\n  is_controller: boolean;\n  highwater: boolean;\n  group: number;\n  target: string;\n  target_name: string;\n  data1: number;\n  data2: number;\n  data3: number;\n  dirty: boolean;\n}\n\nexport const fetchInsteonDevice = (hass: HomeAssistant, id: string): Promise<InsteonDevice> =>\n  hass.callWS({\n    type: \"insteon/device/get\",\n    device_id: id,\n  });\n\nexport const fetchInsteonALDB = (hass: HomeAssistant, id: string): Promise<ALDBRecord[]> =>\n  hass.callWS({\n    type: \"insteon/aldb/get\",\n    device_address: id,\n  });\n\nexport const fetchInsteonProperties = (\n  hass: HomeAssistant,\n  id: string,\n  showAdvanced: boolean,\n): Promise<PropertiesInfo> =>\n  hass.callWS({\n    type: \"insteon/properties/get\",\n    device_address: id,\n    show_advanced: showAdvanced,\n  });\n\nexport const changeALDBRecord = (\n  hass: HomeAssistant,\n  id: string,\n  record: ALDBRecord,\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/change\",\n    device_address: id,\n    record: record,\n  });\n\nexport const changeProperty = (\n  hass: HomeAssistant,\n  id: string,\n  name: string,\n  value: any,\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/properties/change\",\n    device_address: id,\n    name: name,\n    value: value,\n  });\n\nexport const createALDBRecord = (\n  hass: HomeAssistant,\n  id: string,\n  record: ALDBRecord,\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/create\",\n    device_address: id,\n    record: record,\n  });\n\nexport const loadALDB = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/load\",\n    device_address: id,\n  });\n\nexport const loadProperties = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/properties/load\",\n    device_address: id,\n  });\n\nexport const writeALDB = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/write\",\n    device_address: id,\n  });\n\nexport const writeProperties = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/properties/write\",\n    device_address: id,\n  });\n\nexport const resetALDB = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/reset\",\n    device_address: id,\n  });\n\nexport const resetProperties = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/properties/reset\",\n    device_address: id,\n  });\n\nexport const addDefaultLinks = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/add_default_links\",\n    device_address: id,\n  });\n\nexport const aldbRecordLoaded = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/record_loaded\",\n    device_address: id,\n  });\n\nexport const aldbNewRecordSchema = (insteon: Insteon): HaFormSchema[] => [\n  {\n    name: \"mode\",\n    options: [\n      [\"c\", insteon.localize(\"aldb.mode.controller\")],\n      [\"r\", insteon.localize(\"aldb.mode.responder\")],\n    ],\n    required: true,\n    type: \"select\",\n  },\n  {\n    name: \"group\",\n    required: true,\n    type: \"integer\",\n    valueMin: -1,\n    valueMax: 255,\n  },\n  {\n    name: \"target\",\n    required: true,\n    type: \"string\",\n  },\n  {\n    name: \"data1\",\n    required: true,\n    type: \"integer\",\n    valueMin: -1,\n    valueMax: 255,\n  },\n  {\n    name: \"data2\",\n    required: true,\n    type: \"integer\",\n    valueMin: -1,\n    valueMax: 255,\n  },\n  {\n    name: \"data3\",\n    required: true,\n    type: \"integer\",\n    valueMin: -1,\n    valueMax: 255,\n  },\n];\n\nexport const aldbChangeRecordSchema = (insteon: Insteon): HaFormSchema[] => [\n  {\n    name: \"in_use\",\n    required: true,\n    type: \"boolean\",\n  },\n  ...aldbNewRecordSchema(insteon),\n];\n\nexport const addDeviceSchema = (multiple: boolean, add_x10: boolean): HaFormSchema[] => [\n  {\n    name: \"multiple\",\n    required: false,\n    type: add_x10 ? \"constant\" : \"boolean\",\n  },\n  {\n    name: \"add_x10\",\n    required: false,\n    type: multiple ? \"constant\" : \"boolean\",\n  },\n  {\n    name: \"device_address\",\n    required: false,\n    type: multiple || add_x10 ? \"constant\" : \"string\",\n  },\n];\n\nexport const cancelAddInsteonDevice = (hass: HomeAssistant): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/device/add/cancel\",\n  });\n\nexport const removeInsteonDevice = (\n  hass: HomeAssistant,\n  address: string,\n  remove_all_refs: boolean,\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/device/remove\",\n    device_address: address,\n    remove_all_refs: remove_all_refs,\n  });\n\nexport const addX10Device = (\n  hass: HomeAssistant,\n  x10_device: InsteonX10Device,\n): Promise<ConfigUpdateStatus> =>\n  hass.callWS({\n    type: \"insteon/device/add_x10\",\n    x10_device: x10_device,\n  });\n\nexport type deviceAddedMessage = {\n  type: string;\n  address: string;\n};\n\nexport const RAMP_RATE_SECONDS: { [seconds: string]: number } = {\n  \"480\": 1,\n  \"420\": 2,\n  \"360\": 3,\n  \"300\": 4,\n  \"270\": 5,\n  \"240\": 6,\n  \"210\": 7,\n  \"180\": 8,\n  \"150\": 9,\n  \"120\": 10,\n  \"90\": 11,\n  \"60\": 12,\n  \"47\": 13,\n  \"43\": 14,\n  \"38.5\": 15,\n  \"34\": 16,\n  \"32\": 17,\n  \"30\": 18,\n  \"28\": 19,\n  \"26\": 20,\n  \"23.5\": 21,\n  \"21.5\": 22,\n  \"19\": 23,\n  \"8.5\": 24,\n  \"6.5\": 25,\n  \"4.5\": 26,\n  \"2\": 27,\n  \"0.5\": 28,\n  \"0.3\": 29,\n  \"0.2\": 30,\n  \"0.1\": 31,\n};\n\nexport const rampRateSchema: HaFormSchema = {\n  name: \"ramp_rate\",\n  options: [\n    [\"31\", \"0.1\"],\n    [\"30\", \"0.2\"],\n    [\"29\", \"0.3\"],\n    [\"28\", \"0.5\"],\n    [\"27\", \"2\"],\n    [\"26\", \"4.5\"],\n    [\"25\", \"6.5\"],\n    [\"24\", \"8.5\"],\n    [\"23\", \"19\"],\n    [\"22\", \"21.5\"],\n    [\"21\", \"23.5\"],\n    [\"20\", \"26\"],\n    [\"19\", \"28\"],\n    [\"18\", \"30\"],\n    [\"17\", \"32\"],\n    [\"16\", \"34\"],\n    [\"15\", \"38.5\"],\n    [\"14\", \"43\"],\n    [\"13\", \"47\"],\n    [\"12\", \"60\"],\n    [\"11\", \"90\"],\n    [\"10\", \"120\"],\n    [\"9\", \"150\"],\n    [\"8\", \"180\"],\n    [\"7\", \"210\"],\n    [\"6\", \"240\"],\n    [\"5\", \"270\"],\n    [\"4\", \"300\"],\n    [\"3\", \"360\"],\n    [\"2\", \"420\"],\n    [\"1\", \"480\"],\n  ],\n  required: true,\n  type: \"select\",\n};\n","import type { CSSResultGroup, TemplateResult } from \"lit\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport \"@ha/components/ha-code-editor\";\nimport { createCloseHeading } from \"@ha/components/ha-dialog\";\nimport \"@ha/components/ha-button\";\nimport { haStyleDialog } from \"@ha/resources/styles\";\nimport type { HomeAssistant } from \"@ha/types\";\nimport type { Insteon } from \"../data/insteon\";\nimport { addDeviceSchema } from \"../data/device\";\nimport { checkAddress } from \"../tools/address-utils\";\nimport \"@ha/components/ha-form/ha-form\";\nimport type { HaFormSchema } from \"@ha/components/ha-form/types\";\nimport type { InsteonAddDeviceDialogParams } from \"./show-dialog-insteon-add-device\";\n\n@customElement(\"dialog-insteon-add-device\")\nclass DialogInsteonAddDevice extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n\n  @property({ attribute: false }) public insteon?: Insteon;\n\n  @property({ type: Boolean }) public isWide?: boolean;\n\n  @property({ type: Boolean }) public narrow?: boolean;\n\n  @state() private _title?: string;\n\n  @state() private _callback?: (\n    device_address: string | undefined,\n    multiple: boolean,\n    add_x10: boolean,\n  ) => Promise<void>;\n\n  @state() private _errors?: { [key: string]: string };\n\n  @state() private _formData = { multiple: false, add_x10: false, device_address: \"\" };\n\n  @state() private _opened = false;\n\n  public async showDialog(params: InsteonAddDeviceDialogParams): Promise<void> {\n    this.hass = params.hass;\n    this.insteon = params.insteon;\n    this._callback = params.callback;\n    this._title = params.title;\n    this._errors = {};\n    this._opened = true;\n    this._formData = { multiple: false, add_x10: false, device_address: \"\" };\n  }\n\n  private _schema(multiple: boolean, add_x10: boolean): HaFormSchema[] {\n    return addDeviceSchema(multiple, add_x10);\n  }\n\n  protected render(): TemplateResult {\n    if (!this._opened) {\n      return html``;\n    }\n    return html`\n      <ha-dialog\n        open\n        @closed=\"${this._close}\"\n        .heading=${createCloseHeading(this.hass!, this._title!)}\n      >\n        <div class=\"form\">\n          <ha-form\n            .data=${this._formData}\n            .schema=${this._schema(this._formData.multiple, this._formData.add_x10)}\n            .error=${this._errors}\n            @value-changed=${this._valueChanged}\n            .computeLabel=${this._computeLabel(this.insteon?.localize)}\n          ></ha-form>\n        </div>\n        <div class=\"buttons\">\n          <ha-button @click=${this._dismiss} slot=\"secondaryAction\">\n            ${this.insteon!.localize(\"common.cancel\")}\n          </ha-button>\n          <ha-button @click=${this._submit} slot=\"primaryAction\">\n            ${this.insteon!.localize(\"common.ok\")}\n          </ha-button>\n        </div>\n      </ha-dialog>\n    `;\n  }\n\n  private _dismiss(): void {\n    this._close();\n  }\n\n  private _computeLabel(localize) {\n    // Returns a callback for ha-form to calculate labels per schema object\n    return (schema) => localize(\"device.fields.\" + schema.name) || schema.name;\n  }\n\n  private async _submit(): Promise<void> {\n    if (this._checkData()) {\n      // eslint-disable-next-line no-console\n      console.info(\"Should be calling callback\");\n      this._close();\n      const device_address =\n        this._formData.device_address === \"\" ? undefined : this._formData.device_address;\n      await this._callback!(device_address, this._formData.multiple, this._formData.add_x10);\n    } else {\n      this._errors!.base = this.insteon!.localize(\"common.error.base\");\n    }\n  }\n\n  private _close(): void {\n    this._opened = false;\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    this._formData = ev.detail.value;\n  }\n\n  private _checkData(): boolean {\n    if (this._formData.device_address === \"\" || checkAddress(this._formData.device_address))\n      return true;\n\n    this._errors = {};\n    this._errors.device_address = this.insteon!.localize(\"common.error.address\");\n    return false;\n  }\n\n  static get styles(): CSSResultGroup[] {\n    return [\n      haStyleDialog,\n      css`\n        table {\n          width: 100%;\n        }\n        ha-combo-box {\n          width: 20px;\n        }\n        .title {\n          width: 200px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-insteon-add-device\": DialogInsteonAddDevice;\n  }\n}\n","export const checkAddress = (address: string): boolean => {\n  const addressId = toAddressId(address);\n  if (addressId.length !== 6) {\n    return false;\n  }\n  return checkHexNumber(addressId);\n};\n\nexport const checkHexNumber = (value: string): boolean => {\n  if (value.substring(0, 2).toLocaleLowerCase() === \"0x\") {\n    value = value.substring(2);\n  }\n\n  const check_value = [...value];\n  if (check_value.length % 2 !== 0) {\n    return false;\n  }\n  for (let i = 0; i < check_value.length; i++) {\n    if (!checkValidHexValue(check_value[i])) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const checkValidHexValue = (value: string): boolean => {\n  const valid_chars = [\n    \"0\",\n    \"1\",\n    \"2\",\n    \"3\",\n    \"4\",\n    \"5\",\n    \"6\",\n    \"7\",\n    \"8\",\n    \"9\",\n    \"a\",\n    \"b\",\n    \"c\",\n    \"d\",\n    \"e\",\n    \"f\",\n  ];\n  return valid_chars.includes(value.toLocaleLowerCase());\n};\n\nexport const toAddressId = (address: string) => address.toLocaleLowerCase().split(\".\").join(\"\");\n\nexport const toAddress = (address: string) => {\n  const addressId = toAddressId(address);\n  return [addressId.substring(0, 2), addressId.substring(2, 4), addressId.substring(4, 6)]\n    .join(\".\")\n    .toLocaleUpperCase();\n};\n"],"names":["stopPropagation","ev","HaButton","Button","styles","css","args","variant","HaTooltip","Tooltip","showDelay","hideDelay","attribute","type","Number","showToast","el","params","fireEvent","fetchInsteonDevice","hass","id","callWS","device_id","fetchInsteonALDB","device_address","fetchInsteonProperties","showAdvanced","show_advanced","changeALDBRecord","record","changeProperty","name","value","createALDBRecord","loadALDB","loadProperties","writeALDB","writeProperties","resetALDB","resetProperties","addDefaultLinks","aldbNewRecordSchema","insteon","options","localize","required","valueMin","valueMax","aldbChangeRecordSchema","addDeviceSchema","multiple","add_x10","cancelAddInsteonDevice","removeInsteonDevice","address","remove_all_refs","addX10Device","x10_device","rampRateSchema","DialogInsteonAddDevice","LitElement","showDialog","this","_callback","callback","_title","title","_errors","_opened","_formData","_schema","render","html","_close","createCloseHeading","_valueChanged","_computeLabel","_dismiss","_submit","schema","_checkData","console","info","undefined","base","detail","checkAddress","haStyleDialog","Boolean","addressId","toAddressId","length","checkHexNumber","substring","toLocaleLowerCase","check_value","i","checkValidHexValue","includes","split","join"],"mappings":"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"}