{"version":3,"file":"4777.bc89cb5f0bb4596b.js","sources":["webpack://insteon-frontend/./node_modules/@home-assistant/webawesome/dist/components/tooltip/tooltip.css.js","webpack://insteon-frontend/./node_modules/@home-assistant/webawesome/dist/components/tooltip/tooltip.js","webpack://insteon-frontend/./node_modules/home-assistant-js-websocket/dist/store.js","webpack://insteon-frontend/./node_modules/home-assistant-js-websocket/dist/collection.js","webpack://insteon-frontend/./node_modules/idb-keyval/dist/index.js"],"sourcesContent":["import { css } from 'lit';\nexport default css`:host {\n  --max-width: 30ch;\n  display: inline-block;\n  position: absolute;\n  color: var(--wa-tooltip-content-color);\n  font-size: var(--wa-tooltip-font-size);\n  line-height: var(--wa-tooltip-line-height);\n  text-align: start;\n  white-space: normal;\n}\n.tooltip {\n  --arrow-size: var(--wa-tooltip-arrow-size);\n  --arrow-color: var(--wa-tooltip-background-color);\n}\n.tooltip::part(popup) {\n  z-index: 1000;\n}\n.tooltip[placement^=top]::part(popup) {\n  transform-origin: bottom;\n}\n.tooltip[placement^=bottom]::part(popup) {\n  transform-origin: top;\n}\n.tooltip[placement^=left]::part(popup) {\n  transform-origin: right;\n}\n.tooltip[placement^=right]::part(popup) {\n  transform-origin: left;\n}\n.body {\n  display: block;\n  width: max-content;\n  max-width: var(--max-width);\n  border-radius: var(--wa-tooltip-border-radius);\n  background-color: var(--wa-tooltip-background-color);\n  border: var(--wa-tooltip-border-width) var(--wa-tooltip-border-style) var(--wa-tooltip-border-color);\n  padding: 0.25em 0.5em;\n  user-select: none;\n  -webkit-user-select: none;\n}\n.tooltip::part(arrow) {\n  border-bottom: var(--wa-tooltip-border-width) var(--wa-tooltip-border-style) var(--wa-tooltip-border-color);\n  border-right: var(--wa-tooltip-border-width) var(--wa-tooltip-border-style) var(--wa-tooltip-border-color);\n}\n`;\n","var __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result) __defProp(target, key, result);\n  return result;\n};\nimport { html } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators.js\";\nimport { classMap } from \"lit/directives/class-map.js\";\nimport { WaAfterHideEvent } from \"../../events/after-hide.js\";\nimport { WaAfterShowEvent } from \"../../events/after-show.js\";\nimport { WaHideEvent } from \"../../events/hide.js\";\nimport { WaShowEvent } from \"../../events/show.js\";\nimport { animateWithClass } from \"../../internal/animate.js\";\nimport { waitForEvent } from \"../../internal/event.js\";\nimport { uniqueId } from \"../../internal/math.js\";\nimport { watch } from \"../../internal/watch.js\";\nimport WebAwesomeElement from \"../../internal/webawesome-element.js\";\nimport WaPopup from \"../popup/popup.js\";\nimport styles from \"./tooltip.css.js\";\nlet WaTooltip = class extends WebAwesomeElement {\n  constructor() {\n    super(...arguments);\n    this.placement = \"top\";\n    this.disabled = false;\n    this.distance = 8;\n    this.open = false;\n    this.skidding = 0;\n    this.showDelay = 150;\n    this.hideDelay = 0;\n    this.trigger = \"hover focus\";\n    this.withoutArrow = false;\n    this.for = null;\n    this.anchor = null;\n    this.eventController = new AbortController();\n    this.handleBlur = () => {\n      if (this.hasTrigger(\"focus\")) {\n        this.hide();\n      }\n    };\n    this.handleClick = () => {\n      if (this.hasTrigger(\"click\")) {\n        if (this.open) {\n          this.hide();\n        } else {\n          this.show();\n        }\n      }\n    };\n    this.handleFocus = () => {\n      if (this.hasTrigger(\"focus\")) {\n        this.show();\n      }\n    };\n    this.handleDocumentKeyDown = (event) => {\n      if (event.key === \"Escape\") {\n        event.stopPropagation();\n        this.hide();\n      }\n    };\n    this.handleMouseOver = () => {\n      if (this.hasTrigger(\"hover\")) {\n        clearTimeout(this.hoverTimeout);\n        this.hoverTimeout = window.setTimeout(() => this.show(), this.showDelay);\n      }\n    };\n    this.handleMouseOut = () => {\n      if (this.hasTrigger(\"hover\")) {\n        clearTimeout(this.hoverTimeout);\n        this.hoverTimeout = window.setTimeout(() => this.hide(), this.hideDelay);\n      }\n    };\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.eventController.signal.aborted) {\n      this.eventController = new AbortController();\n    }\n    if (this.open) {\n      this.open = false;\n      this.updateComplete.then(() => {\n        this.open = true;\n      });\n    }\n    if (!this.id) {\n      this.id = uniqueId(\"wa-tooltip-\");\n    }\n    if (this.for && this.anchor) {\n      this.anchor = null;\n      this.handleForChange();\n    } else if (this.for) {\n      this.handleForChange();\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    document.removeEventListener(\"keydown\", this.handleDocumentKeyDown);\n    this.eventController.abort();\n    if (this.anchor) {\n      this.removeFromAriaLabelledBy(this.anchor, this.id);\n    }\n  }\n  firstUpdated() {\n    this.body.hidden = !this.open;\n    if (this.open) {\n      this.popup.active = true;\n      this.popup.reposition();\n    }\n  }\n  hasTrigger(triggerType) {\n    const triggers = this.trigger.split(\" \");\n    return triggers.includes(triggerType);\n  }\n  /** Adds the tooltip ID to the aria-labelledby attribute */\n  addToAriaLabelledBy(element, id) {\n    const currentLabel = element.getAttribute(\"aria-labelledby\") || \"\";\n    const labels = currentLabel.split(/\\s+/).filter(Boolean);\n    if (!labels.includes(id)) {\n      labels.push(id);\n      element.setAttribute(\"aria-labelledby\", labels.join(\" \"));\n    }\n  }\n  /** Removes the tooltip ID from the aria-labelledby attribute */\n  removeFromAriaLabelledBy(element, id) {\n    const currentLabel = element.getAttribute(\"aria-labelledby\") || \"\";\n    const labels = currentLabel.split(/\\s+/).filter(Boolean);\n    const filteredLabels = labels.filter((label) => label !== id);\n    if (filteredLabels.length > 0) {\n      element.setAttribute(\"aria-labelledby\", filteredLabels.join(\" \"));\n    } else {\n      element.removeAttribute(\"aria-labelledby\");\n    }\n  }\n  async handleOpenChange() {\n    if (this.open) {\n      if (this.disabled) {\n        return;\n      }\n      const waShowEvent = new WaShowEvent();\n      this.dispatchEvent(waShowEvent);\n      if (waShowEvent.defaultPrevented) {\n        this.open = false;\n        return;\n      }\n      document.addEventListener(\"keydown\", this.handleDocumentKeyDown, { signal: this.eventController.signal });\n      this.body.hidden = false;\n      this.popup.active = true;\n      await animateWithClass(this.popup.popup, \"show-with-scale\");\n      this.popup.reposition();\n      this.dispatchEvent(new WaAfterShowEvent());\n    } else {\n      const waHideEvent = new WaHideEvent();\n      this.dispatchEvent(waHideEvent);\n      if (waHideEvent.defaultPrevented) {\n        this.open = false;\n        return;\n      }\n      document.removeEventListener(\"keydown\", this.handleDocumentKeyDown);\n      await animateWithClass(this.popup.popup, \"hide-with-scale\");\n      this.popup.active = false;\n      this.body.hidden = true;\n      this.dispatchEvent(new WaAfterHideEvent());\n    }\n  }\n  handleForChange() {\n    const rootNode = this.getRootNode();\n    if (!rootNode) {\n      return;\n    }\n    const newAnchor = this.for ? rootNode.getElementById(this.for) : null;\n    const oldAnchor = this.anchor;\n    if (newAnchor === oldAnchor) {\n      return;\n    }\n    const { signal } = this.eventController;\n    if (newAnchor) {\n      this.addToAriaLabelledBy(newAnchor, this.id);\n      newAnchor.addEventListener(\"blur\", this.handleBlur, { capture: true, signal });\n      newAnchor.addEventListener(\"focus\", this.handleFocus, { capture: true, signal });\n      newAnchor.addEventListener(\"click\", this.handleClick, { signal });\n      newAnchor.addEventListener(\"mouseover\", this.handleMouseOver, { signal });\n      newAnchor.addEventListener(\"mouseout\", this.handleMouseOut, { signal });\n    }\n    if (oldAnchor) {\n      this.removeFromAriaLabelledBy(oldAnchor, this.id);\n      oldAnchor.removeEventListener(\"blur\", this.handleBlur, { capture: true });\n      oldAnchor.removeEventListener(\"focus\", this.handleFocus, { capture: true });\n      oldAnchor.removeEventListener(\"click\", this.handleClick);\n      oldAnchor.removeEventListener(\"mouseover\", this.handleMouseOver);\n      oldAnchor.removeEventListener(\"mouseout\", this.handleMouseOut);\n    }\n    this.anchor = newAnchor;\n  }\n  async handleOptionsChange() {\n    if (this.hasUpdated) {\n      await this.updateComplete;\n      this.popup.reposition();\n    }\n  }\n  handleDisabledChange() {\n    if (this.disabled && this.open) {\n      this.hide();\n    }\n  }\n  /** Shows the tooltip. */\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"wa-after-show\");\n  }\n  /** Hides the tooltip */\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"wa-after-hide\");\n  }\n  render() {\n    return html`\n      <wa-popup\n        part=\"base\"\n        exportparts=\"\n          popup:base__popup,\n          arrow:base__arrow\n        \"\n        class=${classMap({\n      tooltip: true,\n      \"tooltip-open\": this.open\n    })}\n        placement=${this.placement}\n        distance=${this.distance}\n        skidding=${this.skidding}\n        flip\n        shift\n        ?arrow=${!this.withoutArrow}\n        hover-bridge\n        .anchor=${this.anchor}\n      >\n        <div part=\"body\" class=\"body\">\n          <slot></slot>\n        </div>\n      </wa-popup>\n    `;\n  }\n};\nWaTooltip.css = styles;\nWaTooltip.dependencies = { \"wa-popup\": WaPopup };\n__decorateClass([\n  query(\"slot:not([name])\")\n], WaTooltip.prototype, \"defaultSlot\", 2);\n__decorateClass([\n  query(\".body\")\n], WaTooltip.prototype, \"body\", 2);\n__decorateClass([\n  query(\"wa-popup\")\n], WaTooltip.prototype, \"popup\", 2);\n__decorateClass([\n  property()\n], WaTooltip.prototype, \"placement\", 2);\n__decorateClass([\n  property({ type: Boolean, reflect: true })\n], WaTooltip.prototype, \"disabled\", 2);\n__decorateClass([\n  property({ type: Number })\n], WaTooltip.prototype, \"distance\", 2);\n__decorateClass([\n  property({ type: Boolean, reflect: true })\n], WaTooltip.prototype, \"open\", 2);\n__decorateClass([\n  property({ type: Number })\n], WaTooltip.prototype, \"skidding\", 2);\n__decorateClass([\n  property({ attribute: \"show-delay\", type: Number })\n], WaTooltip.prototype, \"showDelay\", 2);\n__decorateClass([\n  property({ attribute: \"hide-delay\", type: Number })\n], WaTooltip.prototype, \"hideDelay\", 2);\n__decorateClass([\n  property()\n], WaTooltip.prototype, \"trigger\", 2);\n__decorateClass([\n  property({ attribute: \"without-arrow\", type: Boolean, reflect: true })\n], WaTooltip.prototype, \"withoutArrow\", 2);\n__decorateClass([\n  property()\n], WaTooltip.prototype, \"for\", 2);\n__decorateClass([\n  state()\n], WaTooltip.prototype, \"anchor\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], WaTooltip.prototype, \"handleOpenChange\", 1);\n__decorateClass([\n  watch(\"for\")\n], WaTooltip.prototype, \"handleForChange\", 1);\n__decorateClass([\n  watch([\"distance\", \"placement\", \"skidding\"])\n], WaTooltip.prototype, \"handleOptionsChange\", 1);\n__decorateClass([\n  watch(\"disabled\")\n], WaTooltip.prototype, \"handleDisabledChange\", 1);\nWaTooltip = __decorateClass([\n  customElement(\"wa-tooltip\")\n], WaTooltip);\nexport {\n  WaTooltip as default\n};\n","export const createStore = (state) => {\n    let listeners = [];\n    function unsubscribe(listener) {\n        let out = [];\n        for (let i = 0; i < listeners.length; i++) {\n            if (listeners[i] === listener) {\n                listener = null;\n            }\n            else {\n                out.push(listeners[i]);\n            }\n        }\n        listeners = out;\n    }\n    function setState(update, overwrite) {\n        state = overwrite ? update : Object.assign(Object.assign({}, state), update);\n        let currentListeners = listeners;\n        for (let i = 0; i < currentListeners.length; i++) {\n            currentListeners[i](state);\n        }\n    }\n    /**\n     * An observable state container, returned from {@link createStore}\n     * @name store\n     */\n    return {\n        get state() {\n            return state;\n        },\n        /**\n         * Create a bound copy of the given action function.\n         * The bound returned function invokes action() and persists the result back to the store.\n         * If the return value of `action` is a Promise, the resolved value will be used as state.\n         * @param {Function} action\tAn action of the form `action(state, ...args) -> stateUpdate`\n         * @returns {Function} boundAction()\n         */\n        action(action) {\n            function apply(result) {\n                setState(result, false);\n            }\n            // Note: perf tests verifying this implementation: https://esbench.com/bench/5a295e6299634800a0349500\n            return function () {\n                let args = [state];\n                for (let i = 0; i < arguments.length; i++)\n                    args.push(arguments[i]);\n                // @ts-ignore\n                let ret = action.apply(this, args);\n                if (ret != null) {\n                    return ret instanceof Promise ? ret.then(apply) : apply(ret);\n                }\n            };\n        },\n        /**\n         * Apply a partial state object to the current state, invoking registered listeners.\n         * @param {Object} update\t\t\t\tAn object with properties to be merged into state\n         * @param {Boolean} [overwrite=false]\tIf `true`, update will replace state instead of being merged into it\n         */\n        setState,\n        clearState() {\n            state = undefined;\n        },\n        /**\n         * Register a listener function to be called whenever state is changed. Returns an `unsubscribe()` function.\n         * @param {Function} listener\tA function to call when state changes. Gets passed the new state.\n         * @returns {Function} unsubscribe()\n         */\n        subscribe(listener) {\n            listeners.push(listener);\n            return () => {\n                unsubscribe(listener);\n            };\n        },\n        // /**\n        //  * Remove a previously-registered listener function.\n        //  * @param {Function} listener\tThe callback previously passed to `subscribe()` that should be removed.\n        //  * @function\n        //  */\n        // unsubscribe,\n    };\n};\n","import { createStore } from \"./store.js\";\n// Time to wait to unsubscribe from updates after last subscriber unsubscribes\nconst UNSUB_GRACE_PERIOD = 5000; // 5 seconds\nconst DEBUG = false;\n/**\n *\n * @param conn connection\n * @param key the key to store it on the connection. Must be unique for each collection.\n * @param fetchCollection fetch the current state. If undefined assumes subscribeUpdates receives current state\n * @param subscribeUpdates subscribe to updates on the current state\n * @returns\n */\nexport const getCollection = (conn, key, fetchCollection, subscribeUpdates, options = { unsubGrace: true }) => {\n    // @ts-ignore\n    if (conn[key]) {\n        // @ts-ignore\n        return conn[key];\n    }\n    let active = 0;\n    let unsubProm;\n    let unsubTimer;\n    let store = createStore();\n    const refresh = () => {\n        if (!fetchCollection) {\n            throw new Error(\"Collection does not support refresh\");\n        }\n        return fetchCollection(conn).then((state) => store.setState(state, true));\n    };\n    const refreshSwallow = () => refresh().catch((err) => {\n        // Swallow errors if socket is connecting, closing or closed.\n        // We will automatically call refresh again when we re-establish the connection.\n        if (conn.connected) {\n            throw err;\n        }\n    });\n    const setupUpdateSubscription = () => {\n        if (unsubTimer !== undefined) {\n            if (DEBUG) {\n                console.log(`Prevented unsubscribe for ${key}`);\n            }\n            clearTimeout(unsubTimer);\n            unsubTimer = undefined;\n            return;\n        }\n        if (DEBUG) {\n            console.log(`Subscribing to ${key}`);\n        }\n        if (subscribeUpdates) {\n            unsubProm = subscribeUpdates(conn, store);\n        }\n        if (fetchCollection) {\n            // Fetch when connection re-established.\n            conn.addEventListener(\"ready\", refreshSwallow);\n            refreshSwallow();\n        }\n        conn.addEventListener(\"disconnected\", handleDisconnect);\n    };\n    const teardownUpdateSubscription = () => {\n        if (DEBUG) {\n            console.log(`Unsubscribing from ${key}`);\n        }\n        unsubTimer = undefined;\n        // Unsubscribe from changes\n        if (unsubProm)\n            unsubProm.then((unsub) => {\n                unsub();\n            });\n        store.clearState();\n        conn.removeEventListener(\"ready\", refresh);\n        conn.removeEventListener(\"disconnected\", handleDisconnect);\n    };\n    const scheduleTeardownUpdateSubscription = () => {\n        if (DEBUG) {\n            console.log(`Scheduling unsubscribing from ${key}`);\n        }\n        unsubTimer = setTimeout(teardownUpdateSubscription, UNSUB_GRACE_PERIOD);\n    };\n    const handleDisconnect = () => {\n        // If we're going to unsubscribe and then lose connection,\n        // just unsubscribe immediately.\n        if (unsubTimer) {\n            clearTimeout(unsubTimer);\n            teardownUpdateSubscription();\n        }\n    };\n    // @ts-ignore\n    conn[key] = {\n        get state() {\n            return store.state;\n        },\n        refresh,\n        subscribe(subscriber) {\n            active++;\n            if (DEBUG) {\n                console.log(`New subscriber for ${key}. Active subscribers: ${active}`);\n            }\n            // If this was the first subscriber, attach collection\n            if (active === 1) {\n                setupUpdateSubscription();\n            }\n            const unsub = store.subscribe(subscriber);\n            if (store.state !== undefined) {\n                // Don't call it right away so that caller has time\n                // to initialize all the things.\n                setTimeout(() => subscriber(store.state), 0);\n            }\n            return () => {\n                unsub();\n                active--;\n                if (DEBUG) {\n                    console.log(`Unsubscribe for ${key}. Active subscribers: ${active}`);\n                }\n                if (!active) {\n                    options.unsubGrace\n                        ? scheduleTeardownUpdateSubscription()\n                        : teardownUpdateSubscription();\n                }\n            };\n        },\n    };\n    // @ts-ignore\n    return conn[key];\n};\n// Legacy name. It gets a collection and subscribes.\nexport const createCollection = (key, fetchCollection, subscribeUpdates, conn, onChange) => getCollection(conn, key, fetchCollection, subscribeUpdates).subscribe(onChange);\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    let dbp;\n    const getDB = () => {\n        if (dbp)\n            return dbp;\n        const request = indexedDB.open(dbName);\n        request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n        dbp = promisifyRequest(request);\n        dbp.then((db) => {\n            // It seems like Safari sometimes likes to just close the connection.\n            // It's supposed to fire this event when that happens. Let's hope it does!\n            db.onclose = () => (dbp = undefined);\n        }, () => { });\n        return dbp;\n    };\n    return (txMode, callback) => getDB().then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic â€“ if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n"],"names":["css","__defProp","Object","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__decorateClass","decorators","target","key","kind","decorator","result","i","length","WaTooltip","WebAwesomeElement","connectedCallback","super","this","eventController","signal","aborted","AbortController","open","updateComplete","then","id","uniqueId","for","anchor","handleForChange","disconnectedCallback","document","removeEventListener","handleDocumentKeyDown","abort","removeFromAriaLabelledBy","firstUpdated","body","hidden","popup","active","reposition","hasTrigger","triggerType","trigger","split","includes","addToAriaLabelledBy","element","labels","getAttribute","filter","Boolean","push","setAttribute","join","filteredLabels","label","removeAttribute","handleOpenChange","disabled","waShowEvent","WaShowEvent","dispatchEvent","defaultPrevented","addEventListener","animateWithClass","WaAfterShowEvent","waHideEvent","WaHideEvent","WaAfterHideEvent","rootNode","getRootNode","newAnchor","getElementById","oldAnchor","handleBlur","capture","handleFocus","handleClick","handleMouseOver","handleMouseOut","handleOptionsChange","hasUpdated","handleDisabledChange","hide","show","waitForEvent","render","html","classMap","tooltip","placement","distance","skidding","withoutArrow","constructor","arguments","showDelay","hideDelay","event","stopPropagation","clearTimeout","hoverTimeout","window","setTimeout","styles","dependencies","WaPopup","query","prototype","property","type","reflect","Number","attribute","state","watch","waitUntilFirstUpdate","customElement","createStore","listeners","setState","update","overwrite","assign","currentListeners","action","apply","args","ret","Promise","clearState","undefined","subscribe","listener","out","unsubscribe","getCollection","conn","fetchCollection","subscribeUpdates","options","unsubGrace","unsubProm","unsubTimer","store","refresh","Error","refreshSwallow","catch","err","connected","teardownUpdateSubscription","unsub","handleDisconnect","subscriber","setupUpdateSubscription","createCollection","onChange","promisifyRequest","request","resolve","reject","oncomplete","onsuccess","onabort","onerror","error","dbName","storeName","dbp","txMode","callback","getDB","indexedDB","onupgradeneeded","createObjectStore","db","onclose","transaction","objectStore","defaultGetStoreFunc","defaultGetStore","get","customStore","set","value","put","clear"],"mappings":"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"}