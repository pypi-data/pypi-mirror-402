{"version":3,"file":"812.c82a9359f0c50469.js","sources":["webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-form/ha-form-float.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-textfield.ts"],"sourcesContent":["import type { TemplateResult, PropertyValues } from \"lit\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { HaTextField } from \"../ha-textfield\";\nimport \"../ha-textfield\";\nimport type {\n  HaFormElement,\n  HaFormFloatData,\n  HaFormFloatSchema,\n} from \"./types\";\nimport type { LocalizeFunc } from \"../../common/translations/localize\";\n\n@customElement(\"ha-form-float\")\nexport class HaFormFloat extends LitElement implements HaFormElement {\n  @property({ attribute: false }) public localize?: LocalizeFunc;\n\n  @property({ attribute: false }) public schema!: HaFormFloatSchema;\n\n  @property({ attribute: false }) public data!: HaFormFloatData;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @query(\"ha-textfield\") private _input?: HaTextField;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-textfield\n        type=\"number\"\n        inputMode=\"decimal\"\n        step=\"any\"\n        .label=${this.label}\n        .helper=${this.helper}\n        helperPersistent\n        .value=${this.data !== undefined ? this.data : \"\"}\n        .disabled=${this.disabled}\n        .required=${this.schema.required}\n        .autoValidate=${this.schema.required}\n        .suffix=${this.schema.description?.suffix}\n        .validationMessage=${this.schema.required\n          ? this.localize?.(\"ui.common.error_required\")\n          : undefined}\n        @input=${this._valueChanged}\n      ></ha-textfield>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"schema\")) {\n      this.toggleAttribute(\"own-margin\", !!this.schema.required);\n    }\n  }\n\n  private _valueChanged(ev: Event) {\n    const source = ev.target as HaTextField;\n    const rawValue = source.value.replace(\",\", \".\");\n\n    let value: number | undefined;\n\n    if (rawValue.endsWith(\".\")) {\n      return;\n    }\n\n    // Allow user to start typing a negative value\n    if (rawValue === \"-\") {\n      return;\n    }\n\n    if (rawValue !== \"\") {\n      value = parseFloat(rawValue);\n      if (isNaN(value)) {\n        value = undefined;\n      }\n    }\n\n    // Detect anything changed\n    if (this.data === value) {\n      return;\n    }\n\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n\n  static styles = css`\n    :host([own-margin]) {\n      margin-bottom: 5px;\n    }\n    ha-textfield {\n      display: block;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-float\": HaFormFloat;\n  }\n}\n","import { TextFieldBase } from \"@material/mwc-textfield/mwc-textfield-base\";\nimport { styles } from \"@material/mwc-textfield/mwc-textfield.css\";\nimport type { TemplateResult, PropertyValues } from \"lit\";\nimport { html, css } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { mainWindow } from \"../common/dom/get_main_window\";\n\n@customElement(\"ha-textfield\")\nexport class HaTextField extends TextFieldBase {\n  @property({ type: Boolean }) public invalid?: boolean;\n\n  @property({ attribute: \"error-message\" }) public errorMessage?: string;\n\n  // @ts-ignore\n  @property({ type: Boolean }) public icon = false;\n\n  // @ts-ignore\n  // eslint-disable-next-line lit/attribute-names\n  @property({ type: Boolean }) public iconTrailing = false;\n\n  @property() public autocomplete?: string;\n\n  @property({ type: Boolean }) public autocorrect = true;\n\n  @property({ attribute: \"input-spellcheck\" })\n  public inputSpellcheck?: string;\n\n  @query(\"input\") public formElement!: HTMLInputElement;\n\n  override updated(changedProperties: PropertyValues) {\n    super.updated(changedProperties);\n    if (\n      changedProperties.has(\"invalid\") ||\n      changedProperties.has(\"errorMessage\")\n    ) {\n      this.setCustomValidity(\n        this.invalid\n          ? this.errorMessage || this.validationMessage || \"Invalid\"\n          : \"\"\n      );\n      if (\n        this.invalid ||\n        this.validateOnInitialRender ||\n        (changedProperties.has(\"invalid\") &&\n          changedProperties.get(\"invalid\") !== undefined)\n      ) {\n        // Only report validity if the field is invalid or the invalid state has changed from\n        // true to false to prevent setting empty required fields to invalid on first render\n        this.reportValidity();\n      }\n    }\n    if (changedProperties.has(\"autocomplete\")) {\n      if (this.autocomplete) {\n        this.formElement.setAttribute(\"autocomplete\", this.autocomplete);\n      } else {\n        this.formElement.removeAttribute(\"autocomplete\");\n      }\n    }\n    if (changedProperties.has(\"autocorrect\")) {\n      if (this.autocorrect === false) {\n        this.formElement.setAttribute(\"autocorrect\", \"off\");\n      } else {\n        this.formElement.removeAttribute(\"autocorrect\");\n      }\n    }\n    if (changedProperties.has(\"inputSpellcheck\")) {\n      if (this.inputSpellcheck) {\n        this.formElement.setAttribute(\"spellcheck\", this.inputSpellcheck);\n      } else {\n        this.formElement.removeAttribute(\"spellcheck\");\n      }\n    }\n  }\n\n  protected override renderIcon(\n    _icon: string,\n    isTrailingIcon = false\n  ): TemplateResult {\n    const type = isTrailingIcon ? \"trailing\" : \"leading\";\n\n    return html`\n      <span\n        class=\"mdc-text-field__icon mdc-text-field__icon--${type}\"\n        tabindex=${isTrailingIcon ? 1 : -1}\n      >\n        <slot name=\"${type}Icon\"></slot>\n      </span>\n    `;\n  }\n\n  static override styles = [\n    styles,\n    css`\n      .mdc-text-field__input {\n        width: var(--ha-textfield-input-width, 100%);\n      }\n      .mdc-text-field:not(.mdc-text-field--with-leading-icon) {\n        padding: var(--text-field-padding, 0px 16px);\n      }\n      .mdc-text-field__affix--suffix {\n        padding-left: var(--text-field-suffix-padding-left, 12px);\n        padding-right: var(--text-field-suffix-padding-right, 0px);\n        padding-inline-start: var(--text-field-suffix-padding-left, 12px);\n        padding-inline-end: var(--text-field-suffix-padding-right, 0px);\n        direction: ltr;\n      }\n      .mdc-text-field--with-leading-icon {\n        padding-inline-start: var(--text-field-suffix-padding-left, 0px);\n        padding-inline-end: var(--text-field-suffix-padding-right, 16px);\n        direction: var(--direction);\n      }\n\n      .mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon {\n        padding-left: var(--text-field-suffix-padding-left, 0px);\n        padding-right: var(--text-field-suffix-padding-right, 0px);\n        padding-inline-start: var(--text-field-suffix-padding-left, 0px);\n        padding-inline-end: var(--text-field-suffix-padding-right, 0px);\n      }\n      .mdc-text-field:not(.mdc-text-field--disabled)\n        .mdc-text-field__affix--suffix {\n        color: var(--secondary-text-color);\n      }\n\n      .mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon {\n        color: var(--secondary-text-color);\n      }\n\n      .mdc-text-field__icon--leading {\n        margin-inline-start: 16px;\n        margin-inline-end: 8px;\n        direction: var(--direction);\n      }\n\n      .mdc-text-field__icon--trailing {\n        padding: var(--textfield-icon-trailing-padding, 12px);\n      }\n\n      .mdc-floating-label:not(.mdc-floating-label--float-above) {\n        max-width: calc(100% - 16px);\n      }\n\n      .mdc-floating-label--float-above {\n        max-width: calc((100% - 16px) / 0.75);\n        transition: none;\n      }\n\n      input {\n        text-align: var(--text-field-text-align, start);\n      }\n\n      input[type=\"color\"] {\n        height: 20px;\n      }\n\n      /* Edge, hide reveal password icon */\n      ::-ms-reveal {\n        display: none;\n      }\n\n      /* Chrome, Safari, Edge, Opera */\n      :host([no-spinner]) input::-webkit-outer-spin-button,\n      :host([no-spinner]) input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n\n      input[type=\"color\"]::-webkit-color-swatch-wrapper {\n        padding: 0;\n      }\n\n      /* Firefox */\n      :host([no-spinner]) input[type=\"number\"] {\n        -moz-appearance: textfield;\n      }\n\n      .mdc-text-field__ripple {\n        overflow: hidden;\n      }\n\n      .mdc-text-field {\n        overflow: var(--text-field-overflow);\n      }\n\n      .mdc-floating-label {\n        padding-inline-end: 16px;\n        padding-inline-start: initial;\n        inset-inline-start: 16px !important;\n        inset-inline-end: initial !important;\n        transform-origin: var(--float-start);\n        direction: var(--direction);\n        text-align: var(--float-start);\n        box-sizing: border-box;\n        text-overflow: ellipsis;\n      }\n\n      .mdc-text-field--with-leading-icon.mdc-text-field--filled\n        .mdc-floating-label {\n        max-width: calc(\n          100% - 48px - var(--text-field-suffix-padding-left, 0px)\n        );\n        inset-inline-start: calc(\n          48px + var(--text-field-suffix-padding-left, 0px)\n        ) !important;\n        inset-inline-end: initial !important;\n        direction: var(--direction);\n      }\n\n      .mdc-text-field__input[type=\"number\"] {\n        direction: var(--direction);\n      }\n      .mdc-text-field__affix--prefix {\n        padding-right: var(--text-field-prefix-padding-right, 2px);\n        padding-inline-end: var(--text-field-prefix-padding-right, 2px);\n        padding-inline-start: initial;\n      }\n\n      .mdc-text-field:not(.mdc-text-field--disabled)\n        .mdc-text-field__affix--prefix {\n        color: var(--mdc-text-field-label-ink-color);\n      }\n      #helper-text ha-markdown {\n        display: inline-block;\n      }\n    `,\n    // safari workaround - must be explicit\n    mainWindow.document.dir === \"rtl\"\n      ? css`\n          .mdc-text-field--with-leading-icon,\n          .mdc-text-field__icon--leading,\n          .mdc-floating-label,\n          .mdc-text-field--with-leading-icon.mdc-text-field--filled\n            .mdc-floating-label,\n          .mdc-text-field__input[type=\"number\"] {\n            direction: rtl;\n            --direction: rtl;\n          }\n        `\n      : css``,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-textfield\": HaTextField;\n  }\n}\n"],"names":["HaFormFloat","_LitElement","_this","_callSuper","concat","args","disabled","this","_input","focus","key","value","_this$schema$descript","_this$localize","html","_templateObject","_taggedTemplateLiteral","label","helper","undefined","data","schema","required","description","suffix","localize","call","_valueChanged","changedProps","has","toggleAttribute","ev","rawValue","target","replace","endsWith","parseFloat","isNaN","fireEvent","LitElement","styles","css","_templateObject2","attribute","type","Boolean","HaTextField","_TextFieldBase","icon","iconTrailing","autocorrect","changedProperties","_superPropGet","setCustomValidity","invalid","errorMessage","validationMessage","validateOnInitialRender","get","reportValidity","autocomplete","formElement","setAttribute","removeAttribute","inputSpellcheck","_icon","isTrailingIcon","arguments","length","TextFieldBase","mainWindow","_templateObject3","_templateObject4"],"mappings":"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"}