{"version":3,"file":"8547.8928d0f67ee5b3a6.js","sources":["webpack://insteon-frontend/./homeassistant-frontend/src/panels/config/cloud/dialog-cloud-already-connected/dialog-cloud-already-connected.ts","webpack://insteon-frontend/./homeassistant-frontend/src/util/url.ts","webpack://insteon-frontend/./node_modules/core-js/modules/es.string.repeat.js"],"sourcesContent":["import { mdiEye, mdiEyeOff } from \"@mdi/js\";\nimport type { CSSResultGroup } from \"lit\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, state } from \"lit/decorators\";\nimport { formatDateTime } from \"../../../../common/datetime/format_date_time\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport \"../../../../components/ha-alert\";\nimport \"../../../../components/ha-button\";\nimport { createCloseHeading } from \"../../../../components/ha-dialog\";\nimport \"../../../../components/ha-icon-button\";\nimport { haStyleDialog } from \"../../../../resources/styles\";\nimport type { HomeAssistant } from \"../../../../types\";\nimport { obfuscateUrl } from \"../../../../util/url\";\nimport type { CloudAlreadyConnectedParams as CloudAlreadyConnectedDialogParams } from \"./show-dialog-cloud-already-connected\";\n\n@customElement(\"dialog-cloud-already-connected\")\nclass DialogCloudAlreadyConnected extends LitElement {\n  public hass!: HomeAssistant;\n\n  @state() private _params?: CloudAlreadyConnectedDialogParams;\n\n  @state() private _obfuscateIp = true;\n\n  public showDialog(params: CloudAlreadyConnectedDialogParams) {\n    this._params = params;\n  }\n\n  public closeDialog() {\n    this._params?.closeDialog?.();\n    this._params = undefined;\n    this._obfuscateIp = true;\n    fireEvent(this, \"dialog-closed\", { dialog: this.localName });\n  }\n\n  protected render() {\n    if (!this._params) {\n      return nothing;\n    }\n    const { details } = this._params;\n\n    return html`\n      <ha-dialog\n        open\n        @closed=${this.closeDialog}\n        .heading=${createCloseHeading(\n          this.hass,\n          this.hass.localize(\n            \"ui.panel.config.cloud.dialog_already_connected.heading\"\n          )\n        )}\n      >\n        <div class=\"intro\">\n          <span>\n            ${this.hass.localize(\n              \"ui.panel.config.cloud.dialog_already_connected.description\"\n            )}\n          </span>\n          <b>\n            ${this.hass.localize(\n              \"ui.panel.config.cloud.dialog_already_connected.other_home_assistant\"\n            )}\n          </b>\n        </div>\n        <div class=\"instance-details\">\n          ${details.name\n            ? html`<div class=\"instance-detail\">\n                <span>\n                  ${this.hass.localize(\n                    \"ui.panel.config.cloud.dialog_already_connected.instance_name\"\n                  )}:\n                </span>\n                <span>${details.name}</span>\n              </div>`\n            : nothing}\n          ${details.version\n            ? html`<div class=\"instance-detail\">\n                <span>\n                  ${this.hass.localize(\n                    \"ui.panel.config.cloud.dialog_already_connected.instance_version\"\n                  )}:\n                </span>\n                <span>${details.version}</span>\n              </div>`\n            : nothing}\n          <div class=\"instance-detail\">\n            <span>\n              ${this.hass.localize(\n                \"ui.panel.config.cloud.dialog_already_connected.ip_address\"\n              )}:\n            </span>\n            <div class=\"obfuscated\">\n              <span>\n                ${this._obfuscateIp\n                  ? obfuscateUrl(details.remote_ip_address)\n                  : details.remote_ip_address}\n              </span>\n\n              <ha-icon-button\n                class=\"toggle-unmasked-url\"\n                .label=${this.hass.localize(\n                  `ui.panel.config.cloud.dialog_already_connected.obfuscated_ip.${this._obfuscateIp ? \"hide\" : \"show\"}`\n                )}\n                @click=${this._toggleObfuscateIp}\n                .path=${this._obfuscateIp ? mdiEye : mdiEyeOff}\n              ></ha-icon-button>\n            </div>\n          </div>\n          <div class=\"instance-detail\">\n            <span>\n              ${this.hass.localize(\n                \"ui.panel.config.cloud.dialog_already_connected.connected_at\"\n              )}:\n            </span>\n            <span>\n              ${formatDateTime(\n                new Date(details.connected_at),\n                this.hass.locale,\n                this.hass.config\n              )}\n            </span>\n          </div>\n        </div>\n        <ha-alert\n          alert-type=\"info\"\n          .title=${this.hass.localize(\n            \"ui.panel.config.cloud.dialog_already_connected.info_backups.title\"\n          )}\n        >\n          ${this.hass.localize(\n            \"ui.panel.config.cloud.dialog_already_connected.info_backups.description\"\n          )}\n        </ha-alert>\n\n        <ha-button\n          appearance=\"plain\"\n          @click=${this.closeDialog}\n          slot=\"secondaryAction\"\n        >\n          ${this.hass!.localize(\"ui.common.cancel\")}\n        </ha-button>\n        <ha-button @click=${this._logInHere} slot=\"primaryAction\">\n          ${this.hass!.localize(\n            \"ui.panel.config.cloud.dialog_already_connected.login_here\"\n          )}\n        </ha-button>\n      </ha-dialog>\n    `;\n  }\n\n  private _toggleObfuscateIp() {\n    this._obfuscateIp = !this._obfuscateIp;\n  }\n\n  private _logInHere() {\n    this._params?.logInHereAction?.();\n    this.closeDialog();\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyleDialog,\n      css`\n        ha-dialog {\n          --mdc-dialog-max-width: 535px;\n        }\n        .intro b {\n          display: block;\n          margin-top: 16px;\n        }\n        .instance-details {\n          display: flex;\n          flex-direction: column;\n          margin-bottom: 16px;\n        }\n        .instance-detail {\n          display: flex;\n          flex-direction: row;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .obfuscated {\n          align-items: center;\n          display: flex;\n          flex-direction: row;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-cloud-already-connected\": DialogCloudAlreadyConnected;\n  }\n}\n","export function obfuscateUrl(url: string) {\n  if (url.endsWith(\".ui.nabu.casa\")) {\n    return \"https://•••••••••••••••••.ui.nabu.casa\";\n  }\n  // hide any words that look like they might be a hostname or IP address\n  return url.replace(/(?<=:\\/\\/)[\\w-]+|(?<=\\.)[\\w-]+/g, (match) =>\n    \"•\".repeat(match.length)\n  );\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar repeat = require('../internals/string-repeat');\n\n// `String.prototype.repeat` method\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\n$({ target: 'String', proto: true }, {\n  repeat: repeat\n});\n"],"names":["DialogCloudAlreadyConnected","_LitElement","_this","_callSuper","concat","args","_obfuscateIp","params","this","_params","key","value","_this$_params","_this$_params$closeDi","closeDialog","call","undefined","fireEvent","dialog","localName","nothing","details","html","_templateObject","_taggedTemplateLiteral","createCloseHeading","hass","localize","name","_templateObject2","version","_templateObject3","obfuscateUrl","remote_ip_address","_toggleObfuscateIp","formatDateTime","Date","connected_at","locale","config","_logInHere","_this$_params2","_this$_params2$logInH","logInHereAction","get","haStyleDialog","css","_templateObject4","LitElement","url","endsWith","replace","match","repeat","length","$","target","proto"],"mappings":"iZAeAA,EAAA,SAAAC,G,2GAAA,OAAAC,GAAAC,EAAAA,EAAAA,GAAA,KAAAH,EAAA,GAAAI,OAAAC,KAAAC,cAAA,EAAAJ,C,uDAQS,SAAAK,GACLC,KAAAC,QAAAF,CACF,IAAAG,IAAA,cAAAC,MAEO,eAAAC,EAAAC,EACL,QAAAD,EAAAJ,KAAAC,eAAA,IAAAG,GAAA,QAAAC,EAAAD,EAAAE,mBAAA,IAAAD,GAAAA,EAAAE,KAAAH,GACAJ,KAAAC,aAAAO,EACAR,KAAAF,cAAA,GACAW,EAAAA,EAAAA,GAAA,sBAAmCC,OAAA,KAAAC,WACrC,IAAAT,IAAA,SAAAC,MAEU,WACR,IAAKH,KAALC,QACE,OAAAW,EAAAA,GAEF,IAAAC,EAAA,KAAAZ,QAAAY,QAEA,OAAAC,EAAAA,EAAAA,IAAAC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,ozCAGY,KAAAV,aACCW,EAAAA,EAAAA,GAAA,KAAAC,KAAA,KAAAA,KAAAC,SAAA,2DASL,KAAAD,KAAAC,SAAA,8DAKA,KAAAD,KAAAC,SAAA,uEAMFN,EAAAO,MAAAN,EAAAA,EAAAA,IAAAO,IAAAA,GAAAL,EAAAA,EAAAA,GAAA,qKAGQ,KAAAE,KAAAC,SAAA,gEAIIN,EAAAO,MACFR,EAAAA,GAEVC,EAAAS,SAAAR,EAAAA,EAAAA,IAAAS,IAAAA,GAAAP,EAAAA,EAAAA,GAAA,qKAGQ,KAAAE,KAAAC,SAAA,mEAIIN,EAAAS,SACFV,EAAAA,GAIN,KAAAM,KAAAC,SAAA,6DAME,KAAArB,cAAA0B,EAAAA,EAAAA,GAAAX,EAAAY,mBAAAZ,EAAAY,kBAOO,KAAAP,KAAAC,SAAA,gEAAAvB,OAAA,KAAAE,aAAA,gBAGA,KAAA4B,mBACD,KAAA5B,a,uzBAMR,KAAAoB,KAAAC,SAAA,gEAKAQ,EAAAA,EAAAA,IAAA,IAAAC,KAAAf,EAAAgB,cAAA,KAAAX,KAAAY,OAAA,KAAAZ,KAAAa,QAUG,KAAAb,KAAAC,SAAA,qEAIP,KAAAD,KAAAC,SAAA,2EAOO,KAAAb,YAGP,KAAAY,KAAAC,SAAA,oBAEgB,KAAAa,WAChB,KAAAd,KAAAC,SAAA,6DAMR,IAAAjB,IAAA,qBAAAC,MAEQ,WACNH,KAAAF,cAAAE,KAAAF,YACF,IAAAI,IAAA,aAAAC,MAEQ,eAAA8B,EAAAC,EACN,QAAAD,EAAAjC,KAAAC,eAAA,IAAAgC,GAAA,QAAAC,EAAAD,EAAAE,uBAAA,IAAAD,GAAAA,EAAA3B,KAAA0B,GACAjC,KAAAM,aACF,MAAAJ,IAAA,SAAAkC,IAEA,WACE,MAAO,CACLC,EAAAA,IACAC,EAAAA,EAAAA,IAAAC,IAAAA,GAAAvB,EAAAA,EAAAA,GAAA,8lBA0BJ,KA5KF,CAAAwB,EAAAA,K,+SCfO,SAAPhB,EAAAiB,GACE,OAAAA,EAAAC,SAAA,iBACS,yCAGTD,EAAAE,QAAA,2CAAAC,GAAA,MAAO,IAAPC,OAAAD,EAAAE,OAAA,EAGF,C,wBCPQ,EAAQ,MAKhBC,CAAE,CAAEC,OAAQ,SAAUC,OAAO,GAAQ,CACnCJ,OALW,EAAQ,Q"}