{"version":3,"file":"274.37ae986b68074ea5.js","sources":["webpack://insteon-frontend/./homeassistant-frontend/src/common/translations/blank_before_percent.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-file-upload.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-picture-upload.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/media-player/show-media-browser-dialog.ts","webpack://insteon-frontend/./homeassistant-frontend/src/data/image_upload.ts","webpack://insteon-frontend/./homeassistant-frontend/src/dialogs/image-cropper-dialog/show-image-cropper-dialog.ts","webpack://insteon-frontend/./homeassistant-frontend/src/util/bytes-to-string.ts"],"sourcesContent":["import type { FrontendLocaleData } from \"../../data/translation\";\n\n// Logic based on https://en.wikipedia.org/wiki/Percent_sign#Form_and_spacing\nexport const blankBeforePercent = (\n  localeOptions: FrontendLocaleData\n): string => {\n  switch (localeOptions.language) {\n    case \"cs\":\n    case \"de\":\n    case \"fi\":\n    case \"fr\":\n    case \"sk\":\n    case \"sv\":\n      return \" \";\n    default:\n      return \"\";\n  }\n};\n","import \"@material/mwc-linear-progress/mwc-linear-progress\";\nimport { mdiDelete, mdiFileUpload } from \"@mdi/js\";\nimport type { PropertyValues, TemplateResult } from \"lit\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-button\";\nimport \"./ha-icon-button\";\nimport { blankBeforePercent } from \"../common/translations/blank_before_percent\";\nimport { ensureArray } from \"../common/array/ensure-array\";\nimport { bytesToString } from \"../util/bytes-to-string\";\nimport type { LocalizeFunc } from \"../common/translations/localize\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"file-picked\": { files: File[] };\n    \"files-cleared\": undefined;\n  }\n}\n\n@customElement(\"ha-file-upload\")\nexport class HaFileUpload extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n\n  @property({ attribute: false }) public localize?: LocalizeFunc;\n\n  @property() public accept!: string;\n\n  @property() public icon?: string;\n\n  @property() public label?: string;\n\n  @property() public secondary?: string;\n\n  @property({ attribute: \"uploading-label\" }) public uploadingLabel?: string;\n\n  @property({ attribute: \"delete-label\" }) public deleteLabel?: string;\n\n  @property() public supports?: string;\n\n  @property({ type: Object }) public value?: File | File[] | FileList | string;\n\n  @property({ type: Boolean }) public multiple = false;\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @property({ type: Boolean }) public uploading = false;\n\n  @property({ type: Number }) public progress?: number;\n\n  @property({ type: Boolean, attribute: \"auto-open-file-dialog\" })\n  public autoOpenFileDialog = false;\n\n  @state() private _drag = false;\n\n  @query(\"#input\") private _input?: HTMLInputElement;\n\n  protected firstUpdated(changedProperties: PropertyValues) {\n    super.firstUpdated(changedProperties);\n    if (this.autoOpenFileDialog) {\n      this._openFilePicker();\n    }\n  }\n\n  private get _name() {\n    if (this.value === undefined) {\n      return \"\";\n    }\n    if (typeof this.value === \"string\") {\n      return this.value;\n    }\n    const files =\n      this.value instanceof FileList\n        ? Array.from(this.value)\n        : ensureArray(this.value);\n\n    return files.map((file) => file.name).join(\", \");\n  }\n\n  public render(): TemplateResult {\n    const localize = this.localize || this.hass!.localize;\n    return html`\n      ${this.uploading\n        ? html`<div class=\"container\">\n            <div class=\"uploading\">\n              <span class=\"header\"\n                >${this.uploadingLabel ||\n                (this.value\n                  ? localize(\"ui.components.file-upload.uploading_name\", {\n                      name: this._name,\n                    })\n                  : localize(\"ui.components.file-upload.uploading\"))}</span\n              >\n              ${this.progress\n                ? html`<div class=\"progress\">\n                    ${this.progress}${this.hass &&\n                    blankBeforePercent(this.hass!.locale)}%\n                  </div>`\n                : nothing}\n            </div>\n            <mwc-linear-progress\n              .indeterminate=${!this.progress}\n              .progress=${this.progress ? this.progress / 100 : undefined}\n            ></mwc-linear-progress>\n          </div>`\n        : html`<label\n            for=${this.value ? \"\" : \"input\"}\n            class=\"container ${classMap({\n              dragged: this._drag,\n              multiple: this.multiple,\n              value: Boolean(this.value),\n            })}\"\n            @drop=${this._handleDrop}\n            @dragenter=${this._handleDragStart}\n            @dragover=${this._handleDragStart}\n            @dragleave=${this._handleDragEnd}\n            @dragend=${this._handleDragEnd}\n            >${!this.value\n              ? html`<ha-button\n                    size=\"small\"\n                    appearance=\"filled\"\n                    @click=${this._openFilePicker}\n                  >\n                    <ha-svg-icon\n                      slot=\"start\"\n                      .path=${this.icon || mdiFileUpload}\n                    ></ha-svg-icon>\n                    ${this.label || localize(\"ui.components.file-upload.label\")}\n                  </ha-button>\n                  <span class=\"secondary\"\n                    >${this.secondary ||\n                    localize(\"ui.components.file-upload.secondary\")}</span\n                  >\n                  <span class=\"supports\">${this.supports}</span>`\n              : typeof this.value === \"string\"\n                ? html`<div class=\"row\">\n                    <div class=\"value\" @click=${this._openFilePicker}>\n                      <ha-svg-icon\n                        .path=${this.icon || mdiFileUpload}\n                      ></ha-svg-icon>\n                      ${this.value}\n                    </div>\n                    <ha-icon-button\n                      @click=${this._clearValue}\n                      .label=${this.deleteLabel || localize(\"ui.common.delete\")}\n                      .path=${mdiDelete}\n                    ></ha-icon-button>\n                  </div>`\n                : (this.value instanceof FileList\n                    ? Array.from(this.value)\n                    : ensureArray(this.value)\n                  ).map(\n                    (file) =>\n                      html`<div class=\"row\">\n                        <div class=\"value\" @click=${this._openFilePicker}>\n                          <ha-svg-icon\n                            .path=${this.icon || mdiFileUpload}\n                          ></ha-svg-icon>\n                          ${file.name} - ${bytesToString(file.size)}\n                        </div>\n                        <ha-icon-button\n                          @click=${this._clearValue}\n                          .label=${this.deleteLabel ||\n                          localize(\"ui.common.delete\")}\n                          .path=${mdiDelete}\n                        ></ha-icon-button>\n                      </div>`\n                  )}\n            <input\n              id=\"input\"\n              type=\"file\"\n              class=\"file\"\n              .accept=${this.accept}\n              .multiple=${this.multiple}\n              @change=${this._handleFilePicked}\n          /></label>`}\n    `;\n  }\n\n  private _openFilePicker() {\n    this._input?.click();\n  }\n\n  private _handleDrop(ev: DragEvent) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    if (ev.dataTransfer?.files) {\n      fireEvent(this, \"file-picked\", {\n        files:\n          this.multiple || ev.dataTransfer.files.length === 1\n            ? Array.from(ev.dataTransfer.files)\n            : [ev.dataTransfer.files[0]],\n      });\n    }\n    this._drag = false;\n  }\n\n  private _handleDragStart(ev: DragEvent) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this._drag = true;\n  }\n\n  private _handleDragEnd(ev: DragEvent) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this._drag = false;\n  }\n\n  private _handleFilePicked(ev) {\n    if (ev.target.files.length === 0) {\n      return;\n    }\n    this.value = ev.target.files;\n    fireEvent(this, \"file-picked\", { files: ev.target.files });\n  }\n\n  private _clearValue(ev: Event) {\n    ev.preventDefault();\n    this._input!.value = \"\";\n    this.value = undefined;\n    fireEvent(this, \"change\");\n    fireEvent(this, \"files-cleared\");\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n      height: 240px;\n    }\n    :host([disabled]) {\n      pointer-events: none;\n      color: var(--disabled-text-color);\n    }\n    .container {\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      border: solid 1px\n        var(--mdc-text-field-idle-line-color, rgba(0, 0, 0, 0.42));\n      border-radius: var(--mdc-shape-small, var(--ha-border-radius-sm));\n      height: 100%;\n    }\n    .row {\n      display: flex;\n      align-items: center;\n    }\n    label.container {\n      border: dashed 1px\n        var(--mdc-text-field-idle-line-color, rgba(0, 0, 0, 0.42));\n      cursor: pointer;\n    }\n    .container .uploading {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      align-items: flex-start;\n      padding: 0 32px;\n      box-sizing: border-box;\n    }\n    :host([disabled]) .container {\n      border-color: var(--disabled-color);\n    }\n    label:hover,\n    label.dragged {\n      border-style: solid;\n    }\n    label.dragged {\n      border-color: var(--primary-color);\n    }\n    .dragged:before {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      background-color: var(--primary-color);\n      content: \"\";\n      opacity: var(--dark-divider-opacity);\n      pointer-events: none;\n      border-radius: var(--mdc-shape-small, 4px);\n    }\n    label.value {\n      cursor: default;\n    }\n    label.value.multiple {\n      justify-content: unset;\n      overflow: auto;\n    }\n    .highlight {\n      color: var(--primary-color);\n    }\n    ha-button {\n      margin-bottom: 8px;\n    }\n    .supports {\n      color: var(--secondary-text-color);\n      font-size: var(--ha-font-size-s);\n    }\n    :host([disabled]) .secondary {\n      color: var(--disabled-text-color);\n    }\n    input.file {\n      display: none;\n    }\n    .value {\n      cursor: pointer;\n    }\n    .value ha-svg-icon {\n      margin-right: 8px;\n      margin-inline-end: 8px;\n      margin-inline-start: initial;\n    }\n    ha-button {\n      --mdc-button-outline-color: var(--primary-color);\n      --mdc-icon-button-size: 24px;\n    }\n    mwc-linear-progress {\n      width: 100%;\n      padding: 8px 32px;\n      box-sizing: border-box;\n    }\n    .header {\n      font-weight: var(--ha-font-weight-medium);\n    }\n    .progress {\n      color: var(--secondary-text-color);\n    }\n    button.link {\n      background: none;\n      border: none;\n      padding: 0;\n      font-size: var(--ha-font-size-m);\n      color: var(--primary-color);\n      text-decoration: underline;\n      cursor: pointer;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-file-upload\": HaFileUpload;\n  }\n}\n","import { mdiImagePlus } from \"@mdi/js\";\nimport type { TemplateResult } from \"lit\";\nimport { LitElement, css, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport type { MediaPickedEvent } from \"../data/media-player\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { haStyle } from \"../resources/styles\";\nimport {\n  MEDIA_PREFIX,\n  getIdFromUrl,\n  createImage,\n  generateImageThumbnailUrl,\n  getImageData,\n} from \"../data/image_upload\";\nimport { showAlertDialog } from \"../dialogs/generic/show-dialog-box\";\nimport type { CropOptions } from \"../dialogs/image-cropper-dialog/show-image-cropper-dialog\";\nimport { showImageCropperDialog } from \"../dialogs/image-cropper-dialog/show-image-cropper-dialog\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-button\";\nimport \"./ha-file-upload\";\nimport { showMediaBrowserDialog } from \"./media-player/show-media-browser-dialog\";\n\n@customElement(\"ha-picture-upload\")\nexport class HaPictureUpload extends LitElement {\n  public hass!: HomeAssistant;\n\n  @property() public value: string | null = null;\n\n  @property() public label?: string;\n\n  @property() public secondary?: string;\n\n  @property() public supports?: string;\n\n  @property({ attribute: false }) public currentImageAltText?: string;\n\n  @property({ type: Boolean }) public crop = false;\n\n  @property({ type: Boolean, attribute: \"select-media\" }) public selectMedia =\n    false;\n\n  // This property is set when this component is used inside a media selector.\n  // When set, it returns selected media or uploaded files as MediaSelectorValue\n  // When unset, it only allows selecting images from image-upload, and returns\n  // selected or uploaded images as a string starting with /api/...\n  @property({ type: Boolean, attribute: \"full-media\" }) public fullMedia =\n    false;\n\n  @property({ attribute: false }) public contentIdHelper?: string;\n\n  @property({ attribute: false }) public cropOptions?: CropOptions;\n\n  @property({ type: Boolean }) public original = false;\n\n  @property({ type: Number }) public size = 512;\n\n  @state() private _uploading = false;\n\n  public render(): TemplateResult {\n    if (!this.value) {\n      const secondary =\n        this.secondary ||\n        (this.selectMedia\n          ? html`${this.hass.localize(\n              \"ui.components.picture-upload.secondary\",\n              {\n                select_media: html`<button\n                  class=\"link\"\n                  @click=${this._chooseMedia}\n                >\n                  ${this.hass.localize(\n                    \"ui.components.picture-upload.select_media\"\n                  )}\n                </button>`,\n              }\n            )}`\n          : undefined);\n\n      return html`\n        <ha-file-upload\n          .hass=${this.hass}\n          .icon=${mdiImagePlus}\n          .label=${this.label ||\n          this.hass.localize(\"ui.components.picture-upload.label\")}\n          .secondary=${secondary}\n          .supports=${this.supports ||\n          this.hass.localize(\"ui.components.picture-upload.supported_formats\")}\n          .uploading=${this._uploading}\n          @file-picked=${this._handleFilePicked}\n          @change=${this._handleFileCleared}\n          accept=\"image/png, image/jpeg, image/gif\"\n        ></ha-file-upload>\n      `;\n    }\n    return html`<div class=\"center-vertical\">\n      <div class=\"value\">\n        <img\n          .src=${this.value}\n          alt=${this.currentImageAltText ||\n          this.hass.localize(\"ui.components.picture-upload.current_image_alt\")}\n        />\n        <div>\n          <ha-button\n            appearance=\"plain\"\n            size=\"small\"\n            variant=\"danger\"\n            @click=${this._handleChangeClick}\n          >\n            ${this.hass.localize(\"ui.components.picture-upload.clear_picture\")}\n          </ha-button>\n        </div>\n      </div>\n    </div>`;\n  }\n\n  private _handleChangeClick() {\n    this.value = null;\n    fireEvent(this, \"change\");\n  }\n\n  private async _handleFilePicked(ev) {\n    const file = ev.detail.files[0];\n    if (this.crop) {\n      this._cropFile(file);\n    } else {\n      this._uploadFile(file);\n    }\n  }\n\n  private async _handleFileCleared() {\n    this.value = null;\n  }\n\n  private async _cropFile(file: File, mediaId?: string) {\n    if (![\"image/png\", \"image/jpeg\", \"image/gif\"].includes(file.type)) {\n      showAlertDialog(this, {\n        text: this.hass.localize(\n          \"ui.components.picture-upload.unsupported_format\"\n        ),\n      });\n      return;\n    }\n    showImageCropperDialog(this, {\n      file,\n      options: this.cropOptions || {\n        round: false,\n        aspectRatio: NaN,\n      },\n      croppedCallback: (croppedFile) => {\n        if (mediaId && croppedFile === file) {\n          this.value = generateImageThumbnailUrl(\n            mediaId,\n            this.size,\n            this.original\n          );\n          fireEvent(this, \"change\");\n        } else {\n          this._uploadFile(croppedFile);\n        }\n      },\n    });\n  }\n\n  private async _uploadFile(file: File) {\n    if (![\"image/png\", \"image/jpeg\", \"image/gif\"].includes(file.type)) {\n      showAlertDialog(this, {\n        text: this.hass.localize(\n          \"ui.components.picture-upload.unsupported_format\"\n        ),\n      });\n      return;\n    }\n    this._uploading = true;\n    try {\n      const media = await createImage(this.hass, file);\n      if (this.fullMedia) {\n        const item = {\n          media_content_id: `${MEDIA_PREFIX}/${media.id}`,\n          media_content_type: media.content_type,\n          title: media.name,\n          media_class: \"image\" as const,\n          can_play: true,\n          can_expand: false,\n          can_search: false,\n          thumbnail: generateImageThumbnailUrl(media.id, 256),\n        } as const;\n        const navigateIds = [\n          {},\n          { media_content_type: \"app\", media_content_id: MEDIA_PREFIX },\n        ];\n        fireEvent(this, \"media-picked\", {\n          item,\n          navigateIds,\n        });\n      } else {\n        this.value = generateImageThumbnailUrl(\n          media.id,\n          this.size,\n          this.original\n        );\n        fireEvent(this, \"change\");\n      }\n    } catch (err: any) {\n      showAlertDialog(this, {\n        text: err.toString(),\n      });\n    } finally {\n      this._uploading = false;\n    }\n  }\n\n  private _chooseMedia = () => {\n    showMediaBrowserDialog(this, {\n      action: \"pick\",\n      entityId: \"browser\",\n      accept: [\"image/*\"],\n      navigateIds: this.fullMedia\n        ? undefined\n        : [\n            { media_content_id: undefined, media_content_type: undefined },\n            {\n              media_content_id: MEDIA_PREFIX,\n              media_content_type: \"app\",\n            },\n          ],\n      minimumNavigateLevel: this.fullMedia ? undefined : 2,\n      hideContentType: true,\n      contentIdHelper: this.contentIdHelper,\n      mediaPickedCallback: async (pickedMedia: MediaPickedEvent) => {\n        if (this.fullMedia) {\n          fireEvent(this, \"media-picked\", pickedMedia);\n          return;\n        }\n        const mediaId = getIdFromUrl(pickedMedia.item.media_content_id);\n        if (mediaId) {\n          if (this.crop) {\n            const url = generateImageThumbnailUrl(mediaId, undefined, true);\n            let data;\n            try {\n              data = await getImageData(this.hass, url);\n            } catch (err: any) {\n              showAlertDialog(this, {\n                text: err.toString(),\n              });\n              return;\n            }\n            const metadata = {\n              type: pickedMedia.item.media_content_type,\n            };\n            const file = new File([data], pickedMedia.item.title, metadata);\n            this._cropFile(file, mediaId);\n          } else {\n            this.value = generateImageThumbnailUrl(\n              mediaId,\n              this.size,\n              this.original\n            );\n            fireEvent(this, \"change\");\n          }\n        }\n      },\n    });\n  };\n\n  static get styles() {\n    return [\n      haStyle,\n      css`\n        :host {\n          display: block;\n          height: 240px;\n        }\n        ha-file-upload {\n          height: 100%;\n        }\n        .center-vertical {\n          display: flex;\n          align-items: center;\n          height: 100%;\n        }\n        .value {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n        img {\n          max-width: 100%;\n          max-height: 200px;\n          margin-bottom: 4px;\n          border-radius: var(--file-upload-image-border-radius);\n          transition: opacity 0.3s;\n          opacity: var(--picture-opacity, 1);\n        }\n        img:hover {\n          opacity: 1;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-picture-upload\": HaPictureUpload;\n  }\n}\n","import { fireEvent } from \"../../common/dom/fire_event\";\nimport type {\n  MediaPickedEvent,\n  MediaPlayerBrowseAction,\n} from \"../../data/media-player\";\nimport type { MediaPlayerItemId } from \"./ha-media-player-browse\";\n\nexport interface MediaPlayerBrowseDialogParams {\n  action: MediaPlayerBrowseAction;\n  entityId?: string;\n  mediaPickedCallback: (pickedMedia: MediaPickedEvent) => void;\n  navigateIds?: MediaPlayerItemId[];\n  minimumNavigateLevel?: number;\n  accept?: string[];\n  defaultId?: string;\n  defaultType?: string;\n  hideContentType?: boolean;\n  contentIdHelper?: string;\n}\n\nexport const showMediaBrowserDialog = (\n  element: HTMLElement,\n  dialogParams: MediaPlayerBrowseDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-media-player-browse\",\n    dialogImport: () => import(\"./dialog-media-player-browse\"),\n    dialogParams,\n  });\n};\n","import type { HomeAssistant } from \"../types\";\n\ninterface Image {\n  filesize: number;\n  name: string;\n  uploaded_at: string; // isoformat date\n  content_type: string;\n  id: string;\n}\n\nexport const URL_PREFIX = \"/api/image/serve/\";\nexport const MEDIA_PREFIX = \"media-source://image_upload\";\n\nexport interface ImageMutableParams {\n  name: string;\n}\n\nexport const getIdFromUrl = (url: string): string | undefined => {\n  let id;\n  if (url.startsWith(URL_PREFIX)) {\n    id = url.substring(URL_PREFIX.length);\n    const idx = id.indexOf(\"/\");\n    if (idx >= 0) {\n      id = id.substring(0, idx);\n    }\n  } else if (url.startsWith(MEDIA_PREFIX)) {\n    id = url.substring(MEDIA_PREFIX.length + 1);\n  }\n  return id;\n};\n\nexport const generateImageThumbnailUrl = (\n  mediaId: string,\n  size?: number,\n  original = false\n) => {\n  if (!original && !size) {\n    throw new Error(\"Size must be provided if original is false\");\n  }\n\n  return original\n    ? `/api/image/serve/${mediaId}/original`\n    : `/api/image/serve/${mediaId}/${size}x${size}`;\n};\n\nexport const fetchImages = (hass: HomeAssistant) =>\n  hass.callWS<Image[]>({ type: \"image/list\" });\n\nexport const createImage = async (\n  hass: HomeAssistant,\n  file: File\n): Promise<Image> => {\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const resp = await hass.fetchWithAuth(\"/api/image/upload\", {\n    method: \"POST\",\n    body: fd,\n  });\n  if (resp.status === 413) {\n    throw new Error(`Uploaded image is too large (${file.name})`);\n  } else if (resp.status !== 200) {\n    throw new Error(\"Unknown error\");\n  }\n  return resp.json();\n};\n\nexport const updateImage = (\n  hass: HomeAssistant,\n  id: string,\n  updates: Partial<ImageMutableParams>\n) =>\n  hass.callWS<Image>({\n    type: \"image/update\",\n    media_id: id,\n    ...updates,\n  });\n\nexport const deleteImage = (hass: HomeAssistant, id: string) =>\n  hass.callWS({\n    type: \"image/delete\",\n    image_id: id,\n  });\n\nexport const getImageData = async (hass: HomeAssistant, url: string) => {\n  const response = await fetch(hass.hassUrl(url));\n\n  if (!response.ok) {\n    throw new Error(\n      `Failed to fetch image: ${\n        response.statusText ? response.statusText : response.status\n      }`\n    );\n  }\n\n  return response.blob();\n};\n","import { fireEvent } from \"../../common/dom/fire_event\";\n\nexport interface CropOptions {\n  round: boolean;\n  type?: \"image/jpeg\" | \"image/png\";\n  quality?: number;\n  aspectRatio?: number;\n}\n\nexport interface HaImageCropperDialogParams {\n  file: File;\n  options: CropOptions;\n  croppedCallback: (file: File) => void;\n}\n\nconst loadImageCropperDialog = () => import(\"./image-cropper-dialog\");\n\nexport const showImageCropperDialog = (\n  element: HTMLElement,\n  dialogParams: HaImageCropperDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"image-cropper-dialog\",\n    dialogImport: loadImageCropperDialog,\n    dialogParams,\n  });\n};\n","export const bytesToString = (value = 0, decimals = 2): string => {\n  if (value === 0) {\n    return \"0 Bytes\";\n  }\n  const k = 1024;\n  decimals = decimals < 0 ? 0 : decimals;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n  const i = Math.floor(Math.log(value) / Math.log(k));\n  return `${parseFloat((value / k ** i).toFixed(decimals))} ${sizes[i]}`;\n};\n"],"names":["blankBeforePercent","localeOptions","language","mdiDelete","mdiFileUpload","HaFileUpload","_LitElement","_this","_callSuper","concat","args","multiple","disabled","uploading","autoOpenFileDialog","_drag","changedProperties","_superPropGet","this","_openFilePicker","key","get","undefined","value","FileList","Array","from","ensureArray","map","file","name","join","_this2","localize","hass","html","_templateObject","_taggedTemplateLiteral","_templateObject2","uploadingLabel","_name","progress","_templateObject3","locale","nothing","_templateObject4","classMap","dragged","Boolean","_handleDrop","_handleDragStart","_handleDragEnd","_templateObject6","icon","_clearValue","deleteLabel","_templateObject7","bytesToString","size","_templateObject5","label","secondary","supports","accept","_handleFilePicked","_this$_input","_input","click","ev","_ev$dataTransfer","preventDefault","stopPropagation","dataTransfer","files","fireEvent","length","target","LitElement","styles","css","_templateObject8","attribute","type","Object","reflect","Number","HaPictureUpload","crop","selectMedia","fullMedia","original","_uploading","_chooseMedia","_mediaPickedCallback","showMediaBrowserDialog","_assertThisInitialized","action","entityId","navigateIds","media_content_id","media_content_type","MEDIA_PREFIX","minimumNavigateLevel","hideContentType","contentIdHelper","mediaPickedCallback","_asyncToGenerator","_regenerator","m","_callee","pickedMedia","mediaId","url","data","metadata","_t","w","_context","p","n","a","getIdFromUrl","item","generateImageThumbnailUrl","getImageData","v","showAlertDialog","text","toString","File","title","_cropFile","_x","apply","arguments","select_media","_handleFileCleared","currentImageAltText","_handleChangeClick","_handleFilePicked2","_callee2","_context2","detail","_uploadFile","_x2","_handleFileCleared2","_callee3","_context3","_cropFile2","_callee4","_context4","includes","showImageCropperDialog","options","cropOptions","round","aspectRatio","NaN","croppedCallback","croppedFile","_x3","_x4","_uploadFile2","_callee5","media","_t2","_context5","createImage","id","content_type","media_class","can_play","can_expand","can_search","thumbnail","f","_x5","haStyle","element","dialogParams","dialogTag","dialogImport","URL_PREFIX","startsWith","idx","substring","indexOf","Error","_ref","fd","resp","FormData","append","fetchWithAuth","method","body","status","json","deleteImage","callWS","image_id","_ref2","response","fetch","hassUrl","ok","statusText","blob","loadImageCropperDialog","decimals","i","Math","floor","log","parseFloat","pow","toFixed"],"mappings":"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"}