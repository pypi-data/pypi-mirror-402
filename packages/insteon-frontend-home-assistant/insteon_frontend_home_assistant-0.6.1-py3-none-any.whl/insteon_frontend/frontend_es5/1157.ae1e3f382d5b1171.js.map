{"version":3,"file":"1157.ae1e3f382d5b1171.js","sources":["webpack://insteon-frontend/./homeassistant-frontend/src/common/entity/strip_prefix_from_entity_name.ts","webpack://insteon-frontend/./homeassistant-frontend/src/common/entity/compute_entity_name.ts","webpack://insteon-frontend/./homeassistant-frontend/src/common/entity/compute_entity_name_display.ts","webpack://insteon-frontend/./homeassistant-frontend/src/common/entity/valid_entity_id.ts","webpack://insteon-frontend/./homeassistant-frontend/src/common/util/compute_rtl.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/entity/ha-entity-picker.ts","webpack://insteon-frontend/./homeassistant-frontend/src/data/auth.ts","webpack://insteon-frontend/./homeassistant-frontend/src/data/entity.ts","webpack://insteon-frontend/./homeassistant-frontend/src/data/entity_registry.ts","webpack://insteon-frontend/./homeassistant-frontend/src/panels/config/helpers/show-dialog-helper-detail.ts"],"sourcesContent":["const SUFFIXES = [\" \", \": \", \" - \"];\n\n/**\n * Strips a device name from an entity name.\n * @param entityName the entity name\n * @param prefix the prefix to strip\n * @returns\n */\nexport const stripPrefixFromEntityName = (\n  entityName: string,\n  prefix: string\n) => {\n  const lowerCasedEntityName = entityName.toLowerCase();\n  const lowerCasedPrefix = prefix.toLowerCase();\n  for (const suffix of SUFFIXES) {\n    const lowerCasedPrefixWithSuffix = `${lowerCasedPrefix}${suffix}`;\n\n    if (lowerCasedEntityName.startsWith(lowerCasedPrefixWithSuffix)) {\n      const newName = entityName.substring(lowerCasedPrefixWithSuffix.length);\n      if (newName.length) {\n        // If first word already has an upper case letter (e.g. from brand name)\n        // leave as-is, otherwise capitalize the first word.\n        return hasUpperCase(newName.substr(0, newName.indexOf(\" \")))\n          ? newName\n          : newName[0].toUpperCase() + newName.slice(1);\n      }\n    }\n  }\n\n  return undefined;\n};\n\nconst hasUpperCase = (str: string): boolean => str.toLowerCase() !== str;\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n} from \"../../data/entity_registry\";\nimport type { HomeAssistant } from \"../../types\";\nimport { computeDeviceName } from \"./compute_device_name\";\nimport { computeStateName } from \"./compute_state_name\";\nimport { stripPrefixFromEntityName } from \"./strip_prefix_from_entity_name\";\n\nexport const computeEntityName = (\n  stateObj: HassEntity,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"]\n): string | undefined => {\n  const entry = entities[stateObj.entity_id] as\n    | EntityRegistryDisplayEntry\n    | undefined;\n\n  if (!entry) {\n    // Fall back to state name if not in the entity registry (friendly name)\n    return computeStateName(stateObj);\n  }\n  return computeEntityEntryName(entry, devices);\n};\n\nexport const computeEntityEntryName = (\n  entry: EntityRegistryDisplayEntry | EntityRegistryEntry,\n  devices: HomeAssistant[\"devices\"],\n  fallbackStateObj?: HassEntity\n): string | undefined => {\n  const name =\n    entry.name ||\n    (\"original_name\" in entry && entry.original_name != null\n      ? String(entry.original_name)\n      : undefined);\n\n  const device = entry.device_id ? devices[entry.device_id] : undefined;\n\n  if (!device) {\n    if (name) {\n      return name;\n    }\n    if (fallbackStateObj) {\n      return computeStateName(fallbackStateObj);\n    }\n    return undefined;\n  }\n\n  const deviceName = computeDeviceName(device);\n\n  // If the device name is the same as the entity name, consider empty entity name\n  if (deviceName === name) {\n    return undefined;\n  }\n\n  // Remove the device name from the entity name if it starts with it\n  if (deviceName && name) {\n    return stripPrefixFromEntityName(name, deviceName) || name;\n  }\n\n  return name;\n};\n\nexport const entityUseDeviceName = (\n  stateObj: HassEntity,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"]\n): boolean => !computeEntityName(stateObj, entities, devices);\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type { HomeAssistant } from \"../../types\";\nimport { ensureArray } from \"../array/ensure-array\";\nimport { computeAreaName } from \"./compute_area_name\";\nimport { computeDeviceName } from \"./compute_device_name\";\nimport { computeEntityName, entityUseDeviceName } from \"./compute_entity_name\";\nimport { computeFloorName } from \"./compute_floor_name\";\nimport { getEntityContext } from \"./context/get_entity_context\";\n\nconst DEFAULT_SEPARATOR = \" \";\n\nexport const DEFAULT_ENTITY_NAME = [\n  { type: \"device\" },\n  { type: \"entity\" },\n] satisfies EntityNameItem[];\n\nexport type EntityNameItem =\n  | {\n      type: \"entity\" | \"device\" | \"area\" | \"floor\";\n    }\n  | {\n      type: \"text\";\n      text: string;\n    };\n\nexport interface EntityNameOptions {\n  separator?: string;\n}\n\nexport const computeEntityNameDisplay = (\n  stateObj: HassEntity,\n  name: EntityNameItem | EntityNameItem[] | undefined,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"],\n  options?: EntityNameOptions\n) => {\n  let items = ensureArray(name || DEFAULT_ENTITY_NAME);\n\n  const separator = options?.separator ?? DEFAULT_SEPARATOR;\n\n  // If all items are text, just join them\n  if (items.every((n) => n.type === \"text\")) {\n    return items.map((item) => item.text).join(separator);\n  }\n\n  const useDeviceName = entityUseDeviceName(stateObj, entities, devices);\n\n  // If entity uses device name, and device is not already included, replace it with device name\n  if (useDeviceName) {\n    const hasDevice = items.some((n) => n.type === \"device\");\n    if (!hasDevice) {\n      items = items.map((n) => (n.type === \"entity\" ? { type: \"device\" } : n));\n    }\n  }\n\n  const names = computeEntityNameList(\n    stateObj,\n    items,\n    entities,\n    devices,\n    areas,\n    floors\n  );\n\n  // If after processing there is only one name, return that\n  if (names.length === 1) {\n    return names[0] || \"\";\n  }\n\n  return names.filter((n) => n).join(separator);\n};\n\nexport const computeEntityNameList = (\n  stateObj: HassEntity,\n  name: EntityNameItem[],\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"]\n): (string | undefined)[] => {\n  const { device, area, floor } = getEntityContext(\n    stateObj,\n    entities,\n    devices,\n    areas,\n    floors\n  );\n\n  const names = name.map((item) => {\n    switch (item.type) {\n      case \"entity\":\n        return computeEntityName(stateObj, entities, devices);\n      case \"device\":\n        return device ? computeDeviceName(device) : undefined;\n      case \"area\":\n        return area ? computeAreaName(area) : undefined;\n      case \"floor\":\n        return floor ? computeFloorName(floor) : undefined;\n      case \"text\":\n        return item.text;\n      default:\n        return \"\";\n    }\n  });\n\n  return names;\n};\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\n\nexport const isValidEntityId = (entityId: string) =>\n  validEntityId.test(entityId);\n","import type { LitElement } from \"lit\";\nimport type { HomeAssistant } from \"../../types\";\n\nexport function computeRTL(hass: HomeAssistant) {\n  const lang = hass.language || \"en\";\n  if (hass.translationMetadata.translations[lang]) {\n    return hass.translationMetadata.translations[lang].isRTL || false;\n  }\n  return false;\n}\n\nexport function computeRTLDirection(hass: HomeAssistant) {\n  return emitRTLDirection(computeRTL(hass));\n}\n\nexport function emitRTLDirection(rtl: boolean) {\n  return rtl ? \"rtl\" : \"ltr\";\n}\n\nexport function computeDirectionStyles(isRTL: boolean, element: LitElement) {\n  const direction: string = emitRTLDirection(isRTL);\n  setDirectionStyles(direction, element);\n}\n\nexport function setDirectionStyles(direction: string, element: LitElement) {\n  document.dir = direction;\n  element.style.direction = direction;\n  element.style.setProperty(\"--direction\", direction);\n  element.style.setProperty(\n    \"--float-start\",\n    direction === \"ltr\" ? \"left\" : \"right\"\n  );\n  element.style.setProperty(\n    \"--float-end\",\n    direction === \"ltr\" ? \"right\" : \"left\"\n  );\n  element.style.setProperty(\n    \"--margin-title\",\n    direction === \"ltr\" ? \"var(--margin-title-ltr)\" : \"var(--margin-title-rtl)\"\n  );\n  element.style.setProperty(\n    \"--scale-direction\",\n    direction === \"ltr\" ? \"1\" : \"-1\"\n  );\n}\n","import { mdiPlus, mdiShape } from \"@mdi/js\";\nimport type { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { html, LitElement, nothing, type PropertyValues } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeEntityNameList } from \"../../common/entity/compute_entity_name_display\";\nimport { isValidEntityId } from \"../../common/entity/valid_entity_id\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\nimport type { HaEntityPickerEntityFilterFunc } from \"../../data/entity\";\nimport {\n  getEntities,\n  type EntityComboBoxItem,\n} from \"../../data/entity_registry\";\nimport { domainToName } from \"../../data/integration\";\nimport {\n  isHelperDomain,\n  type HelperDomain,\n} from \"../../panels/config/helpers/const\";\nimport { showHelperDetailDialog } from \"../../panels/config/helpers/show-dialog-helper-detail\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-combo-box-item\";\nimport \"../ha-generic-picker\";\nimport type { HaGenericPicker } from \"../ha-generic-picker\";\nimport type { PickerComboBoxSearchFn } from \"../ha-picker-combo-box\";\nimport type { PickerValueRenderer } from \"../ha-picker-field\";\nimport \"../ha-svg-icon\";\nimport \"./state-badge\";\n\nconst CREATE_ID = \"___create-new-entity___\";\n\n@customElement(\"ha-entity-picker\")\nexport class HaEntityPicker extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  // eslint-disable-next-line lit/no-native-attributes\n  @property({ type: Boolean }) public autofocus = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ type: Boolean, attribute: \"allow-custom-entity\" })\n  public allowCustomEntity;\n\n  @property({ type: Boolean, attribute: \"show-entity-id\" })\n  public showEntityId = false;\n\n  @property() public label?: string;\n\n  @property() public value?: string;\n\n  @property() public helper?: string;\n\n  @property() public placeholder?: string;\n\n  @property({ type: String, attribute: \"search-label\" })\n  public searchLabel?: string;\n\n  @property({ attribute: false, type: Array }) public createDomains?: string[];\n\n  /**\n   * Show entities from specific domains.\n   * @type {Array}\n   * @attr include-domains\n   */\n  @property({ type: Array, attribute: \"include-domains\" })\n  public includeDomains?: string[];\n\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n\n  /**\n   * Show only entities of these device classes.\n   * @type {Array}\n   * @attr include-device-classes\n   */\n  @property({ type: Array, attribute: \"include-device-classes\" })\n  public includeDeviceClasses?: string[];\n\n  /**\n   * Show only entities with these unit of measuments.\n   * @type {Array}\n   * @attr include-unit-of-measurement\n   */\n  @property({ type: Array, attribute: \"include-unit-of-measurement\" })\n  public includeUnitOfMeasurement?: string[];\n\n  /**\n   * List of allowed entities to show.\n   * @type {Array}\n   * @attr include-entities\n   */\n  @property({ type: Array, attribute: \"include-entities\" })\n  public includeEntities?: string[];\n\n  /**\n   * List of entities to be excluded.\n   * @type {Array}\n   * @attr exclude-entities\n   */\n  @property({ type: Array, attribute: \"exclude-entities\" })\n  public excludeEntities?: string[];\n\n  @property({ attribute: false })\n  public entityFilter?: HaEntityPickerEntityFilterFunc;\n\n  @property({ attribute: \"hide-clear-icon\", type: Boolean })\n  public hideClearIcon = false;\n\n  @property({ attribute: \"add-button\", type: Boolean })\n  public addButton = false;\n\n  @query(\"ha-generic-picker\") private _picker?: HaGenericPicker;\n\n  protected firstUpdated(changedProperties: PropertyValues): void {\n    super.firstUpdated(changedProperties);\n    // Load title translations so it is available when the combo-box opens\n    this.hass.loadBackendTranslation(\"title\");\n  }\n\n  private _valueRenderer: PickerValueRenderer = (value) => {\n    const entityId = value || \"\";\n\n    const stateObj = this.hass.states[entityId];\n\n    if (!stateObj) {\n      return html`\n        <ha-svg-icon\n          slot=\"start\"\n          .path=${mdiShape}\n          style=\"margin: 0 4px\"\n        ></ha-svg-icon>\n        <span slot=\"headline\">${entityId}</span>\n      `;\n    }\n\n    const [entityName, deviceName, areaName] = computeEntityNameList(\n      stateObj,\n      [{ type: \"entity\" }, { type: \"device\" }, { type: \"area\" }],\n      this.hass.entities,\n      this.hass.devices,\n      this.hass.areas,\n      this.hass.floors\n    );\n\n    const isRTL = computeRTL(this.hass);\n\n    const primary = entityName || deviceName || entityId;\n    const secondary = [areaName, entityName ? deviceName : undefined]\n      .filter(Boolean)\n      .join(isRTL ? \" ◂ \" : \" ▸ \");\n\n    return html`\n      <state-badge\n        .hass=${this.hass}\n        .stateObj=${stateObj}\n        slot=\"start\"\n      ></state-badge>\n      <span slot=\"headline\">${primary}</span>\n      <span slot=\"supporting-text\">${secondary}</span>\n    `;\n  };\n\n  private get _showEntityId() {\n    return this.showEntityId || this.hass.userData?.showEntityIdPicker;\n  }\n\n  private _rowRenderer: ComboBoxLitRenderer<EntityComboBoxItem> = (\n    item,\n    { index }\n  ) => {\n    const showEntityId = this._showEntityId;\n\n    return html`\n      <ha-combo-box-item type=\"button\" compact .borderTop=${index !== 0}>\n        ${item.icon_path\n          ? html`\n              <ha-svg-icon\n                slot=\"start\"\n                style=\"margin: 0 4px\"\n                .path=${item.icon_path}\n              ></ha-svg-icon>\n            `\n          : html`\n              <state-badge\n                slot=\"start\"\n                .stateObj=${item.stateObj}\n                .hass=${this.hass}\n              ></state-badge>\n            `}\n        <span slot=\"headline\">${item.primary}</span>\n        ${item.secondary\n          ? html`<span slot=\"supporting-text\">${item.secondary}</span>`\n          : nothing}\n        ${item.stateObj && showEntityId\n          ? html`\n              <span slot=\"supporting-text\" class=\"code\">\n                ${item.stateObj.entity_id}\n              </span>\n            `\n          : nothing}\n        ${item.domain_name && !showEntityId\n          ? html`\n              <div slot=\"trailing-supporting-text\" class=\"domain\">\n                ${item.domain_name}\n              </div>\n            `\n          : nothing}\n      </ha-combo-box-item>\n    `;\n  };\n\n  private _getAdditionalItems = () =>\n    this._getCreateItems(this.hass.localize, this.createDomains);\n\n  private _getCreateItems = memoizeOne(\n    (\n      localize: this[\"hass\"][\"localize\"],\n      createDomains: this[\"createDomains\"]\n    ) => {\n      if (!createDomains?.length) {\n        return [];\n      }\n\n      return createDomains.map((domain) => {\n        const primary = localize(\n          \"ui.components.entity.entity-picker.create_helper\",\n          {\n            domain: isHelperDomain(domain)\n              ? localize(\n                  `ui.panel.config.helpers.types.${domain as HelperDomain}`\n                )\n              : domainToName(localize, domain),\n          }\n        );\n\n        return {\n          id: CREATE_ID + domain,\n          primary: primary,\n          secondary: localize(\"ui.components.entity.entity-picker.new_entity\"),\n          icon_path: mdiPlus,\n        } satisfies EntityComboBoxItem;\n      });\n    }\n  );\n\n  private _getEntitiesMemoized = memoizeOne(getEntities);\n\n  private _getItems = () =>\n    this._getEntitiesMemoized(\n      this.hass,\n      this.includeDomains,\n      this.excludeDomains,\n      this.entityFilter,\n      this.includeDeviceClasses,\n      this.includeUnitOfMeasurement,\n      this.includeEntities,\n      this.excludeEntities,\n      this.value\n    );\n\n  protected render() {\n    const placeholder =\n      this.placeholder ??\n      this.hass.localize(\"ui.components.entity.entity-picker.placeholder\");\n\n    return html`\n      <ha-generic-picker\n        .hass=${this.hass}\n        .disabled=${this.disabled}\n        .autofocus=${this.autofocus}\n        .allowCustomValue=${this.allowCustomEntity}\n        .label=${this.label}\n        .helper=${this.helper}\n        .searchLabel=${this.searchLabel}\n        .notFoundLabel=${this._notFoundLabel}\n        .placeholder=${placeholder}\n        .value=${this.addButton ? undefined : this.value}\n        .rowRenderer=${this._rowRenderer}\n        .getItems=${this._getItems}\n        .getAdditionalItems=${this._getAdditionalItems}\n        .hideClearIcon=${this.hideClearIcon}\n        .searchFn=${this._searchFn}\n        .valueRenderer=${this._valueRenderer}\n        @value-changed=${this._valueChanged}\n        .addButtonLabel=${this.addButton\n          ? this.hass.localize(\"ui.components.entity.entity-picker.add\")\n          : undefined}\n      >\n      </ha-generic-picker>\n    `;\n  }\n\n  private _searchFn: PickerComboBoxSearchFn<EntityComboBoxItem> = (\n    search,\n    filteredItems\n  ) => {\n    // If there is exact match for entity id, put it first\n    const index = filteredItems.findIndex(\n      (item) => item.stateObj?.entity_id === search\n    );\n    if (index === -1) {\n      return filteredItems;\n    }\n\n    const [exactMatch] = filteredItems.splice(index, 1);\n    filteredItems.unshift(exactMatch);\n    return filteredItems;\n  };\n\n  public async open() {\n    await this.updateComplete;\n    await this._picker?.open();\n  }\n\n  private _valueChanged(ev) {\n    ev.stopPropagation();\n    const value = ev.detail.value;\n\n    if (!value) {\n      this._setValue(undefined);\n      return;\n    }\n\n    if (value.startsWith(CREATE_ID)) {\n      const domain = value.substring(CREATE_ID.length);\n\n      showHelperDetailDialog(this, {\n        domain,\n        dialogClosedCallback: (item) => {\n          if (item.entityId) this._setValue(item.entityId);\n        },\n      });\n      return;\n    }\n\n    if (!isValidEntityId(value)) {\n      return;\n    }\n\n    this._setValue(value);\n  }\n\n  private _setValue(value: string | undefined) {\n    this.value = value;\n\n    fireEvent(this, \"value-changed\", { value });\n    fireEvent(this, \"change\");\n  }\n\n  private _notFoundLabel = (search: string) =>\n    this.hass.localize(\"ui.components.entity.entity-picker.no_match\", {\n      term: html`<b>‘${search}’</b>`,\n    });\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entity-picker\": HaEntityPicker;\n  }\n}\n","import type { HaFormSchema } from \"../components/ha-form/types\";\nimport type { HomeAssistant } from \"../types\";\nimport type { RefreshTokenType } from \"./refresh_token\";\n\nexport interface AuthUrlSearchParams {\n  client_id?: string;\n  redirect_uri?: string;\n  state?: string;\n}\n\nexport interface AuthProvider {\n  name: string;\n  id: string;\n  type: string;\n  users?: Record<string, string>;\n}\n\nexport interface Credential {\n  type: string;\n}\n\nexport interface SignedPath {\n  path: string;\n}\n\nexport const hassUrl = __HASS_URL__;\n\nexport const autocompleteLoginFields = (schema: HaFormSchema[]) =>\n  schema.map((field) => {\n    if (field.type !== \"string\") return field;\n    switch (field.name) {\n      case \"username\":\n        return { ...field, autocomplete: \"username\", autofocus: true };\n      case \"password\":\n        return { ...field, autocomplete: \"current-password\" };\n      case \"code\":\n        return { ...field, autocomplete: \"one-time-code\", autofocus: true };\n      default:\n        return field;\n    }\n  });\n\nexport const getSignedPath = (\n  hass: HomeAssistant,\n  path: string\n): Promise<SignedPath> => hass.callWS({ type: \"auth/sign_path\", path });\n\nexport const fetchAuthProviders = () =>\n  fetch(\"/auth/providers\", {\n    credentials: \"same-origin\",\n  });\n\nexport const createLoginFlow = (\n  client_id: string | undefined,\n  redirect_uri: string | undefined,\n  handler: (string | null)[]\n) =>\n  fetch(\"/auth/login_flow\", {\n    method: \"POST\",\n    credentials: \"same-origin\",\n    body: JSON.stringify({\n      client_id,\n      handler,\n      redirect_uri,\n    }),\n  });\n\nexport const submitLoginFlow = (flow_id: string, data: Record<string, any>) =>\n  fetch(`/auth/login_flow/${flow_id}`, {\n    method: \"POST\",\n    credentials: \"same-origin\",\n    body: JSON.stringify(data),\n  });\n\nexport const deleteLoginFlow = (flow_id) =>\n  fetch(`/auth/login_flow/${flow_id}`, {\n    method: \"DELETE\",\n    credentials: \"same-origin\",\n  });\n\nexport const redirectWithAuthCode = (\n  url: string,\n  authCode: string,\n  oauth2State: string | undefined,\n  storeToken: boolean\n) => {\n  // OAuth 2: 3.1.2 we need to retain query component of a redirect URI\n  if (!url.includes(\"?\")) {\n    url += \"?\";\n  } else if (!url.endsWith(\"&\")) {\n    url += \"&\";\n  }\n\n  url += `code=${encodeURIComponent(authCode)}`;\n\n  if (oauth2State) {\n    url += `&state=${encodeURIComponent(oauth2State)}`;\n  }\n  if (storeToken) {\n    url += `&storeToken=true`;\n  }\n\n  document.location.assign(url);\n};\n\nexport const createAuthForUser = async (\n  hass: HomeAssistant,\n  userId: string,\n  username: string,\n  password: string\n) =>\n  hass.callWS({\n    type: \"config/auth_provider/homeassistant/create\",\n    user_id: userId,\n    username,\n    password,\n  });\n\nexport const changePassword = (\n  hass: HomeAssistant,\n  current_password: string,\n  new_password: string\n) =>\n  hass.callWS({\n    type: \"config/auth_provider/homeassistant/change_password\",\n    current_password,\n    new_password,\n  });\n\nexport const adminChangePassword = (\n  hass: HomeAssistant,\n  userId: string,\n  password: string\n) =>\n  hass.callWS<undefined>({\n    type: \"config/auth_provider/homeassistant/admin_change_password\",\n    user_id: userId,\n    password,\n  });\n\nexport const adminChangeUsername = (\n  hass: HomeAssistant,\n  userId: string,\n  username: string\n) =>\n  hass.callWS<undefined>({\n    type: \"config/auth_provider/homeassistant/admin_change_username\",\n    user_id: userId,\n    username,\n  });\n\nexport const deleteAllRefreshTokens = (\n  hass: HomeAssistant,\n  token_type?: RefreshTokenType,\n  delete_current_token?: boolean\n) =>\n  hass.callWS({\n    type: \"auth/delete_all_refresh_tokens\",\n    token_type,\n    delete_current_token,\n  });\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport { arrayLiteralIncludes } from \"../common/array/literal-includes\";\n\nexport const UNAVAILABLE = \"unavailable\";\nexport const UNKNOWN = \"unknown\";\nexport const ON = \"on\";\nexport const OFF = \"off\";\n\nexport const UNAVAILABLE_STATES = [UNAVAILABLE, UNKNOWN] as const;\nexport const OFF_STATES = [UNAVAILABLE, UNKNOWN, OFF] as const;\n\nexport const isUnavailableState = arrayLiteralIncludes(UNAVAILABLE_STATES);\nexport const isOffState = arrayLiteralIncludes(OFF_STATES);\n\nexport type HaEntityPickerEntityFilterFunc = (entityId: HassEntity) => boolean;\n","import type { Connection, HassEntity } from \"home-assistant-js-websocket\";\nimport { createCollection } from \"home-assistant-js-websocket\";\nimport type { Store } from \"home-assistant-js-websocket/dist/store\";\nimport memoizeOne from \"memoize-one\";\nimport { computeDomain } from \"../common/entity/compute_domain\";\nimport { computeEntityNameList } from \"../common/entity/compute_entity_name_display\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\nimport { caseInsensitiveStringCompare } from \"../common/string/compare\";\nimport { computeRTL } from \"../common/util/compute_rtl\";\nimport { debounce } from \"../common/util/debounce\";\nimport type { PickerComboBoxItem } from \"../components/ha-picker-combo-box\";\nimport type { HomeAssistant } from \"../types\";\nimport type { HaEntityPickerEntityFilterFunc } from \"./entity\";\nimport { domainToName } from \"./integration\";\nimport type { LightColor } from \"./light\";\nimport type { RegistryEntry } from \"./registry\";\n\ntype EntityCategory = \"config\" | \"diagnostic\";\n\nexport interface EntityRegistryDisplayEntry {\n  entity_id: string;\n  name?: string;\n  icon?: string;\n  device_id?: string;\n  area_id?: string;\n  labels: string[];\n  hidden?: boolean;\n  entity_category?: EntityCategory;\n  translation_key?: string;\n  platform?: string;\n  display_precision?: number;\n  has_entity_name?: boolean;\n}\n\nexport interface EntityRegistryDisplayEntryResponse {\n  entities: {\n    ei: string;\n    di?: string;\n    ai?: string;\n    lb: string[];\n    ec?: number;\n    en?: string;\n    ic?: string;\n    pl?: string;\n    tk?: string;\n    hb?: boolean;\n    dp?: number;\n    hn?: boolean;\n  }[];\n  entity_categories: Record<number, EntityCategory>;\n}\n\nexport interface EntityRegistryEntry extends RegistryEntry {\n  id: string;\n  entity_id: string;\n  name: string | null;\n  icon: string | null;\n  platform: string;\n  config_entry_id: string | null;\n  config_subentry_id: string | null;\n  device_id: string | null;\n  area_id: string | null;\n  labels: string[];\n  disabled_by: \"user\" | \"device\" | \"integration\" | \"config_entry\" | null;\n  hidden_by: Exclude<EntityRegistryEntry[\"disabled_by\"], \"config_entry\">;\n  entity_category: EntityCategory | null;\n  has_entity_name: boolean;\n  original_name?: string;\n  unique_id: string;\n  translation_key?: string;\n  options: EntityRegistryOptions | null;\n  categories: Record<string, string>;\n}\n\nexport interface ExtEntityRegistryEntry extends EntityRegistryEntry {\n  capabilities: Record<string, unknown>;\n  original_icon?: string;\n  device_class?: string;\n  original_device_class?: string;\n  aliases: string[];\n}\n\nexport interface UpdateEntityRegistryEntryResult {\n  entity_entry: ExtEntityRegistryEntry;\n  reload_delay?: number;\n  require_restart?: boolean;\n}\n\nexport interface SensorEntityOptions {\n  display_precision?: number | null;\n  suggested_display_precision?: number | null;\n  unit_of_measurement?: string | null;\n}\n\nexport interface LightEntityOptions {\n  favorite_colors?: LightColor[];\n}\n\nexport interface NumberEntityOptions {\n  unit_of_measurement?: string | null;\n}\n\nexport interface LockEntityOptions {\n  default_code?: string | null;\n}\n\nexport interface AlarmControlPanelEntityOptions {\n  default_code?: string | null;\n}\n\nexport interface WeatherEntityOptions {\n  precipitation_unit?: string | null;\n  pressure_unit?: string | null;\n  temperature_unit?: string | null;\n  visibility_unit?: string | null;\n  wind_speed_unit?: string | null;\n}\n\nexport interface SwitchAsXEntityOptions {\n  entity_id: string;\n  invert: boolean;\n}\n\nexport interface EntityRegistryOptions {\n  number?: NumberEntityOptions;\n  sensor?: SensorEntityOptions;\n  alarm_control_panel?: AlarmControlPanelEntityOptions;\n  lock?: LockEntityOptions;\n  weather?: WeatherEntityOptions;\n  light?: LightEntityOptions;\n  switch_as_x?: SwitchAsXEntityOptions;\n  conversation?: Record<string, unknown>;\n  \"cloud.alexa\"?: Record<string, unknown>;\n  \"cloud.google_assistant\"?: Record<string, unknown>;\n}\n\nexport interface EntityRegistryEntryUpdateParams {\n  name?: string | null;\n  icon?: string | null;\n  device_class?: string | null;\n  area_id?: string | null;\n  disabled_by?: string | null;\n  hidden_by: string | null;\n  new_entity_id?: string;\n  options_domain?: string;\n  options?:\n    | SensorEntityOptions\n    | NumberEntityOptions\n    | LockEntityOptions\n    | AlarmControlPanelEntityOptions\n    | WeatherEntityOptions\n    | LightEntityOptions;\n  aliases?: string[];\n  labels?: string[];\n  categories?: Record<string, string | null>;\n}\n\nconst batteryPriorities = [\"sensor\", \"binary_sensor\"];\nexport const findBatteryEntity = <T extends { entity_id: string }>(\n  hass: HomeAssistant,\n  entities: T[]\n): T | undefined => {\n  const batteryEntities = entities\n    .filter(\n      (entity) =>\n        hass.states[entity.entity_id] &&\n        hass.states[entity.entity_id].attributes.device_class === \"battery\" &&\n        batteryPriorities.includes(computeDomain(entity.entity_id))\n    )\n    .sort(\n      (a, b) =>\n        batteryPriorities.indexOf(computeDomain(a.entity_id)) -\n        batteryPriorities.indexOf(computeDomain(b.entity_id))\n    );\n  if (batteryEntities.length > 0) {\n    return batteryEntities[0];\n  }\n\n  return undefined;\n};\n\nexport const findBatteryChargingEntity = <T extends { entity_id: string }>(\n  hass: HomeAssistant,\n  entities: T[]\n): T | undefined =>\n  entities.find(\n    (entity) =>\n      hass.states[entity.entity_id] &&\n      hass.states[entity.entity_id].attributes.device_class ===\n        \"battery_charging\"\n  );\n\nexport const computeEntityRegistryName = (\n  hass: HomeAssistant,\n  entry: EntityRegistryEntry\n): string | null => {\n  if (entry.name) {\n    return entry.name;\n  }\n  const state = hass.states[entry.entity_id];\n  if (state) {\n    return computeStateName(state);\n  }\n  return entry.original_name ? entry.original_name : entry.entity_id;\n};\n\nexport const getExtendedEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<ExtEntityRegistryEntry> =>\n  hass.callWS({\n    type: \"config/entity_registry/get\",\n    entity_id: entityId,\n  });\n\nexport const getExtendedEntityRegistryEntries = (\n  hass: HomeAssistant,\n  entityIds: string[]\n): Promise<Record<string, ExtEntityRegistryEntry>> =>\n  hass.callWS({\n    type: \"config/entity_registry/get_entries\",\n    entity_ids: entityIds,\n  });\n\nexport const updateEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string,\n  updates: Partial<EntityRegistryEntryUpdateParams>\n): Promise<UpdateEntityRegistryEntryResult> =>\n  hass.callWS({\n    type: \"config/entity_registry/update\",\n    entity_id: entityId,\n    ...updates,\n  });\n\nexport const removeEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"config/entity_registry/remove\",\n    entity_id: entityId,\n  });\n\nexport const fetchEntityRegistry = (conn: Connection) =>\n  conn.sendMessagePromise<EntityRegistryEntry[]>({\n    type: \"config/entity_registry/list\",\n  });\n\nexport const fetchEntityRegistryDisplay = (conn: Connection) =>\n  conn.sendMessagePromise<EntityRegistryDisplayEntryResponse>({\n    type: \"config/entity_registry/list_for_display\",\n  });\n\nconst subscribeEntityRegistryUpdates = (\n  conn: Connection,\n  store: Store<EntityRegistryEntry[]>\n) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchEntityRegistry(conn).then((entities) =>\n          store.setState(entities, true)\n        ),\n      500,\n      true\n    ),\n    \"entity_registry_updated\"\n  );\n\nexport const subscribeEntityRegistry = (\n  conn: Connection,\n  onChange: (entities: EntityRegistryEntry[]) => void\n) =>\n  createCollection<EntityRegistryEntry[]>(\n    \"_entityRegistry\",\n    fetchEntityRegistry,\n    subscribeEntityRegistryUpdates,\n    conn,\n    onChange\n  );\n\nexport const sortEntityRegistryByName = (\n  entries: EntityRegistryEntry[],\n  language: string\n) =>\n  entries.sort((entry1, entry2) =>\n    caseInsensitiveStringCompare(entry1.name || \"\", entry2.name || \"\", language)\n  );\n\nexport const entityRegistryByEntityId = memoizeOne(\n  (entries: EntityRegistryEntry[]) => {\n    const entities: Record<string, EntityRegistryEntry> = {};\n    for (const entity of entries) {\n      entities[entity.entity_id] = entity;\n    }\n    return entities;\n  }\n);\n\nexport const entityRegistryById = memoizeOne(\n  (entries: EntityRegistryEntry[]) => {\n    const entities: Record<string, EntityRegistryEntry> = {};\n    for (const entity of entries) {\n      entities[entity.id] = entity;\n    }\n    return entities;\n  }\n);\n\nexport const getEntityPlatformLookup = (\n  entities: EntityRegistryEntry[]\n): Record<string, string> => {\n  const entityLookup = {};\n  for (const confEnt of entities) {\n    if (!confEnt.platform) {\n      continue;\n    }\n    entityLookup[confEnt.entity_id] = confEnt.platform;\n  }\n  return entityLookup;\n};\n\nexport const getAutomaticEntityIds = (\n  hass: HomeAssistant,\n  entity_ids: string[]\n) =>\n  hass.callWS<Record<string, string | null>>({\n    type: \"config/entity_registry/get_automatic_entity_ids\",\n    entity_ids,\n  });\n\nexport interface EntityComboBoxItem extends PickerComboBoxItem {\n  domain_name?: string;\n  stateObj?: HassEntity;\n}\n\nexport const getEntities = (\n  hass: HomeAssistant,\n  includeDomains?: string[],\n  excludeDomains?: string[],\n  entityFilter?: HaEntityPickerEntityFilterFunc,\n  includeDeviceClasses?: string[],\n  includeUnitOfMeasurement?: string[],\n  includeEntities?: string[],\n  excludeEntities?: string[],\n  value?: string,\n  idPrefix = \"\"\n): EntityComboBoxItem[] => {\n  let items: EntityComboBoxItem[] = [];\n\n  let entityIds = Object.keys(hass.states);\n\n  if (includeEntities) {\n    entityIds = entityIds.filter((entityId) =>\n      includeEntities.includes(entityId)\n    );\n  }\n\n  if (excludeEntities) {\n    entityIds = entityIds.filter(\n      (entityId) => !excludeEntities.includes(entityId)\n    );\n  }\n\n  if (includeDomains) {\n    entityIds = entityIds.filter((eid) =>\n      includeDomains.includes(computeDomain(eid))\n    );\n  }\n\n  if (excludeDomains) {\n    entityIds = entityIds.filter(\n      (eid) => !excludeDomains.includes(computeDomain(eid))\n    );\n  }\n\n  items = entityIds.map<EntityComboBoxItem>((entityId) => {\n    const stateObj = hass.states[entityId];\n\n    const friendlyName = computeStateName(stateObj); // Keep this for search\n    const [entityName, deviceName, areaName] = computeEntityNameList(\n      stateObj,\n      [{ type: \"entity\" }, { type: \"device\" }, { type: \"area\" }],\n      hass.entities,\n      hass.devices,\n      hass.areas,\n      hass.floors\n    );\n\n    const domainName = domainToName(hass.localize, computeDomain(entityId));\n\n    const isRTL = computeRTL(hass);\n\n    const primary = entityName || deviceName || entityId;\n    const secondary = [areaName, entityName ? deviceName : undefined]\n      .filter(Boolean)\n      .join(isRTL ? \" ◂ \" : \" ▸ \");\n\n    return {\n      id: `${idPrefix}${entityId}`,\n      primary: primary,\n      secondary: secondary,\n      domain_name: domainName,\n      sorting_label: [deviceName, entityName].filter(Boolean).join(\"_\"),\n      search_labels: [\n        entityName,\n        deviceName,\n        areaName,\n        domainName,\n        friendlyName,\n        entityId,\n      ].filter(Boolean) as string[],\n      stateObj: stateObj,\n    };\n  });\n\n  if (includeDeviceClasses) {\n    items = items.filter(\n      (item) =>\n        // We always want to include the entity of the current value\n        item.id === value ||\n        (item.stateObj?.attributes.device_class &&\n          includeDeviceClasses.includes(item.stateObj.attributes.device_class))\n    );\n  }\n\n  if (includeUnitOfMeasurement) {\n    items = items.filter(\n      (item) =>\n        // We always want to include the entity of the current value\n        item.id === value ||\n        (item.stateObj?.attributes.unit_of_measurement &&\n          includeUnitOfMeasurement.includes(\n            item.stateObj.attributes.unit_of_measurement\n          ))\n    );\n  }\n\n  if (entityFilter) {\n    items = items.filter(\n      (item) =>\n        // We always want to include the entity of the current value\n        item.id === value || (item.stateObj && entityFilter!(item.stateObj))\n    );\n  }\n\n  return items;\n};\n","import { fireEvent } from \"../../../common/dom/fire_event\";\n\nexport const loadHelperDetailDialog = () => import(\"./dialog-helper-detail\");\n\nexport interface ShowDialogHelperDetailParams {\n  domain?: string;\n  dialogClosedCallback?: (params: {\n    flowFinished: boolean;\n    entryId?: string;\n    entityId?: string;\n  }) => void;\n}\n\nexport const showHelperDetailDialog = (\n  element: HTMLElement,\n  params: ShowDialogHelperDetailParams\n) => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-helper-detail\",\n    dialogImport: loadHelperDetailDialog,\n    dialogParams: params,\n  });\n};\n"],"names":["SUFFIXES","hasUpperCase","str","toLowerCase","computeEntityName","stateObj","entities","devices","entry","entity_id","computeEntityEntryName","computeStateName","fallbackStateObj","name","original_name","String","undefined","device","device_id","deviceName","computeDeviceName","entityName","prefix","lowerCasedEntityName","lowerCasedPrefix","_i","_SUFFIXES","length","suffix","lowerCasedPrefixWithSuffix","concat","startsWith","newName","substring","substr","indexOf","toUpperCase","slice","stripPrefixFromEntityName","computeEntityNameList","areas","floors","_getEntityContext","getEntityContext","area","floor","map","item","type","computeAreaName","computeFloorName","text","validEntityId","isValidEntityId","entityId","test","computeRTL","hass","lang","language","translationMetadata","translations","isRTL","computeRTLDirection","emitRTLDirection","rtl","CREATE_ID","HaEntityPicker","_LitElement","_this","_callSuper","args","autofocus","disabled","required","showEntityId","hideClearIcon","addButton","_valueRenderer","value","states","html","_templateObject","_taggedTemplateLiteral","_computeEntityNameLis","_computeEntityNameLis2","_slicedToArray","areaName","primary","secondary","filter","Boolean","join","_templateObject2","_rowRenderer","_ref","index","_showEntityId","_templateObject3","icon_path","_templateObject4","_templateObject5","_templateObject6","nothing","_templateObject7","domain_name","_templateObject8","_getAdditionalItems","_getCreateItems","localize","createDomains","memoizeOne","domain","isHelperDomain","domainToName","id","_getEntitiesMemoized","getEntities","_getItems","includeDomains","excludeDomains","entityFilter","includeDeviceClasses","includeUnitOfMeasurement","includeEntities","excludeEntities","_searchFn","search","filteredItems","findIndex","_item$stateObj","_filteredItems$splice","splice","exactMatch","unshift","_notFoundLabel","term","_templateObject9","changedProperties","_superPropGet","this","loadBackendTranslation","key","get","_this$hass$userData","userData","showEntityIdPicker","_this$placeholder","placeholder","_templateObject0","allowCustomEntity","label","helper","searchLabel","_valueChanged","_open","_asyncToGenerator","_regenerator","m","_callee","_this$_picker","w","_context","n","updateComplete","_picker","open","a","apply","arguments","ev","_this2","stopPropagation","detail","showHelperDetailDialog","dialogClosedCallback","_setValue","fireEvent","LitElement","attribute","Array","autocompleteLoginFields","schema","field","Object","assign","autocomplete","getSignedPath","path","callWS","UNAVAILABLE","UNKNOWN","ON","OFF","UNAVAILABLE_STATES","OFF_STATES","isUnavailableState","arrayLiteralIncludes","computeEntityRegistryName","state","getExtendedEntityRegistryEntry","getExtendedEntityRegistryEntries","entityIds","entity_ids","updateEntityRegistryEntry","updates","fetchEntityRegistry","conn","sendMessagePromise","subscribeEntityRegistryUpdates","store","subscribeEvents","debounce","then","setState","subscribeEntityRegistry","onChange","createCollection","entityRegistryByEntityId","entries","_step","_iterator","_createForOfIteratorHelper","s","done","entity","err","e","f","entityRegistryById","_step2","_iterator2","getAutomaticEntityIds","idPrefix","items","keys","includes","eid","computeDomain","friendlyName","domainName","sorting_label","search_labels","attributes","device_class","_item$stateObj2","unit_of_measurement","loadHelperDetailDialog","element","params","dialogTag","dialogImport","dialogParams"],"mappings":"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"}