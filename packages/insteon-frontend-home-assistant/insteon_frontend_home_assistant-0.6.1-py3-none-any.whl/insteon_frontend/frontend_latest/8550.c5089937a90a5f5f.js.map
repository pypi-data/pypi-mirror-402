{"version":3,"file":"8550.c5089937a90a5f5f.js","sources":["webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-expansion-panel.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-form/ha-form-expandable.ts"],"sourcesContent":["import { mdiChevronDown } from \"@mdi/js\";\nimport type { PropertyValues, TemplateResult } from \"lit\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { nextRender } from \"../common/util/render-status\";\nimport \"./ha-svg-icon\";\n\n@customElement(\"ha-expansion-panel\")\nexport class HaExpansionPanel extends LitElement {\n  @property({ type: Boolean, reflect: true }) expanded = false;\n\n  @property({ type: Boolean, reflect: true }) outlined = false;\n\n  @property({ attribute: \"left-chevron\", type: Boolean, reflect: true })\n  public leftChevron = false;\n\n  @property({ attribute: \"no-collapse\", type: Boolean, reflect: true })\n  public noCollapse = false;\n\n  @property() header?: string;\n\n  @property() secondary?: string;\n\n  @state() _showContent = this.expanded;\n\n  @query(\".container\") private _container!: HTMLDivElement;\n\n  protected render(): TemplateResult {\n    const chevronIcon = this.noCollapse\n      ? nothing\n      : html`\n          <ha-svg-icon\n            .path=${mdiChevronDown}\n            class=\"summary-icon ${classMap({ expanded: this.expanded })}\"\n          ></ha-svg-icon>\n        `;\n    return html`\n      <div class=\"top ${classMap({ expanded: this.expanded })}\">\n        <div\n          id=\"summary\"\n          class=${classMap({ noCollapse: this.noCollapse })}\n          @click=${this._toggleContainer}\n          @keydown=${this._toggleContainer}\n          @focus=${this._focusChanged}\n          @blur=${this._focusChanged}\n          role=\"button\"\n          tabindex=${this.noCollapse ? -1 : 0}\n          aria-expanded=${this.expanded}\n          aria-controls=\"sect1\"\n          part=\"summary\"\n        >\n          ${this.leftChevron ? chevronIcon : nothing}\n          <slot name=\"leading-icon\"></slot>\n          <slot name=\"header\">\n            <div class=\"header\">\n              ${this.header}\n              <slot class=\"secondary\" name=\"secondary\">${this.secondary}</slot>\n            </div>\n          </slot>\n          ${!this.leftChevron ? chevronIcon : nothing}\n          <slot name=\"icons\"></slot>\n        </div>\n      </div>\n      <div\n        class=\"container ${classMap({ expanded: this.expanded })}\"\n        @transitionend=${this._handleTransitionEnd}\n        role=\"region\"\n        aria-labelledby=\"summary\"\n        aria-hidden=${!this.expanded}\n        tabindex=\"-1\"\n      >\n        ${this._showContent ? html`<slot></slot>` : \"\"}\n      </div>\n    `;\n  }\n\n  protected willUpdate(changedProps: PropertyValues) {\n    super.willUpdate(changedProps);\n    if (changedProps.has(\"expanded\")) {\n      this._showContent = this.expanded;\n      setTimeout(() => {\n        // Verify we're still expanded\n        this._container.style.overflow = this.expanded ? \"initial\" : \"hidden\";\n      }, 300);\n    }\n  }\n\n  private _handleTransitionEnd() {\n    this._container.style.removeProperty(\"height\");\n    this._container.style.overflow = this.expanded ? \"initial\" : \"hidden\";\n    this._showContent = this.expanded;\n  }\n\n  private async _toggleContainer(ev): Promise<void> {\n    if (ev.defaultPrevented) {\n      return;\n    }\n    if (ev.type === \"keydown\" && ev.key !== \"Enter\" && ev.key !== \" \") {\n      return;\n    }\n    ev.preventDefault();\n    if (this.noCollapse) {\n      return;\n    }\n    const newExpanded = !this.expanded;\n    fireEvent(this, \"expanded-will-change\", { expanded: newExpanded });\n    this._container.style.overflow = \"hidden\";\n\n    if (newExpanded) {\n      this._showContent = true;\n      // allow for dynamic content to be rendered\n      await nextRender();\n    }\n\n    const scrollHeight = this._container.scrollHeight;\n    this._container.style.height = `${scrollHeight}px`;\n\n    if (!newExpanded) {\n      setTimeout(() => {\n        this._container.style.height = \"0px\";\n      }, 0);\n    }\n\n    this.expanded = newExpanded;\n    fireEvent(this, \"expanded-changed\", { expanded: this.expanded });\n  }\n\n  private _focusChanged(ev) {\n    if (this.noCollapse) {\n      return;\n    }\n    this.shadowRoot!.querySelector(\".top\")!.classList.toggle(\n      \"focused\",\n      ev.type === \"focus\"\n    );\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n    }\n\n    .top {\n      display: flex;\n      align-items: center;\n      border-radius: var(--ha-card-border-radius, var(--ha-border-radius-lg));\n    }\n\n    .top.expanded {\n      border-bottom-left-radius: 0px;\n      border-bottom-right-radius: 0px;\n    }\n\n    .top.focused {\n      background: var(--input-fill-color);\n    }\n\n    :host([outlined]) {\n      box-shadow: none;\n      border-width: 1px;\n      border-style: solid;\n      border-color: var(--outline-color);\n      border-radius: var(--ha-card-border-radius, var(--ha-border-radius-lg));\n    }\n\n    .summary-icon {\n      transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);\n      direction: var(--direction);\n      margin-left: 8px;\n      margin-inline-start: 8px;\n      margin-inline-end: initial;\n      border-radius: var(--ha-border-radius-circle);\n    }\n\n    #summary:focus-visible ha-svg-icon.summary-icon {\n      background-color: var(--ha-color-fill-neutral-normal-active);\n    }\n\n    :host([left-chevron]) .summary-icon,\n    ::slotted([slot=\"leading-icon\"]) {\n      margin-left: 0;\n      margin-right: 8px;\n      margin-inline-start: 0;\n      margin-inline-end: 8px;\n    }\n\n    #summary {\n      flex: 1;\n      display: flex;\n      padding: var(--expansion-panel-summary-padding, 0 8px);\n      min-height: 48px;\n      align-items: center;\n      cursor: pointer;\n      overflow: hidden;\n      font-weight: var(--ha-font-weight-medium);\n      outline: none;\n    }\n    #summary.noCollapse {\n      cursor: default;\n    }\n\n    .summary-icon.expanded {\n      transform: rotate(180deg);\n    }\n\n    .header,\n    ::slotted([slot=\"header\"]) {\n      flex: 1;\n      overflow-wrap: anywhere;\n      color: var(--primary-text-color);\n    }\n\n    .container {\n      padding: var(--expansion-panel-content-padding, 0 8px);\n      overflow: hidden;\n      transition: height 300ms cubic-bezier(0.4, 0, 0.2, 1);\n      height: 0px;\n    }\n\n    .container.expanded {\n      height: auto;\n    }\n\n    .secondary {\n      display: block;\n      color: var(--secondary-text-color);\n      font-size: var(--ha-font-size-s);\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-expansion-panel\": HaExpansionPanel;\n  }\n\n  // for fire event\n  interface HASSDomEvents {\n    \"expanded-changed\": {\n      expanded: boolean;\n    };\n    \"expanded-will-change\": {\n      expanded: boolean;\n    };\n  }\n}\n","import { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"./ha-form\";\nimport \"../ha-expansion-panel\";\nimport type {\n  HaFormDataContainer,\n  HaFormElement,\n  HaFormExpandableSchema,\n  HaFormSchema,\n} from \"./types\";\n\n@customElement(\"ha-form-expandable\")\nexport class HaFormExpandable extends LitElement implements HaFormElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public data!: HaFormDataContainer;\n\n  @property({ attribute: false }) public schema!: HaFormExpandableSchema;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ attribute: false }) public computeLabel?: (\n    schema: HaFormSchema,\n    data?: HaFormDataContainer,\n    options?: { path?: string[] }\n  ) => string;\n\n  @property({ attribute: false }) public computeHelper?: (\n    schema: HaFormSchema,\n    options?: { path?: string[] }\n  ) => string;\n\n  @property({ attribute: false }) public localizeValue?: (\n    key: string\n  ) => string;\n\n  private _renderDescription() {\n    const description = this.computeHelper?.(this.schema);\n    return description ? html`<p>${description}</p>` : nothing;\n  }\n\n  private _computeLabel = (\n    schema: HaFormSchema,\n    data?: HaFormDataContainer,\n    options?: { path?: string[] }\n  ) => {\n    if (!this.computeLabel) return this.computeLabel;\n\n    return this.computeLabel(schema, data, {\n      ...options,\n      path: [...(options?.path || []), this.schema.name],\n    });\n  };\n\n  private _computeHelper = (\n    schema: HaFormSchema,\n    options?: { path?: string[] }\n  ) => {\n    if (!this.computeHelper) return this.computeHelper;\n\n    return this.computeHelper(schema, {\n      ...options,\n      path: [...(options?.path || []), this.schema.name],\n    });\n  };\n\n  protected render() {\n    return html`\n      <ha-expansion-panel outlined .expanded=${Boolean(this.schema.expanded)}>\n        ${this.schema.icon\n          ? html`\n              <ha-icon slot=\"leading-icon\" .icon=${this.schema.icon}></ha-icon>\n            `\n          : this.schema.iconPath\n            ? html`\n                <ha-svg-icon\n                  slot=\"leading-icon\"\n                  .path=${this.schema.iconPath}\n                ></ha-svg-icon>\n              `\n            : nothing}\n        <div\n          slot=\"header\"\n          role=\"heading\"\n          aria-level=${this.schema.headingLevel?.toString() ?? \"3\"}\n        >\n          ${this.schema.title || this.computeLabel?.(this.schema)}\n        </div>\n        <div class=\"content\">\n          ${this._renderDescription()}\n          <ha-form\n            .hass=${this.hass}\n            .data=${this.data}\n            .schema=${this.schema.schema}\n            .disabled=${this.disabled}\n            .computeLabel=${this._computeLabel}\n            .computeHelper=${this._computeHelper}\n            .localizeValue=${this.localizeValue}\n          ></ha-form>\n        </div>\n      </ha-expansion-panel>\n    `;\n  }\n\n  static styles = css`\n    :host {\n      display: flex !important;\n      flex-direction: column;\n    }\n    :host ha-form {\n      display: block;\n    }\n    .content {\n      padding: 12px;\n    }\n    .content p {\n      margin: 0 0 24px;\n    }\n    ha-expansion-panel {\n      display: block;\n      --expansion-panel-content-padding: 0;\n      border-radius: var(--ha-border-radius-md);\n      --ha-card-border-radius: var(--ha-border-radius-md);\n    }\n    ha-svg-icon,\n    ha-icon {\n      color: var(--secondary-text-color);\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-expandable\": HaFormExpandable;\n  }\n}\n"],"names":["HaExpansionPanel","LitElement","render","chevronIcon","noCollapse","nothing","html","classMap","expanded","_toggleContainer","_focusChanged","leftChevron","header","secondary","_handleTransitionEnd","_showContent","willUpdate","changedProps","super","has","this","setTimeout","_container","style","overflow","removeProperty","ev","defaultPrevented","type","key","preventDefault","newExpanded","fireEvent","nextRender","scrollHeight","height","shadowRoot","querySelector","classList","toggle","args","outlined","styles","css","Boolean","reflect","attribute","HaFormExpandable","_renderDescription","description","computeHelper","schema","icon","iconPath","headingLevel","toString","title","computeLabel","hass","data","disabled","_computeLabel","_computeHelper","localizeValue","options","path","name"],"mappings":"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"}