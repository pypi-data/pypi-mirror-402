{"version":3,"file":"dialog-device-add-x10.ea1b599a68efb434.js","sources":["webpack://insteon-frontend/./homeassistant-frontend/src/common/dom/stop_propagation.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-button.ts","webpack://insteon-frontend/./homeassistant-frontend/src/components/ha-tooltip.ts","webpack://insteon-frontend/./homeassistant-frontend/src/util/toast.ts","webpack://insteon-frontend/./src/data/config.ts","webpack://insteon-frontend/./src/data/device.ts","webpack://insteon-frontend/./src/device/dialog-device-add-x10.ts"],"sourcesContent":["export const stopPropagation = (ev) => ev.stopPropagation();\n","import Button from \"@home-assistant/webawesome/dist/components/button/button\";\nimport { css, type CSSResultGroup } from \"lit\";\nimport { customElement } from \"lit/decorators\";\n\nexport type Appearance = \"accent\" | \"filled\" | \"outlined\" | \"plain\";\n\n/**\n * Home Assistant button component\n *\n * @element ha-button\n * @extends {Button}\n *\n * @summary\n * A stylable button component supporting Home Assistant theming, variants, and appearances based on webawesome button.\n *\n * @slot - Label of the button\n * @slot start - The prefix container (usually for icons).\n * @slot end - The suffix container (usually for icons).\n *\n * @csspart base - The component's base wrapper.\n * @csspart start - The container that wraps the prefix.\n * @csspart label - The button's label.\n * @csspart end - The container that wraps the suffix.\n * @csspart caret - The button's caret icon, an `<sl-icon>` element.\n * @csspart spinner - The spinner that shows when the button is in the loading state.\n *\n * @cssprop --ha-button-height - The height of the button.\n * @cssprop --ha-button-border-radius - The border radius of the button. defaults to `var(--ha-border-radius-pill)`.\n *\n * @attr {(\"small\"|\"medium\")} size - Sets the button size.\n * @attr {(\"brand\"|\"neutral\"|\"danger\"|\"warning\"|\"success\")} variant - Sets the button color variant. \"primary\" is default.\n * @attr {(\"accent\"|\"filled\"|\"plain\")} appearance - Sets the button appearance.\n * @attr {boolean} loading - shows a loading indicator instead of the buttons label and disable buttons click.\n * @attr {boolean} disabled - Disables the button and prevents user interaction.\n */\n@customElement(\"ha-button\")\nexport class HaButton extends Button {\n  variant: \"brand\" | \"neutral\" | \"success\" | \"warning\" | \"danger\" = \"brand\";\n\n  static get styles(): CSSResultGroup {\n    return [\n      Button.styles,\n      css`\n        :host {\n          --wa-form-control-padding-inline: 16px;\n          --wa-font-weight-action: var(--ha-font-weight-medium);\n          --wa-form-control-border-radius: var(\n            --ha-button-border-radius,\n            var(--ha-border-radius-pill)\n          );\n\n          --wa-form-control-height: var(\n            --ha-button-height,\n            var(--button-height, 40px)\n          );\n        }\n        .button {\n          font-size: var(--ha-font-size-m);\n          line-height: 1;\n\n          transition: background-color 0.15s ease-in-out;\n          text-wrap: wrap;\n        }\n\n        :host([size=\"small\"]) .button {\n          --wa-form-control-height: var(\n            --ha-button-height,\n            var(--button-height, 32px)\n          );\n          font-size: var(--wa-font-size-s, var(--ha-font-size-m));\n          --wa-form-control-padding-inline: 12px;\n        }\n\n        :host([variant=\"brand\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-primary-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-primary-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-primary-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-primary-loud-hover\n          );\n        }\n\n        :host([variant=\"neutral\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-neutral-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-neutral-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-neutral-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-neutral-loud-hover\n          );\n        }\n\n        :host([variant=\"success\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-success-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-success-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-success-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-success-loud-hover\n          );\n        }\n\n        :host([variant=\"warning\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-warning-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-warning-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-warning-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-warning-loud-hover\n          );\n        }\n\n        :host([variant=\"danger\"]) {\n          --button-color-fill-normal-active: var(\n            --ha-color-fill-danger-normal-active\n          );\n          --button-color-fill-normal-hover: var(\n            --ha-color-fill-danger-normal-hover\n          );\n          --button-color-fill-loud-active: var(\n            --ha-color-fill-danger-loud-active\n          );\n          --button-color-fill-loud-hover: var(\n            --ha-color-fill-danger-loud-hover\n          );\n        }\n\n        :host([appearance~=\"plain\"]) .button {\n          color: var(--wa-color-on-normal);\n          background-color: transparent;\n        }\n        :host([appearance~=\"plain\"]) .button.disabled {\n          background-color: transparent;\n          color: var(--ha-color-on-disabled-quiet);\n        }\n\n        :host([appearance~=\"outlined\"]) .button.disabled {\n          background-color: transparent;\n          color: var(--ha-color-on-disabled-quiet);\n        }\n\n        @media (hover: hover) {\n          :host([appearance~=\"filled\"])\n            .button:not(.disabled):not(.loading):hover {\n            background-color: var(--button-color-fill-normal-hover);\n          }\n          :host([appearance~=\"accent\"])\n            .button:not(.disabled):not(.loading):hover {\n            background-color: var(--button-color-fill-loud-hover);\n          }\n          :host([appearance~=\"plain\"])\n            .button:not(.disabled):not(.loading):hover {\n            color: var(--wa-color-on-normal);\n          }\n        }\n        :host([appearance~=\"filled\"]) .button {\n          color: var(--wa-color-on-normal);\n          background-color: var(--wa-color-fill-normal);\n          border-color: transparent;\n        }\n        :host([appearance~=\"filled\"])\n          .button:not(.disabled):not(.loading):active {\n          background-color: var(--button-color-fill-normal-active);\n        }\n        :host([appearance~=\"filled\"]) .button.disabled {\n          background-color: var(--ha-color-fill-disabled-normal-resting);\n          color: var(--ha-color-on-disabled-normal);\n        }\n\n        :host([appearance~=\"accent\"]) .button {\n          background-color: var(\n            --wa-color-fill-loud,\n            var(--wa-color-neutral-fill-loud)\n          );\n        }\n        :host([appearance~=\"accent\"])\n          .button:not(.disabled):not(.loading):active {\n          background-color: var(--button-color-fill-loud-active);\n        }\n        :host([appearance~=\"accent\"]) .button.disabled {\n          background-color: var(--ha-color-fill-disabled-loud-resting);\n          color: var(--ha-color-on-disabled-loud);\n        }\n\n        :host([loading]) {\n          pointer-events: none;\n        }\n\n        .button.disabled {\n          opacity: 1;\n        }\n\n        slot[name=\"start\"]::slotted(*) {\n          margin-inline-end: 4px;\n        }\n        slot[name=\"end\"]::slotted(*) {\n          margin-inline-start: 4px;\n        }\n\n        .button.has-start {\n          padding-inline-start: 8px;\n        }\n        .button.has-end {\n          padding-inline-end: 8px;\n        }\n\n        .label {\n          overflow: hidden;\n          text-overflow: ellipsis;\n          padding: var(--ha-space-1) 0;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-button\": HaButton;\n  }\n}\n","import Tooltip from \"@home-assistant/webawesome/dist/components/tooltip/tooltip\";\nimport { css } from \"lit\";\nimport type { CSSResultGroup } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-tooltip\")\nexport class HaTooltip extends Tooltip {\n  /** The amount of time to wait before showing the tooltip when the user mouses in. */\n  @property({ attribute: \"show-delay\", type: Number }) showDelay = 150;\n\n  /** The amount of time to wait before hiding the tooltip when the user mouses out.. */\n  @property({ attribute: \"hide-delay\", type: Number }) hideDelay = 150;\n\n  static get styles(): CSSResultGroup {\n    return [\n      Tooltip.styles,\n      css`\n        :host {\n          --wa-tooltip-background-color: var(--secondary-background-color);\n          --wa-tooltip-content-color: var(--primary-text-color);\n          --wa-tooltip-font-family: var(\n            --ha-tooltip-font-family,\n            var(--ha-font-family-body)\n          );\n          --wa-tooltip-font-size: var(\n            --ha-tooltip-font-size,\n            var(--ha-font-size-s)\n          );\n          --wa-tooltip-font-weight: var(\n            --ha-tooltip-font-weight,\n            var(--ha-font-weight-normal)\n          );\n          --wa-tooltip-line-height: var(\n            --ha-tooltip-line-height,\n            var(--ha-line-height-condensed)\n          );\n          --wa-tooltip-padding: 8px;\n          --wa-tooltip-border-radius: var(\n            --ha-tooltip-border-radius,\n            var(--ha-border-radius-sm)\n          );\n          --wa-tooltip-arrow-size: var(--ha-tooltip-arrow-size, 8px);\n          --wa-z-index-tooltip: var(--ha-tooltip-z-index, 1000);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-tooltip\": HaTooltip;\n  }\n}\n","import { fireEvent } from \"../common/dom/fire_event\";\nimport type { ShowToastParams } from \"../managers/notification-manager\";\n\nexport const showToast = (el: HTMLElement, params: ShowToastParams) =>\n  fireEvent(el, \"hass-notification\", params);\n","\nimport { HomeAssistant } from \"@ha/types\";\nimport type { HaFormSchema, HaFormDataContainer } from \"@ha/components/ha-form/types\";\nimport { InsteonX10Device, X10HouseCode, X10UnitCode } from \"./insteon\"\n\nexport interface InsteonPLMConfig {\n  device: string;\n  manual_config?: boolean;\n  plm_manual_config?: string;\n}\n\nexport interface InsteonHubv1Config {\n  host: string;\n  port: number;\n  hub_version: 1;\n}\n\nexport interface InsteonHubv2Config {\n  host: string;\n  port: number;\n  username: string;\n  password: string;\n  hub_version: 2;\n}\n\nexport interface X10Platrom {\n\n}\n\nexport interface InsteonDeviceOverride {\n  address: string;\n  cat: number | string;\n  subcat: number | string;\n  firmware?: number | string;\n}\n\nexport interface BrokenLink {\n  address: string;\n  device_name: string;\n  mem_addr: number;\n  in_use: boolean;\n  group: number;\n  is_controller: boolean\n  highwater: boolean;\n  target: string;\n  target_name: string;\n  data1: number;\n  data2: number;\n  data3: number;\n  status: [\n    \"missing_controller\",\n    \"missing_responder\",\n    \"missing_target\",\n    \"found\",\n    \"target_db_not_loaded\"\n  ]\n}\n\nexport interface UnknownDevice {\n  address: string;\n}\n\nexport type InsteonModemConfig =\n  | InsteonPLMConfig\n  | InsteonHubv1Config\n  | InsteonHubv2Config;\n\nexport interface InsteonConfig {\n  modem_config: InsteonModemConfig;\n  x10_config: InsteonX10Device[] | undefined;\n  override_config: InsteonDeviceOverride[] | undefined;\n}\n\nexport interface ConfigUpdateStatus {\n  status: \"success\" | \"update_failed\" | \"connection_failed\" | \"duplicate_device\";\n}\n\nexport interface X10DeviceRecord {\n  housecode: X10HouseCode,\n  unitcode: typeof X10UnitCode,\n  platform: \"\"\n}\n\nexport const fetchInsteonConfig = (\n  hass: HomeAssistant,\n  ): Promise<InsteonConfig> =>\n    hass.callWS({\n      type: \"insteon/config/get\",\n});\n\nexport const fetchModemConfigSchema = (\n  hass: HomeAssistant,\n  ): Promise<HaFormSchema[]> =>\n    hass.callWS({\n    type: \"insteon/config/get_modem_schema\",\n});\n\n\nexport const updateModemConfig = (\n    hass: HomeAssistant,\n    config: HaFormDataContainer,\n  ): Promise<ConfigUpdateStatus> =>\n    hass.callWS({\n      type: \"insteon/config/update_modem_config\",\n      config: config,\n});\n\nexport const addDeviceOverride = (\n  hass: HomeAssistant,\n  override: InsteonDeviceOverride,\n): Promise<ConfigUpdateStatus> =>\n  hass.callWS({\n    type: \"insteon/config/device_override/add\",\n    override: override,\n});\n\nexport const removeDeviceOverride = (\n  hass: HomeAssistant,\n  device_address: string,\n): Promise<ConfigUpdateStatus> =>\n    hass.callWS({\n      type: \"insteon/config/device_override/remove\",\n      device_address: device_address,\n});\n\nexport const fetchBrokenLinks = (\n  hass: HomeAssistant\n): Promise<BrokenLink[]> =>\n    hass.callWS({\n      type: \"insteon/config/get_broken_links\"\n});\n\nexport const fetchUnknownDevices = (\n  hass: HomeAssistant\n): Promise<string[]> =>\n    hass.callWS({\n      type: \"insteon/config/get_unknown_devices\"\n});\n\n\nexport const X10DeviceSchema = (platform: string | undefined): HaFormSchema[] => {\n  let dim_steps: HaFormSchema;\n  platform == \"light\"\n    ?\n      dim_steps = {\n      \"type\": \"integer\",\n      \"valueMin\": -1,\n      \"valueMax\": 255,\n      \"name\": \"dim_steps\",\n      \"required\": true,\n      \"default\": 22\n    }\n    : dim_steps = {\n      \"type\": \"constant\",\n      \"name\": \"dim_steps\",\n      \"required\": false,\n      \"default\": \"\",\n    }\n\n  return [\n    {\n      \"type\": \"select\",\n      \"options\": [\n        [\"a\", \"a\"],\n        [\"b\", \"b\"],\n        [\"c\", \"c\"],\n        [\"d\", \"d\"],\n        [\"e\", \"e\"],\n        [\"f\", \"f\"],\n        [\"g\", \"g\"],\n        [\"h\", \"h\"],\n        [\"i\", \"i\"],\n        [\"j\", \"j\"],\n        [\"k\", \"k\"],\n        [\"l\", \"l\"],\n        [\"m\", \"m\"],\n        [\"n\", \"n\"],\n        [\"o\", \"o\"],\n        [\"p\", \"p\"]\n      ],\n      \"name\": \"housecode\",\n      \"required\": true\n    },\n    {\n      \"type\": \"select\",\n      \"options\": [\n        [\"1\", \"1\"],\n        [\"2\", \"2\"],\n        [\"3\", \"3\"],\n        [\"4\", \"4\"],\n        [\"5\", \"5\"],\n        [\"6\", \"6\"],\n        [\"7\", \"7\"],\n        [\"8\", \"8\"],\n        [\"9\", \"9\"],\n        [\"10\", \"10\"],\n        [\"11\", \"11\"],\n        [\"12\", \"12\"],\n        [\"13\", \"13\"],\n        [\"14\", \"14\"],\n        [\"15\", \"15\"],\n        [\"16\", \"16\"],\n      ],\n      \"name\": \"unitcode\",\n      \"required\": true\n    },\n    {\n      \"type\": \"select\",\n      \"options\": [\n        [\"binary_sensor\", \"binary_sensor\"],\n        [\"switch\", \"switch\"],\n        [\"light\", \"light\"]\n      ],\n      \"name\": \"platform\",\n      \"required\": true\n    },\n    dim_steps\n  ]\n}\n\n\nexport function modemIsPlm(config: any): config is InsteonPLMConfig {\n  return \"device\" in config;\n}\n\nexport const addPlmManualConfig = (manual: boolean, schema: HaFormSchema[]) => {\n\n  const plm_schema = schema.slice()\n  plm_schema.push(\n    {\n      \"type\": \"boolean\",\n      \"required\": false,\n      \"name\": \"manual_config\"\n    })\n\n  manual\n    ? plm_schema.push({\n      type: \"string\",\n      name: \"plm_manual_config\",\n      required: true\n    })\n    : null;\n  return plm_schema\n}\n\nexport const DeviceOverrideSchema: HaFormSchema[] = [\n  {\n    name: \"address\",\n    type: \"string\",\n    required: true\n  },\n  {\n    name: \"cat\",\n    type: \"string\",\n    required: true\n  },\n  {\n    name: \"subcat\",\n    type: \"string\",\n    required: true\n  }\n]","import { HomeAssistant } from \"@ha/types\";\nimport type { HaFormSchema } from \"@ha/components/ha-form/types\";\nimport { Insteon, InsteonDevice, InsteonX10Device} from \"./insteon\"\nimport { ConfigUpdateStatus } from \"./config\"\n\n\nexport type InsteonProperty =\n  | PropertyNumber\n  | PropertyBoolean\n  | PropertySelect\n  | PropertyMultiSelect\n  | PropertyRadioButtons;\n\nexport interface PropertyBase {\n  name: string;\n  modified: boolean;\n}\n\nexport interface PropertyNumber extends PropertyBase {\n  value: number;\n}\n\nexport interface PropertyBoolean extends PropertyBase {\n  value: boolean;\n}\n\nexport interface PropertySelect extends PropertyBase {\n  value: [string] | [number];\n}\n\nexport interface PropertyMultiSelect extends PropertyBase {\n  value: [string] | [number];\n}\n\nexport interface PropertyRadioButtons extends PropertyBase {\n  name: \"radio_button_groups\";\n  value: [[number]] | [];\n}\n\nexport interface PropertiesInfo {\n  properties: InsteonProperty[];\n  schema: { [key: string]: HaFormSchema }; // HaFormSchema };\n}\n\nexport interface ALDBRecord {\n  mem_addr: number;\n  in_use: boolean;\n  is_controller: boolean;\n  highwater: boolean;\n  group: number;\n  target: string;\n  target_name: string;\n  data1: number;\n  data2: number;\n  data3: number;\n  dirty: boolean;\n}\n\nexport const fetchInsteonDevice = (\n  hass: HomeAssistant,\n  id: string\n): Promise<InsteonDevice> =>\n  hass.callWS({\n    type: \"insteon/device/get\",\n    device_id: id,\n  });\n\nexport const fetchInsteonALDB = (\n  hass: HomeAssistant,\n  id: string\n): Promise<ALDBRecord[]> =>\n  hass.callWS({\n    type: \"insteon/aldb/get\",\n    device_address: id,\n  });\n\nexport const fetchInsteonProperties = (\n  hass: HomeAssistant,\n  id: string,\n  showAdvanced: boolean\n): Promise<PropertiesInfo> =>\n  hass.callWS({\n    type: \"insteon/properties/get\",\n    device_address: id,\n    show_advanced: showAdvanced,\n  });\n\nexport const changeALDBRecord = (\n  hass: HomeAssistant,\n  id: string,\n  record: ALDBRecord\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/change\",\n    device_address: id,\n    record: record,\n  });\n\nexport const changeProperty = (\n  hass: HomeAssistant,\n  id: string,\n  name: string,\n  value: any\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/properties/change\",\n    device_address: id,\n    name: name,\n    value: value,\n  });\n\nexport const createALDBRecord = (\n  hass: HomeAssistant,\n  id: string,\n  record: ALDBRecord\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/create\",\n    device_address: id,\n    record: record,\n  });\n\nexport const loadALDB = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/load\",\n    device_address: id,\n  });\n\nexport const loadProperties = (\n  hass: HomeAssistant,\n  id: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/properties/load\",\n    device_address: id,\n  });\n\nexport const writeALDB = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/write\",\n    device_address: id,\n  });\n\nexport const writeProperties = (\n  hass: HomeAssistant,\n  id: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/properties/write\",\n    device_address: id,\n  });\n\nexport const resetALDB = (hass: HomeAssistant, id: string): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/reset\",\n    device_address: id,\n  });\n\nexport const resetProperties = (\n  hass: HomeAssistant,\n  id: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/properties/reset\",\n    device_address: id,\n  });\n\nexport const addDefaultLinks = (\n  hass: HomeAssistant,\n  id: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/add_default_links\",\n    device_address: id,\n  });\n\nexport const aldbRecordLoaded = (\n  hass: HomeAssistant,\n  id: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/aldb/record_loaded\",\n    device_address: id,\n  });\n\nexport const aldbNewRecordSchema = (insteon: Insteon): HaFormSchema[] => [\n  {\n    name: \"mode\",\n    options: [\n      [\"c\", insteon.localize(\"aldb.mode.controller\")],\n      [\"r\", insteon.localize(\"aldb.mode.responder\")],\n    ],\n    required: true,\n    type: \"select\",\n  },\n  {\n    name: \"group\",\n    required: true,\n    type: \"integer\",\n    valueMin: -1,\n    valueMax: 255,\n  },\n  {\n    name: \"target\",\n    required: true,\n    type: \"string\",\n  },\n  {\n    name: \"data1\",\n    required: true,\n    type: \"integer\",\n    valueMin: -1,\n    valueMax: 255,\n  },\n  {\n    name: \"data2\",\n    required: true,\n    type: \"integer\",\n    valueMin: -1,\n    valueMax: 255,\n  },\n  {\n    name: \"data3\",\n    required: true,\n    type: \"integer\",\n    valueMin: -1,\n    valueMax: 255,\n  },\n];\n\nexport const aldbChangeRecordSchema = (insteon: Insteon): HaFormSchema[] => [\n  {\n    name: \"in_use\",\n    required: true,\n    type: \"boolean\",\n  },\n  ...aldbNewRecordSchema(insteon),\n];\n\nexport const addDeviceSchema = (multiple: boolean, add_x10: boolean): HaFormSchema[] => [\n  {\n    name: \"multiple\",\n    required: false,\n    type: add_x10 ? \"constant\" : \"boolean\",\n  },\n  {\n    name: \"add_x10\",\n    required: false,\n    type: multiple ? \"constant\" : \"boolean\",\n  },\n  {\n    name: \"device_address\",\n    required: false,\n    type: (multiple || add_x10) ? \"constant\": \"string\",\n  },\n];\n\nexport const cancelAddInsteonDevice = (hass: HomeAssistant): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/device/add/cancel\",\n  });\n\nexport const removeInsteonDevice = (\n  hass: HomeAssistant,\n  address: string,\n  remove_all_refs: boolean\n): Promise<void> =>\n  hass.callWS({\n    type: \"insteon/device/remove\",\n    device_address: address,\n    remove_all_refs: remove_all_refs,\n  });\n\n\nexport const addX10Device = (\n  hass: HomeAssistant,\n  x10_device: InsteonX10Device,\n): Promise<ConfigUpdateStatus> =>\n  hass.callWS({\n    type: \"insteon/device/add_x10\",\n    x10_device: x10_device,\n  });\n\n\nexport type deviceAddedMessage = {\n  type: string;\n  address: string;\n};\n\nexport const RAMP_RATE_SECONDS: { [seconds: string]: number } = {\n  \"480\": 1,\n  \"420\": 2,\n  \"360\": 3,\n  \"300\": 4,\n  \"270\": 5,\n  \"240\": 6,\n  \"210\": 7,\n  \"180\": 8,\n  \"150\": 9,\n  \"120\": 10,\n  \"90\": 11,\n  \"60\": 12,\n  \"47\": 13,\n  \"43\": 14,\n  \"38.5\": 15,\n  \"34\": 16,\n  \"32\": 17,\n  \"30\": 18,\n  \"28\": 19,\n  \"26\": 20,\n  \"23.5\": 21,\n  \"21.5\": 22,\n  \"19\": 23,\n  \"8.5\": 24,\n  \"6.5\": 25,\n  \"4.5\": 26,\n  \"2\": 27,\n  \"0.5\": 28,\n  \"0.3\": 29,\n  \"0.2\": 30,\n  \"0.1\": 31,\n};\n\nexport const rampRateSchema: HaFormSchema = {\n  name: \"ramp_rate\",\n  options: [\n    [\"31\", \"0.1\"],\n    [\"30\", \"0.2\"],\n    [\"29\", \"0.3\"],\n    [\"28\", \"0.5\"],\n    [\"27\", \"2\"],\n    [\"26\", \"4.5\"],\n    [\"25\", \"6.5\"],\n    [\"24\", \"8.5\"],\n    [\"23\", \"19\"],\n    [\"22\", \"21.5\"],\n    [\"21\", \"23.5\"],\n    [\"20\", \"26\"],\n    [\"19\", \"28\"],\n    [\"18\", \"30\"],\n    [\"17\", \"32\"],\n    [\"16\", \"34\"],\n    [\"15\", \"38.5\"],\n    [\"14\", \"43\"],\n    [\"13\", \"47\"],\n    [\"12\", \"60\"],\n    [\"11\", \"90\"],\n    [\"10\", \"120\"],\n    [\"9\", \"150\"],\n    [\"8\", \"180\"],\n    [\"7\", \"210\"],\n    [\"6\", \"240\"],\n    [\"5\", \"270\"],\n    [\"4\", \"300\"],\n    [\"3\", \"360\"],\n    [\"2\", \"420\"],\n    [\"1\", \"480\"],\n  ],\n  required: true,\n  type: \"select\",\n};\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport \"@ha/components/ha-code-editor\";\nimport { createCloseHeading } from \"@ha/components/ha-dialog\";\nimport \"@ha/components/ha-button\";\nimport { haStyleDialog } from \"@ha/resources/styles\";\nimport { HomeAssistant } from \"@ha/types\";\nimport { Insteon, InsteonX10Device} from \"../data/insteon\";\nimport { X10DeviceSchema } from \"data/config\";\nimport { addX10Device } from \"data/device\"\nimport type { HaFormData } from \"@ha/components/ha-form/types\"\nimport \"@ha/components/ha-form/ha-form\";\nimport \"@ha/components/ha-alert\"\nimport { insteonDeviceAddX10DialogParams } from \"./show-dialog-device-add-x10\";\n\n\n@customElement(\"dialog-device-add-x10\")\nclass DialogInsteonDeviceAddX10 extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n\n  @property({ attribute: false }) public insteon?: Insteon;\n\n  @property({ type: Boolean }) public isWide?: boolean;\n\n  @property({ type: Boolean }) public narrow?: boolean;\n\n  @state() private _title?: string;\n\n  @state() private _callback?: () => Promise<void>;\n\n  @state() private _error: string | undefined = undefined;\n\n  @state() private _formData?: InsteonX10Device;\n\n  @state() private _opened = false;\n\n  public async showDialog(params: insteonDeviceAddX10DialogParams): Promise<void> {\n    this.hass = params.hass;\n    this.insteon = params.insteon;\n    this._callback = params.callback;\n    this._title = params.title;\n    this._opened = true;\n  }\n\n  protected render(): TemplateResult {\n    if (!this._opened) {\n      return html``;\n    }\n    const schema = X10DeviceSchema(this._formData?.platform)\n    return html`\n      <ha-dialog\n        open\n        @closed=\"${this._close}\"\n        .heading=${createCloseHeading(this.hass!, this._title!)}\n      >\n        ${this._error ? html`<ha-alert alertType=\"error\">${this._error}</ha-alert>` : \"\"}\n        <div class=\"form\">\n          <ha-form\n            .data=${this._haFormData()}\n            .schema=${schema}\n            @value-changed=${this._valueChanged}\n            .computeLabel=${this._computeLabel(this.insteon?.localize)}\n          ></ha-form>\n        </div>\n        <div class=\"buttons\">\n          <ha-button @click=${this._dismiss} slot=\"secondaryAction\">\n            ${this.insteon!.localize(\"common.cancel\")}\n          </ha-button>\n          <ha-button @click=${this._submit} slot=\"primaryAction\">\n            ${this.insteon!.localize(\"common.ok\")}\n          </ha-button>\n        </div>\n      </ha-dialog>\n    `;\n  }\n\n  private _haFormData(): HaFormData {\n    return {...this._formData}\n  }\n\n  private _dismiss(): void {\n    this._close();\n  }\n\n  private _computeLabel(localize) {\n    // Returns a callback for ha-form to calculate labels per schema object\n    return (schema) => localize(\"device.add_x10.fields.\" + schema.name) || schema.name;\n  }\n\n  private async _submit(): Promise<void> {\n    const x10_device: InsteonX10Device = {\n      ...this._formData!\n    }\n    if (x10_device.dim_steps == null) {\n      x10_device.dim_steps = 0;\n    }\n    try {\n      await addX10Device(this.hass!, x10_device);\n      this._close();\n      await this._callback!();\n    } catch {\n        this._error  = this.insteon!.localize(\"device.add_x10.error.duplicate_device\");\n    }\n  }\n\n  private _close(): void {\n    this._opened = false;\n    this._error = undefined;\n    this._formData = undefined;\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    this._formData = ev.detail.value;\n    if (this._formData?.platform == \"light\") {\n      if (!this._formData.dim_steps) {\n        this._formData.dim_steps = 22;\n      }\n    } else {\n      this._formData!.dim_steps = 0;\n    }\n    if (this._formData?.dim_steps && [0, 1].includes(this._formData!.dim_steps)) {\n      this._formData.dim_steps = 1;\n    }\n  }\n\n  static get styles(): CSSResultGroup[] {\n    return [\n      haStyleDialog,\n      css`\n        table {\n          width: 100%;\n        }\n        ha-combo-box {\n          width: 20px;\n        }\n        .title {\n          width: 200px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-device-add-x10\": DialogInsteonDeviceAddX10;\n  }\n}\n"],"names":["stopPropagation","ev","HaButton","Button","styles","css","args","variant","HaTooltip","Tooltip","showDelay","hideDelay","attribute","type","Number","showToast","el","params","fireEvent","fetchInsteonConfig","hass","callWS","fetchModemConfigSchema","updateModemConfig","config","addDeviceOverride","override","removeDeviceOverride","device_address","fetchBrokenLinks","fetchUnknownDevices","X10DeviceSchema","platform","dim_steps","modemIsPlm","addPlmManualConfig","manual","schema","plm_schema","slice","push","name","required","DeviceOverrideSchema","fetchInsteonDevice","id","device_id","fetchInsteonALDB","fetchInsteonProperties","showAdvanced","show_advanced","changeALDBRecord","record","changeProperty","value","createALDBRecord","loadALDB","loadProperties","writeALDB","writeProperties","resetALDB","resetProperties","addDefaultLinks","aldbNewRecordSchema","insteon","options","localize","valueMin","valueMax","aldbChangeRecordSchema","addDeviceSchema","multiple","add_x10","cancelAddInsteonDevice","removeInsteonDevice","address","remove_all_refs","addX10Device","x10_device","rampRateSchema","DialogInsteonDeviceAddX10","LitElement","showDialog","this","_callback","callback","_title","title","_opened","render","html","_formData","_close","createCloseHeading","_error","_haFormData","_valueChanged","_computeLabel","_dismiss","_submit","undefined","detail","includes","haStyleDialog","Boolean"],"mappings":"kJAAO,MAAPA,EAAAC,GAAAA,EAAAD,iB,2ICoCO,MAAPE,UAAAC,EAAAA,EAGE,iBAAAC,GACE,MAAO,CACLD,EAAAA,EAAAA,OACAE,EAAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAgMJ,C,kBAtMK,SAAAC,GAAA,KAAAC,QAAA,O,+MC9BA,MAAPC,UAAAC,EAAAA,EAOE,iBAAAL,GACE,MAAO,CACLK,EAAAA,EAAAA,OACAJ,EAAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA8BJ,C,kBAxCK,SAAAC,GAAA,KAAAI,UAAA,SAAAC,UAAA,G,8BAEOC,UAAA,aAAyBC,KAAAC,U,4DAGzBF,UAAA,aAAyBC,KAAAC,U,0JCRhC,MAAPC,EAAAA,CAAAC,EAAAC,KAAAC,EAAAA,EAAAA,GAAAF,EAAA,oBAAAC,E,mICgFO,MAAPE,EAAAC,GAAAA,EAAAC,OAAA,CAIMR,KAAA,uBAGNS,EAAAF,GAAAA,EAAAC,OAAA,CAIIR,KAAA,oCAIJU,EAAAA,CAAAH,EAAAI,IAAAJ,EAAAC,OAAA,CAKMR,KAAA,qCACAW,OAAAA,IAGNC,EAAAA,CAAAL,EAAAM,IAAAN,EAAAC,OAAA,CAKIR,KAAA,qCACAa,SAAAA,IAGJC,EAAAA,CAAAP,EAAAQ,IAAAR,EAAAC,OAAA,CAKMR,KAAA,wCACAe,eAAAA,IAGNC,EAAAT,GAAAA,EAAAC,OAAA,CAIMR,KAAA,oCAGNiB,EAAAV,GAAAA,EAAAC,OAAA,CAIMR,KAAA,uCAINkB,EAAAC,IACE,IAAAC,EAkBA,OAjBAA,EAAA,SAAAD,EAAA,CAGI,KAAQ,UACR,UAAa,EACb,SAAY,IACZ,KAAQ,YACR,UAAY,EACZ,QAAW,IACb,CAEE,KAAQ,WACR,KAAQ,YACR,UAAY,EACZ,QAAW,IAGR,CACL,CACE,KAAQ,SACR,QAAW,CACT,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,MAER,KAAQ,YACR,UAAY,GAEd,CACE,KAAQ,SACR,QAAW,CACT,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,OAET,KAAQ,WACR,UAAY,GAEd,CACE,KAAQ,SACR,QAAW,CACT,CAAC,gBAAiB,iBAClB,CAAC,SAAU,UACX,CAAC,QAAS,UAEZ,KAAQ,WACR,UAAY,GAEdC,IAKG,SAAPC,EAAAV,GACE,MAAO,WAAPA,CACF,CAEO,MAAPW,EAAAA,CAAAC,EAAAC,KAEE,MAAAC,EAAAD,EAAAE,QAeA,OAdAD,EAAAE,KAAA,CAEI,KAAQ,UACR,UAAY,EACZ,KAAQ,kBAGZJ,GAAAE,EAAAE,KAAA,CAEI3B,KAAA,SACA4B,KAAA,oBACAC,UAAA,IAGJJ,GAGFK,EAAA,CACE,CACEF,KAAA,UACA5B,KAAA,SACA6B,UAAA,GAEF,CACED,KAAA,MACA5B,KAAA,SACA6B,UAAA,GAEF,CACED,KAAA,SACA5B,KAAA,SACA6B,UAAA,G,qNCzMG,MAAPE,EAAAA,CAAAxB,EAAAyB,IAAAzB,EAAAC,OAAA,CAKIR,KAAA,qBACAiC,UAAAD,IAGJE,EAAAA,CAAA3B,EAAAyB,IAAAzB,EAAAC,OAAA,CAKIR,KAAA,mBACAe,eAAAiB,IAGJG,EAAAA,CAAA5B,EAAAyB,EAAAI,IAAA7B,EAAAC,OAAA,CAMIR,KAAA,yBACAe,eAAAiB,EACAK,cAAAD,IAGJE,EAAAA,CAAA/B,EAAAyB,EAAAO,IAAAhC,EAAAC,OAAA,CAMIR,KAAA,sBACAe,eAAAiB,EACAO,OAAAA,IAGJC,EAAAA,CAAAjC,EAAAyB,EAAAJ,EAAAa,IAAAlC,EAAAC,OAAA,CAOIR,KAAA,4BACAe,eAAAiB,EACAJ,KAAAA,EACAa,MAAAA,IAGJC,EAAAA,CAAAnC,EAAAyB,EAAAO,IAAAhC,EAAAC,OAAA,CAMIR,KAAA,sBACAe,eAAAiB,EACAO,OAAAA,IAGJI,EAAAA,CAAApC,EAAAyB,IAAAzB,EAAAC,OAAA,CAEIR,KAAA,oBACAe,eAAAiB,IAGJY,EAAAA,CAAArC,EAAAyB,IAAAzB,EAAAC,OAAA,CAKIR,KAAA,0BACAe,eAAAiB,IAGJa,EAAAA,CAAAtC,EAAAyB,IAAAzB,EAAAC,OAAA,CAEIR,KAAA,qBACAe,eAAAiB,IAGJc,EAAAA,CAAAvC,EAAAyB,IAAAzB,EAAAC,OAAA,CAKIR,KAAA,2BACAe,eAAAiB,IAGJe,EAAAA,CAAAxC,EAAAyB,IAAAzB,EAAAC,OAAA,CAEIR,KAAA,qBACAe,eAAAiB,IAGJgB,EAAAA,CAAAzC,EAAAyB,IAAAzB,EAAAC,OAAA,CAKIR,KAAA,2BACAe,eAAAiB,IAGJiB,EAAAA,CAAA1C,EAAAyB,IAAAzB,EAAAC,OAAA,CAKIR,KAAA,iCACAe,eAAAiB,IAYJkB,EAAAC,GAAA,CACE,CACEvB,KAAA,OACAwB,QAAA,CACE,CAAC,IAAKD,EAAAE,SAAA,yBACN,CAAC,IAAKF,EAAAE,SAAA,yBAERxB,UAAA,EACA7B,KAAA,UAEF,CACE4B,KAAA,QACAC,UAAA,EACA7B,KAAA,UACAsD,UAAA,EACAC,SAAA,KAEF,CACE3B,KAAA,SACAC,UAAA,EACA7B,KAAA,UAEF,CACE4B,KAAA,QACAC,UAAA,EACA7B,KAAA,UACAsD,UAAA,EACAC,SAAA,KAEF,CACE3B,KAAA,QACAC,UAAA,EACA7B,KAAA,UACAsD,UAAA,EACAC,SAAA,KAEF,CACE3B,KAAA,QACAC,UAAA,EACA7B,KAAA,UACAsD,UAAA,EACAC,SAAA,MAIJC,EAAAL,GAAA,CACE,CACEvB,KAAA,SACAC,UAAA,EACA7B,KAAA,cAECkD,EAAAC,IAGLM,EAAAA,CAAAC,EAAAC,IAAA,CACE,CACE/B,KAAA,WACAC,UAAA,EACA7B,KAAA2D,EAAA,sBAEF,CACE/B,KAAA,UACAC,UAAA,EACA7B,KAAA0D,EAAA,sBAEF,CACE9B,KAAA,iBACAC,UAAA,EACA7B,KAAA0D,GAAAC,EAAA,sBAIJC,EAAArD,GAAAA,EAAAC,OAAA,CAEIR,KAAA,8BAGJ6D,EAAAA,CAAAtD,EAAAuD,EAAAC,IAAAxD,EAAAC,OAAA,CAMIR,KAAA,wBACAe,eAAA+C,EACAC,gBAAAA,IAIJC,EAAAA,CAAAzD,EAAA0D,IAAA1D,EAAAC,OAAA,CAKIR,KAAA,yBACAiE,WAAAA,IA2CJC,EAAA,CACEtC,KAAA,YACAwB,QAAA,CACE,CAAC,KAAM,OACP,CAAC,KAAM,OACP,CAAC,KAAM,OACP,CAAC,KAAM,OACP,CAAC,KAAM,KACP,CAAC,KAAM,OACP,CAAC,KAAM,OACP,CAAC,KAAM,OACP,CAAC,KAAM,MACP,CAAC,KAAM,QACP,CAAC,KAAM,QACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,QACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,OACP,CAAC,IAAK,OACN,CAAC,IAAK,OACN,CAAC,IAAK,OACN,CAAC,IAAK,OACN,CAAC,IAAK,OACN,CAAC,IAAK,OACN,CAAC,IAAK,OACN,CAAC,IAAK,OACN,CAAC,IAAK,QAERvB,UAAA,EACA7B,KAAA,S,8NCvVF,MAAAmE,UAAAC,EAAAA,GAoBE,gBAAAC,CAAAjE,GACEkE,KAAA/D,KAAAH,EAAAG,KACA+D,KAAAnB,QAAA/C,EAAA+C,QACAmB,KAAAC,UAAAnE,EAAAoE,SACAF,KAAAG,OAAArE,EAAAsE,MACAJ,KAAAK,SAAA,CACF,CAEUC,MAAAA,GACR,IAAKN,KAALK,QACE,OAAAE,EAAAA,EAAA,GAEF,MAAArD,GAAAN,EAAAA,EAAAA,IAAA,KAAA4D,WAAA3D,UACA,OAAA0D,EAAAA,EAAA;;;mBAGa,KAAAE;oBACAC,EAAAA,EAAAA,GAAA,KAAAzE,KAAA,KAAAkE;;UAET,KAAAQ,OAAAJ,EAAAA,EAAA,oCAAAI,oBAAA;;;oBAGU,KAAAC;sBACE1D;6BACO,KAAA2D;4BACD,KAAAC,cAAA,KAAAjC,SAAAE;;;;8BAIE,KAAAgC;cAChB,KAAAlC,QAAAE,SAAA;;8BAEgB,KAAAiC;cAChB,KAAAnC,QAAAE,SAAA;;;;KAKV,CAEQ6B,WAAAA,GACN,MAAO,IAAIZ,KAAHQ,UACV,CAEQO,QAAAA,GACNf,KAAAS,QACF,CAEQK,aAAAA,CAAA/B,GAEN,OAAA7B,GAAA6B,EAAA,yBAAA7B,EAAAI,OAAAJ,EAAAI,IACF,CAEA,aAAA0D,GACE,MAAArB,EAAA,IACKK,KAAHQ,WAEF,MAAAb,EAAA7C,YACE6C,EAAA7C,UAAA,GAEF,UACE4C,EAAAA,EAAAA,IAAA,KAAAzD,KAAA0D,GACAK,KAAAS,eACMT,KAANC,WACF,CAAE,MACED,KAAAW,OAAAX,KAAAnB,QAAAE,SAAA,wCACJ,CACF,CAEQ0B,MAAAA,GACNT,KAAAK,SAAA,EACAL,KAAAW,YAAAM,EACAjB,KAAAQ,eAAAS,CACF,CAEQJ,aAAAA,CAAA/F,GACNkF,KAAAQ,UAAA1F,EAAAoG,OAAA/C,MACA,SAAI6B,KAAJQ,WAAA3D,SACOmD,KAALQ,UAAA1D,YACEkD,KAAAQ,UAAA1D,UAAA,IAGFkD,KAAAQ,UAAA1D,UAAA,EAEEkD,KAAJQ,WAAA1D,WAAA,CAAkC,EAAG,GAAEqE,SAAA,KAAAX,UAAA1D,aACrCkD,KAAAQ,UAAA1D,UAAA,EAEJ,CAEA,iBAAA7B,GACE,MAAO,CACLmG,EAAAA,GACAlG,EAAAA,EAAA;;;;;;;;;;QAYJ,C,kBA5HF,SAAAC,GAAA,KAAAwF,YAAAM,EAAA,KAAAZ,SAAA,C,8BAEc5E,WAAA,K,uDAEAA,WAAA,K,0DAEAC,KAAA2F,W,yDAEA3F,KAAA2F,W"}