services:
  pmcp:
    build:
      context: .
      dockerfile: Dockerfile

    # Mount configuration files
    volumes:
      # MCP server configuration (required)
      - ./config/.mcp.json:/home/appuser/.mcp.json:ro
      # Environment variables for API keys (optional)
      - ./.env:/app/.env:ro
      # Cache directory for capability summaries (optional, for persistence)
      - pmcp-cache:/app/.pmcp

    environment:
      - PMCP_LOG_LEVEL=info

    # MCP uses stdio, so we need interactive mode for testing
    stdin_open: true
    tty: true

volumes:
  pmcp-cache:
