################################################################################
# FAL Backend Configuration
################################################################################
#
# This file defines the model specifications for FAL (Fast AI Labs) models.
# It contains model definitions for various image generation models
# accessible through the FAL API.
#
# Configuration structure:
# - Each model is defined in its own section with the model name as the header
# - Headers with dots must be quoted (e.g., ["flux-pro/v1.1"])
# - Model costs are in USD per million tokens (input/output)
#
# Documentation: https://docs.pipelex.com
# Support: https://go.pipelex.com/discord
#
################################################################################

################################################################################
# MODEL DEFAULTS
################################################################################

[defaults]
model_type = "img_gen"
sdk = "fal"
prompting_target = "fal"

################################################################################
# IMAGE GENERATION MODELS
################################################################################

# --- Flux Pro Series ----------------------------------------------------------
[flux-pro]
model_id = "fal-ai/flux-pro"
inputs = ["text"]
outputs = ["image"]
costs = { input = 0.05, output = 0.0 }

[flux-pro.rules]
prompt = "positive_only"
num_images = "fal"
aspect_ratio = "flux"
inference = "flux"
safety_checker = "available"
output_format = "flux_1"
specific = "fal"

["flux-pro/v1.1"]
model_id = "fal-ai/flux-pro/v1.1"
inputs = ["text"]
outputs = ["image"]
costs = { input = 0.05, output = 0.0 }

["flux-pro/v1.1".rules]
prompt = "positive_only"
num_images = "fal"
aspect_ratio = "flux"
inference = "flux"
safety_checker = "available"
output_format = "flux_1"
specific = "fal"

["flux-pro/v1.1-ultra"]
model_id = "fal-ai/flux-pro/v1.1-ultra"
inputs = ["text"]
outputs = ["image"]
costs = { input = 0.06, output = 0.0 }

["flux-pro/v1.1-ultra".rules]
prompt = "positive_only"
num_images = "fal"
aspect_ratio = "flux_11_ultra"
inference = "flux_11_ultra"
safety_checker = "available"
output_format = "flux_1"
specific = "fal"

[flux-2]
model_id = "fal-ai/flux-2"
inputs = ["text"]
outputs = ["image"]
costs = { input = 0.05, output = 0.0 }

[flux-2.rules]
prompt = "positive_only"
num_images = "fal"
aspect_ratio = "flux"
inference = "flux"
safety_checker = "available"
output_format = "flux_2"
specific = "fal"

# --- SDXL models --------------------------------------------------------------
[fast-lightning-sdxl]
model_id = "fal-ai/fast-lightning-sdxl"
inputs = ["text"]
outputs = ["image"]
costs = { input = 0.0003, output = 0.0 }

[fast-lightning-sdxl.rules]
prompt = "positive_only"
num_images = "fal"
aspect_ratio = "flux"
inference = "sdxl_lightning"
safety_checker = "unavailable"
output_format = "sdxl"
specific = "fal"
