(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3662],{58095:function(e,t,r){var l=r(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&l(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,r){for(var l=-1,n=null==e?0:e.length;++l<n;)if(r(t,e[l]))return!0;return!1}},95372:function(e){e.exports=function(e,t,r,l){for(var n=e.length,i=r+(l?1:-1);l?i--:++i<n;)if(t(e[i],i,e))return i;return -1}},8817:function(e,t,r){var l=r(95372),n=r(1129),i=r(58263);e.exports=function(e,t,r){return t==t?i(e,t,r):l(e,n,r)}},1129:function(e){e.exports=function(e){return e!=e}},92198:function(e,t,r){var l=r(52485),n=r(58095),i=r(21796),a=r(65581),s=r(47111),o=r(43735);e.exports=function(e,t,r){var c=-1,d=n,u=e.length,p=!0,f=[],h=f;if(r)p=!1,d=i;else if(u>=200){var g=t?null:s(e);if(g)return o(g);p=!1,d=a,h=new l}else h=t?[]:f;e:for(;++c<u;){var y=e[c],v=t?t(y):y;if(y=r||0!==y?y:0,p&&v==v){for(var m=h.length;m--;)if(h[m]===v)continue e;t&&h.push(v),f.push(y)}else d(h,v,r)||(h!==f&&h.push(v),f.push(y))}return f}},56632:function(e,t,r){var l=r(89278),n=r(80068),i=r(50098);e.exports=function(e){return function(t,r,a){var s=Object(t);if(!n(t)){var o=l(r,3);t=i(t),r=function(e){return o(s[e],e,s)}}var c=e(t,r,a);return c>-1?s[o?t[c]:c]:void 0}}},47111:function(e,t,r){var l=r(46151),n=r(50344),i=r(43735),a=l&&1/i(new l([,-0]))[1]==1/0?function(e){return new l(e)}:n;e.exports=a},58263:function(e){e.exports=function(e,t,r){for(var l=r-1,n=e.length;++l<n;)if(e[l]===t)return l;return -1}},64925:function(e,t,r){var l=r(56632)(r(66259));e.exports=l},66259:function(e,t,r){var l=r(95372),n=r(89278),i=r(47991),a=Math.max;e.exports=function(e,t,r){var s=null==e?0:e.length;if(!s)return -1;var o=null==r?0:i(r);return o<0&&(o=a(s+o,0)),l(e,n(t,3),o)}},50344:function(e){e.exports=function(){}},94919:function(e,t,r){var l=r(91936),n=1/0;e.exports=function(e){return e?(e=l(e))===n||e===-n?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,r){var l=r(94919);e.exports=function(e){var t=l(e),r=t%1;return t==t?r?t-r:t:0}},83766:function(e,t,r){var l=r(92198);e.exports=function(e){return e&&e.length?l(e):[]}},12627:function(e,t,r){"use strict";var l=r(24246),n=r(79283),i=r(34929);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:r=!1,...a}=e,{getDataCategoryDisplayNameProps:s,getDataCategories:o}=(0,i.Z)(),c=(r?o():o().filter(e=>e.active)).filter(e=>!(null==t?void 0:t.includes(e.fides_key))).map(e=>{let{name:t,primaryName:r}=s(e.fides_key);return{value:e.fides_key,name:t,primaryName:r,description:e.description||"",label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{children:r||t}),r&&": ".concat(t)]}),title:e.fides_key}});return(0,l.jsx)(n.l,{options:c,...a})}},79283:function(e,t,r){"use strict";r.d(t,{l:function(){return d}});var l=r(24246),n=r(10034),i=r(72707),a=r.n(i);let s=e=>{let{data:{formattedTitle:t,description:r,name:i,primaryName:a}}=e;return(0,l.jsxs)(n.kCb,{gap:12,title:"".concat(t," - ").concat(r),children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:a||i}),a&&": ".concat(i)]}),(0,l.jsx)("em",{className:"overflow-hidden text-ellipsis",children:r})]})},o=e=>"options"in e&&Array.isArray(e.options),c=e=>({...e,className:a().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),d=e=>{let{options:t,...r}=e,i=null==t?void 0:t.map(e=>o(e)?{...e,options:e.options.map(c)}:c(e));return(0,l.jsx)(n.PhF,{options:i,filterOption:(e,t)=>{var r,l;return(null==t?void 0:null===(r=t.formattedTitle)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(l=t.value)||void 0===l?void 0:l.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:s,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...r})}},34929:function(e,t,r){"use strict";var l=r(24246),n=r(64925),i=r.n(n),a=r(27378),s=r(16134),o=r(30002),c=r(28079),d=r(57072);let u=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,s.C)(c.U3),{isLoading:r}=(0,d.MO)(),l=(0,s.C)(d.qb),{isLoading:n}=(0,o.te)();return{dataUses:t,dataSubjects:(0,s.C)(o.ZL),dataCategories:l,isLoading:e||r||n}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:r,isLoading:n}=u(),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},o=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=t(e);if(!l)return{};let n=t(s(e,r)),i=!!l.parent_key;return{name:l.name||void 0,primaryName:i&&(null==n?void 0:n.name)!==l.name&&(null==n?void 0:n.name)||void 0}},c=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:n,primaryName:i}=o(e,t,r);return n?i?(0,l.jsxs)(a.Fragment,{children:[(0,l.jsxs)("strong",{children:[i,":"]})," ",n]},e):(0,l.jsx)("strong",{children:n},e):e},d=t=>i()(e,{fides_key:t}),p=e=>i()(t,{fides_key:e}),f=e=>i()(r,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:d,getDataUseDisplayName:e=>c(e,d,1),getDataUseDisplayNameProps:e=>o(e,d,1),getDataCategories:()=>t,getDataCategoryByKey:p,getDataCategoryDisplayName:e=>c(e,p,2),getDataCategoryDisplayNameProps:e=>o(e,p,2),getDataSubjects:()=>r,getDataSubjectByKey:f,getDataSubjectDisplayName:e=>{let t=f(e);return t?t.name:e},getDataSubjectDisplayNameProps:e=>{let t=f(e);return t?{name:t.name||e}:{}},getPrimaryKey:s,isLoading:n}}},84418:function(e,t,r){"use strict";r.d(t,{d:function(){return c}});var l=r(24246),n=r(10034),i=r(98784),a=r.n(i);let s=e=>{let{itemKey:t,actions:r}=e;return a().isEmpty(r)?null:(0,l.jsx)(n.kCb,{gap:"small",justify:"flex-end",children:r.map((e,i)=>{let{callback:a,label:s,disabled:o}=e;return(0,l.jsx)(n.zxk,{onClick:()=>a(t),type:i===r.length-1?"primary":"default",disabled:o,children:s},s)})})},o=e=>{let{title:t,titleIcon:r,titleTag:i}=e;return(0,l.jsxs)(n.kCb,{align:"center",gap:"small",children:[r,(0,l.jsx)("span",{children:t}),i&&(0,l.jsx)(n.Vp9,{...i})]})},c=e=>{let{title:t,titleIcon:r,titleTag:i,actions:a,width:c=480,...d}=e;return(0,l.jsx)(n.dys,{title:(0,l.jsx)(o,{title:t,titleIcon:r,titleTag:i}),footer:d.footer||!a?d.footer:(0,l.jsx)(s,{itemKey:d.itemKey,actions:a}),width:c,...d})}},90673:function(e,t,r){"use strict";r.d(t,{Cd:function(){return i},Xl:function(){return a}});var l=r(20987),n=r(59001);let i=(e,t)=>{let r;if(null==t&&e.every(e=>void 0===e.parent_key))r=e;else{let l=null!=t?t:null;r=e.filter(e=>e.parent_key===l)}return r.map(t=>{var r,l;let n=t.fides_key;return{value:t.fides_key,label:t.name||t.fides_key,description:t.description,children:i(e,n),is_default:null!==(r=t.is_default)&&void 0!==r&&r,active:null!==(l=t.active)&&void 0!==l&&l}})},a=e=>{switch(e){case n.ac.DATA_CATEGORY:return l.J.DATA_CATEGORY;case n.ac.DATA_SUBJECT:return l.J.DATA_SUBJECT;case n.ac.DATA_USE:return l.J.DATA_USE;case n.ac.SYSTEM_GROUP:return"system group";default:return e}}},57072:function(e,t,r){"use strict";r.d(t,{Bd:function(){return l.Bd},L5:function(){return l.L5},MO:function(){return l.MO},qb:function(){return l.qb}});var l=r(5785)},73662:function(e,t,r){"use strict";r.r(t),r.d(t,{HELIOS_ACCESS_ERROR:function(){return eW},MONITOR_ACTION_CENTER_CONFIG:function(){return eq},default:function(){return eG}});var l=r(24246),n=r(10034),i=r(63662),a=r(25980),s=r(77830),o=r(9431),c=r(98784),d=r.n(c),u=r(79894),p=r.n(u),f=r(86677),h=r(27378),g=r(43929),y=r(30952),v=r(17245),m=r(9270),_=r(37059),x=r(60240),b=r(62678),E=r(99824),k=r(26917);let T="space",S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inclusive",{activeListItem:l=null,enableKeyboardShortcuts:n=!1}=t,[i,a]=(0,h.useState)(r),[s,o]=(0,h.useState)([]),c=(e,t)=>{(("inclusive"===i?t:!t)?"add":"remove")=="add"?o([...s,e]):o(s.filter(t=>t!==e))},u=e=>{a(e),o([])},p=d().difference(e,s),f="inclusive"===i?s:p,y="exclusive"===i?s:p;return(0,g.y1)("h",()=>{u("exclusive")},{enabled:n}),(0,g.y1)("l",()=>{u("inclusive")},{enabled:n}),(0,g.y1)(T,e=>{if(l){e.preventDefault();let t=f.includes(l.key);c(l.key,!t)}},{enabled:n},[l,f,c]),{checkboxProps:{checked:"inclusive"===i?f.length>0&&(null==e?void 0:e.length)===f.length:0===y.length,indeterminate:"inclusive"===i?f.length>0&&(null==e?void 0:e.length)!==f.length:y.length>0,onChange:e=>u(e.target.checked?"exclusive":"inclusive")},excludedKeys:y,listSelectMode:i,resetListSelect:()=>{o([]),a("inclusive")},selectedKeys:f,updateListSelectMode:u,updateSelectedListItem:c}},A=e=>{let{...t}=e;return(0,l.jsx)(n.u_l,{title:"Keyboard shortcuts",footer:null,...t,children:(0,l.jsx)(n.w5n,{bordered:!0,column:1,items:[{key:"".concat(n.dHR.NAVIGATE_UP,"-").concat(n.dHR.NAVIGATE_DOWN),label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:n.dHR.NAVIGATE_DOWN})," ","/"," ",(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:n.dHR.NAVIGATE_UP})]}),children:"Activate the next/previous field"},{key:T,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:T}),children:"Toggle checkbox of the active field"},{key:"h",label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:"h"}),children:"Select all fields"},{key:"l",label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:"l"}),children:"Deselect all fields"},{key:n.dHR.CLEAR_FOCUS,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:n.dHR.CLEAR_FOCUS}),children:"Clear the active field"},{key:E.b_.TOGGLE_DRAWER,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:E.b_.TOGGLE_DRAWER}),children:"Open/close details drawer for active field"},{key:E.b_.REVIEW,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:E.b_.REVIEW}),children:"Mark the active field as reviewed"},{key:E.b_.PROMOTE,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:E.b_.PROMOTE}),children:"Approve the active field"},{key:E.b_.MUTE,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:E.b_.MUTE}),children:"Ignore the active field"},{key:E.b_.UN_MUTE,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:E.b_.UN_MUTE}),children:"Restore the active field"},{key:E.b_.OPEN_CLASSIFICATION_SELECT,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:E.b_.OPEN_CLASSIFICATION_SELECT}),children:"Edit data categories for the active field"},{key:E.b_.REFRESH,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:E.b_.REFRESH}),children:"Refresh the list"},{key:E.b_.REFRESH,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:E.b_.REFRESH}),children:"Refresh the list"},{key:k.M,label:(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:"/"}),children:"Focus the search input"},{key:"?",label:(0,l.jsxs)("div",{className:"whitespace-nowrap",children:[(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:"?"})," (",(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:"shift"}),"+",(0,l.jsx)(n.Typography.Text,{keyboard:!0,children:"/"}),")"]}),children:"Open/close this modal"}]})})};var j=r(99089),C=r(83766),R=r.n(C),D=r(16394),I=r(59001),M=r(90673),w=r(39864),N=r(83158),L=r(3124),O=r.n(L);let F="load_more",U="skeleton",P=["Unlabeled","Classifying...","Classified","Reviewed","Approving...","Approved","Removed","Ignored","Error","Removing..."],z=["Approved","Ignored","Approving...","Removing..."],V=["Unlabeled","Classifying...","Classified","Reviewed","Removed","Error"],$={addition:{label:"Unlabeled"},reviewed:{label:"Reviewed",color:n.tAb.ALERT},classification_addition:{label:"Classified",color:n.tAb.CAUTION},classification_error:{label:"Error",color:n.tAb.ERROR},classification_queued:{label:"Classifying...",color:n.tAb.INFO},classification_update:{label:"Classified",color:n.tAb.CAUTION},classifying:{label:"Classifying...",color:n.tAb.INFO},monitored:{label:"Approved",color:n.tAb.SUCCESS},muted:{label:"Ignored",color:n.tAb.DEFAULT},promoting:{label:"Approving...",color:n.tAb.DEFAULT},promotion_error:{label:"Error",color:n.tAb.ERROR},removal:{label:"Removed",color:n.tAb.ERROR},removing:{label:"Removing...",color:n.tAb.DEFAULT},removal_promotion_error:{label:"Error",color:n.tAb.ERROR}},q={[x.D$.DATABASE]:n.PJP.S9g,[x.D$.FIELD]:n.PJP.sgG,[x.D$.SCHEMA]:n.PJP.ehp,[x.D$.TABLE]:n.PJP.iA_},W={STATUS:"status-section",DATA_CATEGORY:"data-category-section",CONFIDENCE:"confidence-section"},G={[x.Ag.ADDITION]:{color:O().FIDESUI_SUCCESS,tooltip:"This resource was added in the latest scan"},[x.Ag.REMOVAL]:{color:O().FIDESUI_ERROR,tooltip:"This resource was removed in the latest scan"},[x.Ag.CHANGE]:{color:O().FIDESUI_WARNING,tooltip:"This resource was modified in the latest scan"}},H=[N.$.HIGH,N.$.MEDIUM,N.$.LOW,N.$.MANUAL],J=(e,t)=>{if(!e||0===e.length)return[];let r=(e,t)=>{let l=t=>{if(t.value===e)return{title:t.label||e,children:t.children||[]};if(t.children&&t.children.length>0){let l=r(e,t.children);if(l)return l}return null};return t.reduce((e,t)=>null!=e?e:l(t),null)},l=new Map;e.forEach(e=>{let n=e.split(".");n.forEach((e,i)=>{let a=n.slice(0,i+1).join(".");if(!l.has(a)){let e=r(a,t);l.set(a,{title:(null==e?void 0:e.title)||(0,D.kC)(a.split(".").pop()||a),key:a,checkable:!0,selectable:!1})}})});let n=Array.from(l.values()),i=new Map;n.forEach(e=>{let t=e.key.toString().split(".");if(t.length>1){let r=t.slice(0,-1).join(".");i.has(r)||i.set(r,[]),i.get(r).push(e)}});let a=e=>(i.get(e)||[]).map(e=>{let t=a(e.key.toString());return{...e,children:t.length>0?t:void 0,isLeaf:0===t.length}});return n.filter(e=>1===e.key.toString().split(".").length).map(e=>{let t=a(e.key.toString());return{...e,children:t.length>0?t:void 0,isLeaf:0===t.length}})},B=e=>{let{resourceStatus:t,setResourceStatus:r,dataCategory:i,confidenceBucket:a,setDataCategory:s,setConfidenceBucket:o,resetToInitialState:c,monitorId:d,stagedResourceUrn:u}=e,[p,f]=(0,h.useState)(t),[g,y]=(0,h.useState)(i),[v,m]=(0,h.useState)(a),[x,b]=(0,h.useState)([W.STATUS]),{data:E,refetch:k}=(0,_.S0)({monitor_config_id:d,staged_resource_urn:u},{refetchOnMountOrArgChange:!0}),[T,{data:S=[]}]=(0,w.ci)();(0,h.useEffect)(()=>{T(I.ac.DATA_CATEGORY)},[T]);let A=(0,h.useMemo)(()=>(0,M.Cd)(S),[S]),j=H.filter(e=>{var t;return null==E?void 0:null===(t=E.confidence_bucket)||void 0===t?void 0:t.includes(e)}),C=(0,h.useMemo)(()=>P.map(e=>({title:e.replace(/\.{3}$/,""),key:e,checkable:!0,selectable:!1,isLeaf:!0})),[]),L=(0,h.useMemo)(()=>(null==E?void 0:E.data_category)&&0!==E.data_category.length?J(E.data_category,A):[],[null==E?void 0:E.data_category,A]),O=[...C.length>0?[{title:"Status",key:W.STATUS,checkable:!0,selectable:!1,isLeaf:!1,children:C}]:[],...j.length>0?[{title:"Confidence",key:W.CONFIDENCE,checkable:!0,selectable:!1,isLeaf:!1,children:j.map(e=>({title:(0,D.kC)(e),key:e,checkable:!0,selectable:!1,isLeaf:!0}))}]:[],...L.length>0?[{title:"Data category",key:W.DATA_CATEGORY,checkable:!0,selectable:!1,isLeaf:!1,children:L}]:[]],F=(0,h.useMemo)(()=>R()([...null!=p?p:[],...null!=g?g:[],...null!=v?v:[]]),[p,g,v]),U=(0,h.useMemo)(()=>{let e=0;return t&&(e+=new Set(t).size),i&&(e+=new Set(i).size),a&&(e+=new Set(a).size),e},[t,i,a]);return(0,l.jsx)(n.wn$,{treeProps:{checkable:!0,checkedKeys:F,onCheck:e=>{let t=Array.isArray(e)?e:e.checked,r=[],l=[],n=[],i=Object.values(W),a=(e,t)=>t.some(t=>t!==e&&t.startsWith("".concat(e,"."))),s=t.map(e=>e.toString());t.forEach(e=>{let t=e.toString();if(i.some(e=>e===t))return;let o=P.find(e=>e===t),c=Object.values(N.$).find(e=>e===t);o?r.push(o):c?l.push(c):a(t,s)||n.push(t)}),f(r.length>0?r:[]),y(n.length>0?n:[]),m(l.length>0?l:[])},treeData:O,expandedKeys:x,onExpand:e=>{b(e)}},onApply:()=>{r(p&&p.length>0?Array.from(new Set(p)):p),s(g&&g.length>0?Array.from(new Set(g)):g),o(v&&v.length>0?Array.from(new Set(v)):v)},onReset:()=>{c(),f(V),m([]),y([])},onClear:()=>{f([]),m([]),y([])},onOpenChange:e=>{if(e){k();return}f(t),m(a),y(i)},activeFiltersCount:U})};var Y=r(9110);let K=e=>{switch(e){case 1:return x.D$.DATABASE;case 2:return x.D$.SCHEMA;case 3:return x.D$.TABLE;default:return x.D$.FIELD}},Q=e=>{if(!e||"string"!=typeof e)return[];let t=e.trim();if(!t)return[];let r=t.split(".");if(r.length<2)return[];let l=r.filter(e=>e&&e.trim().length>0);return l.length<2?[]:(l.shift(),l.length>0&&l.pop(),0===l.length)?[]:l.map((e,t)=>{let r=q[K(t+1)];return{title:e.trim(),IconComponent:r}})};var Z=r(79283),X=r(34929),ee=e=>{let{onSelectDataCategory:t,urn:r,...i}=e,{getDataCategoryDisplayNameProps:a,getDataCategories:s}=(0,X.Z)(),o=s().filter(e=>e.active),[c,d]=(0,h.useState)(!1),u=o.map(e=>{let{name:t,primaryName:r}=a(e.fides_key);return{value:e.fides_key,label:(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:r||t}),r&&": ".concat(t)]}),name:t,primaryName:r,description:e.description||""}});return(0,l.jsx)(Z.l,{options:u,prefix:(0,l.jsx)(n.zxk,{"aria-label":"Add Data Category",type:"text",size:"small",icon:(0,l.jsx)(n.PJP.mm_,{}),disabled:i.disabled}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer -ml-5"},style:{"--ant-select-multiple-selector-bg-disabled":"transparent"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:c,onOpenChange:e=>d(e),onSelect:e=>{t(e),d(!1)},"data-classification-select":r,popupMatchSelectWidth:600,...i})},et=r(97947),er=r.n(et),el=r(63537);let en=e=>{let{label:t,closable:r,onClose:i,isFromClassifier:a}=e;return(0,l.jsx)(n.Vp9,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:r,onClose:i,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:a&&(0,l.jsx)(n.QMR,{}),children:(0,l.jsx)(n.xvT,{size:"sm",children:t})})},ei=e=>{let{title:t,IconComponent:r}=e;return{title:r?(0,l.jsxs)(n.kCb,{gap:3,align:"center",children:[(0,l.jsx)(r,{}),(0,l.jsx)("span",{children:t})]}):t}};var ea=e=>{let{urn:t,name:r,diff_status:i,selected:a,onSelect:s,onSetDataCategories:o,dataCategoriesDisabled:c,onNavigate:u,actions:p,classifications:f,...h}=e,g="preferred_data_categories"in h?h.preferred_data_categories:[],y=d()(null==f?void 0:f.flatMap(e=>{let{confidence_bucket:t}=e,r=t?(0,el.Oq)(t):void 0;return r?[r]:[]})).thru(el.io).value();return(0,l.jsx)(n.aVo.Item,{actions:[y&&(0,l.jsx)(Y.D,{severity:y,className:"mr-2"}),...null!=p?p:[]],children:(0,l.jsx)(n.aVo.Item.Meta,{avatar:(0,l.jsx)("div",{className:"ml-2",children:(0,l.jsx)(n.XZJ,{checked:a,onChange:e=>s&&s(t,e.target.checked)})}),title:(0,l.jsxs)(n.kCb,{gap:12,align:"center",className:er()["monitor-field__title"],children:[(0,l.jsx)(n.zxk,{type:"text",size:"small",className:"-mx-2",onClick:()=>u&&u(t),children:r}),i&&i!==x.LL.ADDITION&&(0,l.jsx)(n.Vp9,{bordered:!1,color:$[i].color,children:$[i].label}),(0,l.jsx)(n.ua7,{title:t,mouseEnterDelay:.5,children:(0,l.jsx)(n.aGc,{className:er()["monitor-field__breadcrumb"],items:Q(t).map(ei),role:"presentation",style:{overflow:"hidden"}})})]}),description:(0,l.jsx)(ee,{mode:"multiple",value:null!=g?g:[],urn:t,tagRender:e=>{let r=!!(null==f?void 0:f.find(t=>t.label===e.value));return en({...e,isFromClassifier:r,onClose:()=>{var r;o(t,null!==(r=null==g?void 0:g.filter(t=>t!==e.value))&&void 0!==r?r:[])}})},onSelectDataCategory:e=>{(null==g?void 0:g.includes(e))||o(t,[...null!=g?g:[],e])},disabled:c})})},t)},es=r(812),eo=r(32500),ec=r.n(eo);let ed=(e,t)=>e.find(e=>{let{children:r}=e;return r&&!!r.find(e=>e.key.toString()===t)}),eu=(e,t)=>{var r;return null!==(r=ed(e,t))&&void 0!==r?r:e.reduce((e,r)=>{if(r.children){var l;return null!==(l=ed(r.children,t))&&void 0!==l?l:eu(r.children,t)}return e},null)},ep=e=>{let{node:t,treeData:r,onLoadMore:i,actions:a}=e;if(!t.title)return null;if(t.key.toString().startsWith(F)){let e=eu(r,t.key.toString());return(0,l.jsx)(n.zxk,{type:"link",block:!0,onClick:()=>{(null==e?void 0:e.key)&&i(e.key.toString())},className:"p-0",children:t.title})}if(t.key.toString().startsWith(U))return(0,l.jsx)(n.OdW,{paragraph:!1,title:{width:"80px"},active:!0,children:t.title});let s=t.diffStatus===x.LL.MUTED;return(0,l.jsxs)(n.kCb,{gap:4,align:"center",className:"group ml-1 flex grow ".concat(s?"opacity-40":""),"aria-label":s?"".concat(t.title," (ignored)"):void 0,children:[(0,l.jsx)(n.xvT,{ellipsis:{tooltip:t.title},className:"grow select-none",children:t.title}),(0,l.jsx)(n.Ltx,{menu:{items:a?Object.entries(a).map(e=>{let[r,{disabled:l,...n}]=e;return{key:r,disabled:l([t]),...n}}):[],onClick:e=>{var r;let{key:l,domEvent:n}=e;n.preventDefault(),n.stopPropagation(),null===(r=a[l])||void 0===r||r.callback([t.key],[t])}},destroyOnHidden:!0,className:"group mr-1 flex-none group-[.multi-select]/monitor-tree:pointer-events-none group-[.multi-select]/monitor-tree:opacity-0",children:(0,l.jsx)(n.zxk,{"aria-label":"Show More Resource Actions",icon:(0,l.jsx)(n.PJP.r43,{className:"opacity-0 group-hover:opacity-100 group-[.ant-dropdown-open]:opacity-100"}),type:"text",size:"small",className:"self-end"})})]})},ef=(e,t,r,l)=>e.map(e=>e.key===t?{...e,status:r,diffStatus:l}:e.children?{...e,children:ef(e.children,t,r,l)}:e),eh=(e,t)=>e.map(e=>{if(e.key===t){let{children:t,...r}=e;return r}return e.children?{...e,children:eh(e.children,t)}:e}),eg=e=>{let t=[];return e.children&&e.children.length>0&&e.children.forEach(e=>{"string"==typeof e.key&&(t.push(e.key),t.push(...eg(e)))}),t},ey=(e,t)=>{for(let r of e){if(r.key===t)return r;if(r.children){let e=ey(r.children,t);if(e)return e}}},ev=e=>!!e.update_status&&e.diff_status!==x.LL.MUTED,em=(e,t)=>{var r;let i=e.items.map(e=>{let t=e.resource_type?q[e.resource_type]:void 0,r=e.update_status?G[e.update_status]:void 0;return{title:e.name,key:e.urn,selectable:!0,icon:t?()=>(0,l.jsx)(n.ua7,{title:null==r?void 0:r.tooltip,children:(0,l.jsx)(n.Cts,{className:"h-full",offset:[0,5],color:null==r?void 0:r.color,dot:ev(e),children:(0,l.jsx)(t,{className:"h-full"})})}):void 0,status:e.update_status,diffStatus:e.diff_status,isLeaf:e.resource_type===x.D$.FIELD||!e.has_grandchildren,classifyable:[x.D$.SCHEMA,x.D$.TABLE,x.D$.ENDPOINT,x.D$.FIELD].includes(e.resource_type)}});return(null!==(r=null==i?void 0:i.length)&&void 0!==r?r:0)<100?i:[...i,{title:"Load more...",key:"".concat(F,"-").concat(e.page,"-").concat(t),selectable:!1,isLeaf:!0}]},e_=(e,t,r)=>e.map(e=>{if(e.key===t){var l,n;return{...e,children:[...null!==(n=null===(l=e.children)||void 0===l?void 0:l.filter(e=>!(e.key.toString().startsWith(F)||e.key.toString().startsWith(U))))&&void 0!==n?n:[],...r]}}return e.children?{...e,children:e_(e.children,t,r)}:e}),ex=(e,t,r)=>e.map(e=>e.key===t?{...e,children:r}:e.children?{...e,children:ex(e.children,t,r)}:e),eb=(e,t,r)=>e.map(e=>{if(e.key===t){var l;let t=(null!==(l=e.children)&&void 0!==l?l:[]).filter(e=>!(e.key.toString().startsWith(F)||e.key.toString().startsWith(U))),n=new Map(r.map(e=>[e.key,e])),i=new Map(t.map(e=>[e.key,e])),a=t.map(e=>{let t=n.get(e.key);return null!=t?t:e});return r.forEach(e=>{i.has(e.key)||a.push(e)}),{...e,children:a}}return e.children?{...e,children:eb(e.children,t,r)}:e}),eE=(0,h.forwardRef)((e,t)=>{let{setSelectedNodeKeys:r,selectedNodeKeys:i,nodeActions:a,primaryAction:s}=e,o=(0,f.useRouter)(),{errorAlert:c}=(0,v.VY)(),d=decodeURIComponent(o.query.monitorId),[u]=(0,_.RV)(),[p]=(0,_.M8)(),[g,y]=(0,h.useState)({}),[m,x]=(0,h.useState)([]),[b,E]=(0,h.useState)([]),k=(0,h.useRef)({}),T=(0,h.useRef)({}),S=(0,h.useCallback)(async e=>{var t;let{nodeKey:r,queryParams:l,fastUpdateFn:n,detailedUpdateFn:i}=e,a=(null!==(t=k.current[r])&&void 0!==t?t:0)+1;k.current[r]=a;let s=u({...l,include_descendant_details:!1}),o=u({...l,include_descendant_details:!0});s.then(e=>{let{data:t}=e;t&&k.current[r]===a&&T.current[r]!==a&&n(t)}),o.then(e=>{let{data:t}=e;t&&k.current[r]===a&&(T.current[r]=a,(null!=i?i:n)(t))})},[u]),A=(0,h.useCallback)(e=>new Promise(t=>{let{children:r,key:l}=e;if(r){t();return}let n=l.toString();S({nodeKey:n,queryParams:{monitor_config_id:d,staged_resource_urn:n,size:100},fastUpdateFn:e=>{x(t=>ex(t,l,em(e,n))),y(e=>({...e,[n]:{pageSize:100,pageIndex:1}}))}}),t()}),[S,d]),j=(0,h.useCallback)(e=>{let t=g[e];t&&(x(t=>e_(t,e,[...Array(100)].map((t,r)=>({key:"".concat(U,"-").concat(e,"-").concat(r),title:"SKELETON",isLeaf:!0})))),S({nodeKey:e,queryParams:{monitor_config_id:d,staged_resource_urn:e,size:100,page:t.pageIndex+1},fastUpdateFn:t=>{x(r=>e_(r,e,em(t,e)))},detailedUpdateFn:t=>{x(r=>eb(r,e,em(t,e))),y(t=>{var r,l;return{...t,[e]:{pageSize:100,pageIndex:(null!==(l=null===(r=t[e])||void 0===r?void 0:r.pageIndex)&&void 0!==l?l:0)+1}}})}}))},[g,S,d]),C=(0,h.useCallback)(e=>{x(t=>{let r=ey(t,e),l=[e];return r&&l.push(...eg(r)),E(e=>e.filter(e=>!l.includes(e.toString()))),y(e=>{let t={...e};return l.forEach(e=>{delete t[e]}),t}),l.forEach(e=>{delete k.current[e],delete T.current[e]}),eh(t,e)})},[]),R=(0,h.useCallback)(async e=>{let t=async e=>{try{let t=await p({monitor_config_id:d,...e&&{staged_resource_urn:e}});if(t.error){c((0,es.e$)(t.error),"Failed to get schema explorer ancestors statuses");return}let r=t.data;if(!r)return;e?C(e):r.forEach(e=>{C(e.urn)}),x(e=>r.reduce((e,t)=>ef(e,t.urn,t.update_status,t.diff_status),e))}catch(e){c("An unexpected error occurred while refreshing the schema explorer")}};if(0===e.length){await t();return}await Promise.all(e.map(e=>t(e)))},[p,d,C,c]),I=(0,h.useCallback)((e,t)=>{E(e),t.expanded&&!t.node.children&&A&&A(t.node)},[A]);return(0,h.useImperativeHandle)(t,()=>({refreshResourcesAndAncestors:R})),(0,h.useEffect)(()=>{(async()=>{m.length>0||S({nodeKey:"root",queryParams:{monitor_config_id:d,size:100},fastUpdateFn:e=>{x(em(e))}})})()},[S,d,x,m.length]),(0,l.jsxs)(n.kCb,{gap:"middle",vertical:!0,className:"h-full",children:[(0,l.jsx)(n.Dxz,{level:3,className:"sticky top-0",ellipsis:!0,children:"Schema explorer"}),(0,l.jsx)(n.mpN.DirectoryTree,{loadData:A,treeData:m,expandedKeys:b,onExpand:I,onSelect:e=>{r(e)},showIcon:!0,showLine:!0,blockNode:!0,multiple:!0,rootClassName:"h-full overflow-x-hidden ".concat(ec()["monitor-tree"]," group/monitor-tree ").concat(i.length>1?"multi-select":""),expandAction:"doubleClick",titleRender:e=>(0,l.jsx)(ep,{node:e,treeData:m,onLoadMore:j,actions:a})}),i.length>0&&(0,l.jsxs)(n.kCb,{justify:"space-between",align:"center",gap:"small",children:[(0,l.jsx)(n.zxk,{"aria-label":"Classify ".concat(i.length," Selected Nodes"),icon:(0,l.jsx)(n.QMR,{size:12}),size:"small",onClick:()=>{var e;return null===(e=a[s])||void 0===e?void 0:e.callback(i,i.flatMap(e=>{let t=ey(m,e.toString());return t?[t]:[]}))},className:"flex-none"}),(0,l.jsx)(n.xvT,{ellipsis:!0,children:"".concat(i.length," ").concat((0,D._6)(i.length,"resource","resources")," selected")}),(0,l.jsx)(n.Ltx,{menu:{items:a?Object.entries(a).map(e=>{let[t,{label:r,disabled:l}]=e;return{key:t,label:r,disabled:l(i.flatMap(e=>{let t=ey(m,e.toString());return t?[t]:[]}))}}):[],onClick:e=>{var t;let{key:r,domEvent:l}=e;l.preventDefault(),l.stopPropagation(),null===(t=a[r])||void 0===t||t.callback(i,i.flatMap(e=>{let t=ey(m,e.toString());return t?[t]:[]}))}},destroyOnHidden:!0,className:"group mr-1 flex-none",children:(0,l.jsx)(n.zxk,{"aria-label":"Show More Resource Actions",icon:(0,l.jsx)(n.PJP.r43,{}),size:"small",className:"self-end"})})]})]})});eE.displayName="MonitorTree";var ek=r(12627),eT=r(84418);let eS=(e,t)=>(0,l.jsx)(t,{...e,className:"!sticky top-0 z-[2] bg-white"}),eA=e=>{var t;let{resource:r,fieldActions:i,...a}=e,s=(0,h.useMemo)(()=>{var e;if(!(null==r?void 0:r.classifications))return[];let t="preferred_data_categories"in r&&null!==(e=r.preferred_data_categories)&&void 0!==e?e:[];return r.classifications.filter(e=>t.includes(e.label))},[r]);return(0,l.jsx)(eT.d,{...a,classNames:{body:"!pt-0 !mt-[var(--ant-padding-lg)] max-h-full"},children:r?(0,l.jsx)(n.mQc,{defaultActiveKey:"details",renderTabBar:eS,items:[{key:"details",label:"Details",children:(0,l.jsxs)(n.kCb,{gap:"middle",vertical:!0,children:[(0,l.jsx)(n.w5n,{bordered:!0,size:"small",column:1,items:[..."system_key"in r&&r.system_key?[{key:"system",label:"System",children:r.system_key}]:[],{key:"path",label:"Path",children:r.urn},{key:"data-type",label:"Data type",children:"source_data_type"in r?r.source_data_type:void 0},{key:"description",label:"Description",children:r.description}]}),(0,l.jsx)(n.l09,{layout:"vertical",children:(0,l.jsx)(n.l09.Item,{label:"Data categories",children:(0,l.jsx)(ek.Z,{variant:"outlined",mode:"multiple",maxTagCount:"responsive",value:"preferred_data_categories"in r?r.preferred_data_categories:[],autoFocus:!1,disabled:null==r||!r.diff_status||!E.$k["assign-categories"].some(e=>e===r.diff_status),onChange:e=>i["assign-categories"]([r.urn],!0,{user_assigned_data_categories:e})})})}),s.length>0&&(0,l.jsx)(n.aVo,{"data-testid":"classifications-reasoning-list",dataSource:s,renderItem:e=>{let t=e.confidence_bucket?(0,el.Oq)(e.confidence_bucket):void 0;return(0,l.jsx)(n.aVo.Item,{children:(0,l.jsx)(n.aVo.Item.Meta,{avatar:(0,l.jsx)(n.qEK,{icon:(0,l.jsx)(n.QMR,{color:"black"})}),title:(0,l.jsxs)(n.kCb,{align:"center",gap:"middle",children:[(0,l.jsx)("div",{children:e.label}),t&&(0,l.jsx)(Y.D,{severity:t})]}),description:e.rationale})})}})]})},{key:"activity",label:"Activity",children:(0,l.jsx)(n.aVo,{dataSource:"errors"in r&&r.errors?null===(t=r.errors)||void 0===t?void 0:t.map((e,t)=>({key:t,title:e.phase,description:new Date(e.timestamp).toLocaleString(),content:e.message})):[],renderItem:(e,t)=>(0,l.jsxs)(n.aVo.Item,{children:[(0,l.jsx)(n.aVo.Item.Meta,{title:e.title,description:e.description}),(0,l.jsx)(n.nvN,{ellipsis:{expandable:"collapsible",rows:3},copyable:{icon:(0,l.jsx)(n.PJP.CKM,{className:"pt-1",size:18})},children:e.content})]},t),itemLayout:"vertical"})}]}):null})};var ej=r(31883);let eC=(e,t)=>{let[r]=(0,j.rL)(),l=(0,n.UD8)(),i=(0,n.ddY)(),a=n=>async(a,s,o)=>{if(!e)return;let c=Date.now();if(!await i.confirm((0,el.nB)(E.Me[n],E.e_[n](o))))return;l.open({key:c,type:"loading",content:"".concat(E.T0[n]," ").concat(o," ").concat((0,D._6)(o,"resource","resources"),"..."),duration:0});let d=await r({query:{...a.query},path:{monitor_config_id:e,action_type:n},body:{excluded_resource_urns:s}});if((0,ej.D4)(d)){l.open({key:c,type:"error",content:(0,el.v_)(n),duration:5});return}if(l.open({key:c,type:"success",content:(0,el.NM)(n,o),duration:5}),t&&n!==b.FieldActionType.REVIEW){let e=a.query.staged_resource_urn||[];await t(e)}};return{"assign-categories":a(b.FieldActionType.ASSIGN_CATEGORIES),"promote-removals":a(b.FieldActionType.PROMOTE_REMOVALS),"un-review":a(b.FieldActionType.UN_REVIEW),"un-mute":a(b.FieldActionType.UN_MUTE),review:a(b.FieldActionType.REVIEW),classify:a(b.FieldActionType.CLASSIFY),mute:a(b.FieldActionType.MUTE),promote:a(b.FieldActionType.PROMOTE)}},eR={DRAWER_OPEN:".ant-drawer-open",DRAWER_SELECT:".ant-drawer-open .ant-select",SELECT:".ant-select",SELECT_SELECTOR:".ant-select-selector",SELECT_DISABLED:"ant-select-disabled",INPUT:"input",LIST_ITEM_SELECT:"[data-classification-select]"},eD=(e,t,r,l,i,a)=>{let s=(0,n.UD8)(),o=e=>{let t=e.querySelector(eR.SELECT_SELECTOR);if(!t)return!1;if(e.classList.contains(eR.SELECT_DISABLED))return s.warning("You cannot assign categories to this resource in its current state"),!1;let r=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window});t.dispatchEvent(r);let l=e.querySelector(eR.INPUT);return l&&l.focus(),!0},c=r=>{var l;e&&(e.diff_status&&(null===(l=E.$k[r])||void 0===l?void 0:l.includes(e.diff_status))?t[r]([e.urn]):s.warning(E.Z8[r]))};(0,g.y1)(E.b_.REVIEW,()=>c(b.FieldActionType.REVIEW),[e,t]),(0,g.y1)(E.b_.PROMOTE,()=>c(b.FieldActionType.PROMOTE),[e,t]),(0,g.y1)(E.b_.MUTE,()=>c(b.FieldActionType.MUTE),[e,t]),(0,g.y1)(E.b_.UN_MUTE,()=>c(b.FieldActionType.UN_MUTE),[e,t]),(0,g.y1)(E.b_.REFRESH,()=>a(),[a]),(0,g.y1)(E.b_.TOGGLE_DRAWER,()=>{e&&i?l(void 0):e&&!i&&l(e.urn)},[e,l,i]),(0,g.y1)(E.b_.OPEN_CLASSIFICATION_SELECT,t=>{if(t.preventDefault(),!e)return;let r=null;if(i){let e=document.querySelector(eR.DRAWER_OPEN);e&&(r=e.querySelector(eR.SELECT))}else{let t=CSS.escape(e.urn);r=document.querySelector('[data-classification-select="'.concat(t,'"]'))}r&&o(r)},[e,s,i]),(0,g.y1)("escape",e=>{let t=document.activeElement;if((null==t?void 0:t.tagName)!=="INPUT")return;let r=t.closest(eR.LIST_ITEM_SELECT),l=t.closest(eR.DRAWER_SELECT);(r||l)&&(e.preventDefault(),e.stopPropagation(),t.blur())},{enableOnFormTags:["INPUT"]},[i])};var eI=r(70675);let eM=e=>{let[t,...r]=e.map(e=>Object.values(b.FieldActionType).flatMap(t=>E.$k[t].some(t=>t===e)?[t]:[]));return r.reduce((e,t)=>d().intersection(e,[...t]),null!=t?t:[])},ew=(e,t)=>{let[r]=(0,eI.qb)(),[l]=(0,_.Av)(),[i]=(0,eI.zV)(),[a]=(0,eI.Hf)(),[s]=(0,eI._J)(),[o]=(0,eI.NA)(),[c]=(0,_.n7)(),d=(0,n.UD8)(),u=(0,n.ddY)(),p=(e,r)=>async function(l){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0,a=Date.now();if(!(1===l.length&&n||await u.confirm((0,el.nB)(E.Me[e],E.e_[e](l.length)))))return;d.open({key:a,type:"loading",content:"".concat(E.T0[e]," ").concat(l.length," ").concat((0,D._6)(l.length,"resource","resources"),"..."),duration:0});let s=await r(l,i);if((0,ej.D4)(s)){d.open({key:a,type:"error",content:(0,el.v_)(e),duration:5});return}d.open({key:a,type:"success",content:(0,el.NM)(e,l.length),duration:5}),e!==b.FieldActionType.PROMOTE_REMOVALS&&t&&await t(l)},f=async e=>i({staged_resource_urns:e}),h=async e=>s({staged_resource_urns:e}),g=async e=>a({staged_resource_urns:e}),y=async t=>l({monitor_config_key:e,staged_resource_urns:t}),v=async(t,r)=>{var l;let[n]=t;return o({monitor_config_id:e,staged_resource_urn:n,user_assigned_data_categories:null!==(l=null==r?void 0:r.user_assigned_data_categories)&&void 0!==l?l:void 0})},m=async t=>r({monitor_config_key:e,staged_resource_urns:t}),x=async t=>c({monitor_config_key:e,staged_resource_urns:t});return{"assign-categories":p(b.FieldActionType.ASSIGN_CATEGORIES,v),"promote-removals":p(b.FieldActionType.PROMOTE_REMOVALS,x),"un-review":()=>{},"un-mute":p(b.FieldActionType.UN_MUTE,h),review:p(b.FieldActionType.REVIEW,m),classify:p(b.FieldActionType.CLASSIFY,y),mute:p(b.FieldActionType.MUTE,f),promote:p(b.FieldActionType.PROMOTE,g)}};var eN=r(40431);let eL=()=>{let[e,t]=(0,eN.v1)("resourceStatus",(0,eN.S$)((0,eN.km)(P)).withDefault(V)),[r,l]=(0,eN.v1)("confidenceBucket",(0,eN.S$)((0,eN.km)(Object.values(N.$)))),[n,i]=(0,eN.v1)("dataCategory",(0,eN.S$)(eN.Oi));return{resourceStatus:e,setResourceStatus:t,confidenceBucket:r,setConfidenceBucket:l,dataCategory:n,setDataCategory:i,reset:()=>{t([]),l([]),i([])},resetToInitialState:()=>{t(V),l(null),i(null)}}},eO=e=>new Map(e.map(e=>[e.key,e])),eF=(e,t)=>d()([...new Map([...e,...t]).entries()]).map(t=>{let[r,l]=t;return d().chain(e.get(r)).defaultTo(l).cloneDeep().merge(l).value()}).thru(eO).value();var eU=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],[t,r]=(0,h.useState)(new Map);return{nodes:t,update:l=>{let n=e?eF(t,l):l;d()([...n.entries()]).some(e=>{let[r,l]=e;return!d().isEqual(t.get(r),l)})&&r(e=>new Map([...e,...l]))},reset:()=>{r(new Map)}}},eP=(e,t)=>{var r,l;let n=(0,j.Fp)(e),i=(0,_.IC)(t,{skip:!t.stagedResourceUrn}),{update:a,nodes:s,reset:o}=eU();return(null===(r=n.data)||void 0===r?void 0:r.items)&&a(eO(n.data.items.map(e=>({key:e.urn,...e})))),{listQuery:{...n,nodes:d().chain(null===(l=n.data)||void 0===l?void 0:l.items).defaultTo([]).flatMap(e=>d().chain(s.get(e.urn)).thru(e=>e?[e]:[]).value()).thru(eO).value(),refetch:()=>{o(),n.refetch()}},detailsQuery:{...i,node:t.stagedResourceUrn?s.get(t.stagedResourceUrn):void 0,refetch:()=>{o(),i.refetch()}},nodes:s}};let ez=e=>Object.values(x.LL).flatMap(t=>$[t].label===e?[t]:[]);var eV=e=>{var t,r,i,a,o,c,u,k;let{monitorId:T}=e,C=(0,f.useRouter)(),R=(0,h.useRef)(null),[D,I]=(0,h.useState)(!1),{paginationProps:M,pageIndex:w,pageSize:N,resetPagination:L}=(0,m.S)({defaultPageSize:25}),O=(0,v.Rx)(),{resourceStatus:F,confidenceBucket:U,dataCategory:P,...V}=eL(),{data:q}=(0,_.vc)({monitor_config_id:T}),[W,G]=(0,h.useState)([]),H={path:{monitor_config_id:T},query:{staged_resource_urn:W.map(e=>e.toString()),search:O.searchProps.value,diff_status:F?F.flatMap(ez):void 0,confidence_bucket:U||void 0,data_category:P||void 0}},[J,Y]=(0,h.useState)(),[K,Q]=(0,h.useState)(),[Z,X]=(0,h.useState)(null),[ee,{data:et,isFetching:er}]=(0,j.Nz)(),el=eC(T,async e=>{var t;await (null===(t=R.current)||void 0===t?void 0:t.refreshResourcesAndAncestors(e))}),en=ew(T,async e=>{var t;await (null===(t=R.current)||void 0===t?void 0:t.refreshResourcesAndAncestors(e))}),{listQuery:{nodes:ei,...es},detailsQuery:{data:eo},nodes:ec}=eP({...H,query:{...H.query,size:N,page:w}},{stagedResourceUrn:J}),{excludedKeys:ed,listSelectMode:eu,resetListSelect:ep,selectedKeys:ef,updateSelectedListItem:eh,checkboxProps:eg}=S(Array.from(ei.keys()),{activeListItem:K?{...K,key:null==K?void 0:K.key.toString()}:void 0,enableKeyboardShortcuts:!0}),ey=async e=>{if((null==K?void 0:K.urn)&&e&&Z){let t=[...ei.values()].findIndex(t=>t.urn===e);-1!==t&&Z(t)}Y(e)};(0,g.y1)("?",()=>I(!D),{useKey:!0},[D]);let ev="exclusive"===eu?null==et?void 0:et.allowed_actions:eM(ef.flatMap(e=>{let t=ec.get(e);return(null==t?void 0:t.diff_status)?[t.diff_status]:[]})),em=null!==(c=null===(t=es.data)||void 0===t?void 0:t.total)&&void 0!==c?c:0,e_="exclusive"===eu&&(null===(r=es.data)||void 0===r?void 0:r.total)?em-ed.length:ef.length;return(0,h.useEffect)(()=>{L(),ep()},[F,U,W,O.searchQuery,P]),eD(K,en,eh,ey,!!J,()=>es.refetch()),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.qX1,{className:"h-[calc(100%-48px)] overflow-hidden",children:[(0,l.jsx)(n.qX1.Panel,{defaultSize:250,style:{paddingRight:"var(--ant-padding-md)"},children:(0,l.jsx)(eE,{ref:R,setSelectedNodeKeys:G,selectedNodeKeys:W,primaryAction:b.FieldActionType.CLASSIFY,nodeActions:Object.fromEntries(E.km.map(e=>[e,{label:E.Me[e],disabled:t=>d()(t).map(t=>(e!==b.FieldActionType.PROMOTE_REMOVALS||t.status!==x.Ag.REMOVAL)&&(e!==b.FieldActionType.CLASSIFY||!t.classifyable||t.diffStatus===x.LL.MUTED)&&(e!==b.FieldActionType.MUTE||t.diffStatus===x.LL.MUTED)&&(e!==b.FieldActionType.UN_MUTE||t.diffStatus!==x.LL.MUTED)).some(e=>!0===e),callback:t=>{en[e](t,!1)}}]))})}),(0,l.jsx)(n.qX1.Panel,{style:{paddingLeft:"var(--ant-padding-md)",overflow:"hidden"},children:(0,l.jsxs)(n.kCb,{vertical:!0,gap:"middle",className:"h-full",children:[(0,l.jsxs)(n.kCb,{justify:"space-between",children:[(0,l.jsx)(n.Dxz,{level:2,ellipsis:!0,children:"Monitor results"}),(0,l.jsx)(n.kCb,{align:"center",children:(null==q?void 0:q.last_monitored)&&(0,l.jsxs)(n.xvT,{type:"secondary",children:["Last scan:"," ",new Date(null==q?void 0:q.last_monitored).toLocaleString()]})})]}),(0,l.jsxs)(n.kCb,{justify:"space-between",wrap:"wrap",gap:"small",children:[(0,l.jsxs)(n.kCb,{gap:"small",children:[(0,l.jsx)(y.f,{value:O.searchQuery,onChange:O.updateSearch,placeholder:"Search"}),(0,l.jsx)(n.ua7,{title:"Display keyboard shortcuts",children:(0,l.jsx)(n.zxk,{"aria-label":"Display keyboard shortcuts",icon:(0,l.jsx)(n.PJP.N1d,{}),onClick:()=>I(!0)})})]}),(0,l.jsxs)(n.kCb,{gap:"small",children:[(0,l.jsx)(B,{resourceStatus:F,confidenceBucket:U,dataCategory:P,...V,monitorId:T,stagedResourceUrn:W.map(e=>e.toString())}),(0,l.jsx)(n.Ltx,{onOpenChange:e=>{e&&"exclusive"===eu&&ee({...H,query:{...H.query},body:{excluded_resource_urns:ed.map(e=>e.toString())}})},menu:{items:[...E.aK.map(e=>({key:e,label:!er&&(null==ev?void 0:ev.includes(e))?E.Me[e]:(0,l.jsx)(n.ua7,{title:E.Z8[e],children:E.Me[e]}),disabled:er||!(null==ev?void 0:ev.includes(e)),onClick:async()=>{"exclusive"===eu?await el[e](H,ed.map(e=>e.toString()),e_):await en[e](ef.map(e=>e.toString())),ep()}}))]},disabled:ef.length<=0,children:(0,l.jsx)(n.zxk,{type:"primary",icon:(0,l.jsx)(n.PJP._ME,{}),iconPosition:"end",loading:er,children:"Actions"})}),(0,l.jsx)(n.ua7,{title:"Refresh",children:(0,l.jsx)(n.zxk,{icon:(0,l.jsx)(n.PJP.CQM,{}),onClick:()=>es.refetch(),"aria-label":"Refresh"})})]})]}),(0,l.jsxs)(n.kCb,{gap:"middle",align:"center",children:[(0,l.jsx)(n.XZJ,{id:"select-all",...eg}),(0,l.jsx)("label",{htmlFor:"select-all",children:"Select all"}),!!e_&&(0,l.jsxs)(n.xvT,{strong:!0,children:[e_.toLocaleString()," selected"]})]}),(0,l.jsx)(n.aVo,{dataSource:[...ei.values()],className:"-ml-3 h-full overflow-y-scroll pl-1",loading:es.isFetching,enableKeyboardShortcuts:!0,locale:!O.searchProps.value&&d()(F).intersection(z).isEmpty()?{emptyText:(0,l.jsx)(n.HYy,{image:n.HYy.PRESENTED_IMAGE_SIMPLE,description:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:"All resources have been either approved or ignored."}),(0,l.jsx)("div",{children:"Approved resources can be found in the manage datasets view."}),(0,l.jsx)("div",{children:"To see ignored resources, adjust your filters."})]}),children:(0,l.jsxs)(n.kCb,{gap:"middle",justify:"center",children:[(0,l.jsx)(p(),{href:s.$m,passHref:!0,legacyBehavior:!0,children:(0,l.jsx)(n.zxk,{children:"Manage datasets view"})}),(0,l.jsx)(n.zxk,{type:"primary","aria-label":"Refresh page",onClick:()=>{V.resetToInitialState(),C.reload()},children:"Refresh page"})]})})}:void 0,onActiveItemChange:(e,t,r)=>{X(()=>r),(null==e?void 0:e.urn)?(Q({...e,key:e.urn}),J&&e.urn!==J&&Y(e.urn)):Q(void 0)},renderItem:e=>ea({...e,selected:ef.includes(e.urn),onSelect:eh,onNavigate:ey,onSetDataCategories:(e,t)=>en["assign-categories"]([e],!0,{user_assigned_data_categories:t}),dataCategoriesDisabled:null==e||!e.diff_status||!E.$k["assign-categories"].some(t=>t===e.diff_status),actions:(null==e?void 0:e.diff_status)?E.Vr[e.diff_status].map(t=>(0,l.jsx)(n.ua7,{title:E.Me[t],children:(0,l.jsx)(n.zxk,{"aria-label":E.Me[t],icon:E.W3[t],onClick:()=>en[t]([e.urn]),disabled:null==e||!e.diff_status||!E.$k[t].some(t=>t===e.diff_status),style:{fontSize:"var(--ant-button-content-font-size-lg)"}})},t)):[]})}),(0,l.jsx)(n.tlE,{...M,showSizeChanger:{suffixIcon:(0,l.jsx)(n.PJP._ME,{})},total:(null===(i=es.data)||void 0===i?void 0:i.total)||0,hideOnSinglePage:(null===(a=M.pageSize)||void 0===a?void 0:a.toString())===(null===(o=M.pageSizeOptions)||void 0===o?void 0:o[0])})]})})]}),(0,l.jsx)(eA,{itemKey:null!==(u=null==eo?void 0:eo.urn)&&void 0!==u?u:"",title:null!==(k=null==eo?void 0:eo.name)&&void 0!==k?k:null,titleIcon:(0,l.jsx)(n.PJP.sgG,{}),titleTag:{bordered:!1,color:(null==eo?void 0:eo.diff_status)?$[eo.diff_status].color:void 0,className:"font-normal text-[var(--ant-font-size-sm)]",children:(null==eo?void 0:eo.diff_status)?$[eo.diff_status].label:null},actions:((null==eo?void 0:eo.diff_status)?E.Zu[eo.diff_status]:E.sB).map(e=>({label:E.Me[e],callback:t=>en[e]([t]),disabled:null==eo||!eo.diff_status||!E.$k[e].some(e=>e===eo.diff_status)})),open:!!J,onClose:()=>Y(void 0),resource:eo,fieldActions:en,mask:!K}),(0,l.jsx)(A,{open:D,onCancel:()=>I(!1)})]})},e$=r(15878);let eq={[e$.em.ACTIVITY]:s.CR,[e$.em.ATTENTION_REQUIRED]:s.ic},eW="Attempting to access monitor results without the required feature flag enabled";var eG=()=>{let{flags:{heliosV2:e}}=(0,a.hz)(),t=(0,i.useParams)(),r=(null==t?void 0:t.monitorId)?decodeURIComponent(t.monitorId):void 0,s=!r,c=!e&&eW;return c?(0,l.jsx)(n.x4B,{status:"error",title:c}):(0,l.jsx)(o.Z,{monitorId:r,routeConfig:eq,children:s?null:(0,l.jsx)(eV,{monitorId:r})})}},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}},97947:function(e){e.exports={"monitor-field__title":"MonitorFieldListItem_monitor-field__title__YrxOU","monitor-field__breadcrumb":"MonitorFieldListItem_monitor-field__breadcrumb__Rn4vE"}},32500:function(e){e.exports={"monitor-tree":"MonitorTree_monitor-tree__QKz6T"}}}]);