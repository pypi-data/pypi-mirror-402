(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1206],{55515:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/website/[monitorId]",function(){return n(56497)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var s=n(24246),i=n(26917);let a=e=>{let{...t}=e;return(0,s.jsx)(i.Z,{debounce:!0,...t})}},35287:function(e,t,n){"use strict";var s=n(24246),i=n(10034),a=n(88038),l=n.n(a);n(27378),t.Z=e=>{let{children:t,title:n,fullHeight:a,fullWidth:o,mainProps:r}=e;return(0,s.jsxs)(i.ad9,{"data-testid":n,direction:"column",height:a?"100vh":"calc(100vh - 48px)",width:o?"100vw":"calc(100vw - 240px)",children:[(0,s.jsxs)(l(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)(i.ad9,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...r,children:t})]})}},25415:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var s=n(24246);let{Text:i}=n(10034).Typography,a=e=>{let{count:t}=e;return(0,s.jsx)(i,{size:"sm",strong:!0,"data-testid":"selected-count",children:"".concat(t," selected")})}},56497:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var s=n(24246),i=n(10034),a=n(86677),l=n(25980),o=n(35287),r=n(77830),c=n(58754),d=n(25415),u=n(60240),m=n(30952),v=n(27378),h=n(812),f=n(8125),y=n(46628),p=n(37059),b=n(98145),g=n(9320),x=n(71985),_=n(88708),w=n(66213);let j=e=>{let{monitorId:t,readonly:n,allowIgnore:s,onTabChange:i,consentStatus:a,rowClickUrl:l,resourceType:o}=e,[r,c]=(0,v.useState)(!1),[d,u]=(0,v.useState)(!1),[m,h]=(0,v.useState)(!1),[f,y]=(0,v.useState)(0),[p,b]=(0,v.useState)(0),[g,x]=(0,v.useState)(0);return{columns:(0,v.useMemo)(()=>{if((0,w.yu)(o))return(0,w.b$)({rowClickUrl:l});let e={monitorId:t,readonly:n,allowIgnore:s,onTabChange:i,consentStatus:a,rowClickUrl:l,isDataUsesExpanded:m,isLocationsExpanded:r,isDomainsExpanded:d,dataUsesVersion:g,locationsVersion:f,domainsVersion:p,setIsDataUsesExpanded:h,setIsLocationsExpanded:c,setIsDomainsExpanded:u,setDataUsesVersion:x,setLocationsVersion:y,setDomainsVersion:b};return n?(0,w.Ah)(e):(0,w.xg)(e)},[n,a,l,m,r,d,g,f,p,t,s,i,o])}},k=e=>{let{monitorId:t}=e,n=(0,a.useRouter)(),l=(0,i.p8r)(),[o,c]=(0,v.useState)(),d=(0,f.o)({sorting:{validColumns:Object.values(b.vQ)}}),{pageIndex:m,pageSize:w,searchQuery:k,updateSearch:E,resetState:S}=d,{filterTabs:A,activeTab:C,onTabChange:P,activeParams:I,actionsDisabled:T}=(0,_.Z)(),{data:L,isLoading:R,isFetching:N}=(0,p.wi)({key:t,page:m,size:w,search:k,...I}),[z,{isLoading:M}]=(0,p.rs)(),[D,{isLoading:K}]=(0,p.nP)(),U=(0,v.useCallback)(e=>{var t,n,s;return null!==(s=null!==(n=null!==(t=e.id)&&void 0!==t?t:e.vendor_id)&&void 0!==n?n:e.name)&&void 0!==s?s:r.Kl},[]),Z=(0,v.useCallback)(e=>{var n;let s=null!==(n=e.id)&&void 0!==n?n:r.Kl,i=C?"#".concat(C):"";return"".concat(r.vi,"/").concat(x.w.WEBSITE,"/").concat(t,"/").concat(s).concat(i)},[t,C]),F=(0,v.useMemo)(()=>({enableSelection:!0,getRowKey:U,isLoading:R,isFetching:N,dataSource:(null==L?void 0:L.items)||[],totalRows:(null==L?void 0:L.total)||0,customTableProps:{locale:{emptyText:(0,s.jsx)(i.HYy,{image:i.HYy.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})},sticky:{offsetHeader:40}}}),[U,R,N,null==L?void 0:L.items,null==L?void 0:L.total]),O=(0,f.V)(d,F),{selectedRows:B,resetSelections:H}=O,V=(0,v.useCallback)(async e=>{c(void 0),await P(e),S(),H()},[P,S,H]),{columns:$}=j({monitorId:t,onTabChange:V,readonly:T,allowIgnore:!("diff_status"in I)||!I.diff_status.includes(u.LL.MUTED),consentStatus:o,rowClickUrl:Z});(0,v.useEffect)(()=>{if((null==L?void 0:L.items)&&!o){var e;let t=null===(e=L.items.find(e=>{var t;return(null===(t=e.consent_status)||void 0===t?void 0:t.status)===u.pF.ALERT}))||void 0===e?void 0:e.consent_status;c(null!=t?t:void 0)}},[L,o]);let q=(0,v.useCallback)(async()=>{let e=B.reduce((e,t)=>e+t.total_updates,0),s=await z({monitor_config_key:t,resolved_system_ids:B.map(e=>e.id)});(0,h.D4)(s)?l((0,y.Vo)((0,h.e$)(s.error))):(l((0,y.t5)((0,g._)("".concat(e," assets have been added to the system inventory."),()=>n.push(r.So)))),H())},[B,z,t,l,n,H]),G=(0,v.useCallback)(async()=>{let e=B.reduce((e,t)=>e+t.total_updates,0),n=await D({monitor_config_key:t,resolved_system_ids:B.map(e=>{var t;return null!==(t=e.id)&&void 0!==t?t:r.Kl})});(0,h.D4)(n)?l((0,y.Vo)((0,h.e$)(n.error))):(l((0,y.t5)((0,g._)("".concat(e," assets have been ignored and will not appear in future scans."),async()=>{await P(_.A.IGNORED)}))),H())},[B,D,t,l,P,H]),W=B.some(e=>null===e.id);return{columns:$,data:L,isLoading:R,isFetching:N,searchQuery:k,updateSearch:E,resetState:S,tableProps:O.tableProps,selectionProps:O.selectionProps,filterTabs:A,activeTab:C,handleTabChange:V,activeParams:I,actionsDisabled:T,selectedRows:B,hasSelectedRows:O.hasSelectedRows,resetSelections:H,uncategorizedIsSelected:W,handleBulkAdd:q,handleBulkIgnore:G,anyBulkActionIsLoading:M||K,isAddingResults:M,isIgnoringResults:K}},E=e=>{let{monitorId:t}=e,{columns:n,searchQuery:a,updateSearch:l,tableProps:o,selectionProps:r,filterTabs:c,activeTab:v,handleTabChange:h,activeParams:f,selectedRows:y,hasSelectedRows:p,uncategorizedIsSelected:b,handleBulkAdd:g,handleBulkIgnore:x,anyBulkActionIsLoading:_}=k({monitorId:t});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.v2r,{"aria-label":"Asset state filter",mode:"horizontal",items:c.map(e=>({key:e.hash,label:e.label})),selectedKeys:[v],onClick:async e=>{await h(e.key)},className:"mb-4","data-testid":"asset-state-filter"}),(0,s.jsxs)(i.kCb,{justify:"space-between",align:"center",className:"sticky -top-6 z-10 bg-white py-4",children:[(0,s.jsx)(m.f,{value:a,onChange:l}),(0,s.jsxs)(i.TaI,{size:"large",children:[p&&(0,s.jsx)(d.a,{count:y.length}),(0,s.jsx)(i.Ltx,{menu:{items:[{key:"add",label:(0,s.jsx)(i.ua7,{title:b?"Uncategorized assets can't be added to the inventory":null,placement:"left",children:"Add"}),onClick:g,disabled:b},"diff_status"in f&&!f.diff_status.includes(u.LL.MUTED)?{key:"ignore",label:"Ignore",onClick:x}:null]},trigger:["click"],children:(0,s.jsx)(i.zxk,{type:"primary",icon:(0,s.jsx)(i.PJP._ME,{}),iconPosition:"end",loading:_,disabled:!p,"data-testid":"bulk-actions-menu",children:"Actions"})})]})]}),(0,s.jsx)(i.iA_,{...o,columns:n,rowSelection:r})]})},S=()=>(0,s.jsx)(s.Fragment,{children:"Attempting to access monitor results without the required feature flag enabled"});var A=()=>{let{flags:e}=(0,l.hz)(),t=decodeURIComponent((0,a.useRouter)().query.monitorId);return e.webMonitor?(0,s.jsxs)(o.Z,{title:"Action center - Discovered assets by system",children:[(0,s.jsx)(c.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:r.vi},{title:t}],isSticky:!1}),(0,s.jsx)(E,{monitorId:t})]}):(0,s.jsx)(i.x4B,{status:"error",title:(0,s.jsx)(S,{})})}}},function(e){e.O(0,[431,7245,1690,9200,6043,2888,9774,179],function(){return e(e.s=55515)}),_N_E=e.O()}]);