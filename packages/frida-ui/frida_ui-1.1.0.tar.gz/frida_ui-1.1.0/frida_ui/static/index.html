<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frida UI</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
</head>

<body>
    <header>
        <h1>Frida UI</h1>
        <div class="device-controls">
            <select id="devices">
                <option disabled selected>Loading devices...</option>
            </select>
            <button id="refreshDevices" title="Refresh Devices">
                â†»
            </button>
            <button id="disconnectRemoteBtn" class="secondary hidden" title="Disconnect Remote Device">
                âœ• Disconnect
            </button>
            <button id="toggleRemoteBtn" title="Add Remote Device">
                + Remote
            </button>
            <div id="remoteForm" class="remote-form">
                <input type="text" id="remoteHost" placeholder="192.168.1.100" title="Host/IP" />
                <input type="number" id="remotePort" value="27042" placeholder="Port" title="Port" />
                <button id="connectRemoteBtn" title="Connect">
                    Connect
                </button>
                <button id="cancelRemoteBtn" title="Close">
                    âœ•
                </button>
            </div>
        </div>
        <div class="header-links">
            <a href="https://codeshare.frida.re/browse" target="_blank" rel="noopener" class="btn secondary"
                title="Browse CodeShare">
                CodeShare â†—
            </a>
            <a href="https://github.com/adityatelange/frida-ui" target="_blank" rel="noopener" class="btn secondary"
                title="Browse Source Code on Github">
                Github â†—
            </a>
        </div>
    </header>

    <div class="container">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <input type="text" id="appSearch" class="search-box" placeholder="Search apps...">
                <button id="refreshApps" title="Refresh Apps">
                    â†»
                </button>
            </div>
            <div id="appList" class="app-list"></div>
        </div>
        <div class="resizer-h" id="sidebarResizer"></div>

        <div class="workspace">
            <div id="emptyState" class="empty-state">
                <div id="deviceInfo" class="device-info-panel">
                    <p class="status-msg">Loading device information...</p>
                </div>
                <p class="empty-hint">Select an application from the sidebar to <b>Attach</b> or <b>Spawn</b>.</p>
            </div>

            <div id="sessionView" class="session-view hidden">
                <div class="session-header">
                    <div class="session-info">
                        <span id="sessionName" class="session-title">Target App</span>
                        <span id="sessionIdentifier"></span>
                        <span id="sessionPid" class="badge">PID: -</span>
                    </div>
                    <div class="actions">
                        <button id="attachBtn" class="primary"
                            title="Attach to the selected application">Attach</button>
                        <button id="spawnBtn" class="primary" title="Spawn and attach to the selected application">
                            Spawn &amp; Attach
                        </button>
                        <button id="killBtn" class="hidden danger" title="Kill the current process">
                            Kill
                        </button>
                        <button id="detachBtn" class="hidden" title="Detach from the current session">
                            Detach
                        </button>
                    </div>
                </div>

                <div class="editor-container" id="editorContainer">
                    <div class="editor-header">
                        <div class="panel-title">Script Editor</div>
                        <span id="loadedFilename" class="badge hidden"></span>
                        <div class="editor-actions" aria-hidden="false">
                            <button id="downloadScriptBtn" class="icon-btn" title="Download script"
                                aria-label="Download script">Download</button>
                            <button id="toggleEditorBtn" class="icon-btn" title="Expand Editor"
                                aria-label="Expand Editor">ðŸ—–</button>
                        </div>
                    </div>
                    <div class="editor-wrapper">
                        <textarea id="scriptArea" spellcheck="false" autocomplete="off"></textarea>
                        <div id="scriptEditor" class="monaco-editor hidden" role="textbox" aria-label="Script Editor">
                        </div>
                        <div class="editor-hint">Drag & drop a .js file here<br>or start typing to create a script</div>
                    </div>
                </div>

                <div class="resizer-v" id="editorResizer"></div>

                <div id="controlsArea">
                    <!-- CodeShare Manager -->
                    <div class="codeshare-manager">
                        <div class="panel-title">CodeShare Queue</div>
                        <div class="codeshare-input-row">
                            <input id="codeshareUri" placeholder="URI (e.g. frida/android-ssl-pinning)" />
                            <button id="addCodeshareBtn" title="Add URI to CodeShare queue" type="button">
                                Add
                            </button>
                        </div>
                        <div id="codeshareList"></div>
                    </div>

                    <!-- Manual Script Controls -->
                    <div class="manual-controls">
                        <input id="loadFileInput" type="file" accept=".js,.txt" />
                        <div class="file-controls">
                            <button id="loadFileBtn" title="Load script from file">
                                Load File
                            </button>
                        </div>
                        <button id="spawnRunBtn" class="primary" aria-label="Spawn, Attach & Run"
                            title="Spawn the app, attach, and run the loaded scripts">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="currentColor" aria-hidden="true" focusable="false">
                                <path d="M8 5v14l11-7z" />
                            </svg>
                            Spawn, Attach &amp; Run
                        </button>
                        <button id="sendScript" title="Run the script currently in the editor">
                            Run Editor Script
                        </button>
                        <button id="loadCodeshareSequenceBtn" class="secondary"
                            title="Run all scripts in the CodeShare queue in order">
                            Run CodeShare Scripts
                        </button>
                    </div>
                </div>

                <div class="resizer-v" id="consoleResizer"></div>

                <div class="console-container" id="consoleContainer">
                    <div class="console-header">
                        <div class="console-title">
                            <span>Console Output</span>
                            <button id="clearConsoleBtn" class="icon-btn console-btn" title="Clear console">
                                Clear
                            </button>
                        </div>
                        <div class="console-actions">
                            <button id="downloadConsoleBtn" class="icon-btn console-btn" title="Download console">
                                Download
                            </button>
                            <button id="toggleConsoleBtn" class="icon-btn console-btn" title="Expand Console"
                                aria-label="Expand Console">ðŸ—–</button>
                        </div>
                    </div>
                    <div id="consoleOutput" class="console-output"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>

</html>
