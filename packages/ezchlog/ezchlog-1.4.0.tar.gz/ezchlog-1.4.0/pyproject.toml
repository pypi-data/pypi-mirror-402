[project]
name = "ezchlog"
version = "1.4.0"
description = "Easy git branch friendly changelogs"
authors = [
  { name = "Cyrille Pontvieux", email = "cyrille@enialis.net" },
]
license-files = ["LICENSE"]
license = "MIT"
readme = "README.md"
keywords = ["changelog", "release-notes", "git", "no-conflict", "easy"]
# https://pypi.org/classifiers/
classifiers = [
  "Development Status :: 5 - Production/Stable",
  "Intended Audience :: Developers",
  "Natural Language :: English",
  "Operating System :: OS Independent",
  "Environment :: Console",
  "License :: OSI Approved :: MIT License",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.14",
  "Topic :: Documentation",
  "Topic :: Software Development :: Documentation",
  "Topic :: Text Processing :: Markup :: Markdown",
  "Typing :: Typed",
]
requires-python = ">=3.10"
dependencies = [
  "tomli; python_version < '3.11'",
]

[dependency-groups]
dev = [
  "ruff",
  "mypy",
  "pdbpp",
  "poethepoet",
  "pytest",
  "pytest-cov",
  "pytest-html",
  "pytest-freezer",
]

[project.urls]
# https://github.com/pypi/warehouse/blob/main/warehouse/templates/packaging/detail.html#L20
"Repository" = "https://gitlab.com/snake_coders/ezchlog"
"Documentation" = "https://gitlab.com/snake_coders/ezchlog/-/blob/master/README.md"
"Bug Tracker" = "https://gitlab.com/snake_coders/ezchlog/-/issues"
"Merge Requests" = "https://gitlab.com/snake_coders/ezchlog/-/merge_requests"
"Changelog" = "https://gitlab.com/snake_coders/ezchlog/-/blob/master/CHANGELOG.md"
"Contributing" = "https://gitlab.com/snake_coders/ezchlog/-/blob/master/CONTRIBUTING.md"

[project.scripts]
ezchlog = 'ezchlog:main'

[tool.poe]
include = [
  ".poe/versions.toml",
  ".poe/linters.toml",
  ".poe/tests.toml",
]

[tool.ruff]
line-length = 160
target-version = "py310"

[tool.ruff.lint]
preview = true
# https://docs.astral.sh/ruff/rules
select = [
  "F", # pyflake8
  "E", # pycodestyle errors
  "W", # pycodestyle warnings
  "I", # isort
  "N", # pep8-naming
  "U", # pyupgrade, avoid using deprecated syntax
  "FBT", # boolean trap in function def/call
  "B", # bugbear, avoid non-sense statements
  "COM", # commas
  "DTZ", # datetime timezone
  "PTH", # prefer pathlib
  "LOG", # logging
  "T100", # debugger
  "T201", # print
  "T203", # pprint
  "FIX", # lines with TODO, FIXME, XXX and HACK
  "Q001", "Q002", "Q004", # double quotes for multiline and pydoc + check for unnecessary escape
]
ignore = [
  "N806", # non-lowercase-variable-in-function
  "COM812", # conflict with ruff formatter
]
[tool.ruff.lint.pycodestyle]
ignore-overlong-task-comments = true
[tool.ruff.lint.isort]
combine-as-imports = true
force-wrap-aliases = true
force-single-line = true
relative-imports-order = "closest-to-furthest"
split-on-trailing-comma = false
[tool.ruff.format]
quote-style = "preserve"
line-ending = "lf"

[tool.pytest.ini_options]
pythonpath = "." # indicate the root path
addopts = ["--cov"]
[tool.coverage.run]
source = ["src"]
omit = ["tests/*", "*/__init__.py"]
branch = true
relative_files = true
[tool.coverage.report]
precision = 2
[tool.coverage.xml]
output = "reports/coverage.xml"
[tool.coverage.html]
directory = "reports/coverage"

[build-system]
# https://docs.astral.sh/uv/concepts/build-backend
requires = ["uv_build>=0.9.2,<0.10.0"]
build-backend = "uv_build"
[tool.uv.build-backend]
source-include = ["CONTRIBUTING.md", "CHANGELOG.md"]
source-exclude = ["*.rs", "Cargo.*"]
