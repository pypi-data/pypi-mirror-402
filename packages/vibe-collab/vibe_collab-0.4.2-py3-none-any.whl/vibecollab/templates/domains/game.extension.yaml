# æ¸¸æˆé¢†åŸŸæ‰©å±•
# æ‰©å±• = æµç¨‹é’©å­ + ä¸Šä¸‹æ–‡æ³¨å…¥ + å¼•ç”¨æ–‡æ¡£

# è§’è‰²è¦†ç›–
roles_override:
  - code: "DESIGN"
    name: "æ¸¸æˆç­–åˆ’"
    focus: ["ç©æ³•", "ä½“éªŒ", "å¹³è¡¡", "å™äº‹"]
    triggers: ["ç­–åˆ’", "è®¾è®¡", "ç©æ³•"]

  - code: "ART"
    name: "ç¾æœ¯æŒ‡å¯¼"
    focus: ["é£æ ¼", "èµ„äº§è§„èŒƒ", "è§†è§‰åé¦ˆ"]
    triggers: ["ç¾æœ¯", "è§†è§‰", "é£æ ¼"]

# é¢†åŸŸæ‰©å±•
domain_extensions:
  game:
    
    # ========== é’©å­å®šä¹‰ ==========
    hooks:
      # QA åˆ—æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæ³¨å…¥ GM å‘½ä»¤
      - trigger: "qa.list_test_cases"
        action: "inject_context"
        context_id: "gm_commands"
        condition: "files.exists('docs/GM_COMMANDS.md')"
      
      # åŠŸèƒ½å®Œæˆæ—¶ï¼Œæä¾› GM æµ‹è¯•æ¨¡æ¿
      - trigger: "dev.feature_complete"
        action: "inject_context"
        context_id: "gm_test_guide"
        condition: "project.has_feature('gm_console')"
      
      # æ„å»ºå‰æ£€æŸ¥
      - trigger: "build.pre"
        action: "append_checklist"
        context_id: "build_checklist"
      
      # å¯¹è¯å¼€å§‹æ—¶è¯»å– GDD
      - trigger: "dialogue.start"
        action: "require_file_read"
        context_id: "gdd_files"
        condition: "topic.relates_to('design')"

    # ========== ä¸Šä¸‹æ–‡å®šä¹‰ ==========
    contexts:
      # GM å‘½ä»¤åˆ—è¡¨ - å¼•ç”¨å¤–éƒ¨æ–‡æ¡£
      gm_commands:
        type: "reference"
        source: "docs/GM_COMMANDS.md"
        inline_if_short: true
        description: "GM æ§åˆ¶å°å‘½ä»¤ï¼Œç”¨äºå¿«é€Ÿæµ‹è¯•"
      
      # GM æµ‹è¯•æŒ‡å— - æ¨¡æ¿
      gm_test_guide:
        type: "template"
        content: |
          ## ğŸ® GM å¿«é€Ÿæµ‹è¯•
          
          **æµ‹è¯•ç›®æ ‡**: {feature_name}
          
          **å¯ç”¨ GM å‘½ä»¤**: 
          è§ `docs/GM_COMMANDS.md` æˆ–æŒ‰ `{gm_trigger_key}` æ‰“å¼€æ§åˆ¶å°
          
          **æ¨èæµ‹è¯•æ­¥éª¤**:
          1. ä½¿ç”¨ GM è·³è¿‡éç›®æ ‡æµç¨‹
          2. å¿«é€Ÿåˆ°è¾¾æµ‹è¯•åœºæ™¯
          3. éªŒè¯åŠŸèƒ½è¡¨ç°
          4. å…³é—­ GM éªŒè¯æ­£å¸¸æµç¨‹
      
      # æ„å»ºæ£€æŸ¥æ¸…å•
      build_checklist:
        type: "template"
        content: |
          ## æ„å»ºå‰æ£€æŸ¥
          - [ ] `{build_command}`
          - [ ] åŒå‡» `{dist_entry}` æµ‹è¯•
          - [ ] ç¡®è®¤æ¸¸æˆæ­£å¸¸è¿è¡Œ
          - [ ] æ›´æ–°æ“ä½œè¯´æ˜ï¼ˆå¦‚æœ‰æ–°åŠŸèƒ½ï¼‰
      
      # GDD æ–‡ä»¶åˆ—è¡¨ - åŠ¨æ€è®¡ç®—
      gdd_files:
        type: "file_list"
        pattern: "docs/GDD_*.md"
        description: "æ¸¸æˆè®¾è®¡æ–‡æ¡£"

    # ========== é¢å¤–æ–‡ä»¶ ==========
    additional_files:
      - path: "docs/GM_COMMANDS.md"
        purpose: "GM æ§åˆ¶å°å‘½ä»¤æ–‡æ¡£"
        template: |
          # GM æ§åˆ¶å°å‘½ä»¤
          
          æŒ‰ `/` æ‰“å¼€æ§åˆ¶å°ã€‚
          
          ## é€šç”¨å‘½ä»¤
          
          | å‘½ä»¤ | å‚æ•° | è¯´æ˜ |
          |------|------|------|
          | `god` | - | åˆ‡æ¢æ— æ•Œæ¨¡å¼ |
          | `tp` | x y z | ä¼ é€åˆ°æŒ‡å®šä½ç½® |
          | `give` | item_id [amount] | ç»™äºˆç‰©å“ |
          | `clear` | - | æ¸…ç©ºèƒŒåŒ… |
          | `refill` | - | è¡¥æ»¡èµ„æº |
          
          ## é¡¹ç›®ç‰¹å®šå‘½ä»¤
          
          (æ ¹æ®é¡¹ç›®æ·»åŠ )
      
      - path: "docs/BALANCE.md"
        purpose: "æ•°å€¼å¹³è¡¡è¡¨"
        template: |
          # æ•°å€¼å¹³è¡¡è¡¨
          
          ## è§’è‰²å±æ€§
          
          | å±æ€§ | åˆå§‹å€¼ | è¯´æ˜ |
          |------|--------|------|
          
          ## ç‰©å“æ•°å€¼
          
          (å¾…å¡«å†™)

    # ========== é…ç½®é¡¹ ==========
    config:
      gm_trigger_key: "/"
      build_command: "npm run build"
      dev_command: "npm run dev"
      dist_entry: "dist/index.html"
