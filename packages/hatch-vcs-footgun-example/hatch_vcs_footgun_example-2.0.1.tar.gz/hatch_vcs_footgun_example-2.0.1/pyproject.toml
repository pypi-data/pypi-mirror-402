[build-system]
requires = [
    "hatchling",
    "hatch-vcs",
    "hatch-fancy-pypi-readme",
]
build-backend = "hatchling.build"

[project]
name = "hatch-vcs-footgun-example"
dynamic = [
    "version",
    "readme",
]

[project.license]
file = "LICENSE"

[project.urls]
Homepage = "https://github.com/maresb/hatch-vcs-footgun-example"

[tool.hatch.version]
source = "vcs"

[tool.hatch.metadata.hooks.fancy-pypi-readme]
content-type = "text/markdown"

[[tool.hatch.metadata.hooks.fancy-pypi-readme.fragments]]
path = "README.md"

[[tool.hatch.metadata.hooks.fancy-pypi-readme.substitutions]]
# Non-image relative links map to the normal absolute GitHub URL
# <https://stackoverflow.com/a/46875147>
pattern = '\[(.*?)\]\(((?!https?://)\S+)\)'
replacement='[\1](https://github.com/maresb/hatch-vcs-footgun-example/tree/main/\g<2>)'
