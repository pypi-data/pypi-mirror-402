#!/bin/bash
# Pre-push script to validate code quality
# This script runs the same checks as CI to catch issues early

set -e

echo "ğŸ” Running pre-push validation..."

# Check if uv is available
if ! command -v uv &> /dev/null; then
    echo "âŒ uv is not installed. Please install uv first."
    exit 1
fi

echo "ğŸ“¦ Installing dependencies..."
uv sync --dev

echo "ğŸ¨ Running ruff linting..."
uv run ruff check .

echo "ğŸ¨ Checking code formatting..."
uv run ruff format --check .

echo "ğŸ” Running mypy type checking..."
uv run mypy src

echo "ğŸ§ª Running tests..."
uv run pytest --cov=src --cov-report=term-missing

echo "âœ… All checks passed! Ready to push."