[build-system]
build-backend = "setuptools.build_meta"
requires = ["setuptools>=61.0", "wheel>=0.37.1"]

[project]
name = "wy-qcos-client"
version = "1.0.1"
description = "QCOS CLI"
readme = "README.md"
requires-python = ">=3.10,<3.14"
license = { file = "LICENSE" }
authors = [
    {name = "Zhao Yi", email = "zhaoyi_yewu@cmss.chinamobile.com"},
    {name = "Ji Dalong", email = "jidalong_yewu@cmss.chinamobile.com"},
    {name = "Xu Dong", email = "xudong_yewu@cmss.chinamobile.com"},
    {name = "Wu Fangwei", email = "wufangwei_yewu@cmss.chinamobile.com"},
    {name = "Guo Zhufeng", email = "guozhufeng_yewu@cmss.chinamobile.com"}
]
keywords = ["qcos", "quantum", "operating", "system"]

# Add PyPI classifiers here
classifiers = [
    "Development Status :: 4 - Beta",
    "Environment :: Console",
    "Natural Language :: English",
    "Operating System :: POSIX",
    "Operating System :: POSIX :: Linux",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: Implementation :: CPython",
]

# Required dependencies for install/usage of your package or application
# If you don't have any dependencies, leave this section empty
# Format for dependency strings: https://peps.python.org/pep-0508/
dependencies = [
    # requirements
    "argcomplete==3.6.2",
    "cliff==4.10.0",
    "jsonrpcclient==4.0.3",
    "requests==2.32.5",
    "schema==0.7.7",
]

[project.scripts]
# Command line interface entrypoint scripts
qcos-cli = "wy_qcos_client.shell:main"

[project.urls]
"Homepage" = "https://gitee.com/OpenWuYue/qcos"
"Documentation" = "https://qcos.readthedocs.io"
"Changelog" = "https://gitee.com/OpenWuYue/qcos/blob/develop/CHANGELOG.md"
"Issue Tracker" = "https://gitee.com/OpenWuYue/qcos/issues"
"Source" = "https://gitee.com/OpenWuYue/qcos"

[tool.poetry.dependencies]

[tool.setuptools]
include-package-data = true

[tool.setuptools.packages.find]
where = ["../../src"]
include = ["wy_qcos_client*"]
exclude = ["wy_qcos_client.tests*"]

[tool.isort]
profile = "black"
force_grid_wrap = "2"
known_first_party = "wy_qcos_client"

[tool.mypy]
incremental = true
pretty = true
show_error_context = true
show_column_numbers = true
warn_unused_ignores = true
check_untyped_defs = false
# remove gradually as progress is made
disable_error_code = "import-untyped,var-annotated,import-not-found"
# honor excludes by not following there through imports
follow_imports = "silent"
files = "qcos"
# NOTE: Gradually enable type checking for each package.
# Finally, when the whole repo is migrated this option can be deleted
# and rules applied to the whole repo.
#exclude = "(?x)(^tests/$)"

[tool.ruff]
line-length = 79
target-version = "py311"
exclude = [
    ".venv/",
    ".git/",
    "__pycache__/",
]

[tool.ruff.lint]
select = ["E4", "E7", "E9", "F", "S", "U"]
ignore = [
    "E731",  # Do not assign a `lambda` expression, use a `def`
    "E741",  # Ambiguous variable name: `l`
    "S104",  # Possible binding to all interfaces
    "S311",  # Standard pseudo-random generators are not suitable for
             # cryptographic purposes
    "S324",  # Probable use of insecure hash functions in `hashlib`: `md5`
    "UP009", # UTF-8 encoding declaration is unnecessary
    "UP031", # Use format specifiers instead of percent format
    "UP032", # Use f-string instead of `format` call
    "UP018", # Unnecessary `int` call (rewrite as a literal)
    "UP024", # Replace aliased errors with `OSError`
    "UP030", # Use implicit references for positional format fields
    "UP038", # Use `X | Y` in `isinstance` call instead of `(X, Y)`
    "UP039", # Unnecessary parentheses after class definition
]

[tool.ruff.lint.per-file-ignores]
"src/wu_qcos_client/tests/**/*.py" = ["S101"]
"src/wu_qcos_client/**/__init__.py" = ["F401"]

[tool.ruff.lint.isort]
known-first-party = ["qcos"]
lines-after-imports = 2

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
docstring-code-format = true
skip-magic-trailing-comma = false
line-ending = "auto"

[tool.poetry.extras]
docs = ["Sphinx", "sphinx-rtd-theme", "sphinxcontrib-napoleon"]
