[project]
name = "refi-calculator"
description = "Refi Calculator Package."
readme = "README.md"
requires-python = ">=3.13, <3.14"
license = "Apache-2.0"
license-files = ["LICENSE.txt"]
keywords = ["Refi Calculator"]
authors = [{ name = "Jordan Pflum", email = "jordandpflum@gmail.com" }]
maintainers = [{ name = "Jordan Pflum", email = "jordandpflum@gmail.com" }]
classifiers = [
  "Programming Language :: Python :: 3.13",
  "License :: OSI Approved :: Apache Software License",
]
dependencies = []
version = "0.9.2"

[project.optional-dependencies]
gui = []
web = ["streamlit>=1.28.0,<2.0.0", "plotly>=5.18.0,<6.0.0"]

[project.urls]
homepage = "https://github.com/jordandpflum/refi-calculator"
repository = "https://github.com/jordandpflum/refi-calculator"

[project.scripts]
refi-calculator = "refi_calculator.gui.app:main"
refi-calculator-web = "refi_calculator.web.runner:main"

[tool.poetry]
packages = [{ include = "refi_calculator", from = "src" }]
version = "0.8.0"

[tool.poetry.group.dev.dependencies]
pylint = { version = "^3.3.9" }
black = { version = "^25.9.0" }
debugpy = { version = "^1.8.17" }
pre-commit = { version = "^4.3.0" }
virtualenv = { version = "^20.34.0" }
poethepoet = { version = "^0.37.0" }
isort = { version = "^6.1.0" }
flake8 = { version = "^7.3.0" }
mccabe = { version = "^0.7.0" }
mypy = { version = "^1.18.2" }
pyright = { version = "^1.1.407" }
ruff = { version = "^0.14.5" }
python-lsp-server = { version = "^1.13.2" }
python-lsp-black = { version = "^2.0.0" }
python-lsp-isort = { version = "^0.2.1" }
mkdocs = "^1.6.1"
mkdocs-material = "^9.7.1"
mkdocstrings = { extras = ["python"], version = "^1.0.0" }
mkdocs-gen-files = "^0.6.0"
mkdocs-literate-nav = "^0.6.2"

[tool.poetry.group.test.dependencies]
pytest = { version = "^8.4.2" }
pytest-cov = { version = "^7.0.0" }

[tool.poetry.requires-plugins]
poethepoet = { version = "~0.35.0", extras = ["poetry_plugin"] }
poetry-plugin-export = { version = ">=1.8" }

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.coverage.run]
branch = true

[tool.pycln]
all = true

[tool.black]
target-version = ["py313"]
line-length = 100

[tool.fuff]
target-version = "py313"

[tool.pyright]
include = ["src", "bin"]
extraPaths = ["src"]
exclude = ["tests", "build", "dist", "**/__pycache__"]
venvPath = "."
venv = ".venv"
pythonVersion = "3.13"
typeCheckingMode = "standard"

[tool.ruff]
exclude = [
  ".bzr",
  ".direnv",
  ".eggs",
  ".git",
  ".git-rewrite",
  ".hg",
  ".ipynb_checkpoints",
  ".mypy_cache",
  ".nox",
  ".pants.d",
  ".pyenv",
  ".pytest_cache",
  ".pytype",
  ".ruff_cache",
  ".svn",
  ".tox",
  ".venv",
  ".vscode",
  "__pypackages__",
  "_build",
  "buck-out",
  "build",
  "dist",
  "node_modules",
  "site-packages",
  "venv",
  "tests/",
  "*.ipynb",
]
line-length = 100
indent-width = 4
target-version = "py313"

[tool.ruff.lint]
select = ["E", "F", "PL"]
extend-select = ["D"]
ignore = [
  "D203",    # (one-blank-line-before-class) conflicts with Google Docstring Style (and with D211)
  "D205",    # 1 blank line required between summary line and description
  "D213",    # (multi-line summary second line) conflicts with Google Docstring Style; Google wants the summary on the first line (D212)
  "E501",    # line too long
  "E203",    # whitespace before ':', conflicts with black
  "PLR0913", # Too many arguments to function
]

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.ruff.lint.per-file-ignores]
"tests/**/*" = ["D1"]
"**/__init__.py" = ["D104"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "lf"

[tool.isort]
profile = "black"
line_length = 100
include_trailing_comma = true
force_grid_wrap = 0
use_parentheses = true
ensure_newline_before_comments = true
known_first_party = ["refi-calculator"]

[tool.pydocstringformatter]
write = true
max-line-length = 100
linewrap-full-docstring = true

[tool.docformatter]
wrap-summaries = 100
wrap-descriptions = 100
style = "google"

[tool.codespell]

[tool.rope]
source_folders = ["src"]
ignored_paths = [
  "build",
  "dist",
  ".venv",
  ".tox",
  ".pytest_cache",
  ".mypy_cache",
  ".ruff_cache",
  "**/__pycache__",
  ".git",
]

[tool.poe.executor]
type = "poetry"

[tool.poe.tasks.tests]
shell = """python -m pytest . --cov=. --cov-report term"""
help = "Run tests for project with pytest within a poetry shell"

[tool.poe.tasks.pre-commit]
shell = """pre-commit run"""
help = "Run pre-commit"

[tool.poe.tasks.pre-commit-verbose]
shell = """pre-commit run --config .pre-commit-config-verbose.yaml"""
help = "Run pre-commit with the verbose configuation."
