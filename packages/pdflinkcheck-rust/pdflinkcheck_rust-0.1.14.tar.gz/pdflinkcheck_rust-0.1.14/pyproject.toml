[project]
name = "pdflinkcheck-rust"
version = "0.1.14"
readme="README.md"
description = "Rust core for pdflinkcheck: fast PDF link & TOC extraction"
requires-python = ">=3.10"
authors = [{ name = "George Clayton Bennett", email = "george.bennett@memphistn.gov" }]
dependencies = []
#[dependencies]
#pyo3 = { version = "0.27.1", features = ["extension-module"] } 

[build-system]
requires = ["maturin>=1.5,<2.0"]
build-backend = "maturin"

[tool.maturin]
# Points to the Rust code
manifest-path = "Cargo.toml"
# Ensure the .so / .pyd file is placed inside a folder of this name
module-name = "pdflinkcheck_rust"
python-source = "python"
# Expose the maturin-built CLI
include-bins = true
# This feature is essential for PyO3 modules
features = ["pyo3/extension-module"]

# Include all platform extensions
include = [
  { path = "python/pdflinkcheck_rust/libpdfium.so", format = "wheel" },
  { path = "python/pdflinkcheck_rust/libpdfium.dylib", format = "wheel" },
  #{ path = "python/pdflinkcheck_rust/pdfium.dll", format = "wheel" },
]
