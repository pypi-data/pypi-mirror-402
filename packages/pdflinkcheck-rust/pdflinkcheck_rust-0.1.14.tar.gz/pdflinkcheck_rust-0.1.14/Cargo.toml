[package]
name = "pdflinkcheck_rust"  
version = "0.1.9"
readme = "README.md"
edition = "2021"
license = "MIT"
description = "Rust core for pdflinkcheck: fast PDF link & TOC extraction"
authors = ["City of Memphis Wastewater <george.bennett@memphistn.gov>"]

# This section is critical for Linux and macOS wheels
#[target.'cfg(target_os = "linux")'.metadata.maturin]
#rustflags = ["-C", "link-arg=-Wl,-rpath,'$ORIGIN'"]

#[target.'cfg(target_os = "macos")'.metadata.maturin]
#rustflags = ["-C", "link-arg=-Wl,-rpath,@loader_path"]

[package.metadata.maturin]
rustflags = ["-C", "link-arg=-Wl,-rpath,'$ORIGIN'"]

[lib]
name = "pdflinkcheck_rust"
crate-type = ["cdylib", "rlib"]
path = "src/lib.rs"

[[bin]]
name = "pdflinkcheck-rust-cli" # The actual command name
path = "src/main.rs"

[dependencies]
# extension-module is only for the cdylib build
pyo3 = { version = "0.27.1", features = ["extension-module"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
thiserror = "1"
pdfium-render = { version = "0.8.37", features = ["thread_safe"] }

