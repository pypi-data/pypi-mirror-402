# V2 API (Readwise)

The V2 API provides access to Readwise highlights, books, and tags.

## V2Client

Access via `client.v2`:

```python
from readwise_sdk import ReadwiseClient

client = ReadwiseClient()
v2 = client.v2
```

## Highlights

### list_highlights

List all highlights with optional filtering:

```python
# All highlights
for h in client.v2.list_highlights():
    print(h.text)

# Filter by book
highlights = client.v2.list_highlights(book_id=123)

# Filter by date
from datetime import datetime
highlights = client.v2.list_highlights(
    updated_after=datetime(2024, 1, 1)
)
```

### get_highlight

Get a single highlight by ID:

```python
highlight = client.v2.get_highlight(highlight_id=123)
```

### create_highlights

Create one or more highlights:

```python
from readwise_sdk.v2.models import HighlightCreate

highlights = [
    HighlightCreate(text="Quote 1", title="Book 1"),
    HighlightCreate(text="Quote 2", title="Book 2"),
]
ids = client.v2.create_highlights(highlights)
```

### update_highlight

Update a highlight:

```python
from readwise_sdk.v2.models import HighlightUpdate

update = HighlightUpdate(note="Updated note")
client.v2.update_highlight(highlight_id=123, update=update)
```

### delete_highlight

Delete a highlight:

```python
client.v2.delete_highlight(highlight_id=123)
```

## Books

### list_books

List all books:

```python
for book in client.v2.list_books():
    print(f"{book.title} - {book.num_highlights}")

# Filter by category
from readwise_sdk.v2.models import BookCategory
books = client.v2.list_books(category=BookCategory.ARTICLES)
```

### get_book

Get a single book:

```python
book = client.v2.get_book(book_id=123)
```

## Tags

### list_highlight_tags

```python
tags = client.v2.list_highlight_tags(highlight_id=123)
```

### create_highlight_tag

```python
client.v2.create_highlight_tag(highlight_id=123, name="important")
```

### delete_highlight_tag

```python
client.v2.delete_highlight_tag(highlight_id=123, tag_id=456)
```

### list_book_tags

```python
tags = client.v2.list_book_tags(book_id=123)
```

### create_book_tag

```python
client.v2.create_book_tag(book_id=123, name="favorites")
```

## Export

### export_highlights

Export all highlights with book metadata:

```python
for book in client.v2.export_highlights():
    print(f"{book.title}: {len(book.highlights)} highlights")
```

## Daily Review

### get_daily_review

Get today's review highlights:

```python
review = client.v2.get_daily_review()
for h in review.highlights:
    print(h.text)
```

## Models

### Highlight

```python
@dataclass
class Highlight:
    id: int
    text: str
    note: str | None
    location: int | None
    location_type: str | None
    highlighted_at: datetime | None
    url: str | None
    color: str | None
    updated: datetime | None
    book_id: int | None
    tags: list[Tag] | None
```

### Book

```python
@dataclass
class Book:
    id: int
    title: str
    author: str | None
    category: BookCategory | None
    source: str | None
    num_highlights: int
    last_highlight_at: datetime | None
    updated: datetime | None
    cover_image_url: str | None
    highlights_url: str | None
    source_url: str | None
    asin: str | None
    tags: list[Tag] | None
```

### BookCategory

```python
class BookCategory(str, Enum):
    BOOKS = "books"
    ARTICLES = "articles"
    TWEETS = "tweets"
    PODCASTS = "podcasts"
    SUPPLEMENTALS = "supplementals"
```

### HighlightCreate

Model for creating new highlights:

```python
from readwise_sdk.v2 import HighlightCreate, BookCategory

highlight = HighlightCreate(
    text="Important quote from the book",
    title="Book Title",
    author="Author Name",
    source_url="https://example.com",
    source_type="kindle",
    category=BookCategory.BOOKS,
    note="My thoughts on this quote",
    location=42,
    location_type="page",
    highlighted_at=datetime.now(),
)
```

Fields:
- `text` (required): The highlight text (max 8191 chars)
- `title`: Source title (max 511 chars)
- `author`: Author name (max 1024 chars)
- `source_url`: URL of the source
- `source_type`: Type identifier (e.g., "kindle", "web")
- `category`: BookCategory enum
- `note`: Note attached to highlight (max 8191 chars)
- `location`: Location in source (page number, etc.)
- `location_type`: Type of location (e.g., "page", "time")
- `highlighted_at`: When the highlight was made

### HighlightUpdate

Model for updating existing highlights:

```python
from readwise_sdk.v2 import HighlightUpdate, HighlightColor

update = HighlightUpdate(
    text="Updated highlight text",
    note="Updated note",
    location=50,
    location_type="page",
    color=HighlightColor.BLUE,
)

client.v2.update_highlight(highlight_id=123, update=update)
```

Fields (all optional - only set fields are sent):
- `text`: New highlight text
- `note`: New note
- `location`: New location
- `location_type`: New location type
- `url`: New URL
- `color`: HighlightColor enum
