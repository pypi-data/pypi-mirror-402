# V2 API (Readwise)

The V2 API provides access to Readwise highlights, books, and tags.

## V2Client

Access via `client.v2`:

```python
from readwise_sdk import ReadwiseClient

client = ReadwiseClient()
v2 = client.v2
```

## Highlights

### list_highlights

List all highlights with optional filtering:

```python
# All highlights
for h in client.v2.list_highlights():
    print(h.text)

# Filter by book
highlights = client.v2.list_highlights(book_id=123)

# Filter by date
from datetime import datetime
highlights = client.v2.list_highlights(
    updated_after=datetime(2024, 1, 1)
)
```

### get_highlight

Get a single highlight by ID:

```python
highlight = client.v2.get_highlight(highlight_id=123)
```

### create_highlights

Create one or more highlights:

```python
from readwise_sdk.v2.models import HighlightCreate

highlights = [
    HighlightCreate(text="Quote 1", title="Book 1"),
    HighlightCreate(text="Quote 2", title="Book 2"),
]
ids = client.v2.create_highlights(highlights)
```

### update_highlight

Update a highlight:

```python
from readwise_sdk.v2.models import HighlightUpdate

update = HighlightUpdate(note="Updated note")
client.v2.update_highlight(highlight_id=123, update=update)
```

### delete_highlight

Delete a highlight:

```python
client.v2.delete_highlight(highlight_id=123)
```

## Books

### list_books

List all books:

```python
for book in client.v2.list_books():
    print(f"{book.title} - {book.num_highlights}")

# Filter by category
from readwise_sdk.v2.models import BookCategory
books = client.v2.list_books(category=BookCategory.ARTICLES)
```

### get_book

Get a single book:

```python
book = client.v2.get_book(book_id=123)
```

## Tags

### list_highlight_tags

```python
tags = client.v2.list_highlight_tags(highlight_id=123)
```

### create_highlight_tag

```python
client.v2.create_highlight_tag(highlight_id=123, name="important")
```

### delete_highlight_tag

```python
client.v2.delete_highlight_tag(highlight_id=123, tag_id=456)
```

### list_book_tags

```python
tags = client.v2.list_book_tags(book_id=123)
```

### create_book_tag

```python
client.v2.create_book_tag(book_id=123, name="favorites")
```

## Export

### export_highlights

Export all highlights with book metadata:

```python
for book in client.v2.export_highlights():
    print(f"{book.title}: {len(book.highlights)} highlights")
```

## Daily Review

### get_daily_review

Get today's review highlights:

```python
review = client.v2.get_daily_review()
for h in review.highlights:
    print(h.text)
```

## Models

### Highlight

```python
@dataclass
class Highlight:
    id: int
    text: str
    note: str | None
    location: int | None
    location_type: str | None
    highlighted_at: datetime | None
    url: str | None
    color: str | None
    updated: datetime | None
    book_id: int | None
    tags: list[Tag] | None
```

### Book

```python
@dataclass
class Book:
    id: int
    title: str
    author: str | None
    category: BookCategory | None
    source: str | None
    num_highlights: int
    last_highlight_at: datetime | None
    updated: datetime | None
    cover_image_url: str | None
    highlights_url: str | None
    source_url: str | None
    asin: str | None
    tags: list[Tag] | None
```

### BookCategory

```python
class BookCategory(str, Enum):
    BOOKS = "books"
    ARTICLES = "articles"
    TWEETS = "tweets"
    PODCASTS = "podcasts"
    SUPPLEMENTALS = "supplementals"
```
