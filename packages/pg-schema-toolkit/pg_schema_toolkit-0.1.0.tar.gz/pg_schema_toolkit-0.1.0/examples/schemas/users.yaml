# Example: Users table with audit trail
schema: public
extends: base_definitions.yaml
description: "User accounts with full audit history"

tables:
  - name: users
    extends: audited_table
    description: "Application users"

    columns:
      - name: email
        field_type: email
        description: "User email address"

      - name: username
        field_type: slug
        description: "Unique username"

      - name: full_name
        field_type: name
        description: "User's full name"

      - name: is_active
        field_type: is_active
        description: "Account active status"

      - name: metadata
        field_type: jsonb_data
        description: "Additional user metadata"

    indexes:
      - columns: [email]
      - columns: [username]
      - columns: [is_active]
        where: "deleted_at IS NULL"
