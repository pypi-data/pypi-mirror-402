[project]
name = "pj-bridge"
version = "1.0.0"
description = "Bridge a delimiter-framed binary stream into JSON over WebSocket for PlotJuggler (or stdout if file)."
readme = "README.md"
requires-python = ">=3.12"
authors = [{ name = "Carlos Asmat" }, { name = "Gene Gelfand" }]
license = { text = "MIT" }

dependencies = [
  "websockets>=12.0,<14.0",
]

[project.optional-dependencies]
dev = [
  "pre-commit>=4.3.0",
  "ruff>=0.6.8",
  "mypy>=1.10.0",
  "bandit>=1.7.9",
  "pytest>=8.2.0",
  "pytest-cov>=5.0.0",
  "uv>=0.4",
  "types-requests",
  "types-setuptools",
]

[project.scripts]
pj-bridge = "pj_bridge.bridge:main"
stream-parser = "pj_bridge.stream_parser:main"
socket-client = "pj_bridge.socket_client:main"
derive-struct = "pj_bridge.derive_struct:main"
json-to-csv = "pj_bridge.json_to_csv:main"

[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
package-dir = {"" = "src"}

[tool.setuptools.packages.find]
where = ["src"]
include = ["pj_bridge*"]

[tool.ruff]
line-length = 100
[tool.ruff.lint]
select = ["E", "F", "I"]
