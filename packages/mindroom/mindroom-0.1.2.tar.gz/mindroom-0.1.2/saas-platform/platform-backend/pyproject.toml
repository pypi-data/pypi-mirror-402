[build-system]
build-backend = "hatchling.build"

requires = [ "hatchling" ]

[project]
name = "platform-backend"
version = "0.1.0"
description = "MindRoom SaaS Platform Backend"
requires-python = ">=3.13"
classifiers = [ "Programming Language :: Python :: 3 :: Only", "Programming Language :: Python :: 3.13" ]
dependencies = [
  "apscheduler>=3.10",
  "cachetools>=6.2",
  "fastapi>=0.104.1",
  "prometheus-client>=0.22.1",
  "prometheus-fastapi-instrumentator>=7.1",
  "python-dotenv>=1",
  "pyyaml>=6.0.2",
  "slowapi>=0.1.9",
  "stripe>=7",
  "supabase>=2.18.1",
  "uvicorn[standard]>=0.24",
]

[dependency-groups]
dev = [
  "hypothesis>=6.138.16",
  "pytest>=8.4",
  "pytest-asyncio>=0.23",
  "pytest-cov>=7",
  "pytest-timeout>=2",
]

[tool.hatch.build]
sources = { "src" = "" }
include = [
  "src/backend/**/*.py",
  "src/main.py",
]

[tool.ruff]
target-version = "py313"
line-length = 120

extend-exclude = [ "tests/conftest.py" ]

[tool.pytest.ini_options]
testpaths = [ "tests" ]
python_files = "test_*.py"
addopts = """
    -vvv
    --cov=backend
    --cov-report term
    --cov-report html
    --cov-report xml
    --asyncio-mode=strict
    --timeout 60
    --durations 20
"""
