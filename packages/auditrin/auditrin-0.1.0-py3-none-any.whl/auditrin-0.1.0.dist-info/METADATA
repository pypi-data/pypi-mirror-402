Metadata-Version: 2.4
Name: auditrin
Version: 0.1.0
Summary: AI-powered documentation drift detection - Ensure your docs stay in sync with your code
Project-URL: Homepage, https://github.com/SecrinLabs/secrin
Project-URL: Documentation, https://github.com/SecrinLabs/secrin/tree/main/packages/auditor
Project-URL: Repository, https://github.com/SecrinLabs/secrin
Project-URL: Issues, https://github.com/SecrinLabs/secrin/issues
Author-email: Secrin Labs <hello@secrinlabs.com>
License-Expression: MIT
License-File: LICENSE
Keywords: ai,audit,cli,developer-tools,docs-as-code,documentation,drift-detection,gemini
Classifier: Development Status :: 4 - Beta
Classifier: Environment :: Console
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Documentation
Classifier: Topic :: Software Development :: Documentation
Classifier: Topic :: Software Development :: Quality Assurance
Requires-Python: >=3.11
Requires-Dist: click>=8.1.0
Requires-Dist: google-genai>=1.0.0
Requires-Dist: rich>=13.0.0
Description-Content-Type: text/markdown

# Secrin Auditor

**AI-powered documentation drift detection** - Ensure your docs stay in sync with your code.

[![PyPI version](https://badge.fury.io/py/secrin-auditor.svg)](https://pypi.org/project/secrin-auditor/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## Installation

```bash
pip install secrin-auditor
```

## Quick Start

```bash
# Set your Gemini API key
export GEMINI_API_KEY="your-key-from-aistudio.google.com"

# Run the audit
secrin-audit ./docs ./src
```

## Features

- ğŸ” **Drift Detection** - Find where docs say X but code does Y
- ğŸ·ï¸ **CodeWiki Tags** - Link docs to specific code files
- ğŸ¤– **AI-Powered** - Uses Gemini 2.0 Flash for intelligent comparison
- ğŸ“Š **Rich Output** - Beautiful terminal tables with issue details
- ğŸš€ **CI/CD Ready** - Exit code 1 on failures for pipeline integration

## Usage

### Basic Audit

```bash
secrin-audit <docs_folder> <repo_folder>
```

**Arguments:**
| Argument | Description |
|----------|-------------|
| `docs_folder` | Path to your documentation folder |
| `repo_folder` | Path to your codebase |

**Options:**
| Option | Description |
|--------|-------------|
| `-v, --verbose` | Show verbose output |

### Example Output

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Secrin Auditor V1           â”‚
â”‚ Powered by Gemini 2.0 Flash â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

                    Audit Results
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Document      â”ƒ Linked Code      â”ƒ Status â”ƒ AI Feedback               â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ api-routes.md â”‚ routes/api.py    â”‚ FAIL   â”‚ â€¢ [WRONG_ENDPOINT] Doc    â”‚
â”‚               â”‚                  â”‚        â”‚   says /api/users but     â”‚
â”‚               â”‚                  â”‚        â”‚   code has /api/v1/users  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ auth.md       â”‚ auth/handler.py  â”‚ PASS   â”‚ âœ… Accurate               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Summary: 2 docs audited

âœ– Audit Failed: 1 document(s) have drifted from code.
```

## Linking Docs to Code

### Explicit Links (Recommended)

Add CodeWiki tags to link documentation to specific code files:

```markdown
<!-- codewiki:src/auth/jwt_handler.py -->

# JWT Authentication

This module handles JWT token generation and validation...
```

### Multiple Files

```markdown
<!-- codewiki:src/auth/jwt_handler.py -->
<!-- codewiki:src/auth/middleware.py -->

# Authentication System

This document covers the complete auth system...
```

### Implicit Matching

If no tags are present, the auditor tries to match by filename:

- `auth.md` â†’ looks for `auth.py`, `auth.ts`, etc.

For overview docs without matches, the entire codebase context is used.

## Issue Types

| Type              | Description                           |
| ----------------- | ------------------------------------- |
| `MISSING_ROUTE`   | Route documented but not in code      |
| `WRONG_ENDPOINT`  | Endpoint path or method mismatch      |
| `OUTDATED_PARAM`  | Parameter no longer exists or changed |
| `NOT_IMPLEMENTED` | Feature documented but not coded      |
| `WRONG_PATH`      | File or module path incorrect         |
| `CONFIG_DRIFT`    | Environment variable mismatch         |

## CI/CD Integration

### GitHub Actions

```yaml
name: Documentation Audit

on:
  push:
    branches: [main]
  pull_request:

jobs:
  audit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install Secrin Auditor
        run: pip install secrin-auditor

      - name: Run Documentation Audit
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        run: secrin-audit ./docs ./src
```

### Pre-commit Hook

```yaml
# .pre-commit-config.yaml
repos:
  - repo: local
    hooks:
      - id: docs-audit
        name: Documentation Audit
        entry: secrin-audit ./docs ./src
        language: system
        pass_filenames: false
        always_run: true
```

## Python API

```python
from secrin_auditor import run_audit, audit_with_gemini

# Run full audit
issues = run_audit("./docs", "./src", verbose=True)

# Audit single doc
result = audit_with_gemini(
    doc_text="# API Routes\nGET /users - List users",
    code_text="@app.get('/api/v1/users')\ndef list_users(): ...",
    filename="api.md"
)
print(result)  # "â€¢ [WRONG_ENDPOINT] Doc says /users but code has /api/v1/users"
```

## Requirements

- Python 3.11+
- Gemini API key ([Get one free](https://aistudio.google.com/))

## License

MIT License - see [LICENSE](LICENSE) for details.

## Contributing

Contributions welcome! Please read our [Contributing Guide](CONTRIBUTING.md).

---

**Part of the [Secrin](https://github.com/SecrinLabs/secrin) project** - The memory layer for engineering teams.
