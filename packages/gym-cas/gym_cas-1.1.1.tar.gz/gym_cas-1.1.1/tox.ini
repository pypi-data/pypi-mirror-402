[tox]
envlist = py310,py311,py312,py313,py314,coverage,lint,typecheck
skip_missing_interpreters = false

[testenv]
description = Run tests
package = editable
extras = test,excel
commands = pytest {args:tests}

[testenv:coverage]
description = Run tests with coverage report and generate badge
package = editable
extras = test,excel
deps = genbadge[coverage]
commands =
    coverage run -m pytest --junitxml=./reports/junit.xml tests
    coverage xml
    coverage report --format total
    genbadge coverage -o coverage.svg

[testenv:lint]
description = Run ruff checks
skip_install = true
deps = ruff
commands = ruff check . --fix

[testenv:typecheck]
description = Run type checking with ty
package = editable
deps = ty
commands = ty check .
