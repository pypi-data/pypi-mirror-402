# coding: utf-8

"""
    Antimatter Security Lakehouse Public API

    Interact with the Antimatter ASL API.

    The version of the OpenAPI document: 0.0.1
    Contact: support@antimatter.io
    Generated by OpenAPI Generator (https://openapi-generator.tech)

    Do not edit the class manually.
"""  # noqa: E501


from __future__ import annotations
import pprint
import re  # noqa: F401
import json

from pydantic import BaseModel, ConfigDict, Field, StrictBool, StrictStr
from typing import Any, ClassVar, Dict, List, Optional
from lakewatch_api.models.core_v1_data_source_field_spec import CoreV1DataSourceFieldSpec
from lakewatch_api.models.core_v1_data_source_field_utils import CoreV1DataSourceFieldUtils
from lakewatch_api.models.core_v1_data_source_spec_silver_pre_transform_custom import CoreV1DataSourceSpecSilverPreTransformCustom
from lakewatch_api.models.core_v1_data_source_spec_silver_pre_transform_preset_overrides import CoreV1DataSourceSpecSilverPreTransformPresetOverrides
from typing import Optional, Set
from typing_extensions import Self

class CoreV1DataSourceSpecSilverPreTransform(BaseModel):
    """
    Pretransforms are meant to normalize data (from different sources) into a standard format for expected  silver cleaning/transformation actions. 
    """ # noqa: E501
    use_preset: Optional[StrictStr] = Field(default=None, description="The name of the preset to use for this pretransform. This is often pre-populated when the original  source and sourceType are determined. If `skipPreTransform` is set to true, the subsequent contents of this attribute will be ignored. This field can be null in which case the user is likely to provide custom pretransform logic such as the `addFields` and `filter` attributes. ", alias="usePreset")
    skip_pre_transform: Optional[StrictBool] = Field(default=None, description="Whether to forgo the pre-transform step.", alias="skipPreTransform")
    custom: Optional[CoreV1DataSourceSpecSilverPreTransformCustom] = None
    filter: Optional[StrictStr] = Field(default=None, description="A SQL filter to apply to the data at the beginning of the preTransform phase. This can be either an inclusion or  exclusion filter as determined by the user. If usePreset was specified this will override the preset filter. ")
    post_filter: Optional[StrictStr] = Field(default=None, description="A SQL filter to apply at the end of the preTransform phase. This can be either an inclusion or exclusion filter as determined by the user. If usePreset was specified this will override the preset postFilter.", alias="postFilter")
    preset_overrides: Optional[CoreV1DataSourceSpecSilverPreTransformPresetOverrides] = Field(default=None, alias="presetOverrides")
    add_fields: Optional[List[CoreV1DataSourceFieldSpec]] = Field(default=None, description="User defined fields to add to the data transformation. These fields can be derived from  existing fields, an expression, from a literal value, from a join, etc. ", alias="addFields")
    utils: Optional[CoreV1DataSourceFieldUtils] = Field(default=None, description="A list of utilities for handling fields, including managing unreferenced fields and extracting fields  from hierarchical or JSON objects. Supplying a FieldUtils object here will override the FieldUtil in the preset. ")
    __properties: ClassVar[List[str]] = ["usePreset", "skipPreTransform", "custom", "filter", "postFilter", "presetOverrides", "addFields", "utils"]

    model_config = ConfigDict(
        populate_by_name=True,
        validate_assignment=True,
        protected_namespaces=(),
    )


    def to_str(self) -> str:
        """Returns the string representation of the model using alias"""
        return pprint.pformat(self.model_dump(by_alias=True))

    def to_json(self) -> str:
        """Returns the JSON representation of the model using alias"""
        # TODO: pydantic v2: use .model_dump_json(by_alias=True, exclude_unset=True) instead
        return json.dumps(self.to_dict())

    @classmethod
    def from_json(cls, json_str: str) -> Optional[Self]:
        """Create an instance of CoreV1DataSourceSpecSilverPreTransform from a JSON string"""
        return cls.from_dict(json.loads(json_str))

    def to_dict(self) -> Dict[str, Any]:
        """Return the dictionary representation of the model using alias.

        This has the following differences from calling pydantic's
        `self.model_dump(by_alias=True)`:

        * `None` is only added to the output dict for nullable fields that
          were set at model initialization. Other fields with value `None`
          are ignored.
        """
        excluded_fields: Set[str] = set([
        ])

        _dict = self.model_dump(
            by_alias=True,
            exclude=excluded_fields,
            exclude_none=True,
        )
        # override the default output from pydantic by calling `to_dict()` of custom
        if self.custom:
            _dict['custom'] = self.custom.to_dict()
        # override the default output from pydantic by calling `to_dict()` of preset_overrides
        if self.preset_overrides:
            _dict['presetOverrides'] = self.preset_overrides.to_dict()
        # override the default output from pydantic by calling `to_dict()` of each item in add_fields (list)
        _items = []
        if self.add_fields:
            for _item_add_fields in self.add_fields:
                if _item_add_fields:
                    _items.append(_item_add_fields.to_dict())
            _dict['addFields'] = _items
        # override the default output from pydantic by calling `to_dict()` of utils
        if self.utils:
            _dict['utils'] = self.utils.to_dict()
        # set to None if use_preset (nullable) is None
        # and model_fields_set contains the field
        if self.use_preset is None and "use_preset" in self.model_fields_set:
            _dict['usePreset'] = None

        # set to None if skip_pre_transform (nullable) is None
        # and model_fields_set contains the field
        if self.skip_pre_transform is None and "skip_pre_transform" in self.model_fields_set:
            _dict['skipPreTransform'] = None

        # set to None if custom (nullable) is None
        # and model_fields_set contains the field
        if self.custom is None and "custom" in self.model_fields_set:
            _dict['custom'] = None

        # set to None if filter (nullable) is None
        # and model_fields_set contains the field
        if self.filter is None and "filter" in self.model_fields_set:
            _dict['filter'] = None

        # set to None if post_filter (nullable) is None
        # and model_fields_set contains the field
        if self.post_filter is None and "post_filter" in self.model_fields_set:
            _dict['postFilter'] = None

        # set to None if preset_overrides (nullable) is None
        # and model_fields_set contains the field
        if self.preset_overrides is None and "preset_overrides" in self.model_fields_set:
            _dict['presetOverrides'] = None

        # set to None if add_fields (nullable) is None
        # and model_fields_set contains the field
        if self.add_fields is None and "add_fields" in self.model_fields_set:
            _dict['addFields'] = None

        # set to None if utils (nullable) is None
        # and model_fields_set contains the field
        if self.utils is None and "utils" in self.model_fields_set:
            _dict['utils'] = None

        return _dict

    @classmethod
    def from_dict(cls, obj: Optional[Dict[str, Any]]) -> Optional[Self]:
        """Create an instance of CoreV1DataSourceSpecSilverPreTransform from a dict"""
        if obj is None:
            return None

        if not isinstance(obj, dict):
            return cls.model_validate(obj)

        _obj = cls.model_validate({
            "usePreset": obj.get("usePreset"),
            "skipPreTransform": obj.get("skipPreTransform"),
            "custom": CoreV1DataSourceSpecSilverPreTransformCustom.from_dict(obj["custom"]) if obj.get("custom") is not None else None,
            "filter": obj.get("filter"),
            "postFilter": obj.get("postFilter"),
            "presetOverrides": CoreV1DataSourceSpecSilverPreTransformPresetOverrides.from_dict(obj["presetOverrides"]) if obj.get("presetOverrides") is not None else None,
            "addFields": [CoreV1DataSourceFieldSpec.from_dict(_item) for _item in obj["addFields"]] if obj.get("addFields") is not None else None,
            "utils": CoreV1DataSourceFieldUtils.from_dict(obj["utils"]) if obj.get("utils") is not None else None
        })
        return _obj


