# LLM Collaboration Protocol - é¡¹ç›®é…ç½®æ¨¡æ¿
# ä½¿ç”¨æ­¤æ¨¡æ¿é…ç½®ä½ çš„é¡¹ç›®ï¼Œç„¶åé€šè¿‡ç”Ÿæˆå™¨ç”Ÿæˆ llm.txt

# ============================================
# é¡¹ç›®åŸºæœ¬ä¿¡æ¯
# ============================================
project:
  name: "MyProject"
  version: "v1.0"
  domain: "generic"  # game/web/mobile/data/infra/generic
  description: "é¡¹ç›®æè¿°"

# ============================================
# æ ¸å¿ƒç†å¿µ
# ============================================
philosophy:
  vibe_development:
    enabled: true
    principles:
      - "AI ä¸æ˜¯æ‰§è¡Œè€…ï¼Œè€Œæ˜¯åä½œä¼™ä¼´"
      - "ä¸æ€¥äºäº§å‡ºä»£ç ï¼Œå…ˆå¯¹é½ç†è§£"
      - "æ¯ä¸ªå†³ç­–éƒ½æ˜¯å…±åŒæ€è€ƒçš„ç»“æœ"
      - "å¯¹è¯æœ¬èº«å°±æ˜¯è®¾è®¡è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†"
  decision_quality:
    target_rate: 0.9
    critical_tolerance: 0
  long_term_dialogue: true

# ============================================
# èŒèƒ½è§’è‰²å®šä¹‰
# ============================================
roles:
  - code: "DESIGN"
    name: "äº§å“è®¾è®¡"
    focus: ["éœ€æ±‚", "ä½“éªŒ", "äº¤äº’"]
    triggers: ["è®¾è®¡", "éœ€æ±‚", "äº§å“"]
    is_gatekeeper: false

  - code: "ARCH"
    name: "æ¶æ„"
    focus: ["åº•å±‚ç»“æ„", "æ€§èƒ½", "å¯æ‰©å±•æ€§"]
    triggers: ["æ¶æ„", "åº•å±‚", "é‡æ„"]
    is_gatekeeper: false

  - code: "DEV"
    name: "å¼€å‘"
    focus: ["å…·ä½“å®ç°", "Bugä¿®å¤"]
    triggers: ["å¼€å‘", "å®ç°", "ä»£ç "]
    is_gatekeeper: false

  - code: "PM"
    name: "é¡¹ç›®ç®¡ç†"
    focus: ["é‡Œç¨‹ç¢‘", "ä¼˜å…ˆçº§", "è¿›åº¦"]
    triggers: ["è§„åˆ’", "æ’æœŸ", "ä¼˜å…ˆçº§"]
    is_gatekeeper: false

  - code: "QA"
    name: "äº§å“è´¨é‡ä¿è¯"
    focus: ["éªŒæ”¶æµ‹è¯•", "ç”¨æˆ·ä½“éªŒéªŒè¯", "è¾¹ç•Œæƒ…å†µ"]
    triggers: ["éªŒæ”¶", "ä½“éªŒæµ‹è¯•", "åŠŸèƒ½éªŒè¯"]
    is_gatekeeper: true

  - code: "TEST"
    name: "å•å…ƒæµ‹è¯•"
    focus: ["ä»£ç æµ‹è¯•", "è¦†ç›–ç‡", "è‡ªåŠ¨åŒ–æµ‹è¯•"]
    triggers: ["å•å…ƒæµ‹è¯•", "æµ‹è¯•ç”¨ä¾‹", "coverage"]
    is_gatekeeper: false

# ============================================
# å†³ç­–åˆ†çº§
# ============================================
decision_levels:
  - level: "S"
    name: "æˆ˜ç•¥å†³ç­–"
    scope: "æ•´ä½“æ–¹å‘ã€æ ¸å¿ƒåŠŸèƒ½"
    review:
      required: true
      mode: "sync"
      human_confirm: true

  - level: "A"
    name: "æ¶æ„å†³ç­–"
    scope: "ç³»ç»Ÿè®¾è®¡ã€æ•°æ®ç»“æ„"
    review:
      required: true
      mode: "async"
      human_confirm: true

  - level: "B"
    name: "å®ç°å†³ç­–"
    scope: "å…·ä½“æ–¹æ¡ˆé€‰æ‹©"
    review:
      required: false
      mode: "auto"
      human_confirm: false

  - level: "C"
    name: "ç»†èŠ‚å†³ç­–"
    scope: "å‚æ•°ã€å‘½åã€æ ¼å¼"
    review:
      required: false
      mode: "none"
      human_confirm: false

# ============================================
# ä»»åŠ¡å•å…ƒ
# ============================================
task_unit:
  id_pattern: "TASK-{role}-{seq}"
  statuses:
    - "TODO"
    - "IN_PROGRESS"
    - "REVIEW"
    - "DONE"
  required_fields:
    - "id"
    - "role"
    - "feature"
    - "dependencies"
    - "output"
    - "status"
    - "dialogue_rounds"

# ============================================
# å¯¹è¯æµç¨‹åè®®
# ============================================
dialogue_protocol:
  on_start:
    read_files:
      - "docs/CONTEXT.md"
      - "llm.txt"
    actions:
      - "äº†è§£å½“å‰è¿›åº¦"
      - "ç¡®è®¤ç”¨æˆ·æœ¬æ¬¡å¯¹è¯ç›®æ ‡"

  on_end:
    update_files:
      - "docs/CONTEXT.md"
      - "docs/CHANGELOG.md"
    git_commit: true

  standard_flow:
    - step: 1
      actor: "human"
      action: "æå‡ºéœ€æ±‚/é—®é¢˜"
    - step: 2
      actor: "ai"
      action: "è¯†åˆ«è§’è‰²ï¼Œåˆ†æé—®é¢˜"
    - step: 3
      actor: "ai"
      action: "S/Açº§å†³ç­–è¯·æ±‚ç¡®è®¤ï¼ŒB/Cçº§è‡ªä¸»æ‰§è¡Œ"
      condition: "decision_level in [S, A]"
    - step: 4
      actor: "ai"
      action: "æ‰§è¡Œä»»åŠ¡ï¼Œè¾“å‡ºç»“æœ"
    - step: 5
      actor: "ai"
      action: "æ›´æ–°æµ‹è¯•ç”¨ä¾‹ï¼ˆå¦‚ä¸ºåŠŸèƒ½å¼€å‘ï¼‰"
      condition: "task_type == feature"
    - step: 6
      actor: "ai"
      action: "æ€»ç»“è¿›å±•ï¼Œæç¤ºä¸‹ä¸€æ­¥"
    - step: 7
      actor: "human"
      action: "ç¡®è®¤/ä¿®æ­£/ç»§ç»­"
    - step: 8
      actor: "ai"
      action: "Git æäº¤è®°å½•"

# ============================================
# éœ€æ±‚æ¾„æ¸…åè®®
# ============================================
requirement_clarification:
  enabled: true
  trigger_conditions:
    - "æè¿°æ¨¡ç³Šæˆ–ä¸å®Œæ•´"
    - "ç¼ºå°‘å…·ä½“éªŒæ”¶æ ‡å‡†"
    - "å¯èƒ½æœ‰å¤šç§ç†è§£æ–¹å¼"
    - "æ¶‰åŠ S/A çº§å†³ç­–"
  clarification_questions:
    - "ä½ å¸Œæœ›è¾¾åˆ°ä»€ä¹ˆæ•ˆæœï¼Ÿ"
    - "æœ‰æ²¡æœ‰å‚è€ƒæ¡ˆä¾‹ï¼Ÿ"
    - "è¿™ä¸ªåŠŸèƒ½è°ä¼šç”¨ï¼Ÿåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ç”¨ï¼Ÿ"
    - "å¦‚ä½•éªŒè¯è¿™ä¸ªåŠŸèƒ½æ˜¯å¦å®Œæˆï¼Ÿ"
    - "æœ‰æ—¶é—´æˆ–èµ„æºçº¦æŸå—ï¼Ÿ"

# ============================================
# Git å·¥ä½œæµ
# ============================================
git_workflow:
  branches:
    main: "main"
    dev: "dev"
    feature_prefix: "feature/"
    fix_prefix: "fix/"
    design_prefix: "design/"
    refactor_prefix: "refactor/"

  commit_prefixes:
    - prefix: "[DESIGN]"
      description: "è®¾è®¡æ–‡æ¡£å˜æ›´"
      roles: ["DESIGN"]
    - prefix: "[ARCH]"
      description: "æ¶æ„è°ƒæ•´"
      roles: ["ARCH"]
    - prefix: "[FEAT]"
      description: "æ–°åŠŸèƒ½"
      roles: ["DEV"]
    - prefix: "[FIX]"
      description: "Bugä¿®å¤"
      roles: ["DEV", "QA"]
    - prefix: "[CONFIG]"
      description: "é…ç½®è°ƒæ•´ï¼ˆä¸æ”¹é€»è¾‘ï¼‰"
      roles: ["DEV"]
    - prefix: "[REFACTOR]"
      description: "é‡æ„"
      roles: ["ARCH", "DEV"]
    - prefix: "[DOC]"
      description: "æ–‡æ¡£æ›´æ–°"
      roles: ["PM", "DESIGN"]
    - prefix: "[TEST]"
      description: "æµ‹è¯•ç›¸å…³"
      roles: ["TEST", "QA"]
    - prefix: "[VIBE]"
      description: "åä½œæµç¨‹æ›´æ–°"
      roles: ["PM"]

  commit_required: true

# ============================================
# æµ‹è¯•ä½“ç³»
# ============================================
testing:
  # å•å…ƒæµ‹è¯•ï¼ˆå¼€å‘è€…è§†è§’ - ä»£ç æ­£ç¡®æ€§ï¼‰
  unit_test:
    enabled: true
    framework: "jest"  # jest/pytest/mocha/go-test/...
    coverage_target: 0.8
    patterns:
      - "**/*.test.ts"
      - "**/*.spec.ts"
    run_on:
      - "pre-commit"
      - "ci"
    required_for_merge: true

  # äº§å“QAï¼ˆç”¨æˆ·è§†è§’ - åŠŸèƒ½éªŒæ”¶ï¼‰
  product_qa:
    enabled: true
    test_case_file: "docs/QA_TEST_CASES.md"
    case_id_pattern: "TC-{module}-{seq}"
    required_fields:
      - "id"
      - "feature"
      - "precondition"
      - "steps"
      - "expected"
      - "status"
    statuses:
      - symbol: "ğŸŸ¢"
        meaning: "PASS"
      - symbol: "ğŸŸ¡"
        meaning: "PARTIAL"
      - symbol: "ğŸ”´"
        meaning: "FAIL"
      - symbol: "âšª"
        meaning: "SKIP"

# ============================================
# é‡Œç¨‹ç¢‘
# ============================================
milestone:
  lifecycle:
    - phase: "feature_dev"
      description: "ç‰¹æ€§å¼€å‘æœŸ"
      exit_criteria:
        - "æ‰€æœ‰è®¡åˆ’ç‰¹æ€§å®Œæˆ"
        - "å¿«é€ŸéªŒæ”¶é€šè¿‡"

    - phase: "feature_freeze"
      description: "ç‰¹æ€§å†»ç»“"
      exit_criteria:
        - "ä¸å†æ·»åŠ æ–°åŠŸèƒ½"
        - "æ„å»ºæˆåŠŸ"

    - phase: "bug_fix"
      description: "Bug ä¿®å¤æœŸ"
      exit_criteria:
        - "P0/P1 é—®é¢˜æ¸…é›¶"
        - "æµ‹è¯•é€šè¿‡ç‡è¾¾æ ‡"

    - phase: "acceptance"
      description: "é‡Œç¨‹ç¢‘éªŒæ”¶"
      exit_criteria:
        - "QA å…¨é‡æµ‹è¯•é€šè¿‡"
        - "å•å…ƒæµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡"
        - "å·²çŸ¥é—®é¢˜æ¸…é›¶æˆ–æ ‡è®°å»¶å"

    - phase: "retrospective"
      description: "ç‰ˆæœ¬å›é¡¾"
      exit_criteria:
        - "å›é¡¾æµ‹è¯•è¡¨ç°"
        - "æ”¶é›†ç”¨æˆ·åé¦ˆ"
        - "è¡¥å……æ–°éœ€æ±‚åˆ°ä¸‹ä¸€é˜¶æ®µ"

  tag_pattern: "v{major}.{minor}.{patch}"
  roadmap_file: "docs/ROADMAP.md"
  bug_priority:
    - level: "P0"
      description: "å´©æºƒ/é˜»æ–­"
    - level: "P1"
      description: "åŠŸèƒ½å¼‚å¸¸"
    - level: "P2"
      description: "ä½“éªŒé—®é¢˜"
    - level: "P3"
      description: "ä¼˜åŒ–å»ºè®®"

# ============================================
# è¿­ä»£ç®¡ç†
# ============================================
iteration:
  suggestion_pool:
    file: "docs/ROADMAP.md"
    section: "è¿­ä»£å»ºè®®æ± "
    categories:
      - symbol: "âœ…"
        meaning: "çº³å…¥å½“å‰é‡Œç¨‹ç¢‘"
      - symbol: "â³"
        meaning: "å»¶ååˆ°ä¸‹ä¸ªé‡Œç¨‹ç¢‘"
      - symbol: "âŒ"
        meaning: "æ‹’ç»ï¼ˆä¸ç¬¦åˆæ–¹å‘ï¼‰"
      - symbol: "ğŸ”„"
        meaning: "åˆå¹¶å…¶ä»–è¿­ä»£"

  config_level_iteration:
    enabled: true
    commit_prefix: "[CONFIG]"
    skip_pm_review: true
    examples:
      - "æ•°å€¼å‚æ•°è°ƒæ•´"
      - "é…ç½®æ–‡ä»¶ä¿®æ”¹"
      - "æ ·å¼/ä¸»é¢˜å˜æ›´"
      - "æ–‡æ¡ˆ/æ–‡æœ¬ä¿®æ”¹"

  review_dimensions:
    - "ä¸å½“å‰ä»»åŠ¡çš„ä¾èµ–/å†²çªå…³ç³»"
    - "å¯¹ç”¨æˆ·ä½“éªŒçš„å½±å“ç¨‹åº¦"
    - "å¼€å‘æˆæœ¬å’ŒæŠ€æœ¯å¤æ‚åº¦"
    - "é‡Œç¨‹ç¢‘å‰©ä½™æ—¶é—´çº¦æŸ"

# ============================================
# ç‰ˆæœ¬å›é¡¾
# ============================================
version_review:
  enabled: true
  timing: "é‡Œç¨‹ç¢‘éªŒæ”¶å®Œæˆå"
  review_items:
    - "æµ‹è¯•è¡¨ç°ï¼ˆé€šè¿‡ç‡ã€é—®é¢˜åˆ†å¸ƒï¼‰"
    - "ç”¨æˆ·ä½“éªŒåé¦ˆ"
    - "æŠ€æœ¯å€ºåŠ¡"
    - "è¿­ä»£å»ºè®®æ± "

# ============================================
# æ„å»ºé…ç½®
# ============================================
build:
  enabled: true
  command: "npm run build"
  dist_entry: "dist/index.html"
  timing:
    - "é‡Œç¨‹ç¢‘å…¨é‡éªŒæ”¶å‰"
    - "Bugä¿®å¤æœŸé›†ä¸­æµ‹è¯•"
    - "å‡†å¤‡åˆ†å‘/æ¼”ç¤ºç‰ˆæœ¬"

# ============================================
# å¿«é€ŸéªŒæ”¶
# ============================================
quick_acceptance:
  enabled: true
  start_command: "npm run dev"
  reply_formats:
    pass: "âœ…"
    issue: "âš ï¸ é—®é¢˜:"
    skip: "è·³è¿‡"

# ============================================
# Prompt å·¥ç¨‹
# ============================================
prompt_engineering:
  enabled: true
  role_templates:
    DESIGN: |
      [DESIGN] æˆ‘æƒ³è®¨è®º{ç³»ç»Ÿåç§°}çš„è®¾è®¡
      å½“å‰æƒ³æ³•æ˜¯: {æè¿°}
      ä¸»è¦é¡¾è™‘: {é¡¾è™‘}
      è¯·ä»ç”¨æˆ·ä½“éªŒè§’åº¦åˆ†æ
    ARCH: |
      [ARCH] æˆ‘éœ€è¦è®¾è®¡{æ¨¡å—å}çš„æ¶æ„
      éœ€æ±‚: {åŠŸèƒ½éœ€æ±‚}
      çº¦æŸ: {æ€§èƒ½/å…¼å®¹æ€§çº¦æŸ}
      è¯·ç»™å‡º2-3ä¸ªæ–¹æ¡ˆå¯¹æ¯”
    DEV: |
      [DEV] è¯·å®ç°{åŠŸèƒ½}
      è¾“å…¥: {è¾“å…¥æè¿°}
      è¾“å‡º: {æœŸæœ›è¾“å‡º}
      ç›¸å…³æ–‡ä»¶: {æ–‡ä»¶è·¯å¾„}

# ============================================
# å·²ç¡®è®¤å†³ç­– (é¡¹ç›®è¿è¡Œä¸­å¡«å……)
# ============================================
confirmed_decisions: []
# ç¤ºä¾‹:
# - id: "001"
#   title: "æŠ€æœ¯æ¡†æ¶é€‰æ‹©"
#   choice: "React + TypeScript"
#   reason: "å›¢é˜Ÿç†Ÿæ‚‰ï¼Œç”Ÿæ€å®Œå–„"

# ============================================
# æ–‡æ¡£è¿­ä»£æ—¥å¿— (llm.txt è‡ªèº«çš„ç‰ˆæœ¬å†å²)
# ============================================
llm_txt_changelog: []
# ç¤ºä¾‹:
# - version: "v1.0"
#   date: "2026-01-20"
#   changes: "åˆå§‹ç‰ˆæœ¬"

# ============================================
# æ–‡æ¡£ä½“ç³»
# ============================================
documentation:
  key_files:
    - path: "llm.txt"
      purpose: "AI åä½œè§„åˆ™ï¼Œé¡¶å±‚æŒ‡å¯¼"
      update_trigger: "åä½œæ–¹å¼æ¼”è¿›æ—¶"

    - path: "docs/CONTEXT.md"
      purpose: "å½“å‰å¼€å‘ä¸Šä¸‹æ–‡"
      update_trigger: "æ¯æ¬¡å¯¹è¯ç»“æŸæ—¶"

    - path: "docs/DECISIONS.md"
      purpose: "é‡è¦å†³ç­–è®°å½•"
      update_trigger: "æ¯æ¬¡ S/A çº§å†³ç­–å"

    - path: "docs/CHANGELOG.md"
      purpose: "ç‰ˆæœ¬å˜æ›´æ—¥å¿—"
      update_trigger: "æ¯æ¬¡æœ‰æ•ˆå¯¹è¯å"

    - path: "docs/QA_TEST_CASES.md"
      purpose: "äº§å“QAæµ‹è¯•ç”¨ä¾‹"
      update_trigger: "æ¯ä¸ªåŠŸèƒ½å®Œæˆæ—¶"

    - path: "docs/ROADMAP.md"
      purpose: "è·¯çº¿å›¾+è¿­ä»£å»ºè®®"
      update_trigger: "é‡Œç¨‹ç¢‘è§„åˆ’/åé¦ˆæ—¶"

  context_file: "docs/CONTEXT.md"
  changelog_file: "docs/CHANGELOG.md"
  decisions_file: "docs/DECISIONS.md"

# ============================================
# ç¬¦å·å­¦æ ‡æ³¨ç³»ç»Ÿ
# ============================================
symbology:
  decision_status:
    - symbol: "PENDING"
      meaning: "å¾…ç¡®è®¤"
    - symbol: "CONFIRMED"
      meaning: "å·²ç¡®è®¤"
    - symbol: "REVISED"
      meaning: "å·²ä¿®è®¢"

  task_status:
    - symbol: "TODO"
      meaning: "å¾…å¼€å§‹"
    - symbol: "IN_PROGRESS"
      meaning: "è¿›è¡Œä¸­"
    - symbol: "REVIEW"
      meaning: "å¾…å®¡æ ¸"
    - symbol: "DONE"
      meaning: "å·²å®Œæˆ"

  test_status:
    - symbol: "ğŸŸ¢"
      meaning: "é€šè¿‡"
    - symbol: "ğŸŸ¡"
      meaning: "éƒ¨åˆ†é€šè¿‡"
    - symbol: "ğŸ”´"
      meaning: "æœªé€šè¿‡"
    - symbol: "âšª"
      meaning: "è·³è¿‡"

  priority:
    - symbol: "P0"
      meaning: "æœ€é«˜ä¼˜å…ˆçº§/é˜»æ–­"
    - symbol: "P1"
      meaning: "é«˜ä¼˜å…ˆçº§"
    - symbol: "P2"
      meaning: "ä¸­ä¼˜å…ˆçº§"
    - symbol: "P3"
      meaning: "ä½ä¼˜å…ˆçº§"

# ============================================
# é¢†åŸŸæ‰©å±• (Domain Extensions)
# åœ¨æ­¤æ·»åŠ ç‰¹å®šé¢†åŸŸçš„æ‰©å±•é…ç½®
# ============================================
domain_extensions:
  # ç¤ºä¾‹ï¼šæ¸¸æˆé¢†åŸŸæ‰©å±•
  # game:
  #   gm_console:
  #     enabled: true
  #     trigger_key: "/"
  #     commands: [...]
  #   
  # ç¤ºä¾‹ï¼šWebé¢†åŸŸæ‰©å±•
  # web:
  #   api_docs:
  #     format: "openapi"
  #     file: "docs/api.yaml"
