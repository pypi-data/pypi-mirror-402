Metadata-Version: 2.4
Name: tcbs
Version: 0.1.0
Summary: Lightweight Python SDK for Techcom Securities (TCBS) iFlash Open API
Home-page: https://github.com/tcbs/tcbs-python-sdk
Author: TCBS SDK Contributors
Author-email: TCBS SDK Contributors <cskh@tcbs.com.vn>
License: MIT
Project-URL: Homepage, https://developers.tcbs.com.vn
Project-URL: Documentation, https://developers.tcbs.com.vn
Project-URL: Repository, https://github.com/tcbs/tcbs-python-sdk
Project-URL: Bug Reports, https://github.com/tcbs/tcbs-python-sdk/issues
Keywords: tcbs,techcom,securities,trading,stocks,derivatives,vietnam,api,iflash
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Financial and Insurance Industry
Classifier: Topic :: Office/Business :: Financial :: Investment
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: requests>=2.25.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: flake8>=5.0.0; extra == "dev"
Requires-Dist: mypy>=0.990; extra == "dev"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# TCBS Python SDK | Th∆∞ vi·ªán Python TCBS

[English](#english) | [Ti·∫øng Vi·ªát](#ti·∫øng-vi·ªát)

---

## English

Lightweight Python library for Techcom Securities (TCBS) iFlash Open API.

## ‚ö†Ô∏è CRITICAL SECURITY WARNINGS

### üîê API Key Security
- **NEVER commit your API key to version control** (Git, GitHub, etc.)
- **NEVER share your API key** with anyone or post it publicly
- **NEVER hardcode API keys** in your source code
- Store API keys in environment variables or secure configuration files
- Add `.key`, `*.key`, and config files to `.gitignore`
- **Your API key has full access to your trading account** - treat it like your password!

### üí∞ Financial Risk Warning
- **ALWAYS test your code in a safe environment first**
- **DOUBLE-CHECK all order parameters** before executing trades
- **Start with small quantities** when testing live trading
- **Understand that trading operations can result in financial loss**
- This library executes real trades that affect your P&L (Profit & Loss)
- **Comment out trading functions** (place_order, update_order) until you're ready
- **No warranty provided** - use at your own risk

### üß™ Testing Best Practices
```python
# ‚úÖ GOOD: Use environment variables
import os
api_key = os.getenv("TCBS_API_KEY")

# ‚ùå BAD: Hardcoded API key
api_key = "0001688490-5e56d6b1-b868-45e0-a56a-abfa062ecc2c"  # NEVER DO THIS!

# ‚úÖ GOOD: Test with read-only operations first
profile = client.get_profile(custody_code="105C334455")
power = client.get_purchasing_power(account_no="0001170730")

# ‚ö†Ô∏è CAUTION: Comment out trading operations until ready
# order = client.place_order(...)  # Uncomment only when ready to trade
```

## Installation

```bash
pip install tcbs
```

## Quick Start

```python
from tcbs import TCBSClient

# Initialize client with your API key
client = TCBSClient(api_key="your_api_key")

# First call will prompt for OTP (token is cached for 8 hours)
profile = client.get_profile(custody_code="105C334455")

# Place a stock order
order = client.place_order(
    account_no="0001170730",
    symbol="FPT",
    side="B",  # Buy
    price=52000,
    quantity=100,
    price_type="LO"  # Limit order
)

# Get order book
orders = client.get_order_book(account_no="0001170730")

# Get purchasing power
power = client.get_purchasing_power(account_no="0001170730", symbol="FPT")
```

## Features

### Authentication
- **Automatic token management**: JWT tokens are cached locally (~/.tcbs_token.json)
- **Auto-refresh**: Prompts for OTP only when token expires (8-hour lifetime)
- **Secure storage**: Token file has restricted permissions (0600)

### Stock Trading
```python
# Place order
client.place_order(account_no, symbol, side, price, quantity, price_type)

# Update order
client.update_order(account_no, order_id, price=new_price, quantity=new_qty)

# Cancel order(s)
client.cancel_order(account_no, order_ids=["order_id_1", "order_id_2"])

# Get orders
client.get_order_book(account_no)
client.get_order_by_id(account_no, order_id)
client.get_matching_details(account_no)

# Purchasing power
client.get_purchasing_power(account_no)  # General
client.get_purchasing_power(account_no, symbol="FPT")  # By symbol
client.get_purchasing_power(account_no, symbol="FPT", price=52000)  # By symbol + price

# Assets
client.get_asset(account_no)
client.get_cash_investment(account_no)
client.get_margin_quota(custody_id)
```

### Derivative Trading
```python
# Get derivative status
status = client.get_derivative_status(
    account_id="105C031402",
    sub_account_id="105C031402A"
)

# Place derivative order
order = client.place_derivative_order(
    account_id="105C031402",
    sub_account_id="105C031402A",
    symbol="VN30F2303",
    side="B",  # Long
    price=1198.7,
    volume=1
)

# Get derivative orders
orders = client.get_derivative_orders(
    account_id="105C031402",
    page_no=1,
    page_size=20,
    status="0"  # All
)
```

### Market Data
```python
# Get market info
info = client.get_market_info(tickers="FPT,VNM,HPG")

# Get price history
history = client.get_price_history(ticker="FPT", page=0, size=50)

# Get foreign room
room = client.get_foreign_room(index="VNINDEX")
```

## API Reference

### Order Sides
- `"B"`: Buy (Long for derivatives)
- `"S"`: Sell (Short for derivatives)

### Price Types
- `"LO"`: Limit Order
- `"MP"`: Market Price
- `"ATO"`: At The Open
- `"ATC"`: At The Close

### Order Status (Derivatives)
- `"0"`: All
- `"1"`: Pending
- `"2"`: Matched

## Error Handling

```python
from tcbs import TCBSClient, TCBSAuthError, TCBSAPIError

try:
    client = TCBSClient(api_key="your_key")
    orders = client.get_order_book(account_no="0001170730")
except TCBSAuthError as e:
    print(f"Authentication failed: {e}")
except TCBSAPIError as e:
    print(f"API error: {e}")
```

## Environment

- **Production**: `https://openapi.tcbs.com.vn` (hardcoded)
- **Python**: 3.8+
- **Dependencies**: requests

## License

MIT License

## Support

For API documentation and support, visit:
- Email: cskh@tcbs.com.vn
- Website: https://developers.tcbs.com.vn

---

## Ti·∫øng Vi·ªát

Th∆∞ vi·ªán Python nh·∫π cho Techcom Securities (TCBS) iFlash Open API.

## ‚ö†Ô∏è C·∫¢NH B√ÅO B·∫¢O M·∫¨T QUAN TR·ªåNG

### üîê B·∫£o M·∫≠t API Key
- **TUY·ªÜT ƒê·ªêI KH√îNG commit API key** l√™n Git, GitHub hay b·∫•t k·ª≥ h·ªá th·ªëng qu·∫£n l√Ω m√£ ngu·ªìn n√†o
- **TUY·ªÜT ƒê·ªêI KH√îNG chia s·∫ª API key** v·ªõi b·∫•t k·ª≥ ai ho·∫∑c ƒëƒÉng c√¥ng khai
- **TUY·ªÜT ƒê·ªêI KH√îNG hardcode API key** tr·ª±c ti·∫øp trong m√£ ngu·ªìn
- L∆∞u API key trong bi·∫øn m√¥i tr∆∞·ªùng ho·∫∑c file c·∫•u h√¨nh b·∫£o m·∫≠t
- Th√™m `.key`, `*.key` v√† c√°c file config v√†o `.gitignore`
- **API key c·ªßa b·∫°n c√≥ to√†n quy·ªÅn truy c·∫≠p t√†i kho·∫£n giao d·ªãch** - h√£y b·∫£o v·ªá n√≥ nh∆∞ m·∫≠t kh·∫©u!

### üí∞ C·∫£nh B√°o R·ªßi Ro T√†i Ch√≠nh
- **LU√îN LU√îN ki·ªÉm tra k·ªπ code** trong m√¥i tr∆∞·ªùng an to√†n tr∆∞·ªõc
- **KI·ªÇM TRA K·ª∏ t·∫•t c·∫£ tham s·ªë l·ªánh** tr∆∞·ªõc khi th·ª±c hi·ªán giao d·ªãch
- **B·∫Øt ƒë·∫ßu v·ªõi kh·ªëi l∆∞·ª£ng nh·ªè** khi test giao d·ªãch th·ª±c
- **Hi·ªÉu r·∫±ng c√°c thao t√°c giao d·ªãch c√≥ th·ªÉ g√¢y thua l·ªó t√†i ch√≠nh**
- Th∆∞ vi·ªán n√†y th·ª±c hi·ªán giao d·ªãch th·ª±c ·∫£nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn P&L (L√£i/L·ªó)
- **Comment c√°c h√†m giao d·ªãch** (place_order, update_order) cho ƒë·∫øn khi s·∫µn s√†ng
- **Kh√¥ng c√≥ b·∫£o h√†nh** - s·ª≠ d·ª•ng v·ªõi tr√°ch nhi·ªám c·ªßa b·∫°n

### üß™ Th·ª±c H√†nh Ki·ªÉm Tra T·ªët
```python
# ‚úÖ T·ªêT: S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng
import os
api_key = os.getenv("TCBS_API_KEY")

# ‚ùå T·ªÜ: Hardcode API key
api_key = "0001688490-5e56d6b1-b868-45e0-a56a-abfa062ecc2c"  # TUY·ªÜT ƒê·ªêI KH√îNG L√ÄM NH∆Ø V·∫¨Y!

# ‚úÖ T·ªêT: Test v·ªõi c√°c thao t√°c ch·ªâ ƒë·ªçc tr∆∞·ªõc
profile = client.get_profile(custody_code="105C334455")
power = client.get_purchasing_power(account_no="0001170730")

# ‚ö†Ô∏è TH·∫¨N TR·ªåNG: Comment c√°c thao t√°c giao d·ªãch cho ƒë·∫øn khi s·∫µn s√†ng
# order = client.place_order(...)  # Ch·ªâ b·ªè comment khi s·∫µn s√†ng giao d·ªãch
```

## C√†i ƒê·∫∑t

```bash
pip install tcbs
```

## B·∫Øt ƒê·∫ßu Nhanh

```python
from tcbs import TCBSClient

# Kh·ªüi t·∫°o client v·ªõi API key (d√πng bi·∫øn m√¥i tr∆∞·ªùng!)
import os
client = TCBSClient(api_key=os.getenv("TCBS_API_KEY"))

# L·∫ßn g·ªçi ƒë·∫ßu ti√™n s·∫Ω y√™u c·∫ßu OTP (token ƒë∆∞·ª£c cache 8 gi·ªù)
profile = client.get_profile(custody_code="105C334455")

# ƒê·∫∑t l·ªánh mua c·ªï phi·∫øu (CH·ªà KHI ƒê√É KI·ªÇM TRA K·ª∏!)
order = client.place_order(
    account_no="0001170730",
    symbol="FPT",
    side="B",  # Mua
    price=52000,
    quantity=100,
    price_type="LO"  # L·ªánh gi·ªõi h·∫°n
)

# Xem s·ªï l·ªánh
orders = client.get_order_book(account_no="0001170730")

# Xem s·ª©c mua
power = client.get_purchasing_power(account_no="0001170730", symbol="FPT")
```

## T√≠nh NƒÉng

### X√°c Th·ª±c
- **Qu·∫£n l√Ω token t·ª± ƒë·ªông**: JWT token ƒë∆∞·ª£c cache c·ª•c b·ªô (~/.tcbs_token.json)
- **T·ª± ƒë·ªông l√†m m·ªõi**: Ch·ªâ y√™u c·∫ßu OTP khi token h·∫øt h·∫°n (th·ªùi gian s·ªëng 8 gi·ªù)
- **L∆∞u tr·ªØ b·∫£o m·∫≠t**: File token c√≥ quy·ªÅn h·∫°n ch·∫ø (0600)

### Giao D·ªãch C·ªï Phi·∫øu
```python
# ƒê·∫∑t l·ªánh
client.place_order(account_no, symbol, side, price, quantity, price_type)

# S·ª≠a l·ªánh
client.update_order(account_no, order_id, price=new_price, quantity=new_qty)

# H·ªßy l·ªánh
client.cancel_order(account_no, order_ids=["order_id_1", "order_id_2"])

# Xem l·ªánh
client.get_order_book(account_no)
client.get_order_by_id(account_no, order_id)
client.get_matching_details(account_no)

# S·ª©c mua
client.get_purchasing_power(account_no)  # T·ªïng qu√°t
client.get_purchasing_power(account_no, symbol="FPT")  # Theo m√£
client.get_purchasing_power(account_no, symbol="FPT", price=52000)  # Theo m√£ + gi√°

# T√†i s·∫£n
client.get_asset(account_no)
client.get_cash_investment(account_no)
client.get_margin_quota(custody_id)
```

### Giao D·ªãch Ph√°i Sinh
```python
# Xem tr·∫°ng th√°i ph√°i sinh
status = client.get_derivative_status(
    account_id="105C031402",
    sub_account_id="105C031402A"
)

# ƒê·∫∑t l·ªánh ph√°i sinh
order = client.place_derivative_order(
    account_id="105C031402",
    sub_account_id="105C031402A",
    symbol="VN30F2303",
    side="B",  # Long
    price=1198.7,
    volume=1
)

# Xem l·ªánh ph√°i sinh
orders = client.get_derivative_orders(
    account_id="105C031402",
    page_no=1,
    page_size=20,
    status="0"  # T·∫•t c·∫£
)
```

### D·ªØ Li·ªáu Th·ªã Tr∆∞·ªùng
```python
# Th√¥ng tin th·ªã tr∆∞·ªùng
info = client.get_market_info(tickers="FPT,VNM,HPG")

# L·ªãch s·ª≠ gi√°
history = client.get_price_history(ticker="FPT", page=0, size=50)

# Room ngo·∫°i
room = client.get_foreign_room(index="VNINDEX")
```

## T√†i Li·ªáu API

### Lo·∫°i L·ªánh
- `"B"`: Mua (Long cho ph√°i sinh)
- `"S"`: B√°n (Short cho ph√°i sinh)

### Lo·∫°i Gi√°
- `"LO"`: L·ªánh gi·ªõi h·∫°n
- `"MP"`: Gi√° th·ªã tr∆∞·ªùng
- `"ATO"`: Kh·ªõp l·ªánh m·ªü c·ª≠a
- `"ATC"`: Kh·ªõp l·ªánh ƒë√≥ng c·ª≠a

### Tr·∫°ng Th√°i L·ªánh (Ph√°i sinh)
- `"0"`: T·∫•t c·∫£
- `"1"`: Ch·ªù kh·ªõp
- `"2"`: ƒê√£ kh·ªõp

## X·ª≠ L√Ω L·ªói

```python
from tcbs import TCBSClient, TCBSAuthError, TCBSAPIError

try:
    client = TCBSClient(api_key=os.getenv("TCBS_API_KEY"))
    orders = client.get_order_book(account_no="0001170730")
except TCBSAuthError as e:
    print(f"L·ªói x√°c th·ª±c: {e}")
except TCBSAPIError as e:
    print(f"L·ªói API: {e}")
```

## M√¥i Tr∆∞·ªùng

- **Production**: `https://openapi.tcbs.com.vn` (hardcoded)
- **Python**: 3.8+
- **Dependencies**: requests

## Gi·∫•y Ph√©p

MIT License

## H·ªó Tr·ª£

ƒê·ªÉ bi·∫øt t√†i li·ªáu API v√† h·ªó tr·ª£, truy c·∫≠p:
- Email: cskh@tcbs.com.vn
- Website: https://developers.tcbs.com.vn

---

## üõ°Ô∏è Disclaimer | Tuy√™n B·ªë Mi·ªÖn Tr·ª´ Tr√°ch Nhi·ªám

**EN**: This library is provided "as is" without warranty of any kind. Trading stocks and derivatives involves substantial risk of loss. Always verify your code and test thoroughly before executing real trades. The authors and contributors are not responsible for any financial losses incurred through the use of this library.

**VI**: Th∆∞ vi·ªán n√†y ƒë∆∞·ª£c cung c·∫•p "nguy√™n tr·∫°ng" kh√¥ng c√≥ b·∫£o h√†nh d∆∞·ªõi b·∫•t k·ª≥ h√¨nh th·ª©c n√†o. Giao d·ªãch c·ªï phi·∫øu v√† ph√°i sinh c√≥ r·ªßi ro thua l·ªó ƒë√°ng k·ªÉ. Lu√¥n ki·ªÉm tra code v√† test k·ªπ l∆∞·ª°ng tr∆∞·ªõc khi th·ª±c hi·ªán giao d·ªãch th·ª±c. T√°c gi·∫£ v√† ng∆∞·ªùi ƒë√≥ng g√≥p kh√¥ng ch·ªãu tr√°ch nhi·ªám v·ªÅ b·∫•t k·ª≥ t·ªïn th·∫•t t√†i ch√≠nh n√†o ph√°t sinh t·ª´ vi·ªác s·ª≠ d·ª•ng th∆∞ vi·ªán n√†y.
