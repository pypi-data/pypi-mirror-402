Metadata-Version: 2.4
Name: cli-onprem
Version: 2.2.2
Summary: CLI tool for infrastructure engineers
Author-email: kang hee yong <cagojeiger89@gmail.com>
License: MIT License
        
        Copyright (c) 2025 kang hee yong
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
License-File: LICENSE
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Requires-Python: >=3.9
Requires-Dist: boto3>=1.28.0
Requires-Dist: pyyaml>=6.0.0
Requires-Dist: rich>=13.0.0
Requires-Dist: tqdm>=4.65.0
Requires-Dist: typer>=0.9.0
Requires-Dist: types-tqdm>=4.65.0
Provides-Extra: dev
Requires-Dist: black; extra == 'dev'
Requires-Dist: build; extra == 'dev'
Requires-Dist: mypy; extra == 'dev'
Requires-Dist: pre-commit; extra == 'dev'
Requires-Dist: pre-commit-uv; extra == 'dev'
Requires-Dist: pytest; extra == 'dev'
Requires-Dist: pytest-cov; extra == 'dev'
Requires-Dist: pytest-mypy-plugins; extra == 'dev'
Requires-Dist: python-semantic-release; extra == 'dev'
Requires-Dist: pyupgrade; extra == 'dev'
Requires-Dist: ruff; extra == 'dev'
Requires-Dist: twine; extra == 'dev'
Requires-Dist: types-pyyaml; extra == 'dev'
Description-Content-Type: text/markdown

# CLI-ONPREM

ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¥¼ ìœ„í•œ ë°˜ë³µ ì‘ì—… ìë™í™”ë¥¼ ìœ„í•œ Typer ê¸°ë°˜ Python CLI ë„êµ¬ì…ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### ğŸ³ Docker ì´ë¯¸ì§€ ê´€ë¦¬
- **docker-tar**: Docker ì´ë¯¸ì§€ë¥¼ í‘œì¤€í™”ëœ tar íŒŒì¼ë¡œ ì €ì¥
  - ë©€í‹° ì•„í‚¤í…ì²˜ ì§€ì› (amd64/arm64)
  - ìë™ ì¬ì‹œë„ ê¸°ëŠ¥
  - ìŠ¤ë§ˆíŠ¸ íŒŒì¼ëª… ìƒì„±

### ğŸ“¦ Helm ì°¨íŠ¸ ë¶„ì„
- **helm-local**: Helm ì°¨íŠ¸ì—ì„œ Docker ì´ë¯¸ì§€ ëª©ë¡ ì¶”ì¶œ
  - .tgz ì•„ì¹´ì´ë¸Œ ë° ë””ë ‰í† ë¦¬ ì§€ì›
  - ë‹¤ì¤‘ values íŒŒì¼ ì ìš©
  - ì´ë¯¸ì§€ ì´ë¦„ ì •ê·œí™”

### â˜ï¸ S3 ë™ê¸°í™” ë° ê³µìœ 
- **s3-share**: AWS S3ì™€ ë¡œì»¬ íŒŒì¼ ë™ê¸°í™”
  - í”„ë¡œíŒŒì¼ ê¸°ë°˜ ìê²©ì¦ëª… ê´€ë¦¬
  - ì¦ë¶„ ë™ê¸°í™” (MD5 ì²´í¬ì„¬)
  - Presigned URL ìƒì„±

### ğŸ“‚ ëŒ€ìš©ëŸ‰ íŒŒì¼ ë¶„í• 
- **tar-fat32**: FAT32 í˜¸í™˜ íŒŒì¼ ë¶„í•  ì••ì¶•
  - ë¬´ê²°ì„± ê²€ì¦ (SHA256)
  - ìë™ ë³µì› ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
  - ì„¤ì • ê°€ëŠ¥í•œ ì²­í¬ í¬ê¸°

## ì„¤ì¹˜

```bash
# PyPIì—ì„œ ì„¤ì¹˜
pipx install cli-onprem

# ë˜ëŠ” ì†ŒìŠ¤ì—ì„œ ì„¤ì¹˜
git clone https://github.com/cagojeiger/cli-onprem.git
cd cli-onprem
pipx install -e . --force
```

ì†ŒìŠ¤ì—ì„œ ì„¤ì¹˜í•  ë•Œ ì¼ë°˜ ì‚¬ìš©ìëŠ” ìœ„ ëª…ë ¹ì–´ë§Œ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤.

## ì‚¬ìš©ë²•

### ê¸°ë³¸ ëª…ë ¹ì–´

```bash
# ë„ì›€ë§ ë³´ê¸°
cli-onprem --help

# ì‰˜ ìë™ì™„ì„± í™œì„±í™”
cli-onprem --install-completion

# íŠ¹ì • ì‰˜ì— ëŒ€í•´ ìë™ì™„ì„± í™œì„±í™”
cli-onprem --install-completion bash  # ë˜ëŠ” zsh, fish
```

### ë¹ ë¥¸ ì‹œì‘ ì˜ˆì œ

```bash
# Docker ì´ë¯¸ì§€ë¥¼ tarë¡œ ì €ì¥
cli-onprem docker-tar save nginx:latest

# Helm ì°¨íŠ¸ì—ì„œ ì´ë¯¸ì§€ ëª©ë¡ ì¶”ì¶œ
cli-onprem helm-local extract-images ./mychart.tgz

# S3ì— íŒŒì¼ ë™ê¸°í™”
cli-onprem s3-share sync ./mydata --bucket mybucket

# ëŒ€ìš©ëŸ‰ íŒŒì¼ ë¶„í•  ì••ì¶•
cli-onprem tar-fat32 pack ./large-file --chunk-size 2G
```

## ğŸ“š Commands

### ğŸ³ docker-tar

Docker ì´ë¯¸ì§€ë¥¼ tar íŒŒì¼ë¡œ ì €ì¥í•˜ì—¬ ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

```bash
cli-onprem docker-tar save <image> [options]
```

**ì£¼ìš” ì˜µì…˜:**
- `--arch`: íŠ¹ì • ì•„í‚¤í…ì²˜ ì„ íƒ (ê¸°ë³¸: ëª¨ë“  ì•„í‚¤í…ì²˜)
- `--destination, -d`: ì €ì¥ ë””ë ‰í† ë¦¬ ì§€ì •
- `--force, -f`: ê¸°ì¡´ íŒŒì¼ ë®ì–´ì“°ê¸°
- `--dry-run`: ì‹¤ì œ ì €ì¥ ì—†ì´ ì‹œë®¬ë ˆì´ì…˜

ìì„¸í•œ ì‚¬ìš©ë²•ì€ [docker-tar ë¬¸ì„œ](docs/docker_tar.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### âš“ helm-local

Helm ì°¨íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  Docker ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ê³  ì¶”ì¶œí•©ë‹ˆë‹¤.

```bash
cli-onprem helm-local extract-images <chart-path> [options]
```

**ì£¼ìš” ì˜µì…˜:**
- `--values, -f`: ì»¤ìŠ¤í…€ values íŒŒì¼ ì§€ì • (ì—¬ëŸ¬ ê°œ ê°€ëŠ¥)
- `--json`: JSON í˜•ì‹ìœ¼ë¡œ ì¶œë ¥
- `--raw`: ì •ê·œí™” ì—†ì´ ì›ë³¸ ì´ë¯¸ì§€ ì´ë¦„ ì¶œë ¥

ìì„¸í•œ ì‚¬ìš©ë²•ì€ [helm-local ë¬¸ì„œ](docs/helm-local.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### â˜ï¸ s3-share

AWS S3ë¥¼ í™œìš©í•œ ì•ˆì „í•œ íŒŒì¼ ê³µìœ  ë° ë™ê¸°í™” ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

```bash
cli-onprem s3-share <command> [options]
```

**í•˜ìœ„ ëª…ë ¹ì–´:**
- `init-credential`: AWS ìê²© ì¦ëª… ì„¤ì •
- `init-bucket`: S3 ë²„í‚· ì´ˆê¸°í™”
- `sync`: íŒŒì¼ ë™ê¸°í™” (ì¦ë¶„ ë°±ì—…)
- `presign`: ì„ì‹œ ë‹¤ìš´ë¡œë“œ URL ìƒì„±

ìì„¸í•œ ì‚¬ìš©ë²•ì€ [s3-share ë¬¸ì„œ](docs/s3-share.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ğŸ“¦ tar-fat32

FAT32 íŒŒì¼ ì‹œìŠ¤í…œì˜ 4GB ì œí•œì„ ìš°íšŒí•˜ì—¬ ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ ë¶„í•  ì••ì¶•í•©ë‹ˆë‹¤.

```bash
cli-onprem tar-fat32 <command> [options]
```

**í•˜ìœ„ ëª…ë ¹ì–´:**
- `pack`: íŒŒì¼/ë””ë ‰í† ë¦¬ë¥¼ ë¶„í•  ì••ì¶•
- `restore`: ë¶„í• ëœ íŒŒì¼ ë³µì›

**ì£¼ìš” ê¸°ëŠ¥:**
- SHA256 ë¬´ê²°ì„± ê²€ì¦
- ìë™ ë³µì› ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
- ì§„í–‰ë¥  í‘œì‹œ

ìì„¸í•œ ì‚¬ìš©ë²•ì€ [tar-fat32 ë¬¸ì„œ](docs/tar-fat32.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ› ï¸ ê°œë°œ

ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒì„ ì‚¬ìš©í•©ë‹ˆë‹¤:
- íŒ¨í‚¤ì§€ ê´€ë¦¬ë¥¼ ìœ„í•œ `uv`
- ì½”ë“œ í’ˆì§ˆì„ ìœ„í•œ `pre-commit` í›…
- ë¦°íŒ… ë° í¬ë§·íŒ…ì„ ìœ„í•œ `ruff`, `black`, `mypy`
- CI/CDë¥¼ ìœ„í•œ GitHub Actions

### ê°œë°œ í™˜ê²½ ì„¤ì •

ê°œë°œì— í•„ìš”í•œ ì˜ì¡´ì„±ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì¹˜í•©ë‹ˆë‹¤:

```bash
# ì €ì¥ì†Œ ë³µì œ
git clone https://github.com/cagojeiger/cli-onprem.git
cd cli-onprem

# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync --locked --all-extras --dev

# pre-commit í›… ì„¤ì¹˜
pre-commit install
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
pytest
```

## ğŸ“– ë¬¸ì„œ

ê° ëª…ë ¹ì–´ì— ëŒ€í•œ ìì„¸í•œ ë¬¸ì„œëŠ” `docs/` ë””ë ‰í† ë¦¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- [Docker Tar ëª…ë ¹ì–´](docs/docker_tar.md)
- [Helm Local ëª…ë ¹ì–´](docs/helm-local.md)
- [S3 ê³µìœ  ëª…ë ¹ì–´](docs/s3-share.md)
- [Tar-Fat32 ëª…ë ¹ì–´](docs/tar-fat32.md)
- [PyPI ë“±ë¡ ê³¼ì •](docs/pypi.md)
- [ë²„ì „ ê´€ë¦¬ ë°©ì‹](docs/versioning.md)

## ë¼ì´ì„ ìŠ¤

MIT ë¼ì´ì„ ìŠ¤
