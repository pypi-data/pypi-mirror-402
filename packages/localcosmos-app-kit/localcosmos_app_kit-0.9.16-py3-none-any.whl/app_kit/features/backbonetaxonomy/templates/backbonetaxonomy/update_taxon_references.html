{% extends 'app_kit/manage_generic_content.html' %}
{% load i18n static localcosmos_tags %}

{% block content %}

<div {% block container_class %}class="container"{% endblock %}>
    <div class="row">
        <div class="col-12">
            <div>
                <br>
                <h1>{% trans 'Check and update taxonomic references' %}</h1>
            </div>
        </div>
    </div>
    <div>
        <p>
            {% blocktrans %}If you updated your taxonomic database you can update your taxonomic references here.{% endblocktrans %}
        </p>
    </div>
    {% if updated %}
        <div class="row my-5">
            <div class="col-12">
                <div class="alert alert-success">
                    {% trans "Taxon references have been updated successfully. Some taxa might require manual review. See below." %}
                </div>
            </div>
        </div>
    {% endif %}
    <div class="row">
        <div id="check-result" class="col-12">
            <div class="text-center my-5">
                <img src="{% static 'app_kit/images/spinner.gif' %}" /> 
            </div>
        <div>
    </div>
</div>

<script>
    $.get("{% url 'get_taxon_references_changes' meta_app.id %}", (html) => {
        $("#check-result").html(html);
        ajaxify('check-result')
    });
</script>

{% endblock %}