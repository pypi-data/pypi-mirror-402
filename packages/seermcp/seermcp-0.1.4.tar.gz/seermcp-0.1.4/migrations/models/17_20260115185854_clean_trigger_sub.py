from tortoise import BaseDBAsyncClient

RUN_IN_TRANSACTION = True


async def upgrade(db: BaseDBAsyncClient) -> str:
    return """
        ALTER TABLE "trigger_subscriptions" RENAME COLUMN "bindings" TO "event_data_schema";
        ALTER TABLE "trigger_subscriptions" ADD "is_polling" BOOL NOT NULL DEFAULT False;
        ALTER TABLE "trigger_subscriptions" DROP COLUMN "input_contract";
        ALTER TABLE "trigger_subscriptions" DROP COLUMN "form_config";
        ALTER TABLE "trigger_subscriptions" DROP COLUMN "form_suffix";
        ALTER TABLE "trigger_subscriptions" DROP COLUMN "form_fields";"""


async def downgrade(db: BaseDBAsyncClient) -> str:
    return """
        ALTER TABLE "trigger_subscriptions" ADD "input_contract" JSONB;
        ALTER TABLE "trigger_subscriptions" ADD "form_config" JSONB;
        ALTER TABLE "trigger_subscriptions" ADD "form_suffix" VARCHAR(100);
        ALTER TABLE "trigger_subscriptions" ADD "form_fields" JSONB;
        ALTER TABLE "trigger_subscriptions" RENAME COLUMN "event_data_schema" TO "bindings";
        ALTER TABLE "trigger_subscriptions" DROP COLUMN "is_polling";
        COMMENT ON COLUMN "trigger_subscriptions"."input_contract" IS 'Dict[str, InputDef] defining workflow inputs';
COMMENT ON COLUMN "trigger_subscriptions"."form_config" IS 'Form UI configuration (title, description, styling)';
COMMENT ON COLUMN "trigger_subscriptions"."form_suffix" IS 'Custom URL slug for form triggers (e.g., ''contact-form'')';
COMMENT ON COLUMN "trigger_subscriptions"."form_fields" IS 'Array of InputField configs for form triggers';"""


MODELS_STATE = (
    "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"
    "0w/TTdkhERnzlWbKrtQf/Nf/A/5Wcxc="
)
