[project]
name = "fetchmd"
version = "0.1.0"
description = "Python library and CLI to fetch any web page as Markdown"
requires-python = ">=3.10"
readme = "README.md"
license = { file = "LICENSE" }
authors = [{ name = "Nikolay Panov", email = "github@npanov.com" }]
dependencies = ["httpx", "lxml", "readability-lxml", "html2text"]

[project.urls]
Homepage = "https://github.com/niksite/fetchmd"
Repository = "https://github.com/niksite/fetchmd"
Issues = "https://github.com/niksite/fetchmd/issues"

[project.scripts]
fetchmd = "fetchmd.cli:main"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["src/fetchmd"]

[dependency-groups]
dev = ["pytest", "respx", "ruff"]

[tool.ruff]
target-version = "py310"
line-length = 100
unsafe-fixes = true
preview = true

[tool.ruff.lint]
select = ["ALL"]
extend-select = [
  "D400", # First line should end with a period
  "D401", # First line should be in imperative mood
  "D413", # Missing blank line after the last section of a multiline docstring
]
fixable = ["ALL"]
ignore = [
  "CPY001", # Missing copyright notice at top of file
  "COM812", # missing-trailing-comma
  "D203",   # One blank line before class - we prefer D211 instead
  "D213",   # multi-line-summary-second-line - we prefer D212 instead
]

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.ruff.lint.per-file-ignores]
"tests/**" = [
  "INP001",
  "ANN001",
  "ANN201",
  "S101",
  "CPY001",
  "D100",
  "D103",
  "SLF001",
]
"src/fetchmd/cli.py" = ["T201"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"

[tool.pytest.ini_options]
addopts = "-q"
