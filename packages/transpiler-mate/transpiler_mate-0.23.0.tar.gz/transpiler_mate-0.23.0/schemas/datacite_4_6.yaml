# Copyright 2025 Terradue
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

$schema: https://json-schema.org/draft/2020-12/schema
$id: https://datacite-metadata-schema.readthedocs.io/en/4.6/
$ref: '#/$defs/DataCiteMetadata_4_6'

$defs:

  Identifier:
    description: The Identifier is a unique string that identifies a resource.
    type: object
    required:
    - identifierType
    - identifier
    properties:
      identifierType:
        type: string
        default: DOI
      identifier:
        type: string

  NameIdentifier:
    description: Uniquely identifies an individual or legal entity, according to various schemes.
    type: object
    required:
    - nameIdentifierScheme
    properties:
      nameIdentifier:
        description: Uniquely identifies an individual or legal entity, according to various schemes.
        type: string
      nameIdentifierScheme:
        description: The name of the name identifier scheme.
        type: string
      schemeURI:
        description: The URI of the name identifier scheme.
        type: string
        format: uri

  Affiliation:
    description: The organizational or institutional affiliation of the creator.
    type: object
    properties:
      affiliationIdentifier:
        description: Uniquely identifies the organizational affiliation of the creator.
        type: string
      affiliationIdentifierScheme:
        description: The name of the affiliation identifier scheme
        type: string
      schemeURI:
        description: The URI of the affiliation identifier scheme.
        type: string
        format: uri
    dependentRequired:
      affiliationIdentifier:
      - affiliationIdentifierScheme

  NameType:
    description: The type of name.
    type: string
    enum:
    - Organizational
    - Personal

  Creator:
    description: The main researcher involved in producing the data, or the author of the publication.
    type: object
    required:
    - name
    properties:
      name:
        description: The full name of the creator.
        type: string
      nameType:
        $ref: '#/$defs/NameType'
      givenName:
        description: The personal or first name of the creator.
        type: string
      familyName:
        description: The surname or last name of the creator.
        type: string
      nameIdentifiers:
        description: Uniquely identifies an individual or legal entity, according to various schemes.
        type: array
        items:
          $ref: '#/$defs/NameIdentifier'
      affiliation:
        description: The organizational or institutional affiliations of the creator.
        type: array
        items:
          $ref: '#/$defs/Affiliation'

  Title:
    description: A name or title by which a resource is known. May be the title of a dataset or the name of a piece of software or an instrument.
    type: object
    required:
    - title
    properties:
      title:
        description: A name or title by which a resource is known
        type: string
      lang:
        description: The languages of the title.
        type: string
      titleType:
        description: The type of Title (other than the Main Title).
        type: string
        enum:
        - AlternativeTitle
        - Subtitle
        - TranslatedTitle
        - Other

  Publisher:
    description: The name of the entity that holds, archives, publishes, prints, distributes, releases, issues, or produces the resource. This property will be used to formulate the citation, so consider the prominence of the role.
    type: object
    required:
    - name
    properties:
      name:
        description: The name of the entity that holds, archives, publishes, prints, distributes, releases, issues, or produces the resource. This property will be used to formulate the citation, so consider the prominence of the role.
        type: string
      publisherIdentifier:
        description: Uniquely identifies the publisher, according to various schemes.
        type: string
      publisherIdentifierScheme:
        description: The name of the publisher identifier scheme.
        type: string
      schemeURI:
        description: The URI of the publisher identifier scheme.
        type: string
        format: uri
      lang:
        description: The language used by the Publisher.
        type: string

  Subject:
    description: Subject, keyword, classification code, or key phrase describing the resource.
    type: object
    required:
    - subject
    properties:
      subject:
        description: Subject, keyword, classification code, or key phrase describing the resource.
        type: string
      subjectScheme:
        description: The name of the subject scheme or classification code or authority if one is used.
        type: string
      schemeURI:
        description: The URI of the subject identifier scheme.
        type: string
        format: uri
      valueURI:
        description: The URI of the subject term.
        type: string
        format: uri
      classificationCode:
        description: The classification code used for the subject term in the subject schemes.
        type: string
      lang:
        description: The language used in the Subject.
        type: string

  ContributorType:
    description: The type of contributor of the resource
    type: string
    enum:
    - ContactPerson
    - DataCollector
    - DataCurator
    - DataManager
    - Distributor
    - Editor
    - HostingInstitution
    - Producer
    - ProjectLeader
    - ProjectManager
    - ProjectMember
    - RegistrationAgency
    - RegistrationAuthority
    - RelatedPerson
    - Researcher
    - ResearchGroup
    - RightsHolder
    - Sponsor
    - Supervisor
    - Translator
    - WorkPackageLeader
    - Other

  Contributor:
    description: The institution or person responsible for collecting, managing, distributing, or otherwise contributing to the development of the resource.
    allOf:
    - $ref: '#/$defs/Creator'
    - type: object
      required:
      - contributorType
      properties:
        contributorType:
          $ref: '#/$defs/ContributorType'

  Date:
    description: Date relevant to the work.
    type: object
    required:
    - date
    - dateType
    properties:
      date:
        description: Date relevant to the work.
        type: string
        format: date
      dateType:
        description: The type of date
        type: string
        enum:
        - Accepted
        - Available
        - Copyrighted
        - Collected
        - Coverage
        - Created
        - Issued
        - Submitted
        - Updated
        - Valid
        - Withdrawn
        - Other
      dateInformation:
        description: Specific information about the date, if appropriate.
        type: string

  ResourceTypeGeneral:
    description: The general type of a resource.
    type: string
    enum:
    - Audiovisual
    - Award
    - Book
    - BookChapter
    - Collection
    - ComputationalNotebook
    - ConferencePaper
    - ConferenceProceeding
    - DataPaper
    - Dataset
    - Dissertation
    - Event
    - Image
    - InteractiveResource
    - Instrument
    - Journal
    - JournalArticle
    - Model
    - OutputManagementPlan
    - PeerReview
    - PhysicalObject
    - Preprint
    - Project
    - Report
    - Service
    - Software
    - Sound
    - Standard
    - StudyRegistration
    - Text
    - Workflow
    - Other

  ResourceType:
    description: A description of the resource.
    type: object
    required:
    - resourceType
    - resourceTypeGeneral
    properties:
      resourceType:
        description: A description of the resource.
        type: string
      resourceTypeGeneral:
        $ref: '#/$defs/ResourceTypeGeneral'

  AlternateIdentifier:
    description: An identifier other than the primary Identifier applied to the resource being registered.
    type: object
    required:
    - alternateIdentifierType
    properties:
      alternateIdentifier:
        description: An identifier other than the primary Identifier applied to the resource being registered
        type: string
      alternateIdentifierType:
        $ref: '#/$defs/ResourceTypeGeneral'

  RelationType:
    description: Description of the relationship of the resource being registered (A) and the related resource (B).
    type: string
    enum:
    - IsCitedBy
    - Cites
    - IsSupplementTo
    - IsSupplementedBy
    - IsContinuedBy
    - Continues
    - IsDescribedBy
    - Describes
    - HasMetadata
    - IsMetadataFor
    - HasVersion
    - IsVersionOf
    - IsNewVersionOf
    - IsPreviousVersionOf
    - IsPartOf
    - HasPart
    - IsPublishedIn
    - IsReferencedBy
    - References
    - IsDocumentedBy
    - Documents
    - IsCompiledBy
    - Compiles
    - IsVariantFormOf
    - IsOriginalFormOf
    - IsIdenticalTo
    - IsReviewedBy
    - Reviews
    - IsDerivedFrom
    - IsSourceOf
    - IsRequiredBy
    - Requires
    - IsObsoletedBy
    - Obsoletes
    - IsCollectedBy
    - Collects
    - IsTranslationOf
    - HasTranslation

  RelatedIdentifierType:
    description: The type of the RelatedIdentifier.
    type: string
    enum:
    - ARK
    - arXiv
    - bibcode
    - CSTR
    - DOI
    - EAN13
    - EISSN
    - Handle
    - IGSN
    - ISBN
    - ISSN
    - ISTC
    - LISSN
    - LSID
    - PMID
    - PURL
    - RRID
    - UPC
    - URL
    - URN
    - w3id

  RelatedIdentifier:
    description: Identifier of related resources.
    type: object
    properties:
      relatedIdentifier:
        description: Identifier of related resources.
        type: string
      relatedIdentifierType:
        $ref: '#/$defs/RelatedIdentifierType'
      relationType:
        $ref: '#/$defs/RelationType'
      relatedMetadataScheme:
        description: The name of the schemes.
        type: string
      schemeURI:
        description: The URI of the name identifier scheme.
        type: string
        format: uri
      schemeType:
        description: The type of the relatedMetadataScheme, linked with the schemeURI
        type: string
      resourceTypeGeneral:
        $ref: '#/$defs/ResourceTypeGeneral'
    allOf:
    - if:
        properties:
          relationType:
            enum:
            - HasMetadata
            - IsMetadataFor
        required:
        - relationType
      then:
        required:
        - relatedMetadataScheme
        - schemeURI
        - schemeType
      else:
        # Forbid these properties when relationType is anything else
        not:
          anyOf:
            - required:
              - relatedMetadataScheme
            - required:
              - schemeURI
            - required:
              - schemeType

  Right:
    description: Any right information for this resource.
    type: object
    required:
    - rights
    properties:
      rights:
        description: Any right information for this resource.
        type: string
      rightsURI:
        description: The URI of the license.
        type: string
        format: uri
      rightsIdentifier:
        description: A short, standardized version of the license name.
        type: string
      rightsIdentifierScheme:
        description: The name of the scheme.
        type: string
      schemeURI:
        description: The URI of the rightsIdentifierScheme.
        type: string
        format: uri

  Description:
    description: All additional information that does not fit in any of the other categories.
    type: object
    required:
    - description
    - descriptionType
    properties:
      description:
        description: All additional information that does not fit in any of the other categories.
        type: string
      descriptionType:
        description: The type of the Description.
        type: string
        enum:
        - Abstract
        - Methods
        - SeriesInformation
        - TableOfContents
        - TechnicalInfo
        - Other

  GeoLocationPoint:
    description: A point location in space.
    required:
    - pointLongitude
    - pointLatitude
    properties:
      pointLongitude:
        description: Longitudinal dimension of point.
        type: number
        format: float
      pointLatitude:
        description: Latitudinal dimension of point.
        type: number
        format: float

  GeoLocationBox:
    description: The spatial limits of a box.
    required:
    - westBoundLongitude
    - eastBoundLongitude
    - southBoundLatitude
    - northBoundLatitude
    properties:
      westBoundLongitude:
        description: Western longitudinal dimension of box.
        type: number
        format: float
      eastBoundLongitude:
        description: Eastern longitudinal dimension of box.
        type: number
        format: float
      southBoundLatitude:
        description: Southern latitudinal dimension of box.
        type: number
        format: float
      northBoundLatitude:
        description: Northern latitudinal dimension of box.
        type: number
        format: float

  GeoLocationPolygon:
    description: A drawn polygon area, defined by a set of points and lines connecting the points in a closed chain.
    properties:
      polygonPoint:
        $ref: '#/$defs/GeoLocationPoint'
      inPolygonPoint:
        $ref: '#/$defs/GeoLocationPoint'

  GeoLocation:
    description: Spatial region or named place where the data was gathered or about which the data is focused.
    properties:
      geoLocationPoint:
        $ref: '#/$defs/GeoLocationPoint'
      geoLocationBox:
        $ref: '#/$defs/GeoLocationBox'
      geoLocationPlace:
        description: Description of a geographic location.
        type: string
      geoLocationPolygon:
        type: array
        minItems: 4
        items:
          $ref: '#/$defs/GeoLocationPolygon'

  FundingReference:
    description: Information about financial support (funding) for the resource being registered.
    required:
    - funderName
    - funderIdentifierType
    properties:
      funderName:
        description: Name of the funding provider.
        type: string
      funderIdentifier:
        description: Uniquely identifies a funding entity, according to various types
        type: string
      funderIdentifierType:
        description: The type of the funderIdentifier.
        type: string
        enum:
        - Crossref Funder ID
        - GRID
        - ISNI
        - ROR
        - Other
      schemeURI:
        description: The URI of the funder identifier scheme.
        type: string
        format: uri
      awardNumber:
        description: The code assigned by the funder to a sponsored award (grant).
        type: string
      awardURI:
        description: The URI leading to a page provided by the funder for more information about the award (grant).
        type: string
        format: uri
      awardTitle:
        description: The human readable title or name of the award (grant).
        type: string

  RelatedItemIdentifier:
    description: The identifier for the related item.
    properties:
      relatedItemIdentifierType:
        $ref: '#/$defs/RelatedIdentifierType'      
      relatedMetadataScheme:
        description: The name of the schemes.
        type: string
      schemeURI:
        description: The URI of the name identifier scheme.
        type: string
        format: uri
      schemeType:
        description: The type of the relatedMetadataScheme, linked with the schemeURI
        type: string

  RelatedItemCreator:
    description: The institution or person responsible for creating the related resource.
    required:
    - name
    properties:
      name:
        description: The full name of the related item creator
        type: string
      nameType:
        $ref: '#/$defs/NameType'
      givenName:
        description: The personal or first name of the creator.
        type: string
      familyName:
        description: The surname or last name of the creator.
        type: string

  RelatedItemTitle:
    description: Title of the related item.
    type: object
    required:
    - title
    properties:
      title:
        description: Title of the related item.
        type: string
      titleType:
        description: Type of the related item title.
        type: string

  RelatedItemContributor:
    description: An institution or person identified as contributing to the development of the resource.
    allOf:
    - $ref: '#/$defs/RelatedItemCreator'
    - type: object
      required:
      - contributorType
      properties:
        contributorType:
          $ref: '#/$defs/ContributorType'

  RelatedItem:
    description: Information about a resource related to the one being registered.
    type: object
    required:
    - relatedItemType
    - relationType
    - titles
    properties:
      relatedItemType:
        $ref: '#/$defs/ResourceTypeGeneral'
      relationType:
        $ref: '#/$defs/ResourceTypeGeneral'
      relatedItemIdentifier:
        $ref: '#/$defs/RelatedItemIdentifier'
      creators:
        description: The institution or person responsible for creating the related resource.
        type: array
        items:
          $ref: '#/$defs/RelatedItemCreator'
      titles:
        description: Title of the related item
        type: array
        minItems: 1
        items:
          $ref: '#/$defs/RelatedItemTitle'
      publicationYear:
        $ref: '#/$defs/PublicationYear'
      volume:
        description: Volume of the related item.
        type: string
      issue:
        description: Issue number or name of the related item.
        type: string
      number:
        description: Number of the resource within the related item, e.g., report number or article number.
        type: string
      numberType:
        description: Type of the related itemâ€™s number, e.g., report number or article number.
        type: string
        enum:
        - Article
        - Chapter
        - Report
        - Other
      firstPage:
        description: First page of the resource within the related item, e.g., of the chapter, article, or conference paper in proceedings.
        type: string
      lastPage:
        description: Last page of the resource within the related item, e.g., of the chapter, article, or conference paper in proceedings.
        type: string
      publisher:
        description: The name of the entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource.
        type: string
      edition:
        description: Edition or version of the related item.
        type: string
      contributors:
        description: An institution or person identified as contributing to the development of the resource
        type: array
        items:
          $ref: '#/$defs/RelatedItemContributor'

  PublicationYear:
    description: The year when the data was or will be made publicly available.
    oneOf:
    - type: integer
      format: int32
    - type: string
      pattern: '^\d{4}$'

  DataCiteAttributes:
    description: DataCite Metadata Schema
    type: object
    required:
    - identifiers
    - creators
    - titles
    - publisher
    - publicationYear
    - types
    properties:
      doi:
        description: The full DOI (prefix + suffix)
        type: string
      prefix:
        description: The namespace prefix
        type: string
      suffix:
        description: The suffix portion of the DOI
        type: string
      event:
        description: Indicates a state-change action for the DOI
        type: string
        enum:
        - publish
        - register
        - hide
      identifiers:
        type: array
        items:
          $ref: '#/$defs/Identifier'
      creators:
        description: The main researchers involved in producing the data, or the authors of the publication, in priority order.
        type: array
        minItems: 1
        items:
          $ref: '#/$defs/Creator'
      titles:
        description: Names or titles by which a resource is known. May be the title of a dataset or the name of a piece of software or an instrument.
        type: array
        minItems: 1
        items:
          $ref: '#/$defs/Title'
      publisher:
        $ref: '#/$defs/Publisher'
      publicationYear:
        $ref: '#/$defs/PublicationYear'
      subjects:
        description: Subjects, keywords, classification codes, or key phrases describing the resource.
        type: array
        items:
          $ref: '#/$defs/Subject'
      contributors:
        description: The institution or person responsible for collecting, managing, distributing, or otherwise contributing to the development of the resource.
        type: array
        items:
          $ref: '#/$defs/Contributor'
      dates:
        description: Different dates relevant to the work.
        type: array
        items:
          $ref: '#/$defs/Date'
      language:
        description: The primary language of the resource
        type: string
      types:
        $ref: '#/$defs/ResourceType'
      alternateIdentifiers:
        description: An identifier other than the primary Identifier applied to the resource being registered.
        type: array
        items:
          $ref: '#/$defs/AlternateIdentifier'
      relatedIdentifiers:
        description: Identifiers of related resources.
        type: array
        items:
          $ref: '#/$defs/RelatedIdentifier'
      sizes:
        description: Size (e.g., bytes, pages, inches, etc.) or duration (extent), e.g., hours, minutes, days, etc., of a resource.
        type: array
        items:
          type: string
      formats:
        description: Technical format of the resources.
        type: array
        items:
          type: string
      version:
        description: The version number of the resources.
        type: string
      rightsList:
        description: Any rights information for this resource
        type: array
        items:
          $ref: '#/$defs/Right'
      descriptions:
        descriptions: All additional information that does not fit in any of the other categories.
        type: array
        items:
          $ref: '#/$defs/Description'
      geoLocations:
        description: Spatial regions or named places where the data was gathered or about which the data is focused.
        type: array
        items:
          $ref: '#/$defs/GeoLocation'
      fundingReferences:
        description: Information about financial support (funding) for the resource being registered.
        type: array
        items:
          $ref: '#/$defs/FundingReference'
      relatedItems:
        description: Informations about a resource related to the one being registered.
        type: array
        items:
          $ref: '#/$defs/RelatedItem'

  Data:
    description: TODO
    type: object
    required:
    - id
    - type
    properties:
      id:
        type: string
      type:
        type: string
        default: dois
      attributes:
        $ref: '#/$defs/DataCiteAttributes'

  DataCiteMetadata_4_6:
    description: DataCite Metadata Schema
    type: object
    required:
    - data
    properties:
      data:
        $ref: '#/$defs/Data'
