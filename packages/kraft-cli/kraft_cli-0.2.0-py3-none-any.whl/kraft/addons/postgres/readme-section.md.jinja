## PostgreSQL Database

This project includes PostgreSQL database support with SQLAlchemy ORM.

### Quick Start

1. Start postgres:
   ```bash
   docker-compose up -d postgres
   ```

2. Switch to database-backed routes in `main.py`:
   ```python
   # Change this:
   from {{ package_name }}.routes import router
   # To this:
   from {{ package_name }}.routes_db import router
   ```

3. Create tables (add to `main.py` after app creation):
   ```python
   from {{ package_name }}.database import engine
   from {{ package_name }}.models_db import Base

   @app.on_event("startup")
   async def create_tables():
       async with engine.begin() as conn:
           await conn.run_sync(Base.metadata.create_all)
   ```

4. Run the app:
   ```bash
   uv run uvicorn {{ package_name }}.main:app --reload
   ```

### Database Connection

| Variable | Default | Description |
|----------|---------|-------------|
| `DATABASE_URL` | `postgresql+asyncpg://postgres:postgres@localhost:5432/app` | Connection URL |
| `POSTGRES_USER` | `postgres` | Username |
| `POSTGRES_PASSWORD` | `postgres` | Password |
| `POSTGRES_DB` | `app` | Database name |

### Verify Data in Postgres

If you have `psql` installed locally:
```bash
psql -h localhost -U postgres -d app
```

Or exec into the container:
```bash
docker exec -it {{ package_name.replace('_', '-') }}-postgres-1 psql -U postgres -d app
```

```sql
\dt                  -- list tables
SELECT * FROM books; -- query books
```
