description = "Route a question to the cheapest exact `papi ...` command(s), then suggest the next prompt to use."
prompt = """
Task: Given the user's question/context: {{args}}

Output the exact shell command(s) to run next, choosing the cheapest thing that can answer.

Rules:
- Prefer: `papi search` (use `--grep --fixed-strings` for exact hits; use `--fts` after `papi index --backend search --search-rebuild` for ranked BM25; use `--hybrid` for ranked+exact)
  / `papi list` / `papi show ... --level eq|tex|summary` / `papi notes` / `papi export`.
- Recommend `papi ask` only if the user explicitly asked for RAG/synthesis OR `search/show` cannot answer.
- If you need machine-readable citations/snippets, use `papi ask --format evidence-blocks` (JSON output).
- If network/LLM should be avoided, include `--no-llm` where relevant and avoid `papi ask`.
- After commands, output: `Next prompt:` one of `/verify-with-paper` or `/ground-with-paper` or `/compare-papers` or `/curate-paper-note`.

Format:
Commands:
- <exact command 1>
- <exact command 2 (if needed)>
Rationale: <one line>
Next prompt: <one of the above>
"""
