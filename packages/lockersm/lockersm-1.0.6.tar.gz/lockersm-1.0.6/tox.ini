# Tox (http://tox.testrun.org/) is a tool for running tests in multiple virtualenvs.
# This configuration file will run the test suite on all supported python versions.
# To use it, "pip install tox" and then run "tox" from this directory.


[tox]
envlist = py{314,313,312,311,310,39,38}
skip_missing_interpreters = true
# skipsdist = true


[gh-actions]
python =
    3.14: py314
    3.13: py313
    3.12: py312
    3.11: py311
    3.10: py310
    3.9: py39
    3.8: py38


[testenv:.pkg]
allowlist_externals =
    python
    python3

[tool:pytest]
testpaths = tests
addopts =
    --cov-report=term-missing

[testenv]
description = run the unit tests under {basepython}
allowlist_externals =
    python
    python3
    pytest
setenv =
    COVERAGE_FILE = {toxworkdir}/.coverage.{envname}
deps =
    py{314,313,312,311,310,39,38}: coverage >= 4.5.3
    py{314,313,312,311,310,39,38}: pytest >= 6.0.0
    pytest-cov
    pytest-mock >= 2.0.0
    pytest-xdist >= 1.31.0
    python-dotenv
# ignore locker directory as all tests are inside ./tests
commands = pytest --cov=. tests --ignore locker {posargs:-n auto}
