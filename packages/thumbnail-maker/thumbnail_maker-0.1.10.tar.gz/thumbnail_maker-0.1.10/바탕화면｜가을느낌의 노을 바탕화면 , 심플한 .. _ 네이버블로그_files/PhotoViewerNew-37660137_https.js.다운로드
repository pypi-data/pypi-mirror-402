PhotoViewerNew=(function(){function H(J){PhotoViewerNew.thumbnailTypeW3840EnableDomainList=J?m(J):[]}function g(K,J,L){if(!K||!J||!L){return}PhotoViewerNew.mylogBaEventSender=K;PhotoViewerNew.beyondAnalyticsUrl=J;PhotoViewerNew.userKey=L;PhotoViewerNew.blogNo=blogNo}function x(K,J,M,O,N){try{PhotoViewerNew.mylogBaEventSender=K;PhotoViewerNew.beyondAnalyticsUrl=J;PhotoViewerNew.userKey=M;PhotoViewerNew.blogNo=blogNo;PhotoViewerNew.currentImageIndex=0;PhotoViewerNew.thumbnailTypeW3840EnableDomainList=N?m(N):[];PhotoViewerNew.socialPluginInfoList=O?m(O):[];PhotoViewerNew.socialPluginInfo=PhotoViewerNew.socialPluginInfoList[0];PhotoViewerNew.logNo=PhotoViewerNew.socialPluginInfoList[0].logNo;PhotoViewerNew.splugin_oninitialize_for_photo_viewer=E;PhotoViewerNew.isShowSharePopup=false;c();PhotoViewerNew.seViewers=j();PhotoViewerNew.photoViewer=b();A();I()}catch(L){console.log("PhotoViewerNew init fail.",L)}}function c(){for(var M=0;M<PhotoViewerNew.socialPluginInfoList.length;M++){var J=PhotoViewerNew.socialPluginInfoList[M];var Q="#post-view"+J.logNo;var P=document.querySelectorAll(Q+" img");for(var L=0;L<P.length;L++){var K=P[L];K.socialPluginInfo=J;K.addEventListener("click",function(){PhotoViewerNew.socialPluginInfo=this.socialPluginInfo;PhotoViewerNew.logNo=this.socialPluginInfo.logNo;setTimeout(function(){var R=document.querySelector(".splugin-overlay.naver-splugin.spi_sns_share");R.setAttribute("data-oninitialize","PhotoViewerNew.splugin_oninitialize_for_photo_viewer();")},10)})}var O=document.querySelectorAll(Q+" video");for(var L=0;L<O.length;L++){var N=O[L];if(G(N.getAttribute("data-gif-url"))){continue}N.socialPluginInfo=J;N.addEventListener("click",function(){PhotoViewerNew.socialPluginInfo=this.socialPluginInfo;PhotoViewerNew.logNo=this.socialPluginInfo.logNo;setTimeout(function(){var R=document.querySelector(".splugin-overlay.naver-splugin.spi_sns_share");R.setAttribute("data-oninitialize","PhotoViewerNew.splugin_oninitialize_for_photo_viewer();")},10)})}}}function w(){try{c();PhotoViewerNew.seViewers=j();PhotoViewerNew.photoViewer=b();A();I()}catch(J){console.log("PhotoViewerNew init fail.",J)}}function j(){var J=[];var M=document.querySelectorAll(".se-viewer, .se_doc_viewer, .post-body");if(!M){return[]}for(var K=0;K<M.length;K++){var L=M[K];if(L.classList.contains("post-body")&&!!L.querySelector(".se-viewer")||!!L.querySelector(".se_doc_viewer")){continue}var N="";if(L.querySelector(".se-section-documentTitle .pcol1")){N=L.querySelector(".se-section-documentTitle .pcol1").textContent.trim()}if(L.querySelector(".se_title .se_textarea")){N=L.querySelector(".se_title .se_textarea").textContent.trim()}if(L.querySelector(".htitle .pcol1")){N=L.querySelector(".htitle .pcol1").textContent.trim()}if(!N){continue}L.titleText=N;J.push(L)}return J}function b(){var J=new PhotoViewer.Viewer({imageGallery:h(),urlCallback:function(K){PhotoViewerNew.currentImageIndex=K;var L=parent?parent.location:location;if(PhotoViewerNew.seViewers.length>1||L.pathname=="/"+PhotoViewerNew.socialPluginInfo.domainIdOrBlogId||L.pathname.indexOf("/PostList.naver")>-1){return}u(K)},useNlogScript:false,});J.addPlugin(k());J.on(o());return J}function F(){var J={};J[PhotoViewer.NlogEvent.LIST_CLOSE]=function(){nclk_v2(this,"bpv.listclose","","")};J[PhotoViewer.NlogEvent.LIST_OPEN]=function(){nclk_v2(this,"bpv.listopen","","")};J[PhotoViewer.NlogEvent.SHARE]=function(){nclk_v2(this,"bpv.share","","")};J[PhotoViewer.NlogEvent.BPV_CLOSE]=function(){nclk_v2(this,"bpv.close","","")};J[PhotoViewer.NlogEvent.IMG_RIGHTMOUSE]=function(){nclk_v2(this,"img.rightmouse","","")};J[PhotoViewer.NlogEvent.CLICK_PREVIOUS]=function(){nclk_v2(this,"bpv.previous","","")};J[PhotoViewer.NlogEvent.CLICK_NEXT]=function(){nclk_v2(this,"bpv.next","","")};J[PhotoViewer.Event.ZOOMOUT]=function(){nclk_v2(this,"bpv.zoomout","","")};J[PhotoViewer.Event.ZOOMIN]=function(){nclk_v2(this,"bpv.zoomin","","")};J[PhotoViewer.Event.SETSIZE]=function(){nclk_v2(this,"bpv.setsize","","")};J[PhotoViewer.Event.MOVEPOST]=function(){nclk_v2(this,"bpv.movepost","","")};J[PhotoViewer.Event.LIST_IMG]=function(){nclk_v2(this,"bpv.listimg","","")};J[PhotoViewer.Event.SCROLL_ZOOM_OUT]=function(){nclk_v2(this,"bpv.scrollzoomout","","")};J[PhotoViewer.Event.SCROLL_ZOOM_IN]=function(){nclk_v2(this,"bpv.scrollzoomin","","")};J[PhotoViewer.Event.SCROLL_RIGHT]=function(){nclk_v2(this,"bpv.scrollright","","")};J[PhotoViewer.Event.SCROLL_LEFT]=function(){nclk_v2(this,"bpv.scrollleft","","")};J[PhotoViewer.Event.KEYBOARD_PREVIOUS]=function(){nclk_v2(this,"bpv.keyboardprevious","","")};J[PhotoViewer.Event.KEYBOARD_NEXT]=function(){nclk_v2(this,"bpv.keyboardnext","","")};return J}function o(){var J=F();J[PhotoViewer.Event.CLOSED]=function(){t()};J[PhotoViewer.Event.OPENED]=function(){nclk_v2(this,"pst.image","","");PhotoViewerNew.mylogBaEventSender.photoViewer(PhotoViewerNew.beyondAnalyticsUrl,PhotoViewerNew.userKey,PhotoViewerNew.blogNo,PhotoViewerNew.logNo,"postend")};J[PhotoViewer.NlogEvent.IMG_CLOSE]=function(){nclk_v2(this,"img.close","","");if(PhotoViewerNew.isShowSharePopup){window.__splugin.hide()}else{PhotoViewerNew.photoViewer.close()}};J[PhotoViewer.Event.KEYBOARD_ESC]=function(){if(PhotoViewerNew.isShowSharePopup){window.__splugin.hide()}else{PhotoViewerNew.photoViewer.close()}};return J}function f(L,K){var J=F();J[PhotoViewer.Event.OPENED]=function(){nclk_v2(this,"pst.image","","");PhotoViewerNew.mylogBaEventSender.photoViewer(PhotoViewerNew.beyondAnalyticsUrl,PhotoViewerNew.userKey,PhotoViewerNew.blogNo,null,K)};J[PhotoViewer.NlogEvent.IMG_CLOSE]=function(){nclk_v2(this,"img.close","","");L.close()};J[PhotoViewer.Event.KEYBOARD_ESC]=function(){L.close()};return J}function u(J){var L=parent?parent.location:location;var M=C(L.href,"photoView",J);var K=L.protocol+"//"+L.host+L.pathname+M;if(!!parent){parent.history.replaceState(null,null,K)}else{history.replaceState(null,null,K)}}function t(){var K=parent?parent.location:location;var L=d(K.href,"photoView");var J=K.protocol+"//"+K.host+K.pathname+L;if(!!parent){parent.history.replaceState(null,null,J)}else{history.replaceState(null,null,J)}}function k(){return new PhotoViewer.ShareButton({onClick:function(J){},initialize:function(K){var L=K.dataset;L.style="unity";L.option=JSON.stringify({layerPosition:"outside-bottom",align:"right",top:13.7,left:-4,});var J=E();if(window.SocialPlugIn_Core){window.__splugin=window.SocialPlugIn_Core(J);window.__splugin.init(K);window.__splugin.update(K,J)}}})}function E(){var K=parent?parent.location:location;var J=K.protocol+"//"+K.host+"/"+PhotoViewerNew.socialPluginInfo.domainIdOrBlogId+"/"+PhotoViewerNew.socialPluginInfo.logNo+"?photoView="+PhotoViewerNew.currentImageIndex;return{evKey:"blog",serviceName:"블로그",url:J,title:PhotoViewerNew.socialPluginInfo.title,sourceName:PhotoViewerNew.socialPluginInfo.blogName,darkMode:false,onClick:function(){},onShow:function(){PhotoViewerNew.isShowSharePopup=true},onHide:function(){PhotoViewerNew.isShowSharePopup=false},blog:{display:PhotoViewerNew.socialPluginInfo.blogDisplay?"on":"off",proxyUrl:encodeURI("/ScrapToBlog.naver?blogId="+PhotoViewerNew.socialPluginInfo.domainIdOrBlogId+"&logNo="+PhotoViewerNew.socialPluginInfo.logNo),},cafe:{display:PhotoViewerNew.socialPluginInfo.cafeDisplay?"on":"off",proxyUrl:encodeURI("/ScrapToCafe.naver?inAppNavigation=true&blogId="+PhotoViewerNew.socialPluginInfo.domainIdOrBlogId+"&logNo="+PhotoViewerNew.socialPluginInfo.logNo+"&source_type=111&title="+PhotoViewerNew.socialPluginInfo.title+"&source_title=블로그>"+PhotoViewerNew.socialPluginInfo.blogName+" | "+PhotoViewerNew.socialPluginInfo.nicknameOrBlogId+"&source_url="+J),},mail:{display:PhotoViewerNew.socialPluginInfo.outsideDisplay?"on":"off",url:J,},band:{display:PhotoViewerNew.socialPluginInfo.outsideDisplay?"on":"off",url:J,},x:{display:PhotoViewerNew.socialPluginInfo.outsideDisplay?"on":"off",url:J,},facebook:{display:PhotoViewerNew.socialPluginInfo.outsideDisplay?"on":"off",url:J,},memo:{display:"on",title:PhotoViewerNew.socialPluginInfo.title,url:J,},keep:{display:"on",url:J,},kakaotalk:{display:"on",url:J,},copyurl:{display:"on",url:J,}}}function A(){for(var K=0;K<PhotoViewerNew.seViewers.length;K++){var M="post_"+K;var J=0;var L=PhotoViewerNew.seViewers[K];if(L.classList.contains("se-viewer")){e(M,J,L)}else{if(L.classList.contains("se_doc_viewer")){y(M,J,L)}else{if(L.classList.contains("post-body")){z(M,J,L)}}}}}function e(T,R,V){var S=V.querySelectorAll(".se-component.se-image, .se-component.se-imageStrip, .se-component.se-wrappingParagraph, .se-section-imageGroup, .se-component.se-text, .se-component.se-table");for(var O=0;O<S.length;O++){var M=S[O];var K=M.querySelectorAll(".se-module.se-module-image, .se-inline-image");if(M.classList.contains("se-text")||M.classList.contains("se-table")){K=M.querySelectorAll(".se-inline-image")}for(var N=0;N<K.length;N++){var Q=K[N];var P=Q.querySelector(".se-module.se-module-image img");var J=Q.querySelector(".se-module.se-module-image video");var L=Q.querySelector("a")&&!!m(Q.querySelector("a").getAttribute("data-linkdata")).link;if(P){var U=P.getAttribute("src");if(G(U)){continue}P.photoViewerPostId=T;P.photoViewerImageIndex=R++;if(L){continue}P.addEventListener("click",D)}if(J){var W=J.getAttribute("data-gif-url");if(G(W)){continue}J.photoViewerPostId=T;J.photoViewerImageIndex=R++;if(L){continue}J.addEventListener("click",D)}}}}function y(T,R,V){var S=V.querySelectorAll(".se_component.se_image, .se_component.se_imageStrip");for(var O=0;O<S.length;O++){var M=S[O];var K=M.querySelectorAll(".se_mediaArea, .se_imageStripArea");for(var N=0;N<K.length;N++){var Q=K[N];var P=Q.querySelector("img");var J=Q.querySelector("video");var L=Q.getAttribute("data-linkdata")&&!!m(Q.getAttribute("data-linkdata")).link;if(Q.classList.contains("se_mediaArea")&&!!Q.querySelector(".se_imageStripArea")){continue}if(P){var U=P.getAttribute("src");if(G(U)){continue}P.photoViewerPostId=T;P.photoViewerImageIndex=R++;if(L){continue}P.addEventListener("click",D)}if(J){var W=J.getAttribute("data-gif-url");if(G(W)){continue}J.photoViewerPostId=T;J.photoViewerImageIndex=R++;if(L){continue}J.addEventListener("click",D)}}}}function z(Q,P,S){var K=S.querySelectorAll("blockquote img, img._photoImage, img.fx, video._photoImage._gifmp4");for(var M=0;M<K.length;M++){var O=K[M];var N=!O.classList.contains("_gifmp4")?O:false;var J=O.classList.contains("_gifmp4")?O:false;var L=O.parentNode.getAttribute("href");if(N){var R=N.getAttribute("src");if(G(R)){continue}N.photoViewerPostId=Q;N.photoViewerImageIndex=P++;if(L){continue}N.addEventListener("click",D)}if(J){var T=J.getAttribute("data-gif-url");if(G(T)){continue}J.photoViewerPostId=Q;J.photoViewerImageIndex=P++;if(L){continue}J.addEventListener("click",D)}}}function D(){w();PhotoViewerNew.photoViewer.view(this.photoViewerPostId,this.photoViewerImageIndex)}function I(){var K=new URLSearchParams(location.search);var J=K.get("photoView");if(J){if(parent&&parent.document.querySelector("#mainFrame")){parent.document.querySelector("#mainFrame").focus()}PhotoViewerNew.photoViewer.view("post_0",J,{scrollOnClose:true})}}function h(){var L={};for(var K=0;K<PhotoViewerNew.seViewers.length;K++){var J="post_"+K;var M=PhotoViewerNew.seViewers[K];if(M.classList.contains("se-viewer")){r(J,M,L)}else{if(M.classList.contains("se_doc_viewer")){n(J,M,L)}else{if(M.classList.contains("post-body")){p(J,M,L)}}}}return L}function r(O,Z,L){var P=Z.querySelectorAll(".se-component.se-image, .se-component.se-imageStrip, .se-component.se-wrappingParagraph, .se-section-imageGroup, .se-component.se-text, .se-component.se-table");for(var U=0;U<P.length;U++){var R=P[U];var S=R.querySelectorAll(".se-module.se-module-image, .se-inline-image");if(R.classList.contains("se-text")||R.classList.contains("se-table")){S=R.querySelectorAll(".se-inline-image")}var W=R.querySelector(".se-module.se-module-text.se-caption");for(var T=0;T<S.length;T++){var N=S[T];var ab=N.querySelector("img");var V=N.querySelector("video");var Q=(R.classList.contains("se-l-slide"))?R.id:R.id+"_"+T;var K=N.querySelector("a")&&!!m(N.querySelector("a").getAttribute("data-linkdata")).link;var aa=K?m(N.querySelector("a").getAttribute("data-linkdata")).link:"";if(ab){if(ab.getAttribute("id")){Q=ab.getAttribute("id")}else{ab.setAttribute("id",Q)}var X=ab.getAttribute("src");if(G(X)){continue}if(!L[O]){L[O]=[]}var Y={orgUrl:v(X),thumbUrl:q(X),caption:{title:Z.titleText,},type:"image",scrollId:Q,};if(K){Y.attachLink=aa}L[O].push(Y)}else{if(V){if(V.getAttribute("id")){Q=V.getAttribute("id")}else{V.setAttribute("id",Q)}var J=V.getAttribute("data-gif-url");if(G(J)){continue}var M=V.getAttribute("src");var J=V.getAttribute("data-gif-url");if(!M){continue}if(!L[O]){L[O]=[]}var Y={orgUrl:v(J),thumbUrl:q(J),caption:{title:Z.titleText,},type:"image",scrollId:Q,};if(K){Y.attachLink=aa}L[O].push(Y)}}}}}function n(O,Y,L){var P=Y.querySelectorAll(".se_component.se_image, .se_component.se_imageStrip");for(var T=0;T<P.length;T++){var Q=P[T];var R=Q.querySelectorAll(".se_mediaArea, .se_imageStripArea");var V=Q.querySelector(".se_textarea");for(var S=0;S<R.length;S++){var N=R[S];var K=N.getAttribute("data-linkdata")&&!!m(N.getAttribute("data-linkdata")).link;var Z=K?m(N.getAttribute("data-linkdata")).link:"";if(N.classList.contains("se_mediaArea")&&!!N.querySelector(".se_imageStripArea")){continue}var aa=N.querySelector("img");var U=N.querySelector("video");if(aa){var W=aa.getAttribute("src");if(G(W)){continue}if(!L[O]){L[O]=[]}var X={orgUrl:v(W),thumbUrl:q(W),caption:{title:Y.titleText,},type:"image",scrollId:aa.id,};if(K){X.attachLink=Z}L[O].push(X)}else{if(U){var J=U.getAttribute("data-gif-url");if(G(J)){continue}var M=U.getAttribute("src");var J=U.getAttribute("data-gif-url");U.id=m(N.getAttribute("data-linkdata")).imgId;if(!M){continue}if(!L[O]){L[O]=[]}var X={orgUrl:v(J),thumbUrl:q(J),caption:{title:Y.titleText,},type:"image",scrollId:U.id,};if(K){X.attachLink=Z}L[O].push(X)}}}}}function p(L,V,Q){var K=V.querySelectorAll("blockquote img, img._photoImage, img.fx, video._photoImage._gifmp4");for(var O=0;O<K.length;O++){var R=K[O];var P=!R.classList.contains("_gifmp4")?R:false;var J=R.classList.contains("_gifmp4")?R:false;var U=Math.round(Math.random()*100000000);var N=R.parentNode.getAttribute("href");if(P){if(P.getAttribute("id")){U=P.getAttribute("id")}else{P.setAttribute("id",U)}var T=P.getAttribute("src");if(G(T)){continue}if(!Q[L]){Q[L]=[]}var M={orgUrl:v(T),thumbUrl:q(T),caption:{title:V.titleText,},type:"image",scrollId:U,};if(N){M.attachLink=N}Q[L].push(M)}else{if(J){if(J.getAttribute("id")){U=J.getAttribute("id")}else{J.setAttribute("id",U)}var W=J.getAttribute("data-gif-url");if(G(W)){continue}var S=J.getAttribute("src");var W=J.getAttribute("data-gif-url");if(!S){continue}if(!Q[L]){Q[L]=[]}var M={orgUrl:v(W),thumbUrl:q(W),caption:{title:V.titleText,},type:"image",scrollId:U,};if(N){M.attachLink=N}Q[L].push(M)}}}}function v(J){return a(J,"w3840")}function q(J){return a(J,"f100_webp")}function a(K,J){if(!s(K)){return encodeURIComponent(K)}var L=C(K,"type",J);if(K.indexOf("?")>-1){return encodeURIComponent(K.split("?")[0]+L)}return encodeURIComponent(K+L)}function C(J,K,M){var L=i(J,K);L.push(K+"="+M);return L.length>0?"?"+L.join("&"):""}function d(J,K){var L=i(J,K);return L.length>0?"?"+L.join("&"):""}function i(K,M){if(!K||K.split("?").length<=1){return[]}var N=K.split("?")[1].split("&");var O=[];for(var L=0;L<N.length;L++){var J=N[L].split("=")[0];if(J!=M){O.push(N[L])}}return O}function s(J){if(!PhotoViewerNew.thumbnailTypeW3840EnableDomainList){return false}for(var K=0;K<PhotoViewerNew.thumbnailTypeW3840EnableDomainList.length;K++){if(J.indexOf(PhotoViewerNew.thumbnailTypeW3840EnableDomainList[K])>-1){return true}}return false}function G(J){if(!J){return true}return J.indexOf("://ssl.pstatic.net/static/blank.gif")>-1||J.indexOf("://beta.blogfiles.naver.net/static/blank.gif")>-1||J.indexOf("://beta.ssl.phinf.net/blogfiles/static/blank.gif")>-1||J.indexOf("://beta.ssl.phinf.net/mblogvideo/static/blank.gif")>-1}function m(K){try{return JSON.parse(K)}catch(J){return{}}}function l(K,N){if(!K.getAttribute("id")){K.setAttribute("id","img_"+Math.round(Math.random()*100000000))}var J=K.getAttribute("id");var L=K.getAttribute("src");var O={};O[J]=[{orgUrl:v(L),thumbUrl:L,caption:{title:"",},type:"image",scrollId:J,}];var M=new PhotoViewer.Viewer({imageGallery:O,useNlogScript:false,});M.on(f(M,N));M.view(J,0,{hideToolbar:true,hideShareBtn:true,})}function B(J,L){var N="img_"+Math.round(Math.random()*100000000);var M={};M[N]=[{orgUrl:v(J),thumbUrl:J,caption:{title:"",},type:"image",}];var K=new PhotoViewer.Viewer({imageGallery:M,useNlogScript:false,});K.on(f(K,L));K.view(N,0,{hideToolbar:true,hideShareBtn:true,})}return{init:x,reload:w,simpleOpenByImgTag:l,initBeyondAnalytics:g,simpleOpenByImageUrl:B,initThumbnailTypeW3840EnableDomainListJson:H,}})();if(typeof(window.defineNHNJS)=="undefined"){window.defineNHNJS={}}window.defineNHNJS["PhotoViewerNew-37660137_js"]=true;
