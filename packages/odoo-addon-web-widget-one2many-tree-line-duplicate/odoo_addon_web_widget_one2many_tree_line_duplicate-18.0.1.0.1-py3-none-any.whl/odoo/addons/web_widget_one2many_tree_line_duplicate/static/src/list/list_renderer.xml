<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <t
        t-name="web_widget_one2many_tree_line_duplicate.ListRenderer"
        t-inherit="web.ListRenderer"
        t-inherit-mode="extension"
        owl="1"
    >
        <xpath
            expr="//th[hasclass('o_list_controller') and hasclass('o_list_actions_header')]"
            position="before"
        >
            <th
                t-if="displayDuplicateLine"
                class="o_list_controller o_list_actions_header position-static"
                style="width: 32px; min-width: 32px"
            />
        </xpath>
        <xpath
            expr="//div[contains(@class, 'o_optional_columns_dropdown')]//t[@t-set-slot='content']"
            position="inside"
        >
            <t t-set="hasX2ManyAction" t-value="isX2Many and activeActions.create" />
            <t t-if="hasX2ManyAction and duplicateLineAllowed">
                <div
                    t-if="!hasOptionalOpenFormViewColumn"
                    role="separator"
                    class="dropdown-divider"
                />
                <DropdownItem
                    closingMode="'none'"
                    onSelected="() => this.toggleDuplicateLineColumn()"
                >
                    <CheckBox
                        onChange="() => this.toggleDuplicateLineColumn()"
                        value="this.duplicateLineColumn"
                        name="'Duplicate Line'"
                    >
                        <span class="d-flex align-items-center">
                            <span class="text-truncate">Duplicate Line Button</span>
                        </span>
                    </CheckBox>
                </DropdownItem>
            </t>
        </xpath>
    </t>
    <t
        t-name="web_widget_one2many_tree_line_duplicate.ListRenderer.RecordRow"
        t-inherit="web.ListRenderer.RecordRow"
        t-inherit-mode="extension"
        owl="1"
    >
        <xpath expr="//td[hasclass('o_list_record_remove')]" position="before">
            <td
                class="o_list_record_remove text-center"
                t-if="displayDuplicateLine"
                t-on-click.stop="() => this.onCloneIconClick(record)"
                tabindex="-1"
            >
                <button
                    class="fa fa-clone"
                    name="duplicate"
                    aria-label="Duplicate row"
                    tabindex="-1"
                />
            </td>
        </xpath>
    </t>
</templates>
