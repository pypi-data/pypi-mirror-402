[project]
name = "osbng"
version = "0.5.1"
description = "A Python package supporting geospatial grid indexing and interaction with Ordnance Survey's British National Grid index system"
readme = "README.md"
license = "MIT"
authors = [
    {name = "Steve Kingston", email = "steve.kingston@os.uk"}, 
    {name = "Kate New", email = "kate.new@os.uk"},
    {name = "Tom Peterken", email = "tom.peterken@os.uk"},
    {name = "Chris Jochem", email = "chris.jochem@os.uk"},
    {name = "Lucy Main", email = "lucy.main@os.uk"}
]
keywords = [
    "geospatial", 
    "gis",
    "grid",
    "indexing",
    "spatial"
]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Intended Audience :: Science/Research",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
    "Topic :: Scientific/Engineering :: GIS"
]
requires-python = ">= 3.11, < 3.15"
dependencies = [
    "numpy >= 1.24",
    "shapely >= 2.0"
]

[project.urls]
Homepage = "https://github.com/OrdnanceSurvey/osbng-py"
Documentation = "https://osbng-py.readthedocs.io/en/stable/"
Repository = "https://github.com/OrdnanceSurvey/osbng-py"

[project.optional-dependencies]
# GeoPandas is required for indexing geometries in GeoDataFrames
# via the osbng.indexing_gpd module
geopandas = [
    "geopandas >= 1.0"
]
# Sphinx documentation building tools
docs = [
    "pydata-sphinx-theme >= 0.16",
    "nbsphinx >= 0.9",
    "sphinx >= 8.2",
    "sphinx-copybutton >= 0.5"
]
# Testing frameworks and tools
test = [
    "coverage >= 7.13",
    "geopandas >= 1.0",
    "pytest >= 8.0"
]
# Code formatting and linting tools
lint = [
    "ruff >= 0.14"
]
# Automated test tools
ci = [
    "tox >= 4.26"
]
# Suggested runtime features
all = [
    "geopandas >= 1.0",
    "matplotlib >= 3.7"
]
# Complete development environment
dev = [
    "osbng[docs, test, lint, ci, all]"
]

[build-system]
requires = [
    # Ensure support for PEP 639 license metadata
    "setuptools >= 78.0", 
    "wheel"
]
build-backend = "setuptools.build_meta"

[tool.setuptools.packages.find]
where = [
    "."
]

[tool.pytest.ini_options]
# Runs test collection and prints summary of test outcomes
addopts = "-ra"
testpaths = [
    "tests"
]

[tool.tox]
requires = [
    "tox >= 4.26"
]
envlist = [
    "py311",
    "py312",
    "py313",
    "py314"
]
skip_missing_interpreters = false

[tool.tox.env_run_base]
# Install from optional dependencies test group
extras = [
    "test"
]
commands = [
    ["pytest", { replace = "posargs", default = ["tests"], extend = true }]
]

[tool.ruff.lint]
select = [
    # flake8-annotations
    # Checks for missing or incorrect type annotations
    "ANN",
    # pydocstyle
    # Checks for docstring conventions and formatting
    "D",
    # pycodestyle
    # Checks for general Python style issues
    "E",
    # pyflakes
    # Checks for logical errors like unused imports, undefined names etc
    "F",
    # isort
    # Checks for import sorting and grouping
    "I",
    ]
# Ignore specific rules
ignore = [
    # missing-return-type-special-method
    "ANN204"
]
# Exclude directories and files
exclude = [
    "__pycache__/",
    ".ruff_cache/",
    ".pytest_cache/",
    ".tox/",
    "*.env",
    "build/",
    "dist/",
    "*.egg-info/"
]

[tool.ruff.lint.pydocstyle]
# Use Google-style convention for docstrings
convention = "google"

[tool.ruff.format]
docstring-code-format = true
