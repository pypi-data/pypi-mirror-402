[build-system]
requires = ["setuptools>=61.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "maseval"
version = "0.3.0"
description = "A library for multi-agent systems evaluation and benchmarking."
authors = [{ name = "Cornelius Emde", email = "cornelius@parameterlab.de" }]
readme = "README.md"
license = { file = "LICENSE" }
requires-python = ">=3.10"
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
]
dependencies = [
    "gitpython>=3.1.0",
    "tqdm>=4.66.0",
    "rich>=14.1.0",
    "pydantic>=2.12.5",
]

# Enable optional dependencies for end users
[project.optional-dependencies]
# Agent frameworks
smolagents = ["smolagents>=1.21.3"]
langgraph = ["langgraph>=0.6.0"]
llamaindex = ["llama-index-core>=0.12.0"]

# Inference engines
anthropic = ["anthropic>=0.40.0"]
openai = ["openai>=1.107.2"]
google-genai = ["google-genai>=1.37.0"]
transformers = ["transformers>=4.37.0"]
litellm = ["litellm>=1.0.0"]

# Logging
wandb = ["wandb>=0.15.0"]
langfuse = ["langfuse>=3.3.4"]

# Dependencies for running examples (only what's actually used)
examples = [
    "maseval[smolagents,langgraph,llamaindex,anthropic,openai,google-genai,litellm,langfuse]",
    # Additional integrations used in examples
    "langchain>=0.3.27",
    "langchain-google-genai>=2.1.12",
    "typing-extensions>=4.0.0",
    "mcp>=1.22.0",
    "python-dotenv>=1.0.0",
    # Jupyter notebook support
    "jupyter>=1.0.0",
    "ipykernel>=6.0.0",
    "ipywidgets>=8.0.0",
]

# Complete installation with absolutely everything (uses self-reference for DRY)
all = ["maseval[examples,transformers,wandb]"]

[project.urls]
"Homepage" = "https://github.com/parameterlab/MASEval"
"Bug Tracker" = "https://github.com/parameterlab/MASEval/issues"
"Documentation" = "https://maseval.readthedocs.io/en/stable/"
"Changelog" = "https://github.com/parameterlab/MASEval/blob/main/CHANGELOG.md"

[dependency-groups]
# Development tools (linting, testing) - for contributors only
dev = ["pytest>=9.0.0", "pytest-cov>=7.0.0", "ruff>=0.14.0", "ty>=0.0.5"]

# Documentation building - for contributors only
docs = [
    "mkdocs>=1.6",
    "mkdocs-material>=9.7.0",
    "mkdocstrings[python]>=1.0.0",
    "pymdown-extensions>=10.0.0",
    "mkdocs-jupyter>=0.24.0",
    "mkdocs-git-revision-date-localized-plugin>=1.5.0",
]

[tool.setuptools]
packages = ["maseval"]

[tool.ruff]
line-length = 144
exclude = []

[tool.pytest.ini_options]
minversion = "6.0"
addopts = "-ra -q"
testpaths = ["tests"]
markers = [
    "core: Core tests that don't require optional dependencies",
    "interface: Tests that require optional dependencies (smolagents, langgraph, etc.)",
    "contract: Cross-implementation contract tests that validate framework-agnostic abstraction",
    "benchmark: Benchmark-specific tests (MACS, etc.) that test benchmark implementations, not core library",
    "smolagents: Tests that specifically require smolagents",
    "langgraph: Tests that specifically require langgraph",
    "llamaindex: Tests that specifically require llama-index-core",
]

[tool.coverage.run]
relative_files = true
source = ["maseval"]
omit = ["*/tests/*", "*/examples/*", "*/__pycache__/*"]
branch = true

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "def __repr__",
    "raise AssertionError",
    "raise NotImplementedError",
    "if __name__ == .__main__.:",
    "if TYPE_CHECKING:",
    "@abstractmethod",
]
precision = 2

[tool.coverage.xml]
output = "coverage.xml"

[tool.coverage.html]
directory = "htmlcov"

[tool.ty.src]
# Exclude notebooks and docs/examples from type checking
# These contain local imports that are only valid when run from their directory
exclude = ["docs/examples/", "examples/"]
