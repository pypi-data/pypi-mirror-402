# IngressRouteTCP manifests for system workloads with TCP ports
# This file is generated from templates/traefik-tcp-routes.yaml.j2
# Generated by generate_configs.py
{% for workload in system_workloads if workload.enabled %}
{% for port in workload.ports %}
---
apiVersion: traefik.io/v1alpha1
kind: IngressRouteTCP
metadata:
  name: {{ workload.name }}-{{ port }}
  namespace: {{ workload.namespace | default(workload.name) }}
  labels:
    app: {{ workload.name }}
    port: "{{ port }}"
    managed-by: local-env
spec:
  entryPoints:
    - tcp{{ port }}
  routes:
    - match: HostSNI(`*`)
      services:
        - name: {{ workload.name }}
          port: {{ workload.default_port | default(port) }}
{% endfor %}
{% endfor %}
