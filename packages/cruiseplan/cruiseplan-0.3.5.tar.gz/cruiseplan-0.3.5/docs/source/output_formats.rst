.. _output-formats:

==============
Output Formats
==============

CruisePlan generates multiple output formats from two main commands: ``cruiseplan map`` (configuration-based, i.e. straight from the YAML configuration) and ``cruiseplan schedule`` (timeline-based, after route calculations). For proposals, the map generated by ``cruiseplan map`` may be better since it's not complicated by ship tracks.  But the outputs from ``cruiseplan schedule`` give better estimates of timings for the operations.

.. contents:: Table of Contents
   :local:
   :depth: 3

Overview
========

cruiseplan map vs schedule
----------------------------

CruisePlan provides outputs through two distinct command workflows:

**Map Command** (``cruiseplan map``): 
  Generates visualization-focused outputs directly from YAML configuration for initial planning, configuration review, and standalone mapping.
  
**Schedule Command** (``cruiseplan schedule``):
  Generates timeline-based outputs showing scheduled operations in execution order with timing calculations, durations, and optimized routing.



Output Format Summary
-----------------------

.. list-table:: Output Formats by Command
   :widths: 15 25 25 35
   :header-rows: 1

   * - **Format**
     - **Schedule Command**
     - **Map Command**
     - **Primary Use Cases**
   * - **PNG**
     - ✅ Timeline-based maps
     - ✅ Configuration maps
     - Visualization, documentation, proposals
   * - **HTML**
     - ✅ Interactive summaries
     - ❌ Not available
     - Review, documentation, web sharing
   * - **LaTeX**
     - ✅ Professional tables
     - ❌ Not available
     - Cruise proposals, funding applications
   * - **CSV**
     - ✅ Operation timelines
     - ❌ Not available
     - Analysis, operational planning
   * - **NetCDF**
     - ✅ Scientific datasets
     - ❌ Not available
     - Scientific analysis, data sharing
   * - **KML**
     - ❌ Not available
     - ✅ Configuration tracks
     - Google Earth, navigation systems



Quick Start Guide
------------------------

**For Cruise Proposals**:
  Use LaTeX format for professional tables suitable for funding applications (DFG, NSF, etc.)

**For Operational Planning**:
  Combine HTML (overview) + CSV (detailed planning) + KML (navigation)

**For Scientific Analysis**:
  Use NetCDF format with ``--derive-netcdf`` for specialized analysis files

**For Visualization & Outreach**:
  Use HTML (web sharing) + KML (Google Earth integration)

Command Examples
----------------

.. code-block:: bash

   # Generate all formats
   cruiseplan schedule -c cruise.yaml --format all
   
   # Proposal preparation
   cruiseplan schedule -c cruise.yaml --format latex
   
   # Operational planning
   cruiseplan schedule -c cruise.yaml --format html,csv
   
   # Scientific analysis
   cruiseplan schedule -c cruise.yaml --format netcdf --derive-netcdf
   
   # Custom output directory
   cruiseplan schedule -c cruise.yaml --format all -o schedule/
   
   # Map outputs (PNG and KML)
   cruiseplan map -c cruise.yaml --format all
   cruiseplan map -c cruise.yaml --format kml  # KML only available from map command

Standard Naming Convention
--------------------------

CruisePlan uses consistent naming patterns for all output files, based on the cruise name ``{cruise_name}`` specified in the YAML configuration.:

.. list-table:: File Naming Patterns
   :widths: 20 30 50
   :header-rows: 1

   * - **Format**
     - **File Pattern**
     - **Example: "Arctic Survey 2024"**
   * - HTML
     - ``{cruise_name}_schedule.html``
     - ``Arctic_Survey_2024_schedule.html``
   * - LaTeX
     - ``{cruise_name}_schedule.tex``
     - ``Arctic_Survey_2024_schedule.tex``
   * - CSV
     - ``{cruise_name}_schedule.csv``
     - ``Arctic_Survey_2024_schedule.csv``
   * - NetCDF (Standard)
     - ``{cruise_name}_schedule.nc``
     - ``Arctic_Survey_2024_schedule.nc``
   * - NetCDF (Derived)
     - ``{cruise_name}_{type}.nc``
     - ``Arctic_Survey_2024_points.nc``
   * - KML
     - ``{cruise_name}_map.kml``
     - ``Arctic_Survey_2024_map.kml``

Output docs
============

.. toctree::
   :maxdepth: 1
   :caption: Output Format Details

   output/png
   output/html
   output/latex
   output/csv
   output/netcdf
   output/kml




Quality Assurance
=================

Output Validation
-----------------

You must carefully check all outputs, especially for critical applications like proposals or operational planning!  The scheduling has been validated for physical oceanographic examples based on the test fixtures in the github repository at ``tests/fixtures/``.  However, real-world cruises may have unique configurations that require careful review.  The outputs can help you verify that the cruise plan matches your expectations.

**Manual Verification**:
  - Review HTML output for completeness and accuracy
  - Test KML files in Google Earth
  - Compile LaTeX files to verify table formatting
  - Import CSV files into Excel/analysis tools
  - Use netCDF outputs for more detailed calculation Checks
  - Compare PNG maps against expected station layouts

**Automatic Checks**: Future expansion - does not exist yet
  - CF convention compliance for NetCDF files
  - Valid KML structure for Google Earth compatibility
  - LaTeX compilation verification
  - HTML link and reference validation

Performance Considerations
--------------------------

**Large Expeditions**:
  - HTML generation may be slow for >100 operations
  - NetCDF files scale well with large datasets
  - KML files may be large for complex cruises
  - LaTeX compilation time increases with operation count
  - GEBCO is slower than ETOPO, especially for large areas

**Optimization Tips**:
  - Use ``--leg`` flag with ``schedule`` command to generate outputs for specific legs only
  - Use ``--derive-netcdf`` when specialized analysis is needed

This comprehensive output format system ensures that CruisePlan delivers professional, analysis-ready results for all aspects of oceanographic cruise planning and execution.