version: "0.1"

agents:
  contextual_summarizer:
    model: "openai:gpt-4o-mini"
    system_prompt:
      from_file: "./prompts/summarize_with_context.md"
      variables:
        max_sentences: 5
        topic: "{{ context.current_topic }}"
        author: "{{ previous_step.author_name }}"
    output_schema:
      type: object
      properties:
        summary:
          type: string
      required: [summary]

steps:
  - kind: step
    name: GenerateSummary
    uses: agents.contextual_summarizer
