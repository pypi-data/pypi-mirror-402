from csp_lib.equipment.device.events import ConnectedPayload, DeviceAlarmPayload, DisconnectPayload, ReadCompletePayload
from typing import ClassVar

__all__ = ['StateSyncManager']

class StateSyncManager:
    DEFAULT_STATE_TTL: ClassVar[int] = ...
    DEFAULT_ONLINE_TTL: ClassVar[int] = ...
    def __init__(self, redis_client: RedisClient, state_ttl: int | None = ..., online_ttl: int | None = ...) -> None: ...
    @staticmethod
    def _state_key(device_id: str) -> str: ...
    @staticmethod
    def _online_key(device_id: str) -> str: ...
    @staticmethod
    def _alarms_key(device_id: str) -> str: ...
    @staticmethod
    def _data_channel(device_id: str) -> str: ...
    @staticmethod
    def _status_channel(device_id: str) -> str: ...
    @staticmethod
    def _alarm_channel(device_id: str) -> str: ...
    def subscribe(self, device: AsyncModbusDevice) -> None: ...
    def unsubscribe(self, device: AsyncModbusDevice) -> None: ...
    def _on_read_complete(self, payload: ReadCompletePayload) -> None: ...
    def _on_connected(self, payload: ConnectedPayload) -> None: ...
    def _on_disconnected(self, payload: DisconnectPayload) -> None: ...
    def _on_alarm_triggered(self, payload: DeviceAlarmPayload) -> None: ...
    def _on_alarm_cleared(self, payload: DeviceAlarmPayload) -> None: ...
