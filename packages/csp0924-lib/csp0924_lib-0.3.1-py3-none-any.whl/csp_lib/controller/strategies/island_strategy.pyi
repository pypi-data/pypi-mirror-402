import _abc
import csp_lib.controller.core.command
import csp_lib.controller.core.strategy
import dataclasses
import typing
from csp_lib.controller.core.command import Command as Command, ConfigMixin as ConfigMixin
from csp_lib.controller.core.context import StrategyContext as StrategyContext
from csp_lib.controller.core.execution import ExecutionConfig as ExecutionConfig, ExecutionMode as ExecutionMode
from csp_lib.controller.core.strategy import Strategy as Strategy
from csp_lib.core import get_logger as get_logger
from typing import ClassVar

class RelayProtocol(typing.Protocol):
    __parameters__: ClassVar[tuple] = ...
    _is_protocol: ClassVar[bool] = ...
    __abstractmethods__: ClassVar[frozenset] = ...
    _abc_impl: ClassVar[_abc._abc_data] = ...
    __protocol_attrs__: ClassVar[set] = ...
    _is_runtime_protocol: ClassVar[bool] = ...
    __non_callable_proto_members__: ClassVar[set] = ...
    def set_open(self) -> None: ...
    def set_close(self) -> None: ...
    def set_force_close(self) -> None: ...
    @classmethod
    def __subclasshook__(cls, other): ...
    def __init__(self, *args, **kwargs) -> None: ...
    @property
    def sync_ok(self): ...
    @property
    def sync_counter(self): ...

class IslandModeConfig(csp_lib.controller.core.command.ConfigMixin):
    sync_timeout: ClassVar[float] = ...
    __dataclass_params__: ClassVar[dataclasses._DataclassParams] = ...
    __dataclass_fields__: ClassVar[dict] = ...
    __match_args__: ClassVar[tuple] = ...
    def __replace__(self, **changes): ...
    def __init__(self, sync_timeout: float = ...) -> None: ...
    def __eq__(self, other) -> bool: ...

class IslandModeStrategy(csp_lib.controller.core.strategy.Strategy):
    __abstractmethods__: ClassVar[frozenset] = ...
    _abc_impl: ClassVar[_abc._abc_data] = ...
    def __init__(self, relay: RelayProtocol, config: IslandModeConfig | None = ...) -> None: ...
    def execute(self, context: StrategyContext) -> Command: ...
    def on_activate(self) -> None: ...
    def on_deactivate(self) -> None: ...
    def update_config(self, config: IslandModeConfig) -> None: ...
    @property
    def config(self): ...
    @property
    def execution_config(self): ...
