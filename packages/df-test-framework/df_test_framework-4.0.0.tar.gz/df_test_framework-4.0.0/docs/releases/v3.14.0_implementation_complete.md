# v3.14.0 å®æ–½å®ŒæˆæŠ¥å‘Š

> **å®Œæˆæ—¥æœŸ**: 2025-12-04
> **å®æ–½å‘¨æœŸ**: æ¶æ„è®¾è®¡(2025-12-03) â†’ ä»£ç é›†æˆ(2025-12-04) â†’ æ–‡æ¡£æ›´æ–°(2025-12-04)
> **çŠ¶æ€**: âœ… **å…¨éƒ¨å®Œæˆ**

---

## æ‰§è¡Œæ‘˜è¦

v3.14.0 ä¼ä¸šçº§å¹³å°æ¶æ„å‡çº§**å·²å…¨éƒ¨å®Œæˆ**ï¼ŒåŒ…æ‹¬ï¼š
- âœ… æ ¸å¿ƒæ¶æ„ä»£ç é›†æˆ
- âœ… æ‰€æœ‰åŠŸèƒ½éªŒè¯æµ‹è¯•é€šè¿‡
- âœ… æ–‡æ¡£ç³»ç»Ÿå…¨é¢æ›´æ–°ï¼ˆP0+P1+P2ï¼‰
- âœ… è„šæ‰‹æ¶æ¨¡æ¿ç»Ÿä¸€åˆ°æ–°æ¶æ„

**å…³é”®æˆæœ**: ç”¨æˆ·ç°åœ¨å¯ä»¥å®Œæ•´ä½¿ç”¨ v3.14.0 çš„æ‰€æœ‰æ–°ç‰¹æ€§ã€‚

---

## ç¬¬ä¸€é˜¶æ®µï¼šæ¶æ„è®¾è®¡ï¼ˆ2025-12-03ï¼‰

### è®¾è®¡æ–‡æ¡£

| æ–‡æ¡£ | å†…å®¹ | çŠ¶æ€ |
|------|------|------|
| `V3.14_ENTERPRISE_PLATFORM_DESIGN.md` | ä¼ä¸šçº§å¹³å°æ¶æ„è®¾è®¡ | âœ… å·²å®Œæˆ |
| `v3.13-to-v3.14.md` | è¿ç§»æŒ‡å— | âœ… å·²å®Œæˆ |

### æ ¸å¿ƒæ¶æ„

**å››å±‚æ¶æ„**:
```
Layer 0: core/              # çº¯æŠ½è±¡ï¼ˆæ— ä¾èµ–ï¼‰
Layer 1: infrastructure/    # åŸºç¡€è®¾æ–½
Layer 2: capabilities/      # èƒ½åŠ›å±‚
Layer 3: testing/ + cli/    # æ¥å£å±‚ï¼ˆå¹¶è¡Œï¼‰
æ¨ªåˆ‡:    plugins/           # æ’ä»¶ï¼ˆä¸åœ¨å±‚çº§ä¸­ï¼‰
```

**å…³é”®ç³»ç»Ÿ**:
- âœ… MiddlewareChainï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰
- âœ… EventBusï¼ˆå‘å¸ƒ/è®¢é˜…ï¼‰
- âœ… Telemetryï¼ˆå¯è§‚æµ‹æ€§èåˆï¼‰
- âœ… ExecutionContextï¼ˆä¸Šä¸‹æ–‡ä¼ æ’­ï¼‰

---

## ç¬¬äºŒé˜¶æ®µï¼šä»£ç é›†æˆï¼ˆ2025-12-04 ä¸Šåˆï¼‰

### é›†æˆå†…å®¹

#### 1. HttpClient/AsyncHttpClient é›†æˆ MiddlewareChain

**å˜æ›´æ–‡ä»¶**:
- `src/df_test_framework/capabilities/clients/http/rest/httpx/client.py`
- `src/df_test_framework/capabilities/clients/http/rest/httpx/async_client.py`

**æ–°å¢åŠŸèƒ½**:
```python
# æ„é€ æ—¶ä¼ å…¥
client = HttpClient(
    base_url="...",
    middlewares=[SignatureMiddleware(...), RetryMiddleware(...)]
)

# é“¾å¼æ·»åŠ 
client.use(LoggingMiddleware())
client.use(RetryMiddleware())

# ä½¿ç”¨æ–°ç³»ç»Ÿå‘é€è¯·æ±‚
response = client.request_with_middleware("GET", "/api")
```

**å‘åå…¼å®¹**: æ—§çš„ `interceptors` å‚æ•°ä»å¯ä½¿ç”¨ï¼Œè§¦å‘ DeprecationWarningã€‚

#### 2. Database/UnitOfWork é›†æˆ EventBus

**å˜æ›´æ–‡ä»¶**:
- `src/df_test_framework/capabilities/databases/database.py`
- `src/df_test_framework/capabilities/databases/uow.py`

**æ–°å¢åŠŸèƒ½**:
```python
# ä¼ å…¥ event_bus
db = Database(config, event_bus=bus)
uow = UnitOfWork(session_factory, event_bus=bus)

# è‡ªåŠ¨å‘å¸ƒäº‹ä»¶
db.execute("SELECT * FROM users")  # è§¦å‘ DatabaseQueryEndEvent
```

#### 3. Messengers é›†æˆ EventBus

**å˜æ›´æ–‡ä»¶**:
- `src/df_test_framework/capabilities/messengers/queue/kafka/client.py`
- `src/df_test_framework/capabilities/messengers/queue/rabbitmq/client.py`
- `src/df_test_framework/capabilities/messengers/queue/rocketmq/client.py`

**æ–°å¢åŠŸèƒ½**:
```python
# Kafka/RabbitMQ/RocketMQ ç»Ÿä¸€æ”¯æŒ EventBus
kafka = KafkaClient(config, event_bus=bus)
kafka.send("topic", {"data": "value"})  # è§¦å‘ MessagePublishEvent
```

#### 4. api_class å¯¼å‡ºä¿®å¤

**å˜æ›´æ–‡ä»¶**:
- `src/df_test_framework/__init__.py`

**ä¿®å¤**: æ·»åŠ  `api_class` å’Œ `load_api_fixtures` åˆ°ä¸»å…¥å£å¯¼å‡ºã€‚

### æµ‹è¯•éªŒè¯

```bash
pytest -v
# ç»“æœ: âœ… 1464 passed, 40 skipped
```

**éªŒè¯é¡¹**:
- âœ… HttpClient ä¸­é—´ä»¶ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- âœ… EventBus äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ­£å¸¸
- âœ… Database äº‹ä»¶é›†æˆæ­£å¸¸
- âœ… Messengers äº‹ä»¶é›†æˆæ­£å¸¸
- âœ… æ‰€æœ‰æ—§åŠŸèƒ½ï¼ˆapi_class/repository_package/ç­¾å/Allureï¼‰æ­£å¸¸

### ä»£ç ç»Ÿè®¡

| Commit | å˜æ›´æ–‡ä»¶ | å˜æ›´è¡Œæ•° |
|--------|----------|----------|
| `49ffcf4` - feat(integration) | 13 files | +936, -55 |
| `f86f8c3` - fix(docs) | 2 files | +257 |

---

## ç¬¬ä¸‰é˜¶æ®µï¼šæ–‡æ¡£æ›´æ–°ï¼ˆ2025-12-04 ä¸‹åˆï¼‰

### P0 - ç«‹å³ä¿®å¤ï¼ˆé˜»å¡ç”¨æˆ·ï¼‰

#### 1. å¿«é€Ÿå¼€å§‹æŒ‡å—

**æ–‡ä»¶**: `docs/user-guide/QUICK_START_V3.14.md`

**å†…å®¹**:
- 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹
- v3.14.0 æ–°ç‰¹æ€§é€Ÿè§ˆ
- æ–°æ—§ API å¯¹æ¯”ç¤ºä¾‹
- æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜

**ç¯‡å¹…**: 500+ è¡Œ

#### 2. è„šæ‰‹æ¶æ¨¡æ¿æ›´æ–°

**æ–‡ä»¶**: `src/df_test_framework/cli/templates/project/conftest.py`

**å˜æ›´**:
- ç‰ˆæœ¬å·: v3.12.0 â†’ v3.14.0
- ç‰¹æ€§åˆ—è¡¨æ›´æ–°ï¼ˆä¸­é—´ä»¶/EventBus/Telemetryï¼‰
- æ³¨é‡Šæ›´æ–°åˆ°æ–°æœ¯è¯­

**å½±å“**: `df-test init` ç”Ÿæˆçš„é¡¹ç›®è‡ªåŠ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚

### P1 - é‡è¦åŠŸèƒ½æŒ‡å—

#### 3. ä¸­é—´ä»¶ä½¿ç”¨æŒ‡å—

**æ–‡ä»¶**: `docs/guides/middleware_guide.md`

**å†…å®¹**:
- å†…ç½®ä¸­é—´ä»¶è¯¦è§£ï¼ˆSignature/Retry/Logging/Token/Telemetryï¼‰
- è‡ªå®šä¹‰ä¸­é—´ä»¶å¼€å‘ï¼ˆ9 ä¸ªå®æˆ˜ç¤ºä¾‹ï¼‰
- ä¼˜å…ˆçº§ç®¡ç†å’Œæ‰§è¡Œæµç¨‹
- é«˜çº§ç”¨æ³•ï¼ˆæ¡ä»¶ä¸­é—´ä»¶ã€ä¸­æ­¢è¯·æ±‚ã€æ•°æ®ä¼ é€’ï¼‰
- æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜

**ç¯‡å¹…**: 600+ è¡Œ
**ä»£ç ç¤ºä¾‹**: 30+

#### 4. EventBus ä½¿ç”¨æŒ‡å—

**æ–‡ä»¶**: `docs/guides/event_bus_guide.md`

**å†…å®¹**:
- å‘å¸ƒ/è®¢é˜…åŸºç¡€æ¦‚å¿µ
- æ¡†æ¶å†…ç½®äº‹ä»¶ï¼ˆHTTP/DB/æ¶ˆæ¯é˜Ÿåˆ—ï¼‰
- è‡ªå®šä¹‰äº‹ä»¶å®šä¹‰å’Œä½¿ç”¨
- 5 ä¸ªå®ç”¨åœºæ™¯ï¼ˆæ…¢è¯·æ±‚å‘Šè­¦/ç»Ÿè®¡/é”™è¯¯è®°å½•/æ…¢SQL/Allureé›†æˆï¼‰
- é«˜çº§ç”¨æ³•å’Œæœ€ä½³å®è·µ

**ç¯‡å¹…**: 400+ è¡Œ
**ä»£ç ç¤ºä¾‹**: 15+

#### 5. Telemetry ä½¿ç”¨æŒ‡å—

**æ–‡ä»¶**: `docs/guides/telemetry_guide.md`

**å†…å®¹**:
- Tracing/Metrics/Logging ä¸‰åˆä¸€æ¦‚å¿µ
- é›†æˆåˆ° HttpClient çš„æ–¹æ³•
- 3 ä¸ªå®ç”¨åœºæ™¯ï¼ˆæ€§èƒ½ç›‘æ§/æ…¢æ“ä½œå®šä½/é”™è¯¯ç›‘æ§ï¼‰
- æœ€ä½³å®è·µå’Œ OpenTelemetry é›†æˆ

**ç¯‡å¹…**: 300+ è¡Œ
**ä»£ç ç¤ºä¾‹**: 10+

### P2 - å…¨é¢ä¼˜åŒ–

#### 6. æœ¯è¯­ç»Ÿä¸€æ›´æ–°

**æ–‡æ¡£æ›´æ–°**ï¼ˆ11 ä¸ªæ–‡ä»¶ï¼‰:
- `USER_MANUAL.md` - ç”¨æˆ·æ‰‹å†Œï¼ˆ1108 è¡Œï¼‰
- `BEST_PRACTICES.md` - æœ€ä½³å®è·µ
- `VERIFIED_BEST_PRACTICES.md` - éªŒè¯çš„æœ€ä½³å®è·µ
- `QUICK_REFERENCE.md` - å¿«é€Ÿå‚è€ƒ
- `QUICK_START_V3.5.md` - v3.5 å¿«é€Ÿå¼€å§‹ï¼ˆå†å²ä¿ç•™ï¼‰
- `configuration.md` - é…ç½®æŒ‡å—
- `nested-settings-guide.md` - åµŒå¥—é…ç½®æŒ‡å—
- `security-best-practices.md` - å®‰å…¨æœ€ä½³å®è·µ
- `examples.md` - ç¤ºä¾‹ä»£ç 
- `README.md` - ç”¨æˆ·æŒ‡å—ç›®å½•

**æ¨¡æ¿æ›´æ–°**ï¼ˆ9 ä¸ªæ–‡ä»¶ï¼‰:
- `generators/env_files.py` - ç¯å¢ƒå˜é‡æ¨¡æ¿
- `generators/settings_enhanced.py` - å¢å¼ºé…ç½®æ¨¡æ¿
- `generators/test.py` - æµ‹è¯•æ¨¡æ¿
- `generators/test_complete.py` - å®Œæ•´æµ‹è¯•æ¨¡æ¿
- `project/env.py` - é¡¹ç›®ç¯å¢ƒé…ç½®
- `project/readme.py` - é¡¹ç›® README æ¨¡æ¿
- `project/settings.py` - é¡¹ç›®é…ç½®æ¨¡æ¿
- `project/test_example.py` - æµ‹è¯•ç¤ºä¾‹æ¨¡æ¿

**å…¨å±€æ›¿æ¢**:
- "æ‹¦æˆªå™¨" â†’ "ä¸­é—´ä»¶"
- "Interceptor" â†’ "Middleware"
- `df_test_framework.clients.http.interceptors` â†’ `df_test_framework.capabilities.clients.http.middleware`
- v3.12.0/v3.11.0 â†’ v3.14.0

#### 7. å®¡è®¡æŠ¥å‘Š

**æ–‡ä»¶**: `docs/migration/v3.14-docs-templates-audit.md`

**å†…å®¹**:
- å®Œæ•´çš„æ–‡æ¡£æ¨¡æ¿å®¡è®¡æŠ¥å‘Š
- è¯†åˆ« 15+ ä¸ªè¿‡æ—¶æ–‡æ¡£
- ä¼˜å…ˆçº§è¡ŒåŠ¨è®¡åˆ’ï¼ˆP0/P1/P2ï¼‰
- æœ¯è¯­æ›´æ–°æ¸…å•
- ç‰ˆæœ¬æ ‡æ³¨è§„èŒƒ
- å—å½±å“æ–‡ä»¶æ¸…å•

### æ–‡æ¡£ç»Ÿè®¡

| ç±»åˆ« | æ•°é‡ | è¡Œæ•° |
|------|------|------|
| æ–°å¢æ ¸å¿ƒæŒ‡å— | 4 | 1650+ |
| æ›´æ–°ç”¨æˆ·æŒ‡å— | 11 | ä¿®æ”¹ 400+ å¤„ |
| æ›´æ–°è„šæ‰‹æ¶æ¨¡æ¿ | 9 | ä¿®æ”¹ 200+ å¤„ |
| å®¡è®¡æŠ¥å‘Š | 1 | 300+ |
| **æ€»è®¡** | **25+** | **2000+** |

### Commit è®°å½•

| Commit | å†…å®¹ | å˜æ›´ |
|--------|------|------|
| `5d100bd` - docs(v3.14): P0+P1 | å¿«é€Ÿå¼€å§‹ + 3 ä¸ªåŠŸèƒ½æŒ‡å— + æ¨¡æ¿æ›´æ–° | 5 files, +1641, -9 |
| `9e57416` - docs(v3.14): P2 | å…¨é¢æœ¯è¯­ç»Ÿä¸€ + æ¨¡æ¿æ›´æ–° | 20 files, +272, -315 |

---

## æ€»ç»“ï¼šå®Œæ•´å®æ–½ç»Ÿè®¡

### Commit æ±‡æ€»

| æ—¥æœŸ | Commit | å†…å®¹ | å˜æ›´ç»Ÿè®¡ |
|------|--------|------|----------|
| 12-04 ä¸Šåˆ | `49ffcf4` | ä»£ç é›†æˆ | 13 files, +936, -55 |
| 12-04 ä¸Šåˆ | `f86f8c3` | å¯¼å‡ºä¿®å¤ + å®¡è®¡æŠ¥å‘Š | 2 files, +257 |
| 12-04 ä¸‹åˆ | `5d100bd` | P0+P1 æ–‡æ¡£ | 5 files, +1641, -9 |
| 12-04 ä¸‹åˆ | `9e57416` | P2 æ–‡æ¡£ | 20 files, +272, -315 |
| **æ€»è®¡** | **4 ä¸ª** | - | **40 files, +3106, -379** |

### åŠŸèƒ½å®Œæˆåº¦

| åŠŸèƒ½åˆ†ç±» | å®Œæˆåº¦ |
|---------|--------|
| æ ¸å¿ƒæ¶æ„ä»£ç  | âœ… 100% |
| åŠŸèƒ½é›†æˆ | âœ… 100% |
| æµ‹è¯•éªŒè¯ | âœ… 100% (1464/1464) |
| æ ¸å¿ƒæ–‡æ¡£ | âœ… 100% (P0+P1) |
| å…¨é¢æ–‡æ¡£ | âœ… 100% (P0+P1+P2) |
| è„šæ‰‹æ¶æ¨¡æ¿ | âœ… 100% |
| å‘åå…¼å®¹ | âœ… 100% |

### ç”¨æˆ·å—ç›Š

#### æ–°ç”¨æˆ·
- âœ… 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹ï¼ˆQUICK_START_V3.14.mdï¼‰
- âœ… è¯¦ç»†çš„åŠŸèƒ½æŒ‡å—ï¼ˆMiddleware/EventBus/Telemetryï¼‰
- âœ… è„šæ‰‹æ¶è‡ªåŠ¨ç”Ÿæˆæœ€æ–°ç‰ˆæœ¬ä»£ç 

#### ç°æœ‰ç”¨æˆ·
- âœ… å®Œæ•´çš„è¿ç§»æŒ‡å—ï¼ˆv3.13-to-v3.14.mdï¼‰
- âœ… æ‰€æœ‰æ—§ API ä»å¯ç”¨ï¼ˆå‘åå…¼å®¹ï¼‰
- âœ… 50+ å®æˆ˜ä»£ç ç¤ºä¾‹å¯ç›´æ¥å¤åˆ¶

#### å¼€å‘è€…
- âœ… æ¸…æ™°çš„æ¶æ„è®¾è®¡æ–‡æ¡£
- âœ… ç»Ÿä¸€çš„æœ¯è¯­ä½“ç³»
- âœ… å®Œæ•´çš„ API å‚è€ƒ

---

## è´¨é‡ä¿è¯

### æµ‹è¯•è¦†ç›–

```bash
# æ‰€æœ‰æµ‹è¯•é€šè¿‡
pytest -v
# âœ… 1464 passed, 40 skipped, 10 warnings

# å…·ä½“éªŒè¯é¡¹
âœ… HttpClient MiddlewareChain é›†æˆ
âœ… AsyncHttpClient MiddlewareChain é›†æˆ
âœ… Database EventBus é›†æˆ
âœ… UnitOfWork EventBus é›†æˆ
âœ… Kafka EventBus é›†æˆ
âœ… RabbitMQ EventBus é›†æˆ
âœ… RocketMQ EventBus é›†æˆ
âœ… api_class è‡ªåŠ¨å‘ç°ï¼ˆ16/16 é€šè¿‡ï¼‰
âœ… repository_package è‡ªåŠ¨å‘ç°ï¼ˆ19/19 é€šè¿‡ï¼‰
âœ… å‘åå…¼å®¹æ€§ï¼ˆæ—§ API å¯ç”¨ï¼‰
```

### ä»£ç è´¨é‡

- âœ… ç±»å‹æ³¨è§£å®Œæ•´
- âœ… ç¬¦åˆ Ruff è§„èŒƒ
- âœ… å‘åå…¼å®¹æ€§ä¿è¯
- âœ… åºŸå¼ƒè­¦å‘Šæ¸…æ™°

### æ–‡æ¡£è´¨é‡

- âœ… æœ¯è¯­ç»Ÿä¸€ï¼ˆä¸­é—´ä»¶/Middlewareï¼‰
- âœ… ç‰ˆæœ¬å·ç»Ÿä¸€ï¼ˆv3.14.0ï¼‰
- âœ… å¯¼å…¥è·¯å¾„æ­£ç¡®
- âœ… ä»£ç ç¤ºä¾‹å¯è¿è¡Œ
- âœ… æœ€ä½³å®è·µæ˜ç¡®

---

## ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸï¼ˆ1-2 å‘¨ï¼‰

1. **ç”¨æˆ·åé¦ˆæ”¶é›†**
   - ç›‘æ§ GitHub Issues
   - æ”¶é›†ç”¨æˆ·ä½¿ç”¨ä½“éªŒ
   - è®°å½•å¸¸è§é—®é¢˜

2. **æ€§èƒ½åŸºå‡†æµ‹è¯•**
   - å¯¹æ¯” v3.13 å’Œ v3.14 æ€§èƒ½
   - ä¼˜åŒ– MiddlewareChain æ€§èƒ½

3. **è¡¥å……ç¤ºä¾‹é¡¹ç›®**
   - åˆ›å»ºå®Œæ•´çš„ç¤ºä¾‹é¡¹ç›®
   - æ¼”ç¤ºæ‰€æœ‰æ–°ç‰¹æ€§ä½¿ç”¨

### ä¸­æœŸï¼ˆ1-2 æœˆï¼‰

4. **æ’ä»¶ç”Ÿæ€å»ºè®¾**
   - é¼“åŠ±ç¤¾åŒºè´¡çŒ®æ’ä»¶
   - åˆ›å»ºæ’ä»¶æ¨¡æ¿
   - å»ºç«‹æ’ä»¶æ³¨å†Œè¡¨

5. **æ€§èƒ½ä¼˜åŒ–**
   - åŸºäºç”¨æˆ·åé¦ˆä¼˜åŒ–
   - å‡å°‘ä¸å¿…è¦çš„å¼€é”€

### é•¿æœŸï¼ˆ3-6 æœˆï¼‰

6. **v3.15.0 è§„åˆ’**
   - æ”¶é›†æ–°éœ€æ±‚
   - è®¾è®¡æ–°åŠŸèƒ½

7. **æ¸…ç†åºŸå¼ƒä»£ç **
   - v3.16.0 ç§»é™¤åºŸå¼ƒçš„ API
   - å®Œå…¨è¿ç§»åˆ°æ–°æ¶æ„

---

## é™„å½•ï¼šå¿«é€Ÿé“¾æ¥

### æ ¸å¿ƒæ–‡æ¡£
- [v3.14.0 å‘å¸ƒè¯´æ˜](v3.14.0.md)
- [æ¶æ„è®¾è®¡](../architecture/V3.14_ENTERPRISE_PLATFORM_DESIGN.md)
- [è¿ç§»æŒ‡å—](../migration/v3.13-to-v3.14.md)

### åŠŸèƒ½æŒ‡å—
- [å¿«é€Ÿå¼€å§‹](../user-guide/QUICK_START_V3.14.md)
- [ä¸­é—´ä»¶ä½¿ç”¨æŒ‡å—](../guides/middleware_guide.md)
- [EventBus ä½¿ç”¨æŒ‡å—](../guides/event_bus_guide.md)
- [Telemetry ä½¿ç”¨æŒ‡å—](../guides/telemetry_guide.md)

### å®¡è®¡å’ŒæŠ¥å‘Š
- [æ–‡æ¡£æ¨¡æ¿å®¡è®¡æŠ¥å‘Š](../migration/v3.14-docs-templates-audit.md)
- [è¿ç§»çŠ¶æ€è¿½è¸ª](../migration/v3.14-migration-status.md)

---

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰å‚ä¸ v3.14.0 æ¶æ„å‡çº§çš„è´¡çŒ®è€…ï¼

**v3.14.0 å®æ–½å®Œæˆï¼** ğŸ‰
