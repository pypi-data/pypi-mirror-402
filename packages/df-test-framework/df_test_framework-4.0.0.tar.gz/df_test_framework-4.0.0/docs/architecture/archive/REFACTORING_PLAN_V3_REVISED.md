# DF Test Framework v3 - å®Œæ•´æ¶æ„é‡æ„æ–¹æ¡ˆï¼ˆä¿®è®¢ç‰ˆï¼‰

> åŸºäºäº¤äº’æ¨¡å¼åˆ†ç±»çš„ç°ä»£åŒ–æµ‹è¯•æ¡†æ¶æ¶æ„
>
> ğŸ“… æ—¥æœŸ: 2025-11-03
> ğŸ“Œ ç‰ˆæœ¬: v3.0.0ï¼ˆå®Œæ•´æ¶æ„ç‰ˆ - ä¿®è®¢ï¼‰
> ğŸš€ çŠ¶æ€: æ¶æ„é‡æ–°è®¾è®¡å®Œæˆ
>
> **é‡è¦è¯´æ˜**:
> - é¡¹ç›®ä»åœ¨æ­å»ºé˜¶æ®µï¼Œæœªå¤§è§„æ¨¡ä½¿ç”¨
> - æœ¬æ¬¡é‡æ„**ä¸éœ€è¦ä¿ç•™å‘åå…¼å®¹æ€§**
> - é‡‡ç”¨**å®Œæ•´æ¶æ„ç‰ˆ**ï¼Œä¸ºé•¿æœŸå‘å±•åšå¥½å‡†å¤‡

---

## ğŸ“– ç›®å½•

- [æ¶æ„è®¾è®¡ç†å¿µ](#æ¶æ„è®¾è®¡ç†å¿µ)
- [æ ¸å¿ƒæ¶æ„çªç ´](#æ ¸å¿ƒæ¶æ„çªç ´)
- [å®Œæ•´åˆ†å±‚æ¶æ„](#å®Œæ•´åˆ†å±‚æ¶æ„)
- [èƒ½åŠ›å±‚è¯¦ç»†è®¾è®¡](#èƒ½åŠ›å±‚è¯¦ç»†è®¾è®¡)
- [å®æ–½è®¡åˆ’](#å®æ–½è®¡åˆ’)

---

## ğŸ¯ æ¶æ„è®¾è®¡ç†å¿µ

### æ ¸å¿ƒåŸåˆ™ï¼šæŒ‰äº¤äº’æ¨¡å¼åˆ†ç±»

> **å…³é”®æ´å¯Ÿ**: æµ‹è¯•æ¡†æ¶çš„èƒ½åŠ›å±‚åº”è¯¥åæ˜ **æµ‹è¯•æ¡†æ¶ä¸è¢«æµ‹ç³»ç»Ÿçš„äº¤äº’æ–¹å¼**ï¼Œè€Œä¸æ˜¯æŠ€æœ¯æ ˆæœ¬èº«

**åˆ†ç±»ç»´åº¦**:
1. âœ… **äº¤äº’æ¨¡å¼ä¼˜å…ˆ**ï¼šè¯·æ±‚-å“åº”ã€ä¼šè¯å¼äº¤äº’ã€æ•°æ®è®¿é—®ã€æ¶ˆæ¯ä¼ é€’ç­‰
2. âœ… **è¯­ä¹‰å‡†ç¡®æ€§**ï¼šä½¿ç”¨å‡†ç¡®çš„æœ¯è¯­ï¼ˆdatabases vs enginesï¼‰
3. âœ… **èŒè´£å•ä¸€æ€§**ï¼šæ¯ä¸ªèƒ½åŠ›å±‚åªè´Ÿè´£ä¸€ç§äº¤äº’æ¨¡å¼
4. âœ… **æ‰©å±•å¼€æ”¾æ€§**ï¼šå¯ä»¥æ— é™æ·»åŠ æ–°çš„èƒ½åŠ›å±‚

### ä¸æ—§æ–¹æ¡ˆçš„å¯¹æ¯”

| ç»´åº¦ | æ—§æ–¹æ¡ˆ | æ–°æ–¹æ¡ˆï¼ˆå®Œæ•´æ¶æ„ç‰ˆï¼‰| æ”¹è¿› |
|------|--------|-------------------|------|
| **æ•°æ®åº“** | `engines/sql/`, `engines/nosql/` | `databases/sql/`, `databases/nosql/` | âœ… è¯­ä¹‰æ›´å‡†ç¡® |
| **æ¶ˆæ¯é˜Ÿåˆ—** | `engines/bigdata/kafka/` âŒ | `messengers/queue/kafka/` | âœ… èŒè´£æ˜ç¡® |
| **æ–‡ä»¶å­˜å‚¨** | æœªå®šä¹‰ | `storages/object/s3/` | âœ… æ–°å¢èƒ½åŠ› |
| **æ•°æ®åˆ†æ** | `engines/bigdata/spark/` | `engines/batch/spark/` | âœ… æŒ‰å¤„ç†æ¨¡å¼åˆ†ç±» |
| **HTTPé€šä¿¡** | `clients/rest/` | `clients/http/rest/` | âœ… åè®®å±‚çº§æ¸…æ™° |

---

## ğŸ‰ æ ¸å¿ƒæ¶æ„çªç ´

### çªç ´1: æŒ‰äº¤äº’æ¨¡å¼é‡æ–°åˆ†ç±»èƒ½åŠ›å±‚

```
æ—§æ¶æ„é—®é¢˜ï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
clients/         # APIé€šä¿¡
drivers/         # UIäº¤äº’
engines/         # â“æ•°æ®å¤„ç†ï¼Ÿè¿˜æ˜¯è®¡ç®—å¼•æ“ï¼Ÿ
  â”œâ”€â”€ sql/       # æ•°æ®åº“
  â”œâ”€â”€ nosql/     # æ•°æ®åº“
  â””â”€â”€ bigdata/   # âŒåˆ†ç±»ç»´åº¦æ··ä¹±
      â”œâ”€â”€ spark/ # è®¡ç®—å¼•æ“
      â””â”€â”€ kafka/ # âŒæ¶ˆæ¯é˜Ÿåˆ—ä¸ºä»€ä¹ˆåœ¨è¿™ï¼Ÿ

é—®é¢˜ï¼š
1. engines è¯­ä¹‰ä¸å‡†ç¡®ï¼ˆDBä¸æ˜¯å¼•æ“ï¼‰
2. bigdata åˆ†ç±»æ··ä¹±ï¼ˆKafkaæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼‰
3. ç¼ºå°‘æ–‡ä»¶å­˜å‚¨èƒ½åŠ›
```

```
æ–°æ¶æ„ï¼ˆå®Œæ•´ç‰ˆï¼‰ï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
clients/         # è¯·æ±‚-å“åº”æ¨¡å¼ï¼ˆå‘é€è¯·æ±‚ï¼‰
drivers/         # ä¼šè¯å¼äº¤äº’æ¨¡å¼ï¼ˆæ§åˆ¶æ“ä½œï¼‰
databases/       # æ•°æ®è®¿é—®æ¨¡å¼ï¼ˆCRUDï¼‰
messengers/      # æ¶ˆæ¯ä¼ é€’æ¨¡å¼ï¼ˆå‘å¸ƒ/è®¢é˜…ï¼‰
storages/        # æ–‡ä»¶å­˜å‚¨æ¨¡å¼ï¼ˆä¸Šä¼ /ä¸‹è½½ï¼‰
engines/         # è®¡ç®—å¼•æ“æ¨¡å¼ï¼ˆæ‰¹å¤„ç†/æµå¤„ç†ï¼‰

ä¼˜åŠ¿ï¼š
1. âœ… æŒ‰äº¤äº’æ–¹å¼åˆ†ç±»ï¼Œé€»è¾‘æ¸…æ™°
2. âœ… æ¯ä¸ªèƒ½åŠ›å±‚èŒè´£å•ä¸€
3. âœ… è¯­ä¹‰å‡†ç¡®ï¼Œæ˜“äºç†è§£
4. âœ… æ‰©å±•æ€§å¼ºï¼Œå¯æ— é™æ·»åŠ æ–°èƒ½åŠ›
```

### çªç ´2: å¤šå±‚çº§åè®®ç»„ç»‡

```
æ—§æ–¹æ¡ˆï¼š
clients/rest/httpx/        # âŒ æ‰å¹³åŒ–ï¼Œä¸æ¸…æ™°

æ–°æ–¹æ¡ˆï¼š
clients/http/rest/httpx/   # âœ… åè®®å±‚çº§æ¸…æ™°
  â”œâ”€â”€ http/               # HTTPåè®®å±‚
  â”‚   â”œâ”€â”€ rest/          # RESTé£æ ¼
  â”‚   â”œâ”€â”€ graphql/       # GraphQL
  â”‚   â””â”€â”€ soap/          # SOAP
  â”œâ”€â”€ rpc/               # RPCåè®®å±‚
  â”‚   â”œâ”€â”€ grpc/
  â”‚   â””â”€â”€ thrift/
  â””â”€â”€ websocket/         # WebSocketåè®®

ä¼˜åŠ¿ï¼š
1. âœ… åè®®å±‚çº§ç»“æ„æ¸…æ™°
2. âœ… åŒåè®®ä¸‹çš„ä¸åŒé£æ ¼å½’ç±»æ˜ç¡®
3. âœ… æ˜“äºæ‰©å±•æ–°åè®®
```

### çªç ´3: æ•°æ®åº“æ‰å¹³åŒ–ç»„ç»‡

```
æ—§æ–¹æ¡ˆï¼š
databases/
â”œâ”€â”€ sql/            # SQLåˆ†ç±»
â”‚   â”œâ”€â”€ mysql/
â”‚   â”œâ”€â”€ postgresql/
â”‚   â””â”€â”€ database.py  # é€šç”¨ç±»
â””â”€â”€ nosql/          # NoSQLåˆ†ç±»
    â”œâ”€â”€ redis/
    â””â”€â”€ mongodb/

é—®é¢˜ï¼š
- SQL/NoSQLåˆ†ç±»æœ‰æ—¶ä¸æ¸…æ™°
- Elasticsearchæ˜¯SQLè¿˜æ˜¯NoSQLï¼Ÿ

æ–°æ–¹æ¡ˆï¼ˆæ‰å¹³åŒ–ï¼‰ï¼š
databases/
â”œâ”€â”€ mysql/
â”œâ”€â”€ postgresql/
â”œâ”€â”€ sqlite/
â”œâ”€â”€ redis/
â”œâ”€â”€ mongodb/
â”œâ”€â”€ elasticsearch/
â”œâ”€â”€ database.py      # é€šç”¨Databaseå·¥å‚ç±»
â””â”€â”€ repositories/    # é€šç”¨Repositoryæ¨¡å¼

ä¼˜åŠ¿ï¼š
1. âœ… æ‰€æœ‰æ•°æ®åº“å¹³çº§ï¼Œæ— åˆ†ç±»æ­§ä¹‰
2. âœ… æŒ‰åç§°ç›´æ¥ç´¢å¼•
3. âœ… æ‰©å±•æ—¶ç›´æ¥æ·»åŠ æ–°ç›®å½•
```

---

## ğŸ—ï¸ å®Œæ•´åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 4: æ‰©å±•å’Œå·¥å…·å±‚                                    â”‚
â”‚  extensions/  utils/  cli/                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 3: æµ‹è¯•ç±»å‹å±‚ï¼ˆå®šä¹‰"æ€ä¹ˆæµ‹"ï¼‰                      â”‚
â”‚  testing/                                               â”‚
â”‚   â”œâ”€â”€ functional/      - åŠŸèƒ½æµ‹è¯•                       â”‚
â”‚   â”œâ”€â”€ performance/     - æ€§èƒ½æµ‹è¯•                       â”‚
â”‚   â”œâ”€â”€ security/        - å®‰å…¨æµ‹è¯•                       â”‚
â”‚   â”œâ”€â”€ data/            - æµ‹è¯•æ•°æ®ç®¡ç†ï¼ˆé€šç”¨ï¼‰            â”‚
â”‚   â”œâ”€â”€ validation/      - éªŒè¯å™¨ï¼ˆé€šç”¨ï¼‰                 â”‚
â”‚   â”œâ”€â”€ mocks/           - Mockï¼ˆé€šç”¨ï¼‰                   â”‚
â”‚   â”œâ”€â”€ reporting/       - æŠ¥å‘Šï¼ˆé€šç”¨ï¼‰                   â”‚
â”‚   â”œâ”€â”€ fixtures/        - Pytest Fixturesï¼ˆé€šç”¨ï¼‰        â”‚
â”‚   â””â”€â”€ plugins/         - Pytestæ’ä»¶ï¼ˆé€šç”¨ï¼‰             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 2: åŸºç¡€è®¾æ–½å±‚                                      â”‚
â”‚  infrastructure/                                        â”‚
â”‚   â”œâ”€â”€ bootstrap/  - å¯åŠ¨ç®¡ç†                           â”‚
â”‚   â”œâ”€â”€ config/     - é…ç½®ç®¡ç†                           â”‚
â”‚   â”œâ”€â”€ logging/    - æ—¥å¿—ç³»ç»Ÿ                           â”‚
â”‚   â”œâ”€â”€ providers/  - ä¾èµ–æ³¨å…¥                           â”‚
â”‚   â””â”€â”€ runtime/    - è¿è¡Œæ—¶ä¸Šä¸‹æ–‡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: èƒ½åŠ›å±‚ï¼ˆå®šä¹‰"æµ‹è¯•ä»€ä¹ˆ"ï¼‰- æŒ‰äº¤äº’æ¨¡å¼åˆ†ç±»        â”‚
â”‚                                                         â”‚
â”‚  clients/          - è¯·æ±‚-å“åº”æ¨¡å¼ï¼ˆAPIé€šä¿¡ï¼‰           â”‚
â”‚   â”œâ”€â”€ http/          - HTTPåè®®                        â”‚
â”‚   â”‚   â”œâ”€â”€ rest/        - RESTé£æ ¼                     â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ httpx/     - httpxå®ç°                 â”‚
â”‚   â”‚   â”‚   â””â”€â”€ requests/  - requestså®ç°ï¼ˆé¢„ç•™ï¼‰       â”‚
â”‚   â”‚   â”œâ”€â”€ graphql/     - GraphQLï¼ˆé¢„ç•™ï¼‰              â”‚
â”‚   â”‚   â””â”€â”€ soap/        - SOAPï¼ˆé¢„ç•™ï¼‰                 â”‚
â”‚   â”œâ”€â”€ rpc/           - RPCåè®®                        â”‚
â”‚   â”‚   â”œâ”€â”€ grpc/        - gRPCï¼ˆé¢„ç•™ï¼‰                â”‚
â”‚   â”‚   â””â”€â”€ thrift/      - Thriftï¼ˆé¢„ç•™ï¼‰              â”‚
â”‚   â””â”€â”€ websocket/     - WebSocketåè®®ï¼ˆé¢„ç•™ï¼‰          â”‚
â”‚                                                         â”‚
â”‚  drivers/          - ä¼šè¯å¼äº¤äº’æ¨¡å¼ï¼ˆUIæ§åˆ¶ï¼‰           â”‚
â”‚   â”œâ”€â”€ web/           - Webæµè§ˆå™¨                      â”‚
â”‚   â”‚   â”œâ”€â”€ playwright/  - Playwrightå®ç°              â”‚
â”‚   â”‚   â”œâ”€â”€ selenium/    - Seleniumå®ç°ï¼ˆé¢„ç•™ï¼‰         â”‚
â”‚   â”‚   â””â”€â”€ puppeteer/   - Puppeteerå®ç°ï¼ˆé¢„ç•™ï¼‰        â”‚
â”‚   â”œâ”€â”€ mobile/        - ç§»åŠ¨åº”ç”¨                       â”‚
â”‚   â”‚   â””â”€â”€ appium/      - Appiumå®ç°ï¼ˆé¢„ç•™ï¼‰          â”‚
â”‚   â””â”€â”€ desktop/       - æ¡Œé¢åº”ç”¨ï¼ˆé¢„ç•™ï¼‰                â”‚
â”‚                                                         â”‚
â”‚  databases/        - æ•°æ®è®¿é—®æ¨¡å¼ï¼ˆCRUDæ“ä½œï¼‰           â”‚
â”‚   â”œâ”€â”€ mysql/         - MySQLï¼ˆé¢„ç•™ï¼‰                  â”‚
â”‚   â”œâ”€â”€ postgresql/    - PostgreSQLï¼ˆé¢„ç•™ï¼‰             â”‚
â”‚   â”œâ”€â”€ sqlite/        - SQLiteï¼ˆé¢„ç•™ï¼‰                 â”‚
â”‚   â”œâ”€â”€ redis/         - Redisï¼ˆå·²å®ç°ï¼‰                â”‚
â”‚   â”œâ”€â”€ mongodb/       - MongoDBï¼ˆé¢„ç•™ï¼‰                â”‚
â”‚   â”œâ”€â”€ elasticsearch/ - Elasticsearchï¼ˆé¢„ç•™ï¼‰          â”‚
â”‚   â”œâ”€â”€ database.py    - é€šç”¨Databaseå·¥å‚ç±»ï¼ˆå·²å®ç°ï¼‰    â”‚
â”‚   â””â”€â”€ repositories/  - é€šç”¨Repositoryæ¨¡å¼              â”‚
â”‚                                                         â”‚
â”‚  messengers/       - æ¶ˆæ¯ä¼ é€’æ¨¡å¼ï¼ˆå‘å¸ƒ/è®¢é˜…ï¼‰          â”‚
â”‚   â”œâ”€â”€ queue/         - æ¶ˆæ¯é˜Ÿåˆ—                       â”‚
â”‚   â”‚   â”œâ”€â”€ rabbitmq/    - RabbitMQï¼ˆé¢„ç•™ï¼‰            â”‚
â”‚   â”‚   â”œâ”€â”€ kafka/       - Kafkaï¼ˆé¢„ç•™ï¼‰               â”‚
â”‚   â”‚   â””â”€â”€ rocketmq/    - RocketMQï¼ˆé¢„ç•™ï¼‰            â”‚
â”‚   â””â”€â”€ pubsub/        - å‘å¸ƒè®¢é˜…                       â”‚
â”‚       â””â”€â”€ redis/       - Redis Pub/Subï¼ˆé¢„ç•™ï¼‰        â”‚
â”‚                                                         â”‚
â”‚  storages/         - æ–‡ä»¶å­˜å‚¨æ¨¡å¼ï¼ˆä¸Šä¼ /ä¸‹è½½ï¼‰          â”‚
â”‚   â”œâ”€â”€ object/        - å¯¹è±¡å­˜å‚¨                       â”‚
â”‚   â”‚   â”œâ”€â”€ s3/          - AWS S3ï¼ˆé¢„ç•™ï¼‰              â”‚
â”‚   â”‚   â”œâ”€â”€ minio/       - MinIOï¼ˆé¢„ç•™ï¼‰               â”‚
â”‚   â”‚   â””â”€â”€ oss/         - é˜¿é‡Œäº‘OSSï¼ˆé¢„ç•™ï¼‰            â”‚
â”‚   â”œâ”€â”€ file/          - æ–‡ä»¶ç³»ç»Ÿ                       â”‚
â”‚   â”‚   â”œâ”€â”€ local/       - æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ˆé¢„ç•™ï¼‰         â”‚
â”‚   â”‚   â”œâ”€â”€ ftp/         - FTPï¼ˆé¢„ç•™ï¼‰                 â”‚
â”‚   â”‚   â””â”€â”€ sftp/        - SFTPï¼ˆé¢„ç•™ï¼‰                â”‚
â”‚   â””â”€â”€ blob/          - Blobå­˜å‚¨ï¼ˆé¢„ç•™ï¼‰                â”‚
â”‚                                                         â”‚
â”‚  engines/          - è®¡ç®—å¼•æ“æ¨¡å¼ï¼ˆæ•°æ®å¤„ç†ï¼‰           â”‚
â”‚   â”œâ”€â”€ batch/         - æ‰¹å¤„ç†å¼•æ“                     â”‚
â”‚   â”‚   â”œâ”€â”€ spark/       - Apache Sparkï¼ˆé¢„ç•™ï¼‰        â”‚
â”‚   â”‚   â””â”€â”€ hive/        - Apache Hiveï¼ˆé¢„ç•™ï¼‰         â”‚
â”‚   â”œâ”€â”€ stream/        - æµå¤„ç†å¼•æ“                     â”‚
â”‚   â”‚   â”œâ”€â”€ flink/       - Apache Flinkï¼ˆé¢„ç•™ï¼‰        â”‚
â”‚   â”‚   â””â”€â”€ kafka_streams/ - Kafka Streamsï¼ˆé¢„ç•™ï¼‰     â”‚
â”‚   â””â”€â”€ olap/          - OLAPåˆ†æå¼•æ“ï¼ˆé¢„ç•™ï¼‰            â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 0: å…±äº«åŸºç¡€å±‚                                      â”‚
â”‚  common/                                                â”‚
â”‚   â”œâ”€â”€ exceptions.py   - å¼‚å¸¸å®šä¹‰                       â”‚
â”‚   â”œâ”€â”€ types.py        - ç±»å‹å®šä¹‰                       â”‚
â”‚   â””â”€â”€ protocols.py    - é€šç”¨Protocol                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ èƒ½åŠ›å±‚è¯¦ç»†è®¾è®¡

### 1ï¸âƒ£ clients/ - è¯·æ±‚-å“åº”æ¨¡å¼

**å®šä¹‰**: å‘é€è¯·æ±‚ï¼Œç­‰å¾…å“åº”ï¼Œæ— çŠ¶æ€æˆ–çŸ­è¿æ¥

```
clients/
â”œâ”€â”€ http/              # HTTPåè®®æ—
â”‚   â”œâ”€â”€ rest/          # RESTé£æ ¼
â”‚   â”‚   â”œâ”€â”€ protocols.py
â”‚   â”‚   â”œâ”€â”€ factory.py
â”‚   â”‚   â”œâ”€â”€ httpx/     # âœ… ç«‹å³å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ client.py
â”‚   â”‚   â”‚   â””â”€â”€ base_api.py
â”‚   â”‚   â””â”€â”€ requests/  # â³ é¢„ç•™
â”‚   â”‚       â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ graphql/       # â³ é¢„ç•™
â”‚   â””â”€â”€ soap/          # â³ é¢„ç•™
â”‚
â”œâ”€â”€ rpc/               # RPCåè®®æ—
â”‚   â”œâ”€â”€ grpc/          # â³ é¢„ç•™
â”‚   â””â”€â”€ thrift/        # â³ é¢„ç•™
â”‚
â””â”€â”€ websocket/         # WebSocketåè®®
    â””â”€â”€ __init__.py    # â³ é¢„ç•™
```

**ç«‹å³å®ç°ï¼ˆPhase 1ï¼‰**:
- `clients/http/rest/httpx/` - åŸºäºhttpxçš„RESTå®¢æˆ·ç«¯
- `clients/http/rest/protocols.py` - RESTå®¢æˆ·ç«¯åè®®å®šä¹‰
- `clients/http/rest/factory.py` - RESTå®¢æˆ·ç«¯å·¥å‚

**é¢„ç•™ï¼ˆPhase 3+ï¼‰**:
- `clients/http/rest/requests/` - åŸºäºrequestsçš„RESTå®¢æˆ·ç«¯
- `clients/http/graphql/` - GraphQLå®¢æˆ·ç«¯
- `clients/rpc/grpc/` - gRPCå®¢æˆ·ç«¯

---

### 2ï¸âƒ£ drivers/ - ä¼šè¯å¼äº¤äº’æ¨¡å¼

**å®šä¹‰**: å»ºç«‹ä¼šè¯ï¼ŒæŒç»­äº¤äº’ï¼Œæœ‰çŠ¶æ€é•¿è¿æ¥

```
drivers/
â”œâ”€â”€ web/               # Webæµè§ˆå™¨é©±åŠ¨
â”‚   â”œâ”€â”€ protocols.py
â”‚   â”œâ”€â”€ factory.py
â”‚   â”œâ”€â”€ playwright/    # âœ… ç«‹å³å®ç°
â”‚   â”‚   â”œâ”€â”€ browser.py
â”‚   â”‚   â”œâ”€â”€ page.py
â”‚   â”‚   â””â”€â”€ locator.py
â”‚   â”œâ”€â”€ selenium/      # â³ é¢„ç•™
â”‚   â””â”€â”€ puppeteer/     # â³ é¢„ç•™
â”‚
â”œâ”€â”€ mobile/            # ç§»åŠ¨åº”ç”¨é©±åŠ¨
â”‚   â””â”€â”€ appium/        # â³ é¢„ç•™
â”‚
â””â”€â”€ desktop/           # æ¡Œé¢åº”ç”¨é©±åŠ¨
    â””â”€â”€ __init__.py    # â³ é¢„ç•™
```

**ç«‹å³å®ç°ï¼ˆPhase 1ï¼‰**:
- `drivers/web/playwright/` - åŸºäºPlaywrightçš„Webé©±åŠ¨
- `drivers/web/protocols.py` - Webé©±åŠ¨åè®®å®šä¹‰
- `drivers/web/factory.py` - Webé©±åŠ¨å·¥å‚

---

### 3ï¸âƒ£ databases/ - æ•°æ®è®¿é—®æ¨¡å¼

**å®šä¹‰**: æ•°æ®åº“CRUDæ“ä½œï¼Œæ•°æ®æŒä¹…åŒ–

```
databases/
â”œâ”€â”€ mysql/             # â³ é¢„ç•™ - MySQLç‰¹å®šåŠŸèƒ½
â”œâ”€â”€ postgresql/        # â³ é¢„ç•™ - PostgreSQLç‰¹å®šåŠŸèƒ½
â”œâ”€â”€ sqlite/            # â³ é¢„ç•™ - SQLiteç‰¹å®šåŠŸèƒ½
â”œâ”€â”€ redis/             # âœ… ç«‹å³å®ç°
â”‚   â””â”€â”€ client.py
â”œâ”€â”€ mongodb/           # â³ é¢„ç•™
â”œâ”€â”€ elasticsearch/     # â³ é¢„ç•™
â”‚
â”œâ”€â”€ database.py        # âœ… ç«‹å³å®ç° - é€šç”¨Databaseç±»
â”œâ”€â”€ factory.py         # âœ… ç«‹å³å®ç° - Databaseå·¥å‚
â””â”€â”€ repositories/      # âœ… ç«‹å³å®ç° - Repositoryæ¨¡å¼
    â”œâ”€â”€ base.py
    â””â”€â”€ query_spec.py
```

**è®¾è®¡è¯´æ˜**:
- `database.py`: é€šç”¨Databaseç±»ï¼ŒåŸºäºSQLAlchemyï¼Œæ”¯æŒæ‰€æœ‰SQLæ•°æ®åº“
- `mysql/`, `postgresql/`: é¢„ç•™ç”¨äºæ•°æ®åº“ç‰¹å®šåŠŸèƒ½ï¼ˆå¦‚MySQLå­˜å‚¨è¿‡ç¨‹ï¼‰
- `redis/`: Rediså®¢æˆ·ç«¯å®ç°
- `repositories/`: é€šç”¨Repositoryæ¨¡å¼ï¼Œé€‚ç”¨äºæ‰€æœ‰æ•°æ®åº“

**ç«‹å³å®ç°ï¼ˆPhase 1ï¼‰**:
- `databases/database.py` - é€šç”¨Databaseç±»
- `databases/factory.py` - Databaseå·¥å‚æ–¹æ³•
- `databases/redis/client.py` - Rediså®¢æˆ·ç«¯
- `databases/repositories/` - Repositoryæ¨¡å¼

---

### 4ï¸âƒ£ messengers/ - æ¶ˆæ¯ä¼ é€’æ¨¡å¼

**å®šä¹‰**: å¼‚æ­¥æ¶ˆæ¯å‘é€/æ¥æ”¶ï¼Œå‘å¸ƒ/è®¢é˜…

```
messengers/
â”œâ”€â”€ queue/             # æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å¼
â”‚   â”œâ”€â”€ rabbitmq/      # â³ é¢„ç•™
â”‚   â”œâ”€â”€ kafka/         # â³ é¢„ç•™
â”‚   â””â”€â”€ rocketmq/      # â³ é¢„ç•™
â”‚
â””â”€â”€ pubsub/            # å‘å¸ƒè®¢é˜…æ¨¡å¼
    â””â”€â”€ redis/         # â³ é¢„ç•™
```

**é¢„ç•™ï¼ˆPhase 3+ï¼‰**:
- æ‰€æœ‰å†…å®¹æš‚æ—¶é¢„ç•™ï¼Œæœªæ¥æŒ‰éœ€å®ç°

---

### 5ï¸âƒ£ storages/ - æ–‡ä»¶å­˜å‚¨æ¨¡å¼

**å®šä¹‰**: æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ï¼Œå¯¹è±¡å­˜å‚¨

```
storages/
â”œâ”€â”€ object/            # å¯¹è±¡å­˜å‚¨
â”‚   â”œâ”€â”€ s3/            # â³ é¢„ç•™
â”‚   â”œâ”€â”€ minio/         # â³ é¢„ç•™
â”‚   â””â”€â”€ oss/           # â³ é¢„ç•™
â”‚
â”œâ”€â”€ file/              # æ–‡ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ local/         # â³ é¢„ç•™
â”‚   â”œâ”€â”€ ftp/           # â³ é¢„ç•™
â”‚   â””â”€â”€ sftp/          # â³ é¢„ç•™
â”‚
â””â”€â”€ blob/              # Blobå­˜å‚¨
    â””â”€â”€ __init__.py    # â³ é¢„ç•™
```

**é¢„ç•™ï¼ˆPhase 3+ï¼‰**:
- æ‰€æœ‰å†…å®¹æš‚æ—¶é¢„ç•™ï¼Œæœªæ¥æŒ‰éœ€å®ç°

---

### 6ï¸âƒ£ engines/ - è®¡ç®—å¼•æ“æ¨¡å¼

**å®šä¹‰**: æ•°æ®æ‰¹å¤„ç†ã€æµå¤„ç†ã€OLAPåˆ†æ

```
engines/
â”œâ”€â”€ batch/             # æ‰¹å¤„ç†å¼•æ“
â”‚   â”œâ”€â”€ spark/         # â³ é¢„ç•™
â”‚   â””â”€â”€ hive/          # â³ é¢„ç•™
â”‚
â”œâ”€â”€ stream/            # æµå¤„ç†å¼•æ“
â”‚   â”œâ”€â”€ flink/         # â³ é¢„ç•™
â”‚   â””â”€â”€ kafka_streams/ # â³ é¢„ç•™
â”‚
â””â”€â”€ olap/              # OLAPåˆ†æå¼•æ“
    â””â”€â”€ __init__.py    # â³ é¢„ç•™
```

**é¢„ç•™ï¼ˆPhase 4+ï¼‰**:
- æ‰€æœ‰å†…å®¹æš‚æ—¶é¢„ç•™ï¼Œç”¨äºæœªæ¥å¤§æ•°æ®æµ‹è¯•åœºæ™¯

---

## ğŸ“‹ å®æ–½è®¡åˆ’

### Phase 1: æ ¸å¿ƒæ¶æ„é‡æ„ï¼ˆå½“å‰é˜¶æ®µï¼‰

#### Step 1: é‡ç»„èƒ½åŠ›å±‚ç›®å½• âœ…

**å·²å®Œæˆ**:
- [x] åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„
- [x] ç§»åŠ¨æ–‡ä»¶åˆ°æ–°ä½ç½®
- [x] ä¿®æ­£ `engines/sql/` â†’ `databases/`

**è¿›è¡Œä¸­**:
- [ ] é‡å‘½å `engines/` â†’ `databases/`
- [ ] è°ƒæ•´ `clients/rest/` â†’ `clients/http/rest/`
- [ ] åˆ›å»ºé¢„ç•™ç›®å½•ï¼ˆmessengers/, storages/, engines/ï¼‰

#### Step 2: æ·»åŠ Protocolå’ŒFactoryå±‚

**clients/http/rest/**:
```python
# protocols.py
from typing import Protocol

class RestClientProtocol(Protocol):
    def get(self, url: str, **kwargs) -> Any: ...
    def post(self, url: str, **kwargs) -> Any: ...
    # ...

# factory.py
class RestClientFactory:
    @classmethod
    def create(cls, client_type="httpx", **config):
        if client_type == "httpx":
            from .httpx.client import HttpxRestClient
            return HttpxRestClient(**config)
        elif client_type == "requests":
            raise NotImplementedError("requestså®ç°å°šæœªå®Œæˆ")
```

**drivers/web/**:
```python
# protocols.py
from typing import Protocol

class WebDriverProtocol(Protocol):
    def get(self, url: str) -> None: ...
    def find_element(self, locator: str) -> Any: ...
    # ...

# factory.py
class WebDriverFactory:
    @classmethod
    def create(cls, driver_type="playwright", **config):
        if driver_type == "playwright":
            from .playwright.browser import PlaywrightBrowserManager
            return PlaywrightBrowserManager(**config)
```

**databases/**:
```python
# factory.py
class DatabaseFactory:
    @classmethod
    def create_mysql(cls, host, port, user, password, database, **config):
        conn_str = f"mysql+pymysql://{user}:{password}@{host}:{port}/{database}"
        from .database import Database
        return Database(conn_str, **config)

    @classmethod
    def create_redis(cls, host="localhost", port=6379, **config):
        from .redis.client import RedisClient
        return RedisClient(host=host, port=port, **config)
```

#### Step 3: åˆ›å»ºé¢„ç•™ç›®å½•

```bash
# æ¶ˆæ¯é˜Ÿåˆ—
mkdir -p messengers/queue/rabbitmq
mkdir -p messengers/queue/kafka

# æ–‡ä»¶å­˜å‚¨
mkdir -p storages/object/s3
mkdir -p storages/file/local

# è®¡ç®—å¼•æ“ï¼ˆé‡æ–°å®šä¹‰enginesï¼‰
mkdir -p engines/batch/spark
mkdir -p engines/stream/flink
```

---

### Phase 2: å®Œå–„æµ‹è¯•æ”¯æŒï¼ˆæœªæ¥ï¼‰

- æµ‹è¯•æ•°æ®ç®¡ç†å®Œå–„
- APIéªŒè¯ç³»ç»Ÿ
- Mockæ”¯æŒ
- æŠ¥å‘Šç³»ç»Ÿ

### Phase 3: å¤‡é€‰å®ç°ï¼ˆæŒ‰éœ€ï¼‰

- `clients/http/rest/requests/`
- `drivers/web/selenium/`
- å…¶ä»–é¢„ç•™èƒ½åŠ›çš„å®ç°

---

## ğŸ“Š ç›®å½•ç»“æ„å˜æ›´å¯¹ç…§

### v2 â†’ v3 è¿ç§»å¯¹ç…§è¡¨

| v2 è·¯å¾„ | v3 è·¯å¾„ï¼ˆä¿®è®¢ç‰ˆï¼‰| è¯´æ˜ |
|---------|----------------|------|
| `core/http/` | `clients/http/rest/httpx/` | HTTP RESTå®¢æˆ·ç«¯ |
| `ui/` | `drivers/web/playwright/` | Webé©±åŠ¨ |
| `core/database/` | `databases/database.py` | é€šç”¨Databaseç±» |
| `core/redis/` | `databases/redis/` | Rediså®¢æˆ·ç«¯ |
| `patterns/repositories/` | `databases/repositories/` | Repositoryæ¨¡å¼ |
| `patterns/builders/` | `testing/data/builders/` | Builderæ¨¡å¼ |
| - | `messengers/` | ğŸ†• æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆé¢„ç•™ï¼‰|
| - | `storages/` | ğŸ†• æ–‡ä»¶å­˜å‚¨ï¼ˆé¢„ç•™ï¼‰|
| - | `engines/` | ğŸ†• è®¡ç®—å¼•æ“ï¼ˆé‡æ–°å®šä¹‰ï¼‰|

---

## âœ… å…³é”®å†³ç­–è®°å½•

### å†³ç­–1: engines/ é‡æ–°å®šä¹‰

**æ—§å®šä¹‰**: æ•°æ®å¤„ç†èƒ½åŠ›ï¼ˆåŒ…æ‹¬æ•°æ®åº“ï¼‰
**æ–°å®šä¹‰**: è®¡ç®—å¼•æ“ï¼ˆæ‰¹å¤„ç†/æµå¤„ç†ï¼‰
**ç†ç”±**: "engine"åº”è¯¥æŒ‡è®¡ç®—å¼•æ“ï¼Œæ•°æ®åº“ç”¨ `databases/` æ›´å‡†ç¡®

### å†³ç­–2: æ•°æ®åº“æ‰å¹³åŒ–

**æ–¹æ¡ˆ**: æ‰€æœ‰æ•°æ®åº“å¹³çº§ï¼Œä¸åˆ†SQL/NoSQL
**ç†ç”±**: é¿å…åˆ†ç±»æ­§ä¹‰ï¼ŒæŒ‰åç§°ç›´æ¥ç´¢å¼•æ›´æ¸…æ™°

### å†³ç­–3: æ–°å¢èƒ½åŠ›å±‚

**æ–°å¢**: `messengers/`, `storages/`
**ç†ç”±**: æµ‹è¯•åœºæ™¯éœ€è¦ï¼Œè¡¥å……å®Œæ•´çš„èƒ½åŠ›çŸ©é˜µ

### å†³ç­–4: HTTPåè®®å±‚çº§åŒ–

**æ–¹æ¡ˆ**: `clients/http/rest/` è€Œé `clients/rest/`
**ç†ç”±**: åè®®å±‚çº§æ›´æ¸…æ™°ï¼Œä¾¿äºæ‰©å±•HTTPå…¶ä»–é£æ ¼ï¼ˆGraphQLã€SOAPï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³æ‰§è¡Œ**:
1. âœ… é‡å‘½å `engines/` â†’ `databases/`
2. âœ… è°ƒæ•´ `clients/rest/` â†’ `clients/http/rest/`
3. âœ… æ·»åŠ Protocolå’ŒFactoryå±‚
4. âœ… åˆ›å»ºé¢„ç•™ç›®å½•ç»“æ„
5. âœ… æ›´æ–°æ‰€æœ‰å¯¼å…¥è¯­å¥
6. âœ… æ›´æ–°é¡¶å±‚ `__init__.py`
7. âœ… è¿è¡Œæµ‹è¯•éªŒè¯

---

**ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)**
