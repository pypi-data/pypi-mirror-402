"use strict";(self.webpackChunkjupyterlab_server_proxy_launcher_fix=self.webpackChunkjupyterlab_server_proxy_launcher_fix||[]).push([[555],{555(e,t,r){r.r(t),r.d(t,{default:()=>h});var n=r(469),o=r(830);const s=["Notebook","Console"];function a(e){return void 0!==e&&s.includes(e)}var c=r(840);async function i(e,t){try{const r=await fetch(e);if(!r.ok)return null;const n=await r.text();return n.includes("<svg")?new c.LabIcon({name:t,svgstr:n}):null}catch(e){return null}}function l(e,t){const r=`\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">\n  <rect x="2" y="2" width="20" height="20" rx="3" fill="#8888" stroke="#666" stroke-width="1"/>\n  <text x="12" y="17" text-anchor="middle" font-family="sans-serif" font-size="14" font-weight="bold" fill="#333">${t.charAt(0).toUpperCase()||"?"}</text>\n</svg>`;return new c.LabIcon({name:e,svgstr:r})}const u=new Map,h={id:"jupyterlab_server_proxy_launcher_fix:plugin",description:"Fixes SVG icon display for jupyter-server-proxy launchers",autoStart:!0,activate:async e=>{console.log("JupyterLab extension jupyterlab_server_proxy_launcher_fix is activated!");try{const t=(await async function(){const e=o.ServerConnection.makeSettings(),t=n.URLExt.join(e.baseUrl,"server-proxy/servers-info");let r;try{r=await o.ServerConnection.makeRequest(t,{},e)}catch(e){throw new o.ServerConnection.NetworkError(e)}if(!r.ok){if(404===r.status)return{server_processes:[]};throw new o.ServerConnection.ResponseError(r)}return await r.json()}()).server_processes||[];for(const e of t){if(!e.launcher_entry.enabled)continue;if(a(e.launcher_entry.category||"Other"))continue;const t=`server-proxy-launcher-fix:${e.name}`;let r=e.launcher_entry.icon_url?await i(e.launcher_entry.icon_url,t):null;r||(r=l(t,e.launcher_entry.title));const n=e.launcher_entry.title;u.set(n,r),e.new_browser_tab&&u.set(`${n} [â†—]`,r)}const r=e.commands.icon.bind(e.commands);e.commands.icon=(e,t={})=>"server-proxy:open"===e&&t.title&&u.has(t.title)?u.get(t.title):r(e,t)}catch(e){}}}}}]);