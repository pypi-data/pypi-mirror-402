"use strict";(self.webpackChunkjupyterlab_server_proxy_launcher_fix=self.webpackChunkjupyterlab_server_proxy_launcher_fix||[]).push([[555],{555(e,r,n){n.r(r),n.d(r,{default:()=>x});var o=n(469),t=n(830);const s=["Notebook","Console"];function c(e){return void 0!==e&&s.includes(e)}var a=n(840);async function i(e,r){try{const n=await fetch(e);if(!n.ok)return console.warn(`[server-proxy-launcher-fix] Failed to fetch icon from ${e}: ${n.status}`),null;const o=await n.text();return o.includes("<svg")?new a.LabIcon({name:r,svgstr:o}):(console.warn(`[server-proxy-launcher-fix] Response from ${e} does not appear to be SVG`),null)}catch(r){return console.warn(`[server-proxy-launcher-fix] Error fetching icon from ${e}:`,r),null}}function l(e,r){const n=`\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">\n  <rect x="2" y="2" width="20" height="20" rx="3" fill="#8888" stroke="#666" stroke-width="1"/>\n  <text x="12" y="17" text-anchor="middle" font-family="sans-serif" font-size="14" font-weight="bold" fill="#333">${r.charAt(0).toUpperCase()||"?"}</text>\n</svg>`;return new a.LabIcon({name:e,svgstr:n})}const u=new Map,x={id:"jupyterlab_server_proxy_launcher_fix:plugin",description:"Fixes SVG icon display for jupyter-server-proxy launchers",autoStart:!0,activate:async e=>{console.log("JupyterLab extension jupyterlab_server_proxy_launcher_fix is activated!");try{const r=(await async function(){const e=t.ServerConnection.makeSettings(),r=o.URLExt.join(e.baseUrl,"server-proxy/servers-info");let n;console.log("[server-proxy-launcher-fix] Fetching from:",r);try{n=await t.ServerConnection.makeRequest(r,{},e)}catch(e){throw console.error("[server-proxy-launcher-fix] Network error:",e),new t.ServerConnection.NetworkError(e)}if(console.log("[server-proxy-launcher-fix] Response status:",n.status),!n.ok){if(404===n.status)return console.warn("[server-proxy-launcher-fix] jupyter-server-proxy not installed (404)"),{server_processes:[]};const e=await n.text();throw console.error("[server-proxy-launcher-fix] Response error:",e.substring(0,500)),new t.ServerConnection.ResponseError(n)}const s=await n.json();return console.log("[server-proxy-launcher-fix] Raw response:",s),s}()).server_processes||[];console.log("[server-proxy-launcher-fix] Found servers:",r.map(e=>e.name));for(const e of r){if(!e.launcher_entry.enabled)continue;if(c(e.launcher_entry.category||"Other"))continue;console.log(`[server-proxy-launcher-fix] Caching icon for "${e.name}"`);const r=`server-proxy-launcher-fix:${e.name}`;let n=e.launcher_entry.icon_url?await i(e.launcher_entry.icon_url,r):null;n||(n=l(r,e.launcher_entry.title));const o=e.launcher_entry.title;u.set(o,n),e.new_browser_tab&&u.set(`${o} [â†—]`,n)}console.log("[server-proxy-launcher-fix] Icon cache:",Array.from(u.keys()));const n=e.commands.icon.bind(e.commands);e.commands.icon=(e,r={})=>"server-proxy:open"===e&&r.title&&u.has(r.title)?(console.log(`[server-proxy-launcher-fix] Returning icon for "${r.title}"`),u.get(r.title)):n(e,r),console.log("[server-proxy-launcher-fix] Wrapped commands.icon()")}catch(e){console.warn("[server-proxy-launcher-fix] Failed to initialize:",e)}}}}}]);