"""Type stubs for pyanylist - Python bindings for AnyList API."""

from enum import IntEnum

class SavedTokens:
    """Saved authentication tokens for session persistence."""

    access_token: str
    refresh_token: str
    user_id: str
    is_premium_user: bool

    def __init__(
        self,
        access_token: str,
        refresh_token: str,
        user_id: str,
        is_premium_user: bool,
    ) -> None: ...
    def __repr__(self) -> str: ...

class ListItem:
    """A shopping list item."""

    @property
    def id(self) -> str: ...
    @property
    def list_id(self) -> str: ...
    @property
    def name(self) -> str: ...
    @property
    def details(self) -> str: ...
    @property
    def is_checked(self) -> bool: ...
    @property
    def quantity(self) -> str | None: ...
    @property
    def category(self) -> str | None: ...
    @property
    def user_id(self) -> str | None: ...
    @property
    def product_upc(self) -> str | None: ...
    def __repr__(self) -> str: ...

class ShoppingList:
    """A shopping list containing items."""

    @property
    def id(self) -> str: ...
    @property
    def name(self) -> str: ...
    @property
    def items(self) -> list[ListItem]: ...
    def __repr__(self) -> str: ...
    def __len__(self) -> int: ...

class FavouriteItem:
    """A favourite/starter list item."""

    @property
    def id(self) -> str: ...
    @property
    def list_id(self) -> str: ...
    @property
    def name(self) -> str: ...
    @property
    def quantity(self) -> str | None: ...
    @property
    def details(self) -> str | None: ...
    @property
    def category(self) -> str | None: ...
    def __repr__(self) -> str: ...

class FavouritesList:
    """A favourites/starter list."""

    @property
    def id(self) -> str: ...
    @property
    def name(self) -> str: ...
    @property
    def items(self) -> list[FavouriteItem]: ...
    @property
    def shopping_list_id(self) -> str | None: ...
    def __repr__(self) -> str: ...
    def __len__(self) -> int: ...

class Ingredient:
    """A recipe ingredient."""

    @property
    def name(self) -> str: ...
    @property
    def quantity(self) -> str | None: ...
    @property
    def note(self) -> str | None: ...
    @property
    def raw_ingredient(self) -> str | None: ...

    def __init__(
        self,
        name: str,
        quantity: str | None = None,
        note: str | None = None,
        raw_ingredient: str | None = None,
    ) -> None: ...
    def __repr__(self) -> str: ...

class Recipe:
    """A recipe with ingredients and preparation steps."""

    @property
    def id(self) -> str: ...
    @property
    def name(self) -> str: ...
    @property
    def ingredients(self) -> list[Ingredient]: ...
    @property
    def preparation_steps(self) -> list[str]: ...
    @property
    def note(self) -> str | None: ...
    @property
    def source_name(self) -> str | None: ...
    @property
    def source_url(self) -> str | None: ...
    @property
    def servings(self) -> str | None: ...
    @property
    def prep_time(self) -> int | None: ...
    @property
    def cook_time(self) -> int | None: ...
    @property
    def rating(self) -> int | None: ...
    @property
    def photo_urls(self) -> list[str]: ...
    def __repr__(self) -> str: ...

class ICalendarInfo:
    """iCalendar export information for meal planning."""

    @property
    def enabled(self) -> bool: ...
    @property
    def url(self) -> str | None: ...
    @property
    def token(self) -> str | None: ...
    def __repr__(self) -> str: ...

class SyncEvent(IntEnum):
    """Events received from real-time sync."""

    ShoppingListsChanged = ...
    CategorizedItemsChanged = ...
    ListFoldersChanged = ...
    ListSettingsChanged = ...
    StarterListsChanged = ...
    StarterListOrderChanged = ...
    StarterListSettingsChanged = ...
    MobileAppSettingsChanged = ...
    UserCategoriesChanged = ...
    RecipeDataChanged = ...
    MealPlanCalendarChanged = ...
    AccountInfoChanged = ...
    SubscriptionInfoChanged = ...
    AccountDeleted = ...

class ConnectionState(IntEnum):
    """WebSocket connection state."""

    Disconnected = ...
    Connecting = ...
    Connected = ...
    Reconnecting = ...
    Closed = ...

class RealtimeSync:
    """Real-time sync manager for receiving live updates."""

    def state(self) -> ConnectionState: ...
    def is_connected(self) -> bool: ...
    def poll_events(self) -> list[SyncEvent]: ...
    def disconnect(self) -> None: ...

class AnyListClient:
    """Main client for interacting with the AnyList API."""

    @staticmethod
    def login(email: str, password: str) -> AnyListClient: ...
    @staticmethod
    def from_tokens(tokens: SavedTokens) -> AnyListClient: ...
    def export_tokens(self) -> SavedTokens: ...
    def user_id(self) -> str: ...
    def is_premium_user(self) -> bool: ...

    # List operations
    def get_lists(self) -> list[ShoppingList]: ...
    def get_list_by_id(self, list_id: str) -> ShoppingList: ...
    def get_list_by_name(self, name: str) -> ShoppingList: ...
    def create_list(self, name: str) -> ShoppingList: ...
    def delete_list(self, list_id: str) -> None: ...
    def rename_list(self, list_id: str, new_name: str) -> None: ...

    # Item operations
    def add_item(self, list_id: str, name: str) -> ListItem: ...
    def add_item_with_details(
        self,
        list_id: str,
        name: str,
        quantity: str | None = None,
        details: str | None = None,
        category: str | None = None,
    ) -> ListItem: ...
    def delete_item(self, list_id: str, item_id: str) -> None: ...
    def cross_off_item(self, list_id: str, item_id: str) -> None: ...
    def uncheck_item(self, list_id: str, item_id: str) -> None: ...
    def delete_all_crossed_off_items(self, list_id: str) -> None: ...

    # Favourites operations
    def get_favourites(self) -> list[FavouriteItem]: ...
    def get_favourites_lists(self) -> list[FavouritesList]: ...
    def add_favourite(
        self, name: str, category: str | None = None
    ) -> FavouriteItem: ...
    def remove_favourite(self, list_id: str, item_id: str) -> None: ...

    # Recipe operations
    def get_recipes(self) -> list[Recipe]: ...
    def get_recipe_by_id(self, recipe_id: str) -> Recipe: ...
    def get_recipe_by_name(self, name: str) -> Recipe: ...
    def create_recipe(
        self,
        name: str,
        ingredients: list[Ingredient],
        preparation_steps: list[str],
    ) -> Recipe: ...
    def update_recipe(
        self,
        recipe_id: str,
        name: str,
        ingredients: list[Ingredient],
        preparation_steps: list[str],
    ) -> None: ...
    def delete_recipe(self, recipe_id: str) -> None: ...
    def add_recipe_to_list(
        self,
        recipe_id: str,
        list_id: str,
        scale_factor: float | None = None,
    ) -> None: ...

    # iCalendar operations
    def enable_icalendar(self) -> ICalendarInfo: ...
    def disable_icalendar(self) -> None: ...
    def get_icalendar_url(self) -> str | None: ...

    # Real-time sync
    def start_realtime_sync(self) -> RealtimeSync: ...

__all__ = [
    "AnyListClient",
    "SavedTokens",
    "ShoppingList",
    "ListItem",
    "FavouriteItem",
    "FavouritesList",
    "Recipe",
    "Ingredient",
    "ICalendarInfo",
    "RealtimeSync",
    "SyncEvent",
    "ConnectionState",
]
