syntax = "proto3";

package swanlab.proto.core.lifecycle.v1;

option go_package = "core/pkg/pb";

// ShutdownRequest 请求服务端优雅关闭
message ShutdownRequest {
  // exit_code 是客户端的退出码，传递给服务端用于日志记录
  int32 exit_code = 1;
}

// ShutdownResponse 确认服务端已收到关闭请求
message ShutdownResponse {
  // success 表示是否成功触发关闭流程
  bool success = 1;
}

// Lifecycle 提供服务生命周期管理功能
service Lifecycle {
  // Shutdown 通知服务端优雅关闭
  // 服务端收到后会完成所有待处理请求，刷新缓冲区，然后退出
  rpc Shutdown(ShutdownRequest) returns (ShutdownResponse);
}
