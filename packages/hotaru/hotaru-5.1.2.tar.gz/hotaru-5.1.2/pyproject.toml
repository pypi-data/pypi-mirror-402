[project]
name = "hotaru"
description = "High performance Optimizer to extract spike Timing And cell location from calcium imaging data via lineaR impUlse"
readme = 'README.md'
keywords = [
    "Calcium Imaging",
    "Spike Detection",
    "Cell Extraction",
]
repository = "https://github.com/tk2lab/HOTARU"

authors = [
    { name = "TAKEKAWA Takashi", email = "takekawa@tk2lab.org" },
]
license = "GPL-3.0-only"

dynamic = ["version"]
requires-python = ">=3.10"

dependencies = [
    "jax[cuda12]>=0.4.34,<0.7; sys_platform == 'linux'",
    "jax>=0.4.34,<0.7; sys_platform == 'darwin'",
    "tensorflow>=2.13.0",
    "tifffile>=2022.8",
    "pandas>=2.0.3",
    "av>=10.0",
    "plotly>=5.0.0",
    "kaleido>=0.2.1",
    "matplotlib>=3.7.2",
    "hydra-core>=1.3",
    "tqdm>=4.64",
    "versioningit",
    "psutil>=7.1.0",
    #dash = { version = "^2.8.1", extras=["diskcache"] }
    #dash-bootstrap-components = "^1.4.1"
    #dash-mantine-components = "^0.12.1"
]

[project.scripts]
version = "versioningit:get_version"
hotaru = "hotaru.__main__:main"

[dependency-groups]
dev = [
    "ipython>=8.38.0",
]

[tool.hatch.version]
source = "versioningit"

[tool.versioningit]
next-version = "smallest-release"

[tool.versioningit.format]
distance = "{next_version}.dev{distance}+{vcs}{rev}"
dirty = "{next_version}+d{build_date:%Y%m%d%H%M}"
distance-dirty = "{next_version}.dev{distance}+{vcs}{rev}+d{build_date:%Y%m%d%H%M}"

[build-system]
requires = ["hatchling", "versioningit"]
build-backend = "hatchling.build"
