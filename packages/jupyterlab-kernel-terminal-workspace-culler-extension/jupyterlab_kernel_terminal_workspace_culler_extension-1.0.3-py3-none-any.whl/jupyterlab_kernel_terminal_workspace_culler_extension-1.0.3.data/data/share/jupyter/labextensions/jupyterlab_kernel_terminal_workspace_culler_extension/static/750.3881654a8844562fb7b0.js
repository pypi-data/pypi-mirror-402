"use strict";(self.webpackChunkjupyterlab_kernel_terminal_workspace_culler_extension=self.webpackChunkjupyterlab_kernel_terminal_workspace_culler_extension||[]).push([[750],{750(e,n,t){t.r(n),t.d(n,{default:()=>u});var o=t(490),l=t(469),s=t(830);async function r(e="",n={}){const t=s.ServerConnection.makeSettings(),o=l.URLExt.join(t.baseUrl,"jupyterlab-kernel-terminal-workspace-culler-extension",e);let r;try{r=await s.ServerConnection.makeRequest(o,n,t)}catch(e){throw new s.ServerConnection.NetworkError(e)}let i=await r.text();if(i.length>0)try{i=JSON.parse(i)}catch(e){console.log("Not a JSON response body.",r)}if(!r.ok)throw new s.ServerConnection.ResponseError(r,i.message||i);return i}let i=!0;async function a(e){var n;const t=e.composite;i=null===(n=t.showNotifications)||void 0===n||n;try{await r("settings",{method:"POST",body:JSON.stringify(t)})}catch(e){console.error("[Culler] Failed to sync settings to backend:",e)}}const c={id:"jupyterlab_kernel_terminal_workspace_culler_extension:plugin",description:"JupyterLab extension to automatically cull idle kernels, terminals, and sessions.",autoStart:!0,optional:[o.ISettingRegistry],activate:(e,n)=>{console.log("JupyterLab extension jupyterlab_kernel_terminal_workspace_culler_extension is activated!"),n&&n.load(c.id).then(e=>{console.log("[Culler] Settings loaded:",e.composite),a(e),e.changed.connect(()=>a(e))}).catch(e=>{console.error("[Culler] Failed to load settings:",e)}),setInterval(()=>async function(e){var n,t,o,l,s,a;try{const c=await r("cull-result"),u=null!==(t=null===(n=c.kernels_culled)||void 0===n?void 0:n.length)&&void 0!==t?t:0,d=null!==(l=null===(o=c.terminals_culled)||void 0===o?void 0:o.length)&&void 0!==l?l:0,p=null!==(a=null===(s=c.sessions_culled)||void 0===s?void 0:s.length)&&void 0!==a?a:0;if(i&&(u>0||d>0||p>0)){const n=["Idle resources culled:"];u>0&&n.push(`Kernels: ${u}`),d>0&&n.push(`Terminals: ${d}`),p>0&&n.push(`Sessions: ${p}`),e.commands.hasCommand("jupyterlab-notifications:send")?await e.commands.execute("jupyterlab-notifications:send",{message:n.join("\n"),type:"info",autoClose:5e3}):console.info("[Culler]",n.join(" | "))}}catch(e){}}(e),3e4)}},u=c}}]);