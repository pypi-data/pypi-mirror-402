# Python project using uv package manager
# Commands: uv sync, pytest, ruff check, ruff format, ty check
# Note: Commands use $AGENT_ID for cache isolation in parallel agent runs
# Cache isolation is handled via environment variables and pytest -o flag
commands:
  setup: "uv sync"
  test: "uv run pytest -o cache_dir=/tmp/pytest-${AGENT_ID:-default}"
  lint: "RUFF_CACHE_DIR=/tmp/ruff-${AGENT_ID:-default} uvx ruff check ."
  format: "RUFF_CACHE_DIR=/tmp/ruff-${AGENT_ID:-default} uvx ruff format --check ."
  typecheck: "uvx ty check"
  e2e: "uv run pytest -m 'e2e and not flaky_sdk' -o cache_dir=/tmp/pytest-${AGENT_ID:-default}"

code_patterns:
  - "**/*.py"
  - "pyproject.toml"

config_files:
  - "pyproject.toml"
  - "ruff.toml"
  - ".ruff.toml"

setup_files:
  - "uv.lock"
  - "pyproject.toml"
