{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ecp.amcrypto.org/ecp/schemas/ecp-chunk-provenance.schema.json",
  "title": "Expert Context Pack (ECP) Chunk Provenance Record v1.0",
  "type": "object",
  "required": [
    "chunk_id",
    "source_id",
    "uri",
    "artifact_path",
    "revision",
    "loc",
    "chunk_hash"
  ],
  "properties": {
    "chunk_id": {
      "type": "string",
      "minLength": 1
    },
    "source_id": {
      "type": "string",
      "minLength": 1
    },
    "uri": {
      "type": "string",
      "minLength": 1
    },
    "artifact_path": {
      "type": "string",
      "minLength": 1
    },
    "revision": {
      "type": "object",
      "minProperties": 1,
      "additionalProperties": true
    },
    "loc": {
      "type": "object",
      "anyOf": [
        {
          "required": [
            "start_line",
            "end_line"
          ],
          "properties": {
            "start_line": {
              "type": "integer",
              "minimum": 1
            },
            "end_line": {
              "type": "integer",
              "minimum": 1
            }
          }
        },
        {
          "required": [
            "byte_start",
            "byte_end"
          ],
          "properties": {
            "byte_start": {
              "type": "integer",
              "minimum": 0
            },
            "byte_end": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      ],
      "additionalProperties": true
    },
    "chunk_hash": {
      "type": "string",
      "minLength": 1
    },
    "classification": {
      "type": "string"
    },
    "license": {
      "type": "string"
    }
  },
  "additionalProperties": true
}
