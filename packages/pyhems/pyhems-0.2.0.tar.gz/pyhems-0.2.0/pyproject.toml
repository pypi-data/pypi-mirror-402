[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[project]
name = "pyhems"
version = "0.2.0"
license = "MIT"
license-files = ["LICENSE"]
description = "ECHONET Lite library for Home Energy Management System (HEMS)"
readme = "README.md"
authors = [
    {name = "Sayurin"}
]
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.13",
]
requires-python = ">=3.13"
dependencies = [
    "bidict>=0.23.0",
]

[project.optional-dependencies]
dev = [
    "pytest>=7.0",
    "pytest-asyncio>=0.21",
    "pytest-cov>=4.0",
]

[tool.setuptools.packages.find]
where = ["src"]

[tool.setuptools.package-data]
pyhems = ["*.json"]

[tool.pytest.ini_options]
testpaths = ["tests"]
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "function"

[tool.ruff]
required-version = ">=0.13.0"

[tool.ruff.lint]
select = [
  "E",      # pycodestyle errors
  "W",      # pycodestyle warnings
  "F",      # pyflakes
  "I",      # isort
  "B",      # flake8-bugbear
  "C4",     # flake8-comprehensions
  "UP",     # pyupgrade
  "D",      # pydocstyle (docstrings)
  "RUF",    # ruff-specific
  "ASYNC",  # flake8-async
  "PT",     # flake8-pytest-style
  "SIM",    # flake8-simplify
  "T20",    # flake8-print
  "ARG",    # flake8-unused-arguments
]

ignore = [
  "E501",   # line too long (formatter handles this)
  "D100",   # Missing docstring in public module
  "D104",   # Missing docstring in public package
  "D202",   # No blank lines allowed after function docstring
  "D203",   # 1 blank line required before class docstring (conflicts with D211)
  "D213",   # Multi-line docstring summary should start at the second line (conflicts with D212)
]

[tool.ruff.lint.per-file-ignores]
"tests/**" = ["D103", "S101"]

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.mypy]
python_version = "3.13"
strict = true

[[tool.mypy.overrides]]
module = "tests.*"
strict = false

[tool.codespell]
skip = "./.*,*.csv,*.json"
quiet-level = 2
