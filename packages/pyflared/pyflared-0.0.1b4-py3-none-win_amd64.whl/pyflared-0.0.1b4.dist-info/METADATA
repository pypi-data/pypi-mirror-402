Metadata-Version: 2.4
Name: pyflared
Version: 0.0.1b4
Summary: A Python CLI tool for effortless Cloudflare Tunnel management
Project-URL: Documentation, https://github.com/AzmainMahatab/pyflared#readme
Project-URL: Issues, https://github.com/AzmainMahatab/pyflared/issues
Project-URL: Source, https://github.com/AzmainMahatab/pyflared
Author-email: Azmain <azmainmahatab012@gmail.com>
License-Expression: MIT
License-File: LICENSE.txt
Classifier: Development Status :: 4 - Beta
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: Implementation :: CPython
Classifier: Programming Language :: Python :: Implementation :: PyPy
Requires-Python: >=3.12
Requires-Dist: aiostream
Requires-Dist: beartype
Requires-Dist: cloudflare
Requires-Dist: loguru
Requires-Dist: platformdirs
Requires-Dist: pydantic
Requires-Dist: pydantic-settings
Requires-Dist: rich
Requires-Dist: typer
Description-Content-Type: text/markdown

<div align="center">
  <h1>Pyflared</h1>
  <p>
    <strong>A Python CLI tool for effortless Cloudflare Tunnel management</strong>
  </p>
  <p>
    <a href="https://pypi.org/project/pyflared"><img src="https://img.shields.io/pypi/v/pyflared.svg?style=flat-square" alt="PyPI - Version"></a>
    <a href="https://pypi.org/project/pyflared"><img src="https://img.shields.io/pypi/pyversions/pyflared.svg?style=flat-square" alt="PyPI - Python Version"></a>
    <a href="https://github.com/cloudflare/cloudflared/releases/latest">
        <img src="https://img.shields.io/badge/dynamic/yaml?url=https%3A%2F%2Fraw.githubusercontent.com%2FAzmainMahatab%2Fpyflared%2Fmain%2Fcloudflared.version&query=%24&label=cloudflared" alt="Cloudflared Version">
    </a>
    <a href="https://github.com/AzmainMahatab/pyflared/blob/main/LICENSE.txt">
        <img src="https://img.shields.io/github/license/AzmainMahatab/pyflared?style=flat-square" alt="License">
    </a>
  </p>
</div>

---

**Pyflared** wraps the official `cloudflared` binary and the Cloudflare API to provide a seamless CLI experience for
creating and managing Cloudflare Tunnels. No more manual token juggling or complex configurations‚Äîjust simple commands
to expose your local services to the internet.

## ‚ú® Features

- üöÄ **Quick Tunnels** ‚Äî Spin up instant, temporary public URLs for local services with a single command
- üîó **DNS-Mapped Tunnels** ‚Äî Create persistent tunnels with automatic DNS record management
- üßπ **Automatic Cleanup** ‚Äî Orphan tunnel and stale DNS record detection & removal
- üì¶ **Batteries Included** ‚Äî Bundles the `cloudflared` binary, no separate installation required
- üê≥ **Docker Ready** ‚Äî Run as a container with minimal setup
- üîê **Secure by Design** ‚Äî API tokens are never logged or exposed; uses Pydantic's `SecretStr`

## üì¶ Installation

### Using `uv` (Recommended)

```console
uv tool install pyflared
```

### Using `pip`

```console
pip install pyflared
```

### Using Docker

```console
docker pull ghcr.io/azmainmahatab/pyflared:latest
docker run --rm ghcr.io/azmainmahatab/pyflared --help
```

## üöÄ Quick Start

### Create a Quick Tunnel

Expose a local service instantly with a temporary `trycloudflare.com` URL:

```console
pyflared tunnel quick 8000
```

This creates a public URL (e.g., `https://random-name.trycloudflare.com`) pointing to `localhost:8000`.

### Create a DNS-Mapped Tunnel

Create a persistent tunnel with your own domain:

```console
pyflared tunnel mapped api.example.com=localhost:8000 web.example.com=localhost:3000
```

This will:

1. Create a new Cloudflare Tunnel
2. Configure DNS records for your domains
3. Route traffic to your local services

> **Note:** Requires a Cloudflare API token with tunnel and DNS permissions. Set via `CLOUDFLARE_API_TOKEN` environment
> variable or enter when prompted.

### Cleanup Orphan Tunnels

Remove stale tunnels and DNS records created by pyflared:

```console
pyflared tunnel cleanup
```

## üìñ Usage

```
pyflared --help
```

### Commands

| Command                             | Description                              |
|-------------------------------------|------------------------------------------|
| `pyflared version`                  | Show the bundled cloudflared version     |
| `pyflared tunnel quick <service>`   | Create a quick tunnel to a local service |
| `pyflared tunnel mapped <pairs...>` | Create DNS-mapped tunnel(s)              |
| `pyflared tunnel cleanup`           | Remove orphan tunnels and DNS records    |

### Options for `tunnel mapped`

| Option               | Description                                                       |
|----------------------|-------------------------------------------------------------------|
| `--keep-orphans, -k` | Preserve orphan tunnels (prevents default removal)                |
| `--tunnel-name, -n`  | Specify a custom tunnel name (default: `hostname_YYYY-MM-DD_...`) |
| `--verbose, -v`      | Show detailed cloudflared logs                                    |

## üîß Configuration

### Environment Variables

| Variable               | Description                                     |
|------------------------|-------------------------------------------------|
| `CLOUDFLARE_API_TOKEN` | Your Cloudflare API token for tunnel management |

### API Token Permissions

For DNS-mapped tunnels, your API token needs the following permissions:

- **Account** > **Cloudflare Tunnel** > **Edit**
- **Zone** > **DNS** > **Edit**
- **Zone** > **Zone** > **Read**

## üõ†Ô∏è Development

### Prerequisites

- Python 3.12+
- [Hatch](https://hatch.pypa.io/)

### Setup

```console
git clone https://github.com/AzmainMahatab/pyflared.git
cd pyflared
hatch env create
```

### Running Tests

```console
hatch test
```

### Type Checking

```console
hatch run types:check
```

### Building

```console
hatch build
```

## üìÑ License

`Pyflared` is distributed under the terms of the [MIT](https://spdx.org/licenses/MIT.html) license.

## üôè Acknowledgments

- [cloudflared](https://github.com/cloudflare/cloudflared) ‚Äî The official Cloudflare Tunnel client
- [Typer](https://typer.tiangolo.com/) ‚Äî CLI framework

---

<p align="center">
  Made with ‚ù§Ô∏è by <a href="https://github.com/AzmainMahatab">Azmain Mahatab</a>
</p>
